(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7d4ecb13","chunk-43eec914"],{"0e19":function(e,t,a){},"1f4b":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"business-portal-page"},[t("portal-header",{attrs:{projectObj:e.titleConfig}}),t("portal-form",{ref:"searchList",attrs:{"form-data":e.formData,"form-rules":e.formRules,"form-config-list":e.formConfigList,searchBtnLoading:e.searchLoading},on:{"common-enter-event":e.search,"reset-btn-click":e.reset,"search-btn-click":e.search}}),t("div",{staticStyle:{"padding-left":"20px","margin-top":"20px"}},[t("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.handleAddClick()}}},[e._v(" "+e._s(e.$t("common.button.add"))+" ")]),t("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{id:"suspend-task-plan-btn",disabled:e.suspendDisabled,size:"small"},on:{click:function(t){return e.handleSuspendClick()}}},[e._v(" "+e._s(e.$t("BUC.taskPlan.suspend"))+" ")]),t("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{id:"resume-task-plan-btn",disabled:e.resumeDisabled,size:"small"},on:{click:function(t){return e.handleResumeClick()}}},[e._v(" "+e._s(e.$t("BUC.taskPlan.resume"))+" ")]),t("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{id:"refresh-task-plan-btn",size:"small"},on:{click:function(t){return e.handleRefreshClick()}}},[e._v(" "+e._s(e.$t("BUC.taskPlan.refresh"))+" ")])],1),t("div",{staticStyle:{padding:"20px"}},[t("table-page",{attrs:{size:"small","has-pagination":!0,isSearch:e.isSearch,initializingLoading:!0,columns:e.taskPlanColumns,pagination:e.paginationConfig,getTableData:e.getTableData,isCheck:!0,sortArr:e.sortArr,customSorting:!0,idKey:"planID"},on:{"selection-change":e.handleSelectionChange},scopedSlots:e._u([{key:"bulkStatus",fn:function(a){return[t("div",{staticClass:"flex flex-align"},[t("span",{staticClass:"status-circle",style:e.showStatus(e.bulkStatusMap[a.data.row.bulkStatus])}),t("span",[e._v(e._s(e.bulkStatusMap[a.data.row.bulkStatus]))])])]}},{key:"scheduleTime",fn:function(t){return[e._v(" "+e._s(t.data.row.scheduleTime)+" ")]}},{key:"operation",fn:function(a){return[e.formatStatus(a.data.row.bulkStatus)?t("el-button",{attrs:{id:"bulk-template-detail-"+a.data.$index,type:"text",size:"small"},on:{click:function(t){return e.handleDetailClick(a.data.row,"details")}}},[e._v(" "+e._s(e.$t("common.button.detail"))+" ")]):t("el-button",{attrs:{id:"bulk-template-detail-"+a.data.$index,type:"text",size:"small"},on:{click:function(t){return e.handleDetailClick(a.data.row,"process")}}},[e._v(" "+e._s(e.$t("BUC.taskPlan.process"))+" ")])]}}])})],1),t("form-item-click-dialog",{attrs:{dialogType:"orgOperator",simpleMode:!0,dialogVisible:e.operatorSelectDialogVisible},on:{"update:dialogVisible":function(t){e.operatorSelectDialogVisible=t},"update:dialog-visible":function(t){e.operatorSelectDialogVisible=t},"selected-data":e.fillSelectedData}})],1)},r=[],o=a("c811"),s=a("3186"),n=a("4c09"),l=function(){var e=this,t=e._self._c;return t("portal-dialog",{attrs:{visible:e.dialogVisible,title:e.dialogTitle,width:"800px"},on:{"show-dialog":e.showDialogFn,"cancel-btn-click":e.cancelFn,"confirm-btn-click":e.confirmFn},scopedSlots:e._u([{key:"content",fn:function(){return[t("portal-form",{ref:"searchList",attrs:{"form-data":e.dialogSearchList,formRules:e.dialogFormRules,"form-config-list":e.dialogFormConfigList,searchBtnLoading:e.searchLoading,smallAutoColumn:2,bigAutoColumn:2},on:{"common-enter-event":e.advancedSearch,"reset-btn-click":e.reset,"search-btn-click":e.advancedSearch}}),t("table-page",{staticClass:"table-page",attrs:{size:"small",idKey:e.tableRowKey,"has-pagination":!0,columns:e.dialogColumns,initializingLoading:!0,pagination:e.dialogPaginationConfig,getTableData:e.getDialogTableData,"is-search":e.refreshTableFlag,isCheck:!0,isSingleCheck:e.isSingleCheck,sortArr:e.dialogColumnsSortArr,outSideTableData:e.tableData},on:{"single-selection-change":e.selectTableDataFn,"selection-change":e.selectsTableDataFn,fetchData:e.tableFetchData},scopedSlots:e._u([{key:"bankHeadOffice",fn:function(a){return[t("span",[e._v(e._s(e.bankHeadOfficeMap[a.data.row.bankHeadOffice]||a.data.row.bankHeadOffice))])]}},{key:"status",fn:function(a){return[t("div",{staticClass:"flex flex-align"},[""!==a.data.row.status?t("span",{staticClass:"status-box",style:e.statusStyle(a.data.row.status)}):e._e(),t("span",[e._v(e._s(e.showStatus(a.data.row.status)))])])]}}])})]},proxy:!0}])})},c=[],d=a("8ac9");const u={placeholder:"Please enter",id:"userName"},h={label:"User Name",key:"userName",prop:"userName",comp:"el-input",bind:u},p={label:"First Name",key:"firstName",prop:"firstName",comp:"el-input",bind:{placeholder:"Please enter",id:"firstName"}},m={label:"Middle Name",key:"middleName",prop:"middleName",comp:"el-input",bind:{placeholder:"Please enter",id:"middleName"}},f={label:"Last Name",key:"lastName",prop:"lastName",comp:"el-input",bind:{placeholder:"Please enter",id:"lastName"}},b={label:"Status",key:"status",prop:"status",comp:"el-select",options:[{label:"All",value:null},{label:"Active",value:"03"},{label:"Closed",value:"06"},{label:"Dormant",value:"07"},{label:"New",value:"00"},{label:"Pending Active",value:"02"},{label:"Suspended",value:"04"}],bind:{placeholder:"Please select",id:"status"}},g=[{label:"User Name",prop:"userName",align:"left"},{label:"First Name",prop:"firstName",align:"left"},{label:"Middle Name",prop:"middleName",align:"left"},{label:"Last Name",prop:"lastName",align:"left"}],y=[h,p,m,f],O={label:"Role",key:"role",prop:"role",comp:"el-select",options:[{label:"All",value:"all"}],bind:{placeholder:"Please select",id:"role"}},k=[{label:"Middle Name",key:"middleName",prop:"middleName",comp:"el-input",bind:{placeholder:"Please enter",id:"middleName"}},{label:"Last Name",key:"lastName",prop:"lastName",comp:"el-input",bind:{placeholder:"Please enter",id:"lastName"}},O],C=[p,...k,b,{label:"Date of Birth",key:"dateOfBirth",prop:"dateOfBirth",comp:"el-date-picker",bind:{placeholder:"Please select",format:"dd-MM-yyyy HH:mm:ss",id:"dateOfBirth"}}];var S={spOperatorSimpleColumns:g,spOperatorColumns:[...g,{label:"Role",prop:"role",align:"left"},{label:"Date of Birth",prop:"dateOfBirth",align:"left"},{label:"Status",prop:"status",align:"left",__slotName:"status"}],spOperatorSimpleFormConfigList:y,spOperatorFormConfigList:[...y,O,...C],spOperatorColumnsSortArr:["status"],spOperatorFormRules:{},spOperatorPaginationConfig:{total:0,pageIndex:1,pageSize:5,layout:"total, prev, pager, next"}},v=a("f538"),T=a("7dfc");function D(e){for(let t=0;t<e.length;t++)if(!j(e[t]))return!1;return!0}function j(e){return null===e||void 0===e||""===e.trim()}var N=a("4865"),I=a("d8d3"),L={components:{PortalDialog:d["a"],PortalForm:s["a"],TablePage:n["a"]},name:"FormItemClickDialog",props:{dialogVisible:{type:Boolean},dialogType:{type:String},simpleMode:{type:Boolean,default:()=>!1},columns:{type:Array,default:null},formConfigList:{type:Array,default:null},getTableData:{type:Function,default:null},tableRowKey:{type:String,default:""},searchList:{type:Object,default:null},formRules:{type:Object,default:null},paginationConfig:{type:Object,default:null},columnsSortArr:{type:Array,default:null},title:{type:String,default:null},isSingleCheck:{type:Boolean,default:!0},bankHeadOfficeMap:{type:Object,default:()=>{}}},data(){return{identityId:"",selectedTableData:{},selectedTableDatas:[],refreshTableFlag:!1,searchLoading:!1,tableData:[],customerSearchList:{queryCondition:"msisdn",msisdn:""},spOperatorSearchList:{userName:"",firstName:"",middleName:"",lastName:"",role:"",status:"",dateOfBirth:""},organizationOperatorSearchList:{organizationShortCode:"",operatorId:"",userName:"",firstName:"",middleName:"",lastName:"",role:"",status:"",dateOfBirth:""},organizationSearchList:{shortCode:"",organizationName:"",status:""}}},computed:{statusStyle(){return e=>{switch(e){case"03":return{"background-color":"#658DF9"};case"06":return{"background-color":""+this.GlobalStyleVariables.fillStrongColor};case"07":return{"background-color":""+this.GlobalStyleVariables.statusSuccessColor};case"00":return{"background-color":"#658DF9"};case"02":return{"background-color":""+this.GlobalStyleVariables.statusSuccessColor};case"04":return{"background-color":""+this.GlobalStyleVariables.statusSuccessColor};case"05":return{"background-color":""+this.GlobalStyleVariables.fillStrongColor};case"08":return{"background-color":""+this.GlobalStyleVariables.fillStrongColor};default:return}}},dialogColumns(){return this.columns?this.columns:"orgOperator"===this.dialogType?this.simpleMode?S.spOperatorSimpleColumns:S.spOperatorColumns:[]},dialogFormConfigList(){return this.formConfigList?this.formConfigList:"orgOperator"===this.dialogType?this.simpleMode?S.spOperatorSimpleFormConfigList:S.spOperatorFormConfigList:[]},getDialogTableData(){return this.getTableData?this.getTableData:"orgOperator"===this.dialogType?this.getOrgOperatorTableData:null},dialogSearchList(){return this.searchList?this.searchList:"orgOperator"===this.dialogType?this.spOperatorSearchList:{}},dialogFormRules(){return this.formRules?this.formRules:"orgOperator"===this.dialogType?S.spOperatorFormRules:{}},dialogPaginationConfig(){return this.paginationConfig?this.paginationConfig:"orgOperator"===this.dialogType?S.spOperatorPaginationConfig:{}},dialogColumnsSortArr(){return this.columnsSortArr?this.columnsSortArr:"orgOperator"===this.dialogType?S.spOperatorColumnsSortArr:[]},dialogTitle(){return this.title?this.title:"orgOperator"===this.dialogType?"Select Operator":""}},methods:{orgOperatorSearchCheck(){let e=this.dialogSearchList.firstName,t=this.dialogSearchList.lastName,a=this.dialogSearchList.middleName,i=this.dialogSearchList.userName;return D([e,t,a,i])},advancedSearch(){this.$refs.searchList.validate(e=>!!e&&(S.spOperatorPaginationConfig.pageIndex=1,this.refreshTableFlag=!0,this.orgOperatorSearchCheck()?(this.$modal.msgWarning("Specify at least one search condition of First Name, Middle Name, Last Name, and User Name."),this.refreshTableFlag=!1,!1):void 0))},reset(){this.$refs.searchList.resetFields(),this.refreshTableFlag=!0},tableFetchData(){this.refreshTableFlag=!1},selectTableDataFn(e){this.selectedTableData=e,"customer"===this.dialogType||"maskCustomer"===this.dialogType?this.selectedTableData.identityId=this.identityId:"organizationOperator"===this.dialogType||"maskOrganizationOperator"===this.dialogType?this.selectedTableData.identityId=e.orgOperatorId:"organization"!==this.dialogType&&"maskOrganization"!==this.dialogType||(this.selectedTableData.identityId=e.organizationId)},selectsTableDataFn(e){this.selectedTableDatas=e},showDialogFn(e){this.$emit("update:dialogVisible",e)},cancelFn(){this.$emit("update:dialogVisible",!1)},confirmFn(){Object.keys(this.selectedTableData).length||this.selectedTableDatas.length>0?(this.$emit("selected-data",this.selectedTableData,this.dialogType),this.$emit("selected-checked-data",this.selectedTableDatas,this.dialogType),this.$emit("update:dialogVisible",!1)):this.$modal.msgError("Please select at least one record.")},showStatus(e){return I["c"][e]||"-"},async getCustomerTableData(){let e={};return this.searchLoading=!0,"msisdn"===this.customerSearchList.queryCondition?(e.msisdn=this.customerSearchList.msisdn,new Promise(t=>{Object(v["y"])(e).then(a=>{a.header&&a.header.success&&(void 0!==a.identityId?(e.customerId=a.identityId,this.identityId=a.identityId,this.customerSearchList.identityId=a.identityId,e.cpId=a.cpId,t(this.searchCustomerInfo(e))):(this.$modal.msgError("The MSISDN does not exist"),t(this.searchCustomerInfo(e)))),t(a)}).catch(()=>{t()}).finally(()=>{this.refreshTableFlag=!1,this.searchLoading=!1})})):"identityId"===this.customerSearchList.queryCondition?(e.customerId=this.customerSearchList.msisdn,new Promise(t=>{t(this.searchCustomerInfo(e))})):void 0},searchCustomerInfo(e){return new Promise(t=>{Object(v["e"])(e).then(a=>{if(a.header&&a.header.success){a.msisdn&&(this.identityId=e.customerId);let i={msisdn:a.msisdn,status:a.status,customerType:a.customerType,dateOfBirth:Object(T["c"])(a.basicKYC.birthday),...a.basicKYC};a.list=[i],a.totalRecords=a.list.length,t(a)}else a.list=[],this.searchLoading=!1,t(a),this.$modal.msgError(a.header.responseDesc)}).catch(()=>{t()}).finally(()=>{this.searchLoading=!1,this.refreshTableFlag=!1})})},getOrgOperatorTableData(){return this.searchLoading=!0,this.orgOperatorSearchCheck()?(this.searchLoading=!1,this.refreshTableFlag=!1,!1):new Promise(e=>{Object(N["r"])({firstName:this.dialogSearchList.firstName,lastName:this.dialogSearchList.lastName,middleName:this.dialogSearchList.middleName,operatorName:this.dialogSearchList.userName,pageNo:S.spOperatorPaginationConfig.pageIndex,pageSize:S.spOperatorPaginationConfig.pageSize}).then(t=>{t.header&&t.header.success&&(t.totalRecords=Number(t.totalRecord)||0,e(t))}).catch(()=>{e()}).finally(()=>{this.searchLoading=!1,this.refreshTableFlag=!1})})},getOrganizationOperatorTableData(){return""===this.organizationOperatorSearchList.organizationShortCode?(this.$modal.msgWarning("The ShortCode cannot be empty."),this.refreshTableFlag=!1,!1):(this.searchLoading=!0,new Promise(e=>{Object(v["c"])(this.organizationOperatorSearchList.organizationShortCode).then(t=>{t.header&&t.header.success&&("Exist"===t.check?e(this.searchOrg()):"NotExist"===t.check?(e(),this.$modal.msgError("The Organization Short Code is not existed")):"Invalid"===t.check&&(e(),this.$modal.msgError("The Organization Short Code is not invalid")))}).catch(()=>{e(),this.$modal.msgError("The Organization Short Code Exception")}).finally(()=>{this.refreshTableFlag=!1,this.searchLoading=!1})}))},searchOrg(){let e={...this.organizationOperatorSearchList,shortCode:this.organizationOperatorSearchList.organizationShortCode,operatorName:this.organizationOperatorSearchList.userName,pageNo:S.organizationOperatorPaginationConfig.pageIndex,pageSize:S.organizationOperatorPaginationConfig.pageSize};return new Promise(t=>{Object(v["g"])(e).then(e=>{e.header&&e.header.success,e.list=e.orgOperatorInfoList||[],e.totalRecords=Number(e.totalSize)||0,t(e)}).catch(()=>{t()}).finally(()=>{this.searchLoading=!1,this.refreshTableFlag=!1})})},getOrganizationTableData(){let e={...this.organizationSearchList,pageNo:S.organizationPaginationConfig.pageIndex,pageSize:S.organizationPaginationConfig.pageSize};return this.searchLoading=!0,new Promise(t=>{Object(v["h"])(e).then(e=>{this.searchLoading=!1,e.header&&e.header.success&&(e.list=[e.organizationInfo],e.list[0]||(e.list=[]),e.totalRecords=e.list.length,t(e))}).catch(()=>{t()}).finally(()=>{this.searchLoading=!1,this.refreshTableFlag=!1})})}},watch:{dialogVisible:{handler(e){e&&(this.tableData=[],Object.assign(this.$data,this.$options.data()),this.$refs.searchList&&this.reset())}},"customerSearchList.queryCondition":{handler(e){this.customerSearchList.msisdn="","msisdn"===e?S.customerFormConfigList[1].label="MSISDN":"identityId"===e&&(S.customerFormConfigList[1].label="Identity ID")}}}},P=L,w=(a("cb9c"),a("2877")),$=Object(w["a"])(P,l,c,!1,null,"1221775e",null),_=$.exports,B=a("2f62"),F=a("5a0c"),x=a.n(F),z={name:"TaskPlanList",components:{PortalHeader:o["a"],PortalForm:s["a"],TablePage:n["a"],FormItemClickDialog:_},data(){return{titleConfig:{title:this.$t("BUC.taskPlan.pageTitle"),desc:this.$t("BUC.taskPlan.pageDesc")},formData:{planName:"",bulkTypeID:null,status:null,scheduleTime:[x()(new Date(x()().year(),x()().month(),x()().date(),0,0,0)).format("YYYYMMDDHHmmss"),x()(new Date(x()().year(),x()().month(),x()().date(),23,59,59)).format("YYYYMMDDHHmmss")],createOperId:"",approveOperId:"",createdByName:"",approveOperName:""},paginationConfig:{pageIndex:1,pageSize:10},isSearch:!1,searchLoading:!1,sortArr:["planID","planName","bulkTypeName","fileTemplate","scheduleTime","timelyCompletion","startTime","bulkStatus"],taskPlanColumns:[{label:this.$t("BUC.taskPlan.planID"),prop:"planID",width:"200px",align:"left","sort-method":(e,t)=>e.planID>t.planID?1:-1},{label:this.$t("BUC.taskPlan.bulkTypeName"),prop:"bulkTypeName",minWidth:"200px",align:"left","sort-method":(e,t)=>e.bulkTypeName>t.bulkTypeName?1:-1},{label:this.$t("BUC.taskPlan.planName"),prop:"planName",minWidth:"200px",align:"left","sort-method":(e,t)=>e.planName>t.planName?1:-1},{label:this.$t("BUC.taskPlan.status"),prop:"bulkStatus",__slotName:"bulkStatus",minWidth:"200px",align:"left","sort-method":(e,t)=>e.bulkStatus>t.bulkStatus?1:-1},{label:this.$t("BUC.taskPlan.scheduleTime"),prop:"scheduleTime",__slotName:"scheduleTime",minWidth:"200px",align:"left","sort-method":(e,t)=>e.scheduleTime>t.scheduleTime?1:-1},{label:this.$t("BUC.taskPlan.startTime"),prop:"startTime",minWidth:"200px",align:"left","sort-method":(e,t)=>e.startTime>t.startTime?1:-1},{label:this.$t("common.label.operation"),prop:"operation",align:"left",__slotName:"operation",width:"100",fixed:"right"}],bulkTypeOptions:[],selectedPlanList:[],operatorSelectKey:"createOperId",operatorSelectDialogVisible:!1,suspendDisabled:!0,resumeDisabled:!0,planIDs:[]}},computed:{formRules(){return{}},formConfigList(){return[{label:this.$t("BUC.taskPlan.planName"),key:"planName",comp:"el-input",bind:{clearable:!0,placeholder:this.$t("common.placeholder.enter")}},{label:this.$t("BUC.taskPlan.bulkTypeName"),key:"bulkTypeID",comp:"el-select",bind:{placeholder:this.$t("common.placeholder.select")},options:this.bulkTypeOptions},{label:this.$t("BUC.taskPlan.status"),key:"status",comp:"el-select",bind:{placeholder:this.$t("common.placeholder.select"),clearable:!0},options:this.bulkStatusOptions},{formItemClass:"org-short-code",label:this.$t("BUC.taskPlan.createdBy"),prop:"createdByName",key:"createdByName",comp:"el-input",bind:{clearable:!0,placeholder:this.$t("common.placeholder.select"),id:"dialog_performedOnIdentity"},id:"dialog_performedOnIdentity",event:{focus:()=>{this.operatorSelectKey="createOperId",this.operatorSelectDialogVisible=!0}},slots:[{name:"append",comp:"el-link",class:"short-code-icon",bind:{icon:"el-icon-more",underline:!1},event:{click:()=>{this.operatorSelectKey="createOperId",this.operatorSelectDialogVisible=!0}}}]},{label:this.$t("BUC.taskPlan.approvedBy"),prop:"approveOperName",key:"approveOperName",comp:"el-input",bind:{clearable:!0,placeholder:this.$t("common.placeholder.select"),id:"dialog_performedOnIdentity"},id:"dialog_performedOnIdentity",event:{focus:()=>{this.operatorSelectKey="approveOperId",this.operatorSelectDialogVisible=!0}},slots:[{name:"append",comp:"el-link",class:"short-code-icon",bind:{icon:"el-icon-more",underline:!1},event:{click:()=>{this.operatorSelectKey="approveOperId",this.operatorSelectDialogVisible=!0}}}]},{formItemClass:"form-special-date-box",sameGroup:!0,label:this.$t("BUC.taskPlan.scheduleTime"),prop:"scheduleTime",comp:[{key:"scheduleTime",comp:"el-date-picker",bind:{align:"right",type:"datetimerange",format:"dd-MM-yyyy HH:mm:ss","range-separator":"~","value-format":"yyyyMMddHHmmss","default-time":["00:00:00","23:59:59"],"start-placeholder":this.$t("common.placeholder.select"),"end-placeholder":this.$t("common.placeholder.select")},event:{blur:()=>{this.choiceDate=""}}},{comp:"i",class:"el-icon-date data_icon"}]}]},queryParams(){const{planName:e,bulkTypeID:t,status:a,scheduleTime:i,createOperId:r,approveOperId:o}=this.formData,{pageIndex:s,pageSize:n}=this.paginationConfig;let l="",c="";return i&&(l=i[0],c=i[1]),{planName:e,bulkTypeID:t,status:a,createOperId:r,approveOperId:o,startTime:l,endTime:c,offset:(s-1)*n,limit:n}},...Object(B["b"])("datadict",["moduleDict"]),bulkStatusOptions(){let e=this.moduleDict.bulk["config.bulk.his.status.list"].listWithAll,t=this.moduleDict.bulk["config.bulk.plan.status.list"].listWithAll;return t.length>0&&t.shift(),[...e,...t]},bulkStatusMap(){let e=this.moduleDict.bulk["config.bulk.his.status.list"].objMap,t=this.moduleDict.bulk["config.bulk.plan.status.list"].objMap;return Object.assign(e,t)}},methods:{search(){this.$refs["searchList"].validate(e=>{e&&(this.paginationConfig.pageIndex=1,this.searchLoading=!0,this.isSearch=!0)})},async getTableData(){try{let e=await Object(v["u"])(this.queryParams);if(e.header&&e.header.success){let{bulkPlanList:t}=e.data;return t.forEach(e=>{e.scheduleTime=Object(T["e"])(e.scheduleTime),e.startTime=Object(T["e"])(e.startTime)}),{...e,totalRecords:e.data.numberOfTotal,list:t||[]}}}catch(e){}finally{this.isSearch=!1,this.searchLoading=!1}},reset(){this.paginationConfig.pageIndex=1,this.$refs.searchList.innerFormRef.resetFields(),this.isSearch=!0},handleSelectionChange(e){if(this.planIDs=[],e.length<1)return this.suspendDisabled=!0,void(this.resumeDisabled=!0);e.forEach(e=>{this.planIDs.push(e.planID)}),this.selectedPlanList=e,this.planIDs=this.selectedPlanList.map(e=>e.planID);let t=[];e.forEach(e=>{t.push(e.bulkStatus)}),e.length>=0?this.suspendDisabled=t.some(e=>"PROCESSING"!==e):this.suspendDisabled=!1,this.resumeDisabled=t.some(e=>"SUSPEND"!==e)},handleDetailClick(e,t){let a={bulkPlanID:e.planID,mode:"taskPlan",type:t,finishTime:e.finishTime,isShowNavigation:!0,status:e.bulkStatus};this.$router.push({path:"../../bulk/bulkTask/details",query:{params:encodeURIComponent(JSON.stringify(a))}})},handleAddClick(){this.$router.push({path:"../../bulk/bulkTask/create"})},handleSuspendClick(){let e="";if(this.planIDs.length>1)e="Are you sure to suspend these task plans ?";else{let t=this.selectedPlanList[0].planName;e=`Are you sure to suspend this task plan "${t}" ?`}this.$modal.confirm(e,"Suspend Task Plan",{confirmButtonText:"Confirm",cancelButtonText:"Cancel",type:"warning",closeOnClickModal:!1}).then(()=>{Object(v["z"])({planIDs:this.planIDs}).then(e=>{e.header.success&&(this.$modal.msgSuccess("Suspend successfully."),this.handleRefreshClick())}).catch().finally(()=>{this.loading=!1})})},handleResumeClick(){let e="";if(this.planIDs.length>1)e="Are you sure to resume these task plans ?";else{let t=this.selectedPlanList[0].planName;e=`Are you sure to resume this task plan "${t}" ?`}this.$modal.confirm(e,"Suspend Task Plan",{confirmButtonText:"Confirm",cancelButtonText:"Cancel",type:"warning",closeOnClickModal:!1}).then(()=>{Object(v["x"])({planIDs:this.planIDs}).then(e=>{e.header.success&&(this.$modal.msgSuccess("Resume successfully."),this.handleRefreshClick())}).catch().finally(()=>{this.loading=!1})})},handleRefreshClick(){this.search()},async initBulkTypes(){await Object(v["p"])({limit:50,offset:0}).then(e=>{this.bulkTypeOptions=(e.data||[]).map(e=>({...e,value:e.id,label:e.bulkTypeName}))}),this.bulkTypeOptions.unshift({value:null,label:"All",status:"Y",enabled:!0})},fillSelectedData(e){"approveOperId"===this.operatorSelectKey&&(this.formData.approveOperName=e.userName,this.formData.approveOperId=e.identityId),"createOperId"===this.operatorSelectKey&&(this.formData.createdByName=e.userName,this.formData.createOperId=e.identityId)},async initDataDict(){this.$store.dispatch("datadict/getModuleDicts",{moduleName:"bulk",dictCodes:["config.bulk.plan.status.list","config.bulk.his.status.list"],queryAPI:v["m"]})},formatStatus(e){let t=[],a=this.moduleDict.bulk["config.bulk.plan.status.list"].objMap;for(let i in a)t.push(i);return!t.includes(e)},showStatus(e){switch(e){case"Initial":return`background-color:${this.GlobalStyleVariables.backgroundColor};border:1px solid #E0E0E0;`;case"Processing":return{"background-color":this.GlobalStyleVariables.statusNoticeColor};case"Checking":return`background-color:${this.GlobalStyleVariables.backgroundColor};border:1px solid ${this.GlobalStyleVariables.initialColor}`;case"Suspend":return{"background-color":this.GlobalStyleVariables.statusColorwarning};case"Wait Process":return{"background-color":this.GlobalStyleVariables.statusColorwarning};case"Wait Active":return{"background-color":this.GlobalStyleVariables.statusColorwarning};case"Dis Active":return{"background-color":this.GlobalStyleVariables.statusDark};case"Failed":return{"background-color":this.GlobalStyleVariables.statusErrorColor};case"Expire":return{"background-color":this.GlobalStyleVariables.statusDark};case"Completed":return{"background-color":this.GlobalStyleVariables.statusSuccessColor};case"Canceled":return{"background-color":this.GlobalStyleVariables.statusDark};case"Deactive":return{"background-color":this.GlobalStyleVariables.statusDark};default:break}}},created(){this.initBulkTypes(),this.initDataDict()}},R=z,V=Object(w["a"])(R,i,r,!1,null,null,null);t["default"]=V.exports},"409d":function(e,t,a){},4865:function(e,t,a){"use strict";a.d(t,"r",(function(){return o})),a.d(t,"s",(function(){return s})),a.d(t,"g",(function(){return n})),a.d(t,"u",(function(){return l})),a.d(t,"n",(function(){return c})),a.d(t,"l",(function(){return d})),a.d(t,"m",(function(){return u})),a.d(t,"a",(function(){return h})),a.d(t,"A",(function(){return p})),a.d(t,"v",(function(){return m})),a.d(t,"c",(function(){return f})),a.d(t,"w",(function(){return b})),a.d(t,"y",(function(){return g})),a.d(t,"x",(function(){return y})),a.d(t,"t",(function(){return O})),a.d(t,"o",(function(){return k})),a.d(t,"j",(function(){return C})),a.d(t,"d",(function(){return S})),a.d(t,"z",(function(){return v})),a.d(t,"k",(function(){return T})),a.d(t,"f",(function(){return D})),a.d(t,"q",(function(){return N})),a.d(t,"p",(function(){return I})),a.d(t,"B",(function(){return L})),a.d(t,"h",(function(){return P})),a.d(t,"b",(function(){return w})),a.d(t,"e",(function(){return $})),a.d(t,"i",(function(){return _}));var i=a("0bbd"),r=a("5f9a");function o(e){return Object(i["a"])({url:"/fintech/v1/orgOperator/queryOrgOperatorList",method:"post",data:e})}function s(e){return Object(i["a"])({url:Object(r["a"])("/fintech/v1/organization/list",e),method:"get"})}function n(e){return Object(i["a"])({url:Object(r["a"])("/fintech/v1/orgOperator/changeStatus"),method:"post",data:e})}function l(e){return Object(i["a"])({url:Object(r["a"])("/fintech/v1/orgOperator/status",e),method:"get"})}function c(e){return Object(i["a"])({url:Object(r["a"])("/fintech/v1/orgOperator/closeOrgOperator"),method:"post",data:e})}function d(e){return Object(i["a"])({url:"/fintech/v1/identity/verify/"+e,method:"post",data:{}})}function u(e){return Object(i["a"])({url:"/fintech/v1/identity/verify/userName",method:"post",data:e})}function h(e){return Object(i["a"])({url:"/fintech/v1/orgOperator/create",method:"post",data:e})}function p(e){return Object(i["a"])({url:"/fintech/v1/orgOperator/roles",method:"post",data:e})}function m(e){return Object(i["a"])({url:Object(r["a"])("/fintech/v1/orgOperator/detail",e),method:"get"})}function f(e){return Object(i["a"])({url:"/fintech/v1/orgOperator/changeIdentityLanguage",method:"post",data:e})}function b(e){return Object(i["a"])({url:"/fintech/v1/orgOperator/pin/reset",method:"post",data:e})}function g(e){return Object(i["a"])({url:"/fintech/v1/orgOperator/pin/unlock",method:"post",data:e})}function y(e){return Object(i["a"])({url:"/fintech/v1/orgOperator/pin/setPassword",method:"post",data:e})}function O(e){return Object(i["a"])({url:"/fintech/v1/orgOperator/getOrgOperatorRuleProfile",method:"post",data:e})}function k(e){return Object(i["a"])({url:"/fintech/v1/orgOperator/getRule",method:"get",data:e})}function C(e){return Object(i["a"])({url:"/fintech/v1/orgOperator/checkMsisdn",method:"post",data:e})}function S(e){return Object(i["a"])({url:"/fintech/v1/orgOperator/changeMsisdn",method:"post",data:e})}function v(e){return Object(i["a"])({url:"/fintech/v1/orgOperator/resetPassword",method:"post",data:e})}function T(e){return Object(i["a"])({url:"/fintech/v1/identity/verify/operatorId",method:"post",data:e})}function D(e){return Object(i["a"])({url:"/fintech/v1/orgOperator/changeOrgOperatorRuleProfile",method:"post",data:e})}const j="/fintech/v1/notification_type";function N(e){return Object(i["a"])({url:Object(r["a"])(j+"/list",e),method:"get"})}function I(e){return Object(i["a"])({url:`${j}/queryInfo?typeId=${e}`,method:"get"})}function L(e){return Object(i["a"])({url:"/fintech/v1/notification/send",method:"post",data:e})}function P(e){return Object(i["a"])({url:"fintech/v1/orgOperator/checkAPIPasswordFormat",method:"post",data:e})}function w(e){return Object(i["a"])({url:"fintech/v1/orgOperator/changeAuthentication",method:"post",data:e})}function $(e){return Object(i["a"])({url:Object(r["a"])("/fintech/v1/changeOrgOperatorRole"),method:"post",data:e})}function _(e){return Object(i["a"])({url:"/fintech/v1/orgOperator/checkInputKyc",method:"post",data:e})}},"64e7":function(e,t,a){"use strict";var i=a("0360"),r=a("5c96");t["a"]={downLoadFile:function(e,t,a,o){let s=new XMLHttpRequest;s.open(a||"POST",e,!0),s.setRequestHeader("Content-type","application/json"),o&&s.setRequestHeader("X-XSRF-TOKEN",i["default"].get("O-XSRF-TOKEN")),s.setRequestHeader("o-token",i["default"].get("o-token")),s.setRequestHeader("Cache-Control","no-store, max-age=0, must-revalidate"),s.responseType="blob",s.onload=function(){if(200===this.status){let e=this.response,t=s.getResponseHeader("content-disposition").split(";")[1].split("filename=")[1],a=decodeURIComponent(t),i=URL.createObjectURL(e),r=document.createElement("a");r.href=i,r.download=a,r.click()}else r["MessageBox"].alert("Download failed.","Error",{type:"error",confirmButtonText:"Confirm"})},s.send(JSON.stringify(t))}}},"8ac9":function(e,t,a){"use strict";var i=function(){var e=this,t=e._self._c;return t("el-dialog",e._g(e._b({class:["portal-dialog",e.customFooter?"custom-footer":"",e.subtitle?"has-subtitle":""],attrs:{visible:e.dialogVisible,title:e.title,width:e.width,"close-on-click-modal":e.closeOnClickModal,"show-close":e.showClose,"before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t},opened:e.openedDialog,closed:e.closedDialog}},"el-dialog",e.$attrs,!1),e.$listeners),[e.subtitle?t("span",{staticClass:"subtitle"},[e._v(e._s(e.subtitle))]):e._e(),e._t("title"),e._t("content"),e.customFooter?e._t("footer"):t("div",{attrs:{slot:"footer"},slot:"footer"},[e.showCancel?t("button",{class:["cancel-button",e.cancelBtnDisable?"disabled":""],on:{click:e.handleCancelClick}},[e._v(" "+e._s(e.cancelText)+" ")]):e._e(),e.showSubmit?t("el-button",{attrs:{type:"primary",disabled:e.confirmBtnDisable,loading:e.submitLoading,size:"small"},on:{click:e.handleConfirmClick}},[e._v(e._s(e.confirmText))]):e._e()],1)],2)},r=[],o={name:"PortalDialog",props:{visible:{type:Boolean,default:!1},title:{type:String,default:""},width:{type:String,default:"448px"},customFooter:{type:Boolean,default:!1},cancelText:{type:String,default:"Cancel"},confirmText:{type:String,default:"Confirm"},closeOnClickModal:{type:Boolean,default:!1},showClose:{type:Boolean,default:!0},cancelBtnDisable:{type:Boolean,default:!1},confirmBtnDisable:{type:Boolean,default:!1},showSubmit:{type:Boolean,default:!0},subtitle:{type:String,default:""},showCancel:{type:Boolean,default:!0},submitLoading:{type:Boolean,default:!1}},data(){return{dialogVisible:!1}},watch:{visible:{handler(e){this.dialogVisible=e},immediate:!0},dialogVisible:{handler(e){this.$emit("show-dialog",e),this.$emit("update:visible",e)}}},methods:{handleClose(){this.dialogVisible=!1,this.$emit("handle-close")},handleCancelClick(){this.$emit("cancel-btn-click")},handleConfirmClick(){this.$emit("confirm-btn-click")},openedDialog(){this.$emit("opened-dialog")},closedDialog(){this.$emit("closed-dialog")}}},s=o,n=(a("df6c"),a("2877")),l=Object(n["a"])(s,i,r,!1,null,"081459b7",null);t["a"]=l.exports},9488:function(e,t,a){"use strict";a("0e19")},c5ea:function(e,t,a){},c811:function(e,t,a){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"page-header",class:{"no-bottom-border":!e.showBottomLine,"no-desc-height":!e.projectObj.desc}},[t("div",{staticClass:"header-left"},[e.projectObj.title?t("div",{staticClass:"page-title"},[e._v(" "+e._s(e.projectObj.title)+" "),e._t("title-suffix")],2):e._e(),e.projectObj.desc?t("div",{staticClass:"page-desc"},[e._v(" "+e._s(e.projectObj.desc)+" ")]):e._e()]),t("div",{staticClass:"header-right"},[e._t("header-right")],2)])},r=[],o={name:"PortalHeader",components:{},props:{projectObj:{type:Object,default(){return{}}},showBottomLine:{type:Boolean,default:!0}}},s=o,n=(a("9488"),a("2877")),l=Object(n["a"])(s,i,r,!1,null,"73566ca8",null);t["a"]=l.exports},cb9c:function(e,t,a){"use strict";a("409d")},d8d3:function(e,t,a){"use strict";a.d(t,"c",(function(){return i})),a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return o}));const i={"00":"New","02":"Pending Active","03":"Active","04":"Suspended","05":"Frozen","06":"Closed","07":"Capped","08":"Dormant"},r={1005:"Web",1007:"Handset",1010:"API"},o={1:"Porta",2:"AG",3:"ThirdParty",4:"System",5:"NC",6:"TransactionCenter",7:"IdentityBusiness",8:"BulkCenter"}},df6c:function(e,t,a){"use strict";a("c5ea")},f538:function(e,t,a){"use strict";a.d(t,"m",(function(){return c})),a.d(t,"p",(function(){return d})),a.d(t,"o",(function(){return u})),a.d(t,"u",(function(){return h})),a.d(t,"v",(function(){return p})),a.d(t,"a",(function(){return m})),a.d(t,"b",(function(){return f})),a.d(t,"z",(function(){return b})),a.d(t,"x",(function(){return g})),a.d(t,"f",(function(){return y})),a.d(t,"j",(function(){return O})),a.d(t,"w",(function(){return k})),a.d(t,"k",(function(){return C})),a.d(t,"n",(function(){return S})),a.d(t,"l",(function(){return v})),a.d(t,"q",(function(){return T})),a.d(t,"d",(function(){return D})),a.d(t,"e",(function(){return j})),a.d(t,"y",(function(){return N})),a.d(t,"c",(function(){return I})),a.d(t,"h",(function(){return L})),a.d(t,"g",(function(){return P})),a.d(t,"i",(function(){return w})),a.d(t,"r",(function(){return $})),a.d(t,"t",(function(){return _})),a.d(t,"s",(function(){return B}));var i=a("0bbd"),r=a("5f9a"),o=a("64e7");const s="/fintech/v1/bulk",n=s+"/task/template",l=s+"/task/plan";function c({dictCodes:e}){return Object(i["a"])({url:s+"/data-dict/list",method:"post",data:{dictCodes:e}})}function d(e){return Object(i["a"])({url:Object(r["a"])(s+"/type/list",e),method:"get"})}function u(e){return Object(i["a"])({url:Object(r["a"])(n+"/list",e),method:"get"})}function h(e){return Object(i["a"])({url:Object(r["a"])(l+"/list",e),method:"get"})}function p(e){return Object(i["a"])({url:Object(r["a"])("/fintech/v1/bulk/tps/timeslot",e),method:"get"})}function m(e){return Object(i["a"])({url:"/fintech/v1/bulk/task/plan/add",method:"POST",data:e})}function f(e){return Object(i["a"])({url:"/fintech/v1/bulk/task/plan/cancel",method:"POST",data:e})}function b(e){return Object(i["a"])({url:"/fintech/v1/bulk/task/plan/suspend",method:"POST",data:e})}function g(e){return Object(i["a"])({url:"/fintech/v1/bulk/task/plan/resume",method:"POST",data:e})}function y(e){return Object(i["a"])({url:"/fintech/v1/bulk/task/plan/failedRecords",params:e})}function O(e){return Object(i["a"])({url:"/fintech/v1/bulk/task/plan/successRecords",params:e})}function k(e){return Object(i["a"])({url:"/fintech/v1/bulk/task/plan/validRecords",params:e})}function C(e){return Object(i["a"])({url:Object(r["a"])("/fintech/v1/bulk/task/plan/detail",e),method:"get"})}function S(e){return Object(i["a"])({url:Object(r["a"])("/fintech/v1/bulk/task/plan/hisDetail",e),method:"get"})}function v(e){return Object(i["a"])({url:l+"/prevalidation",method:"post",contentType:"application/x-www-form-urlencoded",data:e})}function T(e){return Object(i["a"])({url:l+"/prevalidation/"+e,method:"get"})}function D(e,t){o["a"].downLoadFile("orgportal"+l+`/download/bulkFile?fileID=${e}&type=${t}`,{},"get")}function j(e){return Object(i["a"])({url:"/fintech/v1/queryCustomerList",method:"post",data:e,ignoreError:!0})}function N(e){return Object(i["a"])({url:"/fintech/v1/queryCustomerIdentity/msisdn",method:"post",data:e})}function I(e){return Object(i["a"])({url:"/fintech/v1/identity/verify/"+e,method:"post"})}function L(e){return Object(i["a"])({url:Object(r["a"])("/fintech/v1/organization/list",e),method:"get"})}function P(e){return Object(i["a"])({url:Object(r["a"])("/fintech/v1/spOperator/list",e),method:"get"})}function w(e){return Object(i["a"])({url:Object(r["a"])("/fintech/v1/bulk/type/service/mapping",e),method:"get"})}function $(e){return Object(i["a"])({url:"/fintech/v1/dcc/queryProduct",method:"post",data:e})}function _(e){return Object(i["a"])({url:"/fintech/v1/dcc/queryService",method:"post",data:e})}function B(e){return Object(i["a"])({url:"/fintech/v1/dcc/queryReasonType",method:"post",data:e})}}}]);
//# sourceMappingURL=chunk-7d4ecb13.js.map