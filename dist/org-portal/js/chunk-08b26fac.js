(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-08b26fac"],{"02e3":function(t,e,i){"use strict";i.d(e,"e",(function(){return a})),i.d(e,"c",(function(){return l})),i.d(e,"y",(function(){return o})),i.d(e,"z",(function(){return s})),i.d(e,"w",(function(){return c})),i.d(e,"f",(function(){return r})),i.d(e,"u",(function(){return n})),i.d(e,"v",(function(){return d})),i.d(e,"x",(function(){return u})),i.d(e,"g",(function(){return m})),i.d(e,"s",(function(){return h})),i.d(e,"n",(function(){return p})),i.d(e,"r",(function(){return g})),i.d(e,"j",(function(){return b})),i.d(e,"l",(function(){return f})),i.d(e,"q",(function(){return C})),i.d(e,"m",(function(){return S})),i.d(e,"p",(function(){return D})),i.d(e,"k",(function(){return N})),i.d(e,"i",(function(){return $})),i.d(e,"h",(function(){return v})),i.d(e,"t",(function(){return I})),i.d(e,"d",(function(){return L})),i.d(e,"o",(function(){return w})),i.d(e,"a",(function(){return y})),i.d(e,"b",(function(){return k}));let a={required:!0,message:"Please enter content",trigger:"blur"},l={required:!0,message:"Please check content",trigger:"blur"},s={required:!0,message:"Please select content",trigger:"change"},o={pattern:/^[0-9a-zA-Z]*$/,message:"Must be number and letters.",trigger:"blur"},r={pattern:/^[+-]?[0-9]*$/,message:"Must be integer number.",trigger:"blur"},n={pattern:/[0-9]{4}/,message:"The MSISDN must contain at least 4 dligits",trigger:"blur"},c={pattern:/^[^@~`！!#$%^*（）()\-+=|,/<>《》?？;':\"“\[\]{}\\&]*$/,message:"Cannot contain special characters (~`!#$%^*()-+=|,/<>?;':\"[]{}\\&)",trigger:"blur"},d={pattern:/^[^@~`！!#$^*（）()\-+=|,/<>《》?？;':\"“\[\]{}\\&]*$/,message:"Cannot contain special characters (~`!#$^*()-+=|,/<>?;':\"[]{}\\&)",trigger:"blur"},u={pattern:/^[\w- ]+$/,message:"Please do not enter any special characters.",trigger:"blur"};L({minLen:0,maxLen:11});const m=L({minLen:0,maxLen:18}),h=(L({minLen:3,maxLen:3}),L({minLen:6,maxLen:16})),p=(L({minLen:8,maxLen:10}),L({minLen:8,maxLen:11}),L({minLen:4,maxLen:12})),g=L({minLen:6,maxLen:12}),b=L({minLen:0,maxLen:19}),f=L({minLen:0,maxLen:24}),C=L({minLen:0,maxLen:64}),S=(L({minLen:0,maxLen:100}),L({minLen:0,maxLen:256})),D=L({minLen:0,maxLen:512}),N=(L({minLen:8,maxLen:50}),L({minLen:1,maxLen:18})),$=L({minLen:0,maxLen:32}),v=L({minLen:0,maxLen:30}),I=L({minLen:9,maxLen:18});L({minLen:2,maxLen:256});function L({minLen:t=0,maxLen:e=100}){let i="";return i=t>0?`Must be between ${t} and ${e} characters`:`Must be less than ${e} characters`,{min:t,max:e,message:i,trigger:"blur"}}const w=L({minLen:0,maxLen:4});function y(t){let e=[];for(let i in t)t[i]&&t[i].toString().startsWith("%")&&1===t[i].length||!t[i]?e.push(!1):e.push(!0);return!e.every(t=>!1===t)}function k(t){return{validator:(e,i,a)=>{i&&i.startsWith("%")&&1===i.length?a(new Error(""+t)):a()},trigger:"blur"}}},"061d":function(t,e,i){},"0dda":function(t,e,i){},"563c":function(t,e,i){"use strict";i("061d")},e867:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t._self._c;return e("div",[e("portal-header",{class:t.isShowheaderTitle(),attrs:{projectObj:t.titleConfig}}),e("div",{staticClass:"table-search-container"},[!t.isOrganization||t.activeName?e("el-divider",{staticClass:"header-divider"}):t._e(),e("el-collapse-transition",[e("portal-form",{directives:[{name:"show",rawName:"v-show",value:t.collapseValue,expression:"collapseValue"}],ref:"tillForm",class:t.isOrganization&&!t.activeName?"till-portal-form":"",attrs:{needBottomLine:!1,"form-data":t.tillForm,"form-rules":t.tillFormRules,"form-config-list":t.formConfigArray,searchBtnLoading:t.searchLoading,searchBtnDisabled:!t.hasPerm("IC_TILL_MANAGE_SEARCH_BTN")},on:{"common-enter-event":t.searchTill,"reset-btn-click":t.reset,"search-btn-click":t.searchTill}})],1)],1),e("div",{staticClass:"till-table-list"},[e("el-divider"),e("el-button",{attrs:{disabled:!t.hasPerm("IC_TILL_ADDBASICINFO_NEXT_BTN"),icon:"el-icon-plus",size:"small",type:"primary"},on:{click:t.createTill}},[t._v(" "+t._s(t.$t("common.button.create"))+" ")]),e("table-page",{staticClass:"margin-top-16",attrs:{size:"small","has-pagination":!0,isSearch:t.isSearch,columns:t.isOrganization?t.isOrgCokumns:t.tillColumns,pagination:t.paginationConfig,getTableData:t.getTableData,"initializing-loading":t.fristSearchMap,sortArr:["status","shortCode","msisdn","tillNumber"]},scopedSlots:t._u([{key:"status",fn:function(i){return[e("div",{staticClass:"flex flex-align"},[""!==i.data.row.status?e("span",{staticClass:"status-circle",style:t.statusStyle(i.data.row.status)}):t._e(),e("span",[t._v(t._s(t.showStatus(i.data.row.status)))]),"03"==i.data.row.status||"05"==i.data.row.status?e("i",{staticClass:"el-icon-black-edit icon-cursor margin-left-12",attrs:{id:"language"},on:{click:function(e){return t.handleEditStatus(i.data.row)}}}):t._e()])]}},{key:"operation",fn:function(i){return[e("el-button",{staticClass:"table-operation-btn icon-cursor operation-button",attrs:{size:"mini",type:"text"},on:{click:function(e){return t.handleDetail(i.data.row)}}},[t._v(" "+t._s(t.$t("common.button.detail"))+" ")]),"03"==i.data.row.status||"05"==i.data.row.status?e("el-button",{staticClass:"table-operation-btn icon-cursor",attrs:{size:"mini",type:"text"},on:{click:function(e){return t.showColose(i.data.row)}}},[t._v(" "+t._s(t.$t("common.button.close"))+" ")]):t._e()]}}])})],1),e("close-dialog",{attrs:{closeData:t.closeData,closeDialog:t.closeDialog},on:{ishow:t.ishow,"update:closeDialog":function(e){t.closeDialog=e},"update:close-dialog":function(e){t.closeDialog=e},closeSubmit:t.closeSubmit}}),e("portal-short-code",{ref:"selectShortCode",attrs:{"invoking-flag":"createOrgOperator",searchVisible:t.searchVisible,"merchant-id":t.tillFormData.merchantId,"short-code":t.tillForm.orgshortcode,isSelect:!0},on:{"update:searchVisible":function(e){t.searchVisible=e},"update:search-visible":function(e){t.searchVisible=e},"update:merchantId":function(e){return t.$set(t.tillFormData,"merchantId",e)},"update:merchant-id":function(e){return t.$set(t.tillFormData,"merchantId",e)},"update:shortCode":function(e){return t.$set(t.tillForm,"orgshortcode",e)},"update:short-code":function(e){return t.$set(t.tillForm,"orgshortcode",e)}}}),e("edit-status",{ref:"editStatus",on:{closeStatusDialog:t.closeStatusDialog}}),e("portal-add-popup",{attrs:{id:"popup-product",isCheck:!0,isSingleCheck:!0,isCheckMemory:!0,hasCheckBox:!1,searchVisible:t.addProductVisible,addForm:t.addForm,childSearch:t.loadProduct,"init-checks":t.initCheckList,"has-pagination":!0},on:{"update:searchVisible":function(e){t.addProductVisible=e},"update:search-visible":function(e){t.addProductVisible=e},"submit-call-back":t.selectProductList}})],1)},l=[],s=i("3213"),o=i("c811"),r=i("0cbd"),n=i("4c09"),c=i("3186"),d=i("e863"),u=function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{visible:t.isShow,title:t.$t("IDC.till.closeTillTitle"),width:"448px",top:"29vh",height:"342","close-on-click-modal":!1,"before-close":t.closeService},nativeOn:{submit:function(t){t.preventDefault()}}},[e("h1",{staticClass:"dialog-title"},[t._v(t._s(t.$t("IDC.till.closeTill")+" "+t.closeData.tillNumber+" ?"))]),e("el-divider"),e("el-form",{ref:"tillDialog",attrs:{rules:t.rules,"label-position":"top",model:t.submitData}},[e("el-form-item",{attrs:{label:"Remark",prop:"remark"}},[e("el-input",{attrs:{type:"textarea",rows:5,resize:"none",placeholder:"Please enter "},model:{value:t.submitData.remark,callback:function(e){t.$set(t.submitData,"remark",e)},expression:"submitData.remark"}})],1)],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{staticClass:"btn-cancel",on:{click:function(e){return t.closeService()}}},[t._v(t._s(t.$t("common.button.cancel")))]),e("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{type:"primary",loading:t.submitLoading,size:"small"},on:{click:function(e){return t.submitService()}}},[t._v(t._s(t.$t("common.button.confirm")))])],1)],1)},m=[],h=i("02e3"),p={name:"closeDialog",props:{closeDialog:{type:Boolean,default:!1},closeData:{type:Object}},data(){return{rules:{remark:[h["e"]]},submitLoading:!1,isShow:this.closeDialog,submitData:{remark:""}}},watch:{closeDialog(t){this.isShow=t}},computed:{},methods:{closeService(){this.$refs.tillDialog.resetFields(),this.isShow=!1,this.$emit("ishow",!1)},submitService(){this.$refs["tillDialog"].validate(t=>{if(t){let t={receiverIdentityId:this.closeData.identityId,remark:this.submitData.remark};this.submitLoading=!0,Object(d["c"])(t).then(t=>{t.header&&t.header.success?(this.$modal.msgSuccess(`Till "${this.closeData.tillNumber}" closed successfully.`),this.closeService(),this.$emit("closeSubmit")):this.closeService(),this.submitLoading=!1})}})}},mounted(){}},g=p,b=(i("f8bd"),i("2877")),f=Object(b["a"])(g,u,m,!1,null,"4ea12e7c",null),C=f.exports,S=i("8f48"),D=i("4c1d"),N=i("d8d3");const $=[{label:"MSISDN",value:"0"},{label:"Till Number + Organization Short Code",value:"1"},{label:"Product",value:"2"},{label:"Status",value:"3"}];var v={name:"TillList",components:{TablePage:n["a"],PortalHeader:o["a"],PortalForm:c["a"],closeDialog:C,portalShortCode:S["a"],EditStatus:D["a"],PortalAddPopup:r["a"]},props:{activeName:{type:Boolean,default:!1},isOrganization:{type:Boolean,default:!1}},data(){return{fristSearch:!1,isOrganizationPage:this.isOrganization,queryConditionSelectOptions:$,searchVisible:!1,tillFormData:{orgshortcode:"",merchantId:""},addProductVisible:!1,closeData:{identityId:"",tillNumber:""},closeDialog:!1,total:0,pageNo:1,pageSize:10,tillForm:{msisdn:"%",tillNumber:"%",orgshortcode:"",status:"All",productName:"",queryCondition:"0"},addForm:{title:this.$t("IDC.till.selectProduct"),label:"",idKey:"productIndex",key:"till",columns:[{label:this.$t("IDC.till.productName"),prop:"productName",align:"left"},{label:this.$t("IDC.till.description"),prop:"description",align:"left"}],searchForm:{formData:{producrName:""},formConf:[{label:this.$t("IDC.till.productName"),key:"producrName",prop:"producrName",comp:"el-input",bind:{clearable:!0,placeholder:this.$t("common.placeholder.enter")}}]}},searchLoading:!1,tills:[],paginationConfig:{total:0,pageIndex:1,pageSize:10},initCheckList:[],productIndex:"",isOrgCokumns:[{"sort-method":(t,e)=>t.tillNumber>e.tillNumber?1:-1,label:this.$t("IDC.till.tillNumber"),prop:"tillNumber",align:"left"},{"sort-method":(t,e)=>t.msisdn>e.msisdn?1:-1,label:this.$t("IDC.till.msisdn"),prop:"msisdn",align:"left"},{label:this.$t("common.label.status"),prop:"status","sort-method":(t,e)=>t.status>e.status?1:-1,align:"left",__slotName:"status"},{label:this.$t("common.label.operation"),prop:"operation",align:"left",__slotName:"operation",width:200}],tillColumns:[{"sort-method":(t,e)=>t.shortCode>e.shortCode?1:-1,label:this.$t("IDC.till.organizationShortCode"),prop:"shortCode",align:"left"},{"sort-method":(t,e)=>t.tillNumber>e.tillNumber?1:-1,label:this.$t("IDC.till.tillNumber"),prop:"tillNumber",align:"left"},{"sort-method":(t,e)=>t.organizationName>e.organizationName?1:-1,label:this.$t("IDC.till.organizationName"),prop:"organizationName",align:"left"},{"sort-method":(t,e)=>t.msisdn>e.msisdn?1:-1,label:this.$t("IDC.till.msisdn"),prop:"msisdn",align:"left"},{label:this.$t("common.label.status"),prop:"status","sort-method":(t,e)=>t.status>e.status?1:-1,align:"left",__slotName:"status"},{label:this.$t("common.label.operation"),prop:"operation",align:"left",fixed:"right",__slotName:"operation",width:"160"}],isSearch:!1,collapseValue:!0,hasPagination:!0,titleConfig:{title:this.$t("IDC.till.pageTitle"),desc:this.$t("IDC.till.createTitle")}}},watch:{"tillForm.orgshortcode":{handler(t){t||(this.tillFormData={orgshortcode:"",merchantId:""})}},"tillForm.productName":{handler(t){t||(this.productIndex="")}},isOrganization(t){this.isOrganizationPage=t}},computed:{statusOptions(){let t=[{label:"Active",value:"03"},{label:"Closed",value:"06"},{label:"Frozen",value:"05"},{label:"New",value:"00"},{label:"Pending Active",value:"02"}];return this.isOrganizationPage&&t.unshift({label:"All",value:"All"}),t},tillFormRules(){return this.isOrganizationPage?Object(s["e"])():Object(s["f"])()},fristSearchMap(){return!(!this.isOrganizationPage||!this.activeName)},formConfigArray(){let t=[{hidden:this.isOrganizationPage,label:"Query Condition",key:"queryCondition",comp:"el-select",required:!0,options:this.queryConditionSelectOptions,bind:{placeholder:this.$t("common.placeholder.select")},event:{change:t=>{this.tillForm={msisdn:"%",tillNumber:"%",orgshortcode:"",status:"3"===t?"03":"All",productName:"",queryCondition:t}}}},{hidden:this.isShowItem("1"),label:this.$t("IDC.till.tillNumber"),key:"tillNumber",comp:"el-input",bind:{placeholder:this.$t("common.placeholder.enter"),id:"tillNumber"}},{hidden:this.isShowItem("0"),label:this.$t("IDC.till.msisdn"),key:"msisdn",comp:"el-input",bind:{placeholder:this.$t("common.placeholder.enter"),id:"msisdn"}},{hidden:this.isShowItem("2"),formItemClass:"org-short-code",label:this.$t("IDC.till.product"),key:"productName",comp:"el-input",bind:{placeholder:this.$t("common.placeholder.select"),clearable:!0},slots:[{name:"append",comp:"el-link",class:"short-code-icon",bind:{icon:"el-icon-more",underline:!1},event:{click:()=>{this.addProduct()}}}],event:{focus:this.addProduct}},{hidden:this.isShowItem("3"),label:this.isOrganizationPage?this.$t("common.label.status"):"Identity Status",key:"status",comp:"el-select",options:this.statusOptions,bind:{placeholder:this.$t("common.placeholder.select")}},{hidden:this.isShowItem("1",!1),formItemClass:"org-short-code",label:this.$t("IDC.till.organizationShortCode"),key:"orgshortcode",comp:"el-input",bind:{placeholder:this.$t("common.placeholder.select"),clearable:!0},slots:[{name:"append",comp:"el-link",class:"short-code-icon",bind:{icon:"el-icon-more",underline:!1},event:{click:()=>{this.searchVisible=!0}}}]}];return t},statusStyle(){return t=>{switch(t){case"03":return{"background-color":this.GlobalStyleVariables.statusNoticeColor};case"06":return{"background-color":""+this.GlobalStyleVariables.fillStrongColor};case"05":return{"background-color":this.GlobalStyleVariables.statusColorwarning};case"04":return{"background-color":""+this.GlobalStyleVariables.statusColorwarning};case"07":return{"background-color":""+this.GlobalStyleVariables.statusSuccessColor};case"00":case"02":return`background-color:${this.GlobalStyleVariables.backgroundColor};border:1px solid ${this.GlobalStyleVariables.initialColor};`;default:return}}}},methods:{isShowItem(t,e=!0){let i=["1","2"];return this.isOrganizationPage?!(!t.includes(i)&&e):this.tillForm.queryCondition!==t},isShowheaderTitle(){this.fristSearch=this.isOrganizationPage;let t="";return this.isOrganizationPage&&(t="till-page-header",this.$set(this.titleConfig,"desc",this.$t("IDC.till.detailTile"))),this.activeName&&(this.isOrganizationPage=!0,this.$set(this.titleConfig,"title",this.$t("IDC.till.tillList")),this.$set(this.titleConfig,"desc",this.$t("IDC.till.detailTile")),t=""),t},selectProductList(t){this.productIndex=t.productIndex,this.tillForm.productName=t.productName},async loadProduct(t){let e={pageSize:t.pageSize||10,pageNo:t.pageNo||1,pageQuery:!0};t.searchKey&&(e.productName=t.searchKey.producrName);let i=await Object(d["m"])(e);return i},addProduct(){this.addProductVisible=!0},closeStatusDialog(){this.getList()},getList(){this.isSearch=!0},handleEditStatus(t){let e=t;e.identityId=t.tillId,this.$refs["editStatus"].showView(e)},showColose(t){this.closeData={identityId:t.tillId,tillNumber:t.tillNumber},this.closeDialog=!0},ishow(){this.closeDialog=!1},closeSubmit(){this.isSearch=!0},showStatus(t){return N["c"][t]||"-"},reset(){this.$refs["tillForm"].innerFormRef.resetFields(),this.isSearch=!0},searchTill(){let{queryCondition:t,tillNumber:e,orgshortcode:i}=this.tillForm,a={tillNumber:e,orgshortcode:i};"1"!==t||Object(h["a"])(a)?(this.searchLoading=!0,this.$refs["tillForm"].innerFormRef.validate(t=>{if(!t)return this.searchLoading=!1,!1;this.isSearch=!0})):this.$message({message:this.$t("IDC.till.listTips"),type:"warning"})},handleDetail(t){let e={title:t.tillNumber,tillId:t.tillId};this.openNewWindow({path:"../../organizationInfo/till/view",query:{data:encodeURIComponent(JSON.stringify(e))}})},async createTill(){this.openNewWindow({path:"../../organizationInfo/till/create"})},getTableData(){if(this.hasPerm("IC_TILL_MANAGE_SEARCH_BTN"))return new Promise(t=>{let{queryCondition:e,status:i}=this.tillForm;"3"===e||this.isOrganizationPage||(i="");let a={pageIndex:this.paginationConfig.pageIndex,pageSize:this.paginationConfig.pageSize,msisdn:"%"===this.tillForm.msisdn?"":this.tillForm.msisdn,tillNumber:"%"===this.tillForm.tillNumber?"":this.tillForm.tillNumber,status:i,productId:this.productIndex,shortCode:this.tillForm.orgshortcode||""};Object(d["r"])(a).then(e=>{e.header&&e.header.success&&(e.list?e.totalRecords=e.totalRecord:(e.totalRecords=0,e.list=[]),t(e))}).catch(()=>{}).finally(()=>{this.searchLoading=!1,this.isSearch=!1})})}}},I=v,L=(i("563c"),Object(b["a"])(I,a,l,!1,null,"f95268e0",null));e["default"]=L.exports},f8bd:function(t,e,i){"use strict";i("0dda")}}]);
//# sourceMappingURL=chunk-08b26fac.js.map