(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-707c5fc0"],{"02e3":function(e,t,s){"use strict";s.d(t,"e",(function(){return r})),s.d(t,"c",(function(){return n})),s.d(t,"y",(function(){return o})),s.d(t,"z",(function(){return i})),s.d(t,"w",(function(){return l})),s.d(t,"f",(function(){return a})),s.d(t,"u",(function(){return u})),s.d(t,"v",(function(){return d})),s.d(t,"x",(function(){return h})),s.d(t,"g",(function(){return c})),s.d(t,"s",(function(){return m})),s.d(t,"n",(function(){return w})),s.d(t,"r",(function(){return g})),s.d(t,"j",(function(){return p})),s.d(t,"l",(function(){return f})),s.d(t,"q",(function(){return P})),s.d(t,"m",(function(){return v})),s.d(t,"p",(function(){return C})),s.d(t,"k",(function(){return y})),s.d(t,"i",(function(){return b})),s.d(t,"h",(function(){return x})),s.d(t,"t",(function(){return F})),s.d(t,"d",(function(){return L})),s.d(t,"o",(function(){return q})),s.d(t,"a",(function(){return k})),s.d(t,"b",(function(){return A}));let r={required:!0,message:"Please enter content",trigger:"blur"},n={required:!0,message:"Please check content",trigger:"blur"},i={required:!0,message:"Please select content",trigger:"change"},o={pattern:/^[0-9a-zA-Z]*$/,message:"Must be number and letters.",trigger:"blur"},a={pattern:/^[+-]?[0-9]*$/,message:"Must be integer number.",trigger:"blur"},u={pattern:/[0-9]{4}/,message:"The MSISDN must contain at least 4 dligits",trigger:"blur"},l={pattern:/^[^@~`！!#$%^*（）()\-+=|,/<>《》?？;':\"“\[\]{}\\&]*$/,message:"Cannot contain special characters (~`!#$%^*()-+=|,/<>?;':\"[]{}\\&)",trigger:"blur"},d={pattern:/^[^@~`！!#$^*（）()\-+=|,/<>《》?？;':\"“\[\]{}\\&]*$/,message:"Cannot contain special characters (~`!#$^*()-+=|,/<>?;':\"[]{}\\&)",trigger:"blur"},h={pattern:/^[\w- ]+$/,message:"Please do not enter any special characters.",trigger:"blur"};L({minLen:0,maxLen:11});const c=L({minLen:0,maxLen:18}),m=(L({minLen:3,maxLen:3}),L({minLen:6,maxLen:16})),w=(L({minLen:8,maxLen:10}),L({minLen:8,maxLen:11}),L({minLen:4,maxLen:12})),g=L({minLen:6,maxLen:12}),p=L({minLen:0,maxLen:19}),f=L({minLen:0,maxLen:24}),P=L({minLen:0,maxLen:64}),v=(L({minLen:0,maxLen:100}),L({minLen:0,maxLen:256})),C=L({minLen:0,maxLen:512}),y=(L({minLen:8,maxLen:50}),L({minLen:1,maxLen:18})),b=L({minLen:0,maxLen:32}),x=L({minLen:0,maxLen:30}),F=L({minLen:9,maxLen:18});L({minLen:2,maxLen:256});function L({minLen:e=0,maxLen:t=100}){let s="";return s=e>0?`Must be between ${e} and ${t} characters`:`Must be less than ${t} characters`,{min:e,max:t,message:s,trigger:"blur"}}const q=L({minLen:0,maxLen:4});function k(e){let t=[];for(let s in e)e[s]&&e[s].toString().startsWith("%")&&1===e[s].length||!e[s]?t.push(!1):t.push(!0);return!t.every(e=>!1===e)}function A(e){return{validator:(t,s,r)=>{s&&s.startsWith("%")&&1===s.length?r(new Error(""+e)):r()},trigger:"blur"}}},"0925":function(e,t,s){"use strict";s("d7c9")},"106d":function(e,t,s){},"35b5":function(e,t,s){},"53fd":function(e,t,s){"use strict";s("106d")},"642a":function(e,t,s){},"73ff":function(e,t,s){"use strict";s("35b5")},d7c9:function(e,t,s){},f5dc:function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"changepwd-wrapper"},[e._m(0),t("div",{staticClass:"wrapper-right"},[t("el-row",[t("el-col",{attrs:{span:12}},["/firstLoginChangePwd"===e.$route.path?t("first-login",{attrs:{operatorName:e.operatorName,shortCode:e.shortCode}}):e._e(),"/forgetPwd"===e.$route.path?t("forget-pwd"):e._e(),"/forceChangePwd"===e.$route.path?t("force-change-password",{attrs:{operatorName:e.operatorName,shortCode:e.shortCode,expireFlag:e.expireFlag}}):e._e()],1)],1)],1)])},n=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"wrapper-left"},[t("div",{staticClass:"login-animation"})])}],i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"first-login-container"},[t("div",{staticClass:"first-login-title"},[e.isChangeWidthoutQA?t("p",[e._v(e._s(e.$i18n.t("auth.firstChangeWidthoutQA")))]):t("p",[e._v(e._s(e.$i18n.t("auth.firstLoginChangePwdTitle")))])]),e.isChangeWidthoutQA?e._e():t("el-steps",{staticClass:"steps",attrs:{active:e.active}},[t("el-step",{attrs:{title:"Change Password"}}),t("el-step",{attrs:{title:"Configure Question"}})],1),t("div",{staticClass:"change-pwd-form"},[t("el-form",{directives:[{name:"show",rawName:"v-show",value:1===e.active,expression:"active === 1"}],ref:"firstChangePwd",attrs:{model:e.firstChangePwd,id:"first-change-pwd",rules:e.firstChangePwdRules}},[t("el-form-item",{attrs:{prop:"oldPassword",label:e.$i18n.t("auth.oldPassword")}},[t("el-input",{attrs:{size:"small",type:"password",placeholder:"Please enter"},on:{focus:function(t){return e.initInputDom()}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.nextFocus(t)}},model:{value:e.firstChangePwd.oldPassword,callback:function(t){e.$set(e.firstChangePwd,"oldPassword",t)},expression:"firstChangePwd.oldPassword"}},[e.oldPasswordCheck?t("svg-icon",{staticClass:"success-icon",attrs:{slot:"suffix","icon-class":"success"},slot:"suffix"}):e._e()],1)],1),t("el-form-item",{attrs:{prop:"newPassword",label:e.$i18n.t("auth.newPassword"),required:""}},[t("el-input",{attrs:{size:"small",type:"password",placeholder:"Please enter"},on:{focus:function(t){return e.initInputDom("newPassword")}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.nextFocus(t)}},model:{value:e.firstChangePwd.newPassword,callback:function(t){e.$set(e.firstChangePwd,"newPassword","string"===typeof t?t.trim():t)},expression:"firstChangePwd.newPassword"}},[e.newPasswordCheck?t("svg-icon",{staticClass:"success-icon",attrs:{slot:"suffix","icon-class":"success"},slot:"suffix"}):e._e()],1),t("div",{directives:[{name:"show",rawName:"v-show",value:e.showTips,expression:"showTips"}],staticClass:"newPassword-tips"},[e._v(" "+e._s(e.$t("home.newPwdTips",{obj:e.minimumLength+"~"+e.maximumLength}))+" ")])],1),t("el-form-item",{attrs:{prop:"confirmPassword",label:e.$i18n.t("auth.confirmPassword")}},[t("el-input",{attrs:{size:"small",type:"password",placeholder:"Please enter"},on:{focus:function(t){return e.initInputDom()}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.nextFocus(t)}},model:{value:e.firstChangePwd.confirmPassword,callback:function(t){e.$set(e.firstChangePwd,"confirmPassword",t)},expression:"firstChangePwd.confirmPassword"}},[e.confirmPasswordCheck?t("svg-icon",{staticClass:"success-icon",attrs:{slot:"suffix","icon-class":"success"},slot:"suffix"}):e._e()],1)],1)],1),t("el-form",{directives:[{name:"show",rawName:"v-show",value:2===e.active,expression:"active === 2"}],ref:"questionAnswerForm",attrs:{model:e.questionAnswerForm,id:"QA-from"}},e._l(e.questionAnswerList,(function(s,r){return t("div",{key:r},[t("el-form-item",{attrs:{prop:"question"+(r+1),label:e.$i18n.t("auth.question",{obj:r+1}),rules:{validator:e.duplicateQuestionVail,trigger:"change"},required:""}},[t("el-select",{attrs:{size:"small",filterable:"","allow-create":"",clearable:"",placeholder:"Please select"},model:{value:e.questionAnswerForm["question"+(r+1)],callback:function(t){e.$set(e.questionAnswerForm,"question"+(r+1),t)},expression:"questionAnswerForm['question' + (index + 1)]"}},e._l(e.questionOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-form-item",{attrs:{prop:"answer"+(r+1),label:e.$i18n.t("auth.answer",{obj:r+1}),rules:{validator:e.answerVail,trigger:"blur"},required:""}},[t("el-input",{attrs:{size:"small",type:"password",placeholder:"Please enter"},on:{focus:function(t){return e.initInputDom()}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.nextFocus(t)}},model:{value:e.questionAnswerForm["answer"+(r+1)],callback:function(t){e.$set(e.questionAnswerForm,"answer"+(r+1),t)},expression:"questionAnswerForm['answer' + (index + 1)]"}})],1)],1)})),0)],1),t("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],staticClass:"login-btn",attrs:{disabled:!e.checkFormIptLth,type:"primary",loading:e.loginLoading},on:{click:function(t){return e.submitForm("loginForm")}}},[e._v(" "+e._s(2===e.active||e.isChangeWidthoutQA?e.$i18n.t("auth.submit"):e.$i18n.t("auth.next"))+" "),t("i",{staticClass:"el-icon-right el-icon--right"})]),t("el-button",{staticClass:"return-btn",attrs:{type:"text"},on:{click:e.returnEvent}},[e._v(" Return > ")])],1)},o=[],a=s("02e3"),u=s("df7c8"),l=s("22a9"),d=s("0360"),h={name:"FirstLogin",props:{operatorName:{type:String,default:""},shortCode:{type:String,default:""}},data(){let e=async(e,t,s)=>{if(t)return t.length<this.minimumLength||t.length>this.maximumLength?(this.newPasswordCheck=!1,this.showTips=!1,s(new Error(`Please enter a number between ${this.minimumLength} and ${this.maximumLength}.`))):(this.showTips=!1,this.newPasswordCheck=!0,s());this.newPasswordCheck=!1,this.showTips=!1,s(new Error("Please enter content"))},t=(e,t,s)=>{t&&(this.firstChangePwd.newPassword!==t?(this.confirmPasswordCheck=!1,s(new Error("The two passwords are inconsistent."))):(this.confirmPasswordCheck=!0,s()),s())},s=(e,t,s)=>{if(t){let e={password:t,identityId:d["default"].get("initiatorIdentityId")};Object(l["a"])(e).then(e=>{e.header&&e.header.success?(this.oldPasswordCheck=!0,s()):(this.oldPasswordCheck=!1,s(new Error("Please Check The Password And Try Agin")))})}else this.oldPasswordCheck=!1,s(new Error("Please enter content"))};return{active:1,inputDoms:[],firstChangePwd:{oldPassword:"",newPassword:"",confirmPassword:""},questionAnswerForm:{},questionAnswerList:[],firstChangePwdRules:{oldPassword:[{validator:s,trigger:"blur"}],newPassword:[{validator:e,trigger:"blur"}],confirmPassword:[a["e"],{validator:t,trigger:"blur"}]},oldPasswordCheck:!1,newPasswordCheck:!1,confirmPasswordCheck:!1,showTips:!1,questionOptions:[],loginLoading:!1,initiatorIdentityId:"",isFirstTips:!0,isChangeWidthoutQA:!1,answerMinLength:0,sameAnswerFlag:0,isQuestionLoad:!1,minimumLength:8,maximumLength:20}},computed:{checkFormIptLth(){let e=!1;if(1===this.active)this.firstChangePwd["oldPassword"]&&this.firstChangePwd["newPassword"]&&this.firstChangePwd["confirmPassword"]&&(e=!0);else{e=this.questionAnswerList.length>0;for(let t in this.questionAnswerForm)this.questionAnswerForm[t]||(e=!1)}return e}},created(){this.initiatorIdentityId=this.$route.query.initiatorIdentityId,this.receiverIdentityId=this.$route.query.receiverIdentityId,this.isChangeWidthoutQA="changeWidthoutQA"===this.$route.query.redirectFlag},methods:{answerVail(e,t,s){if(t){if(t.length<this.answerMinLength)s(new Error(`Must be more than ${this.answerMinLength} characters`));else if(!this.sameAnswerFlag){let e=[];for(let t in this.questionAnswerForm)-1!==t.indexOf("answer")&&e.push(this.questionAnswerForm[t]);e.sort();for(let t=0;t<e.length;t++)e[t]&&e[t]===e[t+1]&&s(new Error("cannot configure the same answer"))}s()}},duplicateQuestionVail(e,t,s){if(t){let e=[];for(let t in this.questionAnswerForm)-1!==t.indexOf("question")&&e.push(this.questionAnswerForm[t]);e.sort();for(let t=0;t<e.length;t++)e[t]&&e[t]===e[t+1]&&s(new Error("cannot configure the same question"))}s()},renderQuestionAnswer(e){this.questionAnswerList=[];for(let t=0;t<e;t++){let e={["question"+(t+1)]:"",["answer"+(t+1)]:""};this.questionAnswerList.push(e),this.$set(this.questionAnswerForm,"question"+(t+1),""),this.$set(this.questionAnswerForm,"answer"+(t+1),"")}this.isQuestionLoad=!0},returnEvent(){2===this.active?this.active=1:this.$router.go(-1)},initInputDom(e){if("newPassword"===e&&this.isFirstTips&&(Object(u["h"])().then(e=>{e&&(this.minimumLength=e.minimumLength,this.maximumLength=e.maximumLength)}),this.showTips=!0,this.isFirstTips=!1),0!=this.inputDoms.length)return;let t=[],s=document.querySelectorAll("#first-change-pwd .el-input__inner"),r=document.querySelectorAll("#QA-from .el-input__inner");t=[...s,...r],t.forEach((e,t)=>{e.setAttribute("data-index",t)}),this.inputDoms=t},nextFocus(e){let t=e.target.getAttribute("data-index"),s=parseInt(t)+1,r=this.inputDoms.length;s<r?this.inputDoms[s].focus():this.loginLoading||this.submitForm()},submitForm(){1===this.active?this.firstChangePwdValid():this.questionAnswerValid()},firstChangePwdValid(){this.$refs["firstChangePwd"].validate(e=>{e&&(this.isChangeWidthoutQA?this.questionAnswerValid():(this.active=2,this.isQuestionLoad||this.getQuestions()))})},getQuestions(){this.questionOptions=[],Object(u["k"])().then(e=>{if(e.header&&e.header.success){let t=e.orgOperatorQuestionAnswer;this.answerMinLength=e.questionPolicy.answerMinLength,this.sameAnswerFlag=e.questionPolicy.sameAnswerFlag||0;let s=e.questionPolicy.questionNumber||0;t.length>0&&(this.questionOptions=t.map(e=>({value:e.question,label:e.question}))),this.renderQuestionAnswer(s)}})},questionAnswerValid(){this.$refs["questionAnswerForm"].validate(e=>{if(e){let e={operatorName:this.operatorName,shortCode:this.shortCode,confirmPassword:this.firstChangePwd.confirmPassword,initiatorIdentityId:this.initiatorIdentityId,receiverIdentityId:this.initiatorIdentityId};if(this.isChangeWidthoutQA)e.newPwd=this.firstChangePwd.newPassword,e.oldPwd=this.firstChangePwd.oldPassword,this.changePwdWidthoutQA(e);else{e.newPassword=this.firstChangePwd.newPassword,e.oldPassword=this.firstChangePwd.oldPassword;let t=this.questionAnswerList.map((e,t)=>({answer:this.questionAnswerForm["answer"+(t+1)],question:this.questionAnswerForm["question"+(t+1)]}));e.orgOperatorQuestionAnswer=t,this.changePwdOnFirstLoginWidthQA(e)}}})},changePwdOnFirstLoginWidthQA(e){this.loginLoading=!0,Object(u["c"])(e).then(e=>{e&&e.header.success?(this.$message.success("Change password success!"),this.$router.push({path:"/login",query:{operatorName:this.operatorName}})):this.$message.error(e.header.responseDesc||"Change password failed!")}).catch(e=>{this.$message.error(e.message)}).finally(()=>{this.loginLoading=!1})},changePwdWidthoutQA(e){this.loginLoading=!0,Object(u["b"])(e).then(e=>{e.header&&e.header.success?(this.$message.success("Change password success!"),this.$router.push({path:"/login",query:{operatorName:this.operatorName}})):this.$message.error(e.header.responseDesc||"Change password failed!")}).catch(e=>{this.$message.error(e.message)}).finally(()=>{this.loginLoading=!1})}}},c=h,m=(s("53fd"),s("2877")),w=Object(m["a"])(c,i,o,!1,null,"410e5fc6",null),g=w.exports,p=function(){var e=this,t=e._self._c;return t("div",{staticClass:"forget-pwd-container"},[t("div",{staticClass:"forget-pwd-title"},[t("p",{staticClass:"huaweiSans_medium"},[e._v(e._s(e.$i18n.t("auth.welcomeTitle")))]),t("p",{staticClass:"huaweiSans_bold"},[e._v(e._s(e.$i18n.t("auth.forgetPwd")))])]),e.loginErrorMsg.length>0?t("div",{staticClass:"error-tip-content"},[e._v(" "+e._s(e.loginErrorMsg)+" ")]):e._e(),t("div",{staticClass:"forget-pwd-form"},[t("el-form",{directives:[{name:"show",rawName:"v-show",value:1===e.active,expression:"active === 1"}],ref:"forgetPwdForm",attrs:{model:e.forgetPwdForm,id:"forget-pwd-form",rules:e.forgetPwdRules,"hide-required-asterisk":!0}},[t("el-form-item",{attrs:{prop:"shortCode",label:e.$i18n.t("auth.shortCode")}},[t("el-input",{attrs:{id:"shortCode",size:"small",type:"text",placeholder:"Please enter"},on:{focus:function(t){return e.initInputDom()}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.nextFocus(t)}},model:{value:e.forgetPwdForm.shortCode,callback:function(t){e.$set(e.forgetPwdForm,"shortCode",t)},expression:"forgetPwdForm.shortCode"}})],1),t("el-form-item",{attrs:{prop:"username",label:e.$i18n.t("auth.userName")}},[t("el-input",{attrs:{id:"username",size:"small",placeholder:"Please enter"},on:{focus:function(t){return e.initInputDom()}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.nextFocus(t)}},model:{value:e.forgetPwdForm.username,callback:function(t){e.$set(e.forgetPwdForm,"username",t)},expression:"forgetPwdForm.username"}})],1)],1),t("el-form",{directives:[{name:"show",rawName:"v-show",value:2===e.active,expression:"active === 2"}],ref:"questionAnswerForm",attrs:{model:e.questionAnswerForm,id:"QA-from","hide-required-asterisk":!0}},e._l(e.questionAnswerForm.questionAnswerList,(function(s,r){return t("div",{key:r},[t("el-form-item",{attrs:{prop:s["question"+(r+1)],label:e.$i18n.t("auth.question",{obj:r+1})}},[t("el-select",{attrs:{disabled:!0,size:"small",filterable:"","allow-create":"",clearable:"",placeholder:"Please select"},model:{value:s["question"+(r+1)],callback:function(t){e.$set(s,"question"+(r+1),t)},expression:"item['question' + (index + 1)]"}},e._l(e.questionOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-form-item",{attrs:{prop:s["answer"+(r+1)],label:e.$i18n.t("auth.answer",{obj:r+1})}},[t("el-input",{attrs:{size:"small",type:"password",placeholder:"Please enter"},on:{focus:function(t){return e.initInputDom()}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.nextFocus(t)}},model:{value:s["answer"+(r+1)],callback:function(t){e.$set(s,"answer"+(r+1),t)},expression:"item['answer' + (index + 1)]"}})],1)],1)})),0),t("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],staticClass:"login-btn",attrs:{disabled:e.maxTimes||!e.checkFormIptLth,type:"primary",loading:e.loginLoading},on:{click:function(t){return e.submitForm()}}},[e._v(" "+e._s(1===e.active?e.$i18n.t("auth.submit"):e.$i18n.t("auth.confirm"))+" "),t("i",{staticClass:"el-icon-right el-icon--right"})]),t("el-button",{staticClass:"return-btn",attrs:{type:"text"},on:{click:e.returnEvent}},[e._v(" Return > ")])],1)])},f=[],P={name:"ForgetPassword",data(){return{loginErrorMsg:"",active:1,forgetPwdForm:{shortCode:"",username:""},questionAnswerForm:{questionAnswerList:[]},questionOptions:[],forgetPwdRules:{shortCode:[a["e"]],username:[a["e"]]},loginLoading:!1,inputDoms:[],orgOperatorIdentityId:"",questionNumber:0,maxTimes:!1}},computed:{checkFormIptLth(){let e=!0;if(1===this.active)for(let t in this.forgetPwdForm)this.forgetPwdForm[t]||(e=!1);else{e=this.questionAnswerForm.questionAnswerList.length>0;for(let t=0;t<this.questionAnswerForm.questionAnswerList.length;t++){let s=this.questionAnswerForm.questionAnswerList[t];for(let t in s)s[t]||(e=!1)}}return e}},created(){},methods:{renderQuestionAnswer(e){this.questionAnswerForm.questionAnswerList=[];for(let t=0;t<e;t++){let e={["question"+(t+1)]:"",["answer"+(t+1)]:""};this.questionAnswerForm.questionAnswerList.push(e)}this.getOperatorQuestions()},submitForm(){1===this.active?this.operatorValid():this.questionValid()},operatorValid(){this.$refs["forgetPwdForm"].validate(e=>{if(e){this.loginLoading=!0;let e={...this.forgetPwdForm};Object(u["j"])(e).then(async e=>{if(e.header&&e.header.success)if(e.orgOperatorIdentityId){this.orgOperatorIdentityId=e.orgOperatorIdentityId||"";let t=await this.queryOperatorQuestionsFn();t.length>0?(this.getQuestions(),this.active=2,this.loginErrorMsg=""):this.$confirm(this.$i18n.t("auth.notConfiguredTips"),{confirmButtonText:"Confirm",showCancelButton:!1,type:"warning",customClass:"forget-pwd-tips"}).then(()=>{})}else this.loginErrorMsg="The user does not exist.";else this.loginErrorMsg=e.responseDesc||"The user does not exist."}).finally(()=>{this.loginLoading=!1})}})},getQuestions(){this.questionOptions=[],Object(u["k"])().then(e=>{if(e.header&&e.header.success){let t=e.orgOperatorQuestionAnswer;this.questionNumber=e.questionNumber||0,t.length>0&&(this.questionOptions=t.map(e=>({value:e.question,label:e.question}))),this.renderQuestionAnswer(this.questionNumber)}})},queryOperatorQuestionsFn(){let e={initiatorIdentityId:this.orgOperatorIdentityId,receiverIdentityId:this.orgOperatorIdentityId};return new Promise(t=>{Object(u["i"])(e).then(e=>{if(e.header&&e.header.success){let s=e.orgOperatorQuestionAnswer;t(s)}})})},async getOperatorQuestions(){let e=await this.queryOperatorQuestionsFn();if(e.length>0)for(let t=0;t<e.length;t++)this.questionAnswerForm.questionAnswerList[t]["question"+(t+1)]=e[t].question},questionValid(){this.$refs["questionAnswerForm"].validate(e=>{if(e){this.loginLoading=!0;let e=this.questionAnswerForm.questionAnswerList.map((e,t)=>({answer:e["answer"+(t+1)],question:e["question"+(t+1)]})),t={initiatorIdentityId:"",orgOperatorQuestionAnswer:e,receiverIdentityId:this.orgOperatorIdentityId};Object(u["n"])(t).then(e=>{e.header&&e.header.success?this.resetOrgPassword():("FE73302131"===e.header.responseCode&&(this.maxTimes=!0),this.loginErrorMsg=e.responseDesc||"")}).finally(()=>{this.loginLoading=!1})}})},resetOrgPassword(){let e={initiatorIdentityId:this.orgOperatorIdentityId,receiverIdentityId:this.orgOperatorIdentityId};Object(u["m"])(e).then(e=>{e.header&&e.header.success?(this.$message.success("Password retrieved successfully."),this.$router.push({path:"/login"})):this.loginErrorMsg=e.responseDesc||""})},returnEvent(){2===this.active?(this.maxTimes=!1,this.active=1):this.$router.push({path:"/login"})},initInputDom(){if(0!=this.inputDoms.length)return;let e=[],t=document.querySelectorAll("#first-change-pwd .el-input__inner"),s=document.querySelectorAll("#QA-from .el-input__inner");e=[...t,...s],e.forEach((e,t)=>{e.setAttribute("data-index",t)}),this.inputDoms=e},nextFocus(e){let t=e.target.getAttribute("data-index"),s=parseInt(t)+1,r=this.inputDoms.length;s<r?this.inputDoms[s].focus():this.loginLoading||this.submitForm()}}},v=P,C=(s("73ff"),Object(m["a"])(v,p,f,!1,null,"1b2d2c6a",null)),y=C.exports,b=function(){var e=this,t=e._self._c;return t("div",{staticClass:"force-changepwd-content"},[t("div",{staticClass:"changepwd-title"},[t("p",{staticClass:"huaweiSans_bold"},[e._v(e._s(e.$i18n.t("auth.changePassword")))])]),e.loginErrorMsg?e._e():t("div",{staticClass:"force-change-tips"},[t("span",[t("i",[e._v(e._s(e.operatorName))]),e._v(" User ")]),"aboutToExpire"===e.expireFlag?t("span",[e._v(" "+e._s(e.$t("auth.aboutToExpire"))+" ")]):"hasExpire"===e.expireFlag?t("span",[e._v(" "+e._s(e.$t("auth.yourPassword"))+" "),t("i",{staticClass:"error-text"},[e._v(e._s(e.$t("auth.hasExpired")))]),e._v(" "+e._s(e.$t("auth.pleaseChangePassword"))+" ")]):t("span",[e._v(" "+e._s(e.$t("auth.changePwdTips"))+" ")])]),e.loginErrorMsg.length>0?t("div",{staticClass:"error-tip-content"},[e._v(" "+e._s(e.loginErrorMsg)+" ")]):e._e(),t("div",{staticClass:"change-pwd-form"},[t("el-form",{ref:"changePwdForm",style:{"padding-top":e.loginErrorMsg?"32px":"20px"},attrs:{id:"change-pwd-form",model:e.changePwdForm,rules:e.changePasswordRules}},[t("el-form-item",{attrs:{prop:"oldPassword",label:e.$i18n.t("auth.oldPassword")}},[t("el-input",{attrs:{id:"oldPassword",size:"small",type:"password",placeholder:"Please enter"},on:{focus:function(t){return e.initInputDom()}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.nextFocus(t)}},model:{value:e.changePwdForm.oldPassword,callback:function(t){e.$set(e.changePwdForm,"oldPassword",t)},expression:"changePwdForm.oldPassword"}},[e.oldPasswordCheck?t("svg-icon",{staticClass:"success-icon",attrs:{slot:"suffix","icon-class":"success"},slot:"suffix"}):e._e()],1)],1),t("el-form-item",{attrs:{prop:"newPassword",label:e.$i18n.t("auth.newPassword")}},[t("el-input",{attrs:{id:"newPassword",size:"small",type:"password",placeholder:"Please enter"},on:{focus:function(t){return e.initInputDom("newPassword")}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.nextFocus(t)}},model:{value:e.changePwdForm.newPassword,callback:function(t){e.$set(e.changePwdForm,"newPassword",t)},expression:"changePwdForm.newPassword"}},[e.newPasswordCheck?t("svg-icon",{staticClass:"success-icon",attrs:{slot:"suffix","icon-class":"success"},slot:"suffix"}):e._e()],1),t("div",{directives:[{name:"show",rawName:"v-show",value:e.showTips,expression:"showTips"}],staticClass:"newPassword-tips"},[e._v(" "+e._s(e.$t("home.newPwdTips",{obj:e.minimumLength+"~"+e.maximumLength}))+" ")])],1),t("el-form-item",{attrs:{prop:"confirmPassword",label:e.$i18n.t("auth.confirmPassword")}},[t("el-input",{attrs:{id:"confirmPassword",size:"small",type:"password",placeholder:"Please enter"},on:{focus:function(t){return e.initInputDom()}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.nextFocus(t)}},model:{value:e.changePwdForm.confirmPassword,callback:function(t){e.$set(e.changePwdForm,"confirmPassword",t)},expression:"changePwdForm.confirmPassword"}},[e.confirmPasswordCheck?t("svg-icon",{staticClass:"success-icon",attrs:{slot:"suffix","icon-class":"success"},slot:"suffix"}):e._e()],1)],1)],1),t("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],staticClass:"login-btn",attrs:{id:"changePwdBtn",disabled:!e.checkFormIptLth,type:"primary",loading:e.loginLoading},on:{click:function(t){return e.submitForm("changePwdForm")}}},[e._v(" "+e._s(e.$i18n.t("auth.submit"))+" "),t("i",{staticClass:"el-icon-right el-icon--right"})]),t("el-button",{staticClass:"return-btn",attrs:{type:"text"},on:{click:e.returnEvent}},[e._v(" Return > ")])],1)])},x=[];function F(e){const{minimumLength:t=8,maximumLength:s=255,minimumNumeric:r,minimumAlphabetic:n,minimumUpperCase:i,minimumSpecial:o,minimumDifference:u,specialList:l,allow2ContinuSameChar:d,caseSensitive:h}=e,c=[];return c.push(Object(a["d"])({minLen:t,maxLen:s})),r&&c.push(L(r)),n&&c.push(k(n)),i&&h&&c.push($(i)),o&&c.push(_(o,l)),u&&c.push(E(u)),d&&c.push(T()),c}function L(e){return{validator:(t,s,r)=>{q(s)<e?r(new Error("Minimum number of digits required: "+e)):r()},trigger:"blur"}}function q(e){let t=0;for(let s=0;s<e.length;s++){let r=e[s].charCodeAt();N(r)&&t++}return t}function k(e){return{validator:(t,s,r)=>{A(s)<e?r(new Error("Minimum number of letters required: "+e)):r()},trigger:"blur"}}function A(e){let t=0;for(let s=0;s<e.length;s++){let r=e[s].charCodeAt();(D(r)||M(r))&&t++}return t}function $(e){return{validator:(t,s,r)=>{I(s)<e?r(new Error("Minimum number of capital letters required: "+e)):r()},trigger:"blur"}}function I(e){let t=0;for(let s=0;s<e.length;s++){let r=e[s].charCodeAt();D(r)&&t++}return t}function _(e,t){return{validator:(s,r,n)=>{O(r,t)<e?n(new Error(`Minimum number of special characters required: ${e}.  Special characters allowed in the password: ${t}`)):n()},trigger:"blur"}}function O(e,t){let s=0;for(let r=0;r<e.length;r++){let n=e[r];t.includes(n)&&s++}return s}function E(e){return{validator:(t,s,r)=>{let n=[...new Set(s.split(""))];n.length<e?r(new Error(`At least ${e} different characters are required`)):r()},trigger:"blur"}}function T(){return{validator:(e,t,s)=>{Q(t)?s(new Error("Consecutive identical characters are not allowed")):s()},trigger:"blur"}}function Q(e){let t=!1;for(let s=0;s<e.length-1;s++)if(e[s]===e[s+1]){t=!0;break}return t}function N(e){return e>=48&&e<=57}function D(e){return e>=65&&e<=90}function M(e){return e>=97&&e<=122}var j={name:"ForceChangePassword",props:{operatorName:{type:String,default:""},shortCode:{type:String,default:""},expireFlag:{type:String,default:""}},data(){let e=async(e,t,s)=>{if(t){if(t.length<this.minimumLength||t.length>this.maximumLength)return this.newPasswordCheck=!1,this.showTips=!1,s(new Error(`Please enter a number between ${this.minimumLength} and ${this.maximumLength}.`));this.showTips=!1,this.newPasswordCheck=!0,s()}else this.showTips=!1,this.newPasswordCheck=!1,s(new Error("Please enter content"))},t=(e,t,s)=>{t!==this.changePwdForm.newPassword?(this.confirmPasswordCheck=!1,s(new Error("The two passwords are inconsistent."))):(this.confirmPasswordCheck=!0,s()),s()},s=(e,t,s)=>{if(t){let e={password:t,identityId:d["default"].get("initiatorIdentityId")};Object(l["a"])(e).then(e=>{e.header&&e.header.success?(this.oldPasswordCheck=!0,s()):(this.oldPasswordCheck=!1,s(new Error("Please Check The Password And Try Agin")))})}else this.oldPasswordCheck=!1,s(new Error("Please enter content"))};return{loginErrorMsg:"",changePwdForm:{oldPassword:"",newPassword:"",confirmPassword:""},changePasswordRules:{oldPassword:[{validator:s,trigger:"blur"}],newPassword:[{validator:e,trigger:"blur"}],confirmPassword:[a["e"],{validator:t,trigger:"blur"}]},oldPasswordCheck:!1,newPasswordCheck:!1,confirmPasswordCheck:!1,showTips:!1,loginLoading:!1,isFirstTips:!0,inputDoms:[],minimumLength:8,maximumLength:20}},computed:{checkFormIptLth(){let e=!1;return this.changePwdForm["oldPassword"].length>0&&this.changePwdForm["newPassword"].length>0&&this.changePwdForm["confirmPassword"].length>0&&(e=!0),e}},created(){},methods:{returnEvent(){this.$router.go(-1)},submitForm(e){this.$refs[e].validate(t=>{if(this.changePwdForm.newPassword===this.changePwdForm.confirmPassword)return this.loginErrorMsg="",!!t&&void("changePwdForm"===e&&("aboutToExpire"===this.expireFlag||"FLFMQAorPEFM"===this.$route.query.redirectFlag?this.expireChangePassword():this.changePasswordAndlogin()));this.loginErrorMsg="The passwords you entered do not match."})},changePasswordAndlogin(){this.loginLoading=!0;let e={newPassword:this.changePwdForm.newPassword,oldPassword:this.changePwdForm.oldPassword,confirmPassword:this.changePwdForm.confirmPassword,operatorName:this.operatorName,shortCode:this.shortCode,initiatorIdentityId:this.$route.query.initiatorIdentityId,receiverIdentityId:this.$route.query.initiatorIdentityId};Object(u["c"])(e).then(e=>{e.header&&e.header.success?this.$store.dispatch("routerStore/setTopMenus").then(()=>{this.$router.push({path:"/mainPage/identifierCenter/MyOrganization/MyOrganization/list",query:{operatorName:this.operatorName}})}):this.loginErrorMsg=e.header.responseDesc}).finally(()=>{this.loginLoading=!1})},expireChangePassword(){this.loginLoading=!0;let e={newPwd:this.changePwdForm.newPassword,oldPwd:this.changePwdForm.oldPassword,confirmPassword:this.changePwdForm.confirmPassword,operatorName:this.operatorName,shortCode:this.$route.query.shortCode,initiatorIdentityId:this.$route.query.initiatorIdentityId,receiverIdentityId:this.$route.query.initiatorIdentityId};Object(u["b"])(e).then(e=>{e.header&&e.header.success?(this.$message.success("Change password success!"),this.$router.push({path:"/login"})):this.loginErrorMsg=e.header.responseDesc}).finally(()=>{this.loginLoading=!1})},initInputDom(e){if("newPassword"===e&&this.isFirstTips&&(Object(u["h"])().then(e=>{e&&(this.changePasswordRules.newPassword=[...this.changePasswordRules.newPassword,...F(e)],this.minimumLength=e.minimumLength,this.maximumLength=e.maximumLength)}),this.showTips=!0,this.isFirstTips=!1),0!=this.inputDoms.length)return;let t=document.querySelectorAll("#change-pwd-form .el-input__inner");t.forEach((e,t)=>{e.setAttribute("data-index",t)}),this.inputDoms=t},nextFocus(e){let t=e.target.getAttribute("data-index"),s=parseInt(t)+1,r=this.inputDoms.length;s<r?this.inputDoms[s].focus():this.loginLoading||this.submitForm("changePwdForm")}}},S=j,R=(s("f7e7"),Object(m["a"])(S,b,x,!1,null,"2ec50e1c",null)),z=R.exports,W={name:"ChangePassword",components:{FirstLogin:g,ForgetPwd:y,ForceChangePassword:z},data(){return{operatorName:"",shortCode:"",expireFlag:!1}},computed:{notLogin(){return this.checkFormIptLth()?"":" not-login"}},created(){this.operatorName=this.$route.query.operatorName||"",this.shortCode=this.$route.query.shortCode,this.expireFlag=this.$route.query.expireFlag},methods:{}},V=W,B=(s("0925"),Object(m["a"])(V,r,n,!1,null,"260b9830",null));t["default"]=B.exports},f7e7:function(e,t,s){"use strict";s("642a")}}]);
//# sourceMappingURL=chunk-707c5fc0.js.map