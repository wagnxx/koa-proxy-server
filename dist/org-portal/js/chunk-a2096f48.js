(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a2096f48"],{"02e3":function(e,t,a){"use strict";a.d(t,"e",(function(){return o})),a.d(t,"c",(function(){return r})),a.d(t,"y",(function(){return s})),a.d(t,"z",(function(){return i})),a.d(t,"w",(function(){return c})),a.d(t,"f",(function(){return l})),a.d(t,"u",(function(){return n})),a.d(t,"v",(function(){return m})),a.d(t,"x",(function(){return d})),a.d(t,"g",(function(){return h})),a.d(t,"s",(function(){return p})),a.d(t,"n",(function(){return u})),a.d(t,"r",(function(){return g})),a.d(t,"j",(function(){return f})),a.d(t,"l",(function(){return T})),a.d(t,"q",(function(){return b})),a.d(t,"m",(function(){return k})),a.d(t,"p",(function(){return y})),a.d(t,"k",(function(){return C})),a.d(t,"i",(function(){return O})),a.d(t,"h",(function(){return S})),a.d(t,"t",(function(){return D})),a.d(t,"d",(function(){return N})),a.d(t,"o",(function(){return F})),a.d(t,"a",(function(){return L})),a.d(t,"b",(function(){return v}));let o={required:!0,message:"Please enter content",trigger:"blur"},r={required:!0,message:"Please check content",trigger:"blur"},i={required:!0,message:"Please select content",trigger:"change"},s={pattern:/^[0-9a-zA-Z]*$/,message:"Must be number and letters.",trigger:"blur"},l={pattern:/^[+-]?[0-9]*$/,message:"Must be integer number.",trigger:"blur"},n={pattern:/[0-9]{4}/,message:"The MSISDN must contain at least 4 dligits",trigger:"blur"},c={pattern:/^[^@~`！!#$%^*（）()\-+=|,/<>《》?？;':\"“\[\]{}\\&]*$/,message:"Cannot contain special characters (~`!#$%^*()-+=|,/<>?;':\"[]{}\\&)",trigger:"blur"},m={pattern:/^[^@~`！!#$^*（）()\-+=|,/<>《》?？;':\"“\[\]{}\\&]*$/,message:"Cannot contain special characters (~`!#$^*()-+=|,/<>?;':\"[]{}\\&)",trigger:"blur"},d={pattern:/^[\w- ]+$/,message:"Please do not enter any special characters.",trigger:"blur"};N({minLen:0,maxLen:11});const h=N({minLen:0,maxLen:18}),p=(N({minLen:3,maxLen:3}),N({minLen:6,maxLen:16})),u=(N({minLen:8,maxLen:10}),N({minLen:8,maxLen:11}),N({minLen:4,maxLen:12})),g=N({minLen:6,maxLen:12}),f=N({minLen:0,maxLen:19}),T=N({minLen:0,maxLen:24}),b=N({minLen:0,maxLen:64}),k=(N({minLen:0,maxLen:100}),N({minLen:0,maxLen:256})),y=N({minLen:0,maxLen:512}),C=(N({minLen:8,maxLen:50}),N({minLen:1,maxLen:18})),O=N({minLen:0,maxLen:32}),S=N({minLen:0,maxLen:30}),D=N({minLen:9,maxLen:18});N({minLen:2,maxLen:256});function N({minLen:e=0,maxLen:t=100}){let a="";return a=e>0?`Must be between ${e} and ${t} characters`:`Must be less than ${t} characters`,{min:e,max:t,message:a,trigger:"blur"}}const F=N({minLen:0,maxLen:4});function L(e){let t=[];for(let a in e)e[a]&&e[a].toString().startsWith("%")&&1===e[a].length||!e[a]?t.push(!1):t.push(!0);return!t.every(e=>!1===e)}function v(e){return{validator:(t,a,o)=>{a&&a.startsWith("%")&&1===a.length?o(new Error(""+e)):o()},trigger:"blur"}}},"64e7":function(e,t,a){"use strict";var o=a("0360"),r=a("5c96");t["a"]={downLoadFile:function(e,t,a,i){let s=new XMLHttpRequest;s.open(a||"POST",e,!0),s.setRequestHeader("Content-type","application/json"),i&&s.setRequestHeader("X-XSRF-TOKEN",o["default"].get("O-XSRF-TOKEN")),s.setRequestHeader("o-token",o["default"].get("o-token")),s.setRequestHeader("Cache-Control","no-store, max-age=0, must-revalidate"),s.responseType="blob",s.onload=function(){if(200===this.status){let e=this.response,t=s.getResponseHeader("content-disposition").split(";")[1].split("filename=")[1],a=decodeURIComponent(t),o=URL.createObjectURL(e),r=document.createElement("a");r.href=o,r.download=a,r.click()}else r["MessageBox"].alert("Download failed.","Error",{type:"error",confirmButtonText:"Confirm"})},s.send(JSON.stringify(t))}}},"7b463":function(e,t,a){"use strict";a("97a0")},"7f33":function(e,t,a){},"8e76":function(e,t,a){"use strict";a.d(t,"n",(function(){return i})),a.d(t,"j",(function(){return s})),a.d(t,"t",(function(){return l})),a.d(t,"w",(function(){return n})),a.d(t,"h",(function(){return c})),a.d(t,"o",(function(){return m})),a.d(t,"q",(function(){return d})),a.d(t,"a",(function(){return h})),a.d(t,"d",(function(){return p})),a.d(t,"k",(function(){return u})),a.d(t,"m",(function(){return g})),a.d(t,"v",(function(){return f})),a.d(t,"s",(function(){return T})),a.d(t,"x",(function(){return b})),a.d(t,"i",(function(){return k})),a.d(t,"p",(function(){return y})),a.d(t,"b",(function(){return C})),a.d(t,"g",(function(){return O})),a.d(t,"u",(function(){return S})),a.d(t,"c",(function(){return D})),a.d(t,"l",(function(){return N})),a.d(t,"f",(function(){return F})),a.d(t,"e",(function(){return L})),a.d(t,"r",(function(){return v}));var o=a("0bbd"),r=a("5f9a");a("64e7");function i(e){return Object(o["a"])({url:"/fintech/v1/workFlow/queryMyToDoTask",method:"post",data:e})}function s(e){return Object(o["a"])({url:"/fintech/v1/workFlow/queryGroupTask",method:"post",data:e})}function l(e){return Object(o["a"])({url:"/fintech/v1/workFlow/task-type/list",method:"post",data:e})}function n(e){return Object(o["a"])({url:"/fintech/v1/workFlow/workFlow-name/list",method:"post",data:e})}function c(e){return Object(o["a"])({url:"/fintech/v1/workFlow/spOperator/list",method:"post",data:e})}function m(e){return Object(o["a"])({url:"/fintech/v1/orgOperator/queryOrgOperatorList",method:"post",data:e})}function d(e){return Object(o["a"])({url:"/fintech/role/v1/list",method:"post",data:e})}function h(e){return Object(o["a"])({url:"/fintech/v1/workflow/mytask/task/batchProcess",method:"post",data:e})}function p(e){return Object(o["a"])({url:"/fintech/v1/workFlow/queryActiveTask",method:"post",data:e})}function u(e){return Object(o["a"])({url:"/fintech/v1/workFlow/queryHistoryTask",method:"post",data:e})}function g(e){return Object(o["a"])({url:"/fintech/v1/workFlow/queryInitiatedWorkflow",method:"post",data:e})}function f(e){return Object(o["a"])({url:"/fintech/v1/workFlow/data-dict/list",method:"post",data:e})}function T(e){return Object(o["a"])({url:"/fintech/v1/workflow/process/details",method:"post",data:e})}function b(e){return Object(o["a"])({url:"/fintech/v1/searchTransactionByOrderId",method:"post",data:e})}function k(e){return Object(o["a"])({url:"/fintech/v1/transaction/order/orderDetail",method:"post",data:e})}function y(e){return Object(o["a"])({url:"/fintech/v1/orgOperator/detail?receiverIdentityId="+e,method:"get"})}function C(e){return Object(o["a"])({url:"fintech/v1/workFlow/process/backToInitiator",method:"post",data:e})}function O(e){return Object(o["a"])({url:Object(r["a"])("/fintech/v1/bulk/task/plan/detail?planID="+e),method:"get"})}function S(e){return Object(o["a"])({url:"/fintech/v1/bulk/task/plan/validRecords",params:e})}function D(e){return Object(o["a"])({url:"/fintech/v1/workflow/process/kycDetails",method:"post",data:e})}function N(){return Object(o["a"])({url:"/fintech/v1/organization/languages",method:"get"})}const F=e=>Object(o["a"])({url:"/fintech/v1/workFlow/process/backToInitiator",method:"post",data:e});function L(e){return Object(o["a"])({url:"fintech/v1/workFlow/process/backKycToInitiator",method:"post",data:e})}const v=e=>Object(o["a"])({url:"/fintech/v1/organization/querySubscribeProductsForWorkFlow",method:"post",data:e})},"97a0":function(e,t,a){},a10b:function(e,t,a){"use strict";a.d(t,"c",(function(){return s})),a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return l}));var o=a("02e3");let r={pattern:/^[^@~`！!#$^*（）()\-+=|,/<>《》?？;':\"“\[\]{}\\&]*$/,message:"Cannot contain special characters (~`!#$^*()-+=|,/<>?;':\"[]{}\\&)",trigger:"blur"};function i(e,t,a){if(t){let e=t[0],o=new Date(e).getTime(),r=t[1],i=new Date(r).getTime(),s=i-o<26784e5;s?a():a(new Error("The time period cannot exceed 31 days"))}a()}const s=()=>({userName:[r],firstName:[r],middleName:[r],lastName:[r],taskNo:[r],taskName:[r],currentHandler:[r],workflowId:[r],workflowName:[r],remark:[r],shortCode:[r,o["e"],{required:!0,message:"This field is mandatory.",trigger:"change"}]}),l=()=>({creationTime:[{required:!1},{validator:i,trigger:"change"}],startTime:[{required:!1},{validator:i,trigger:"change"}]}),n=()=>({operation:[r,o["e"],{required:!0,message:"please enter",trigger:"change"}],remark:[r,o["e"],{required:!0,message:"This field is mandatory.",trigger:"blur"}]})},d91c:function(e,t,a){"use strict";var o=function(){var e=this,t=e._self._c;return t("el-dialog",{staticClass:"dialog-portal",class:{"dialog-overflow":e.isOverflowHeight},attrs:{title:e.title,visible:e.visible,width:e.width,"close-on-click-modal":e.closeOnClickModal,"before-close":e.handleClose},on:{"update:visible":function(t){e.visible=t},opened:e.openedDialog,closed:e.closedDialog}},[e._t("operation"),t("div",{staticStyle:{padding:"0 20px"}},[t("el-divider",{staticClass:"dialog-top-divider"})],1),e.dialogSearchFormVisibility?t("portal-form",{ref:"dialogSearchForm",staticClass:"dialog-search-form",attrs:{needBottomLine:e.needSearchFormBottomLine,"form-config-list":e.searchForm.formConfigList,"form-data":e.searchForm.formData,"form-rules":e.formRules,needOperateBtn:e.needSearchOperateBtn,searchBtnLoading:e.searchLoading,smallAutoColumn:e.smallAutoColumn,bigAutoColumn:e.bigAutoColumn},on:{"common-enter-event":e.enterEvent,"reset-btn-click":e.reset,"search-btn-click":e.search}}):e._e(),e.dialogTableVisibility?t("div",{staticClass:"table-container"},[t("table-page",{ref:"dialogTable",attrs:{"is-check":e.dialogTable.isCheck||!0,"is-search":e.tableIsSearch,columns:e.dialogTable.columns||[],"has-pagination":e.dialogTable.hasPagination||!1,pagination:e.dialogTable.paginationConfig||{},getTableData:e.dialogTable.getTableData,"id-key":e.dialogTable.idKey||"id",isSingleCheck:e.isSingleCheck},on:{"selection-change":e.onSelectionChange,"single-selection-change":e.singleChange}})],1):e._e(),t("div",{staticStyle:{padding:"0 20px"}},[e.configFormBottomLine?t("el-divider",{staticClass:"config-form-bottomLine"}):e._e()],1),e.dialogConfigFormVisibility?t("portal-form",{ref:"dialogConfigForm",staticClass:"dialogConfigForm",attrs:{needBottomLine:!1,"form-config-list":e.configForm.formConfigList,"form-data":e.configForm.formData,"form-rules":e.configFormRules,needOperateBtn:e.needOperateBtn,smallAutoColumn:e.configForm.configSmall||1,bigAutoColumn:e.configForm.configBig||1}}):e._e(),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("button",{staticClass:"cancel-button",on:{click:function(t){return t.preventDefault(),e.handleCancelClick.apply(null,arguments)}}},[e._v(e._s(e.cancelText))]),t("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{type:"primary",size:"small"},on:{click:e.handleConfirmClick}},[e._v(e._s(e.confirmText))])],1)],2)},r=[],i=a("3186"),s=a("4c09"),l={name:"portalDialog",components:{PortalForm:i["a"],TablePage:s["a"]},props:{title:{type:String,default:""},closeOnClickModal:{type:Boolean,default:!1},dialogVisible:{type:Boolean,default:!1},isOverflowHeight:{type:Boolean,default:!1},width:{type:String,default:"800px"},cancelText:{type:String,default:"Cancel"},confirmText:{type:String,default:"Confirm"},searchForm:{type:Object,default:null},formRules:{type:Object,default:()=>({})},searchLoading:{type:Boolean,default:!1},smallAutoColumn:{type:Number,default:2,validate:e=>!(24%e)},bigAutoColumn:{type:Number,default:2,validate:e=>!(24%e)},enterEvent:{type:Function,default:()=>{}},dialogTable:{type:Object,default:()=>({})},configForm:{type:Object,default:()=>({})},configFormRules:{type:Object,default:()=>({})},needSearchFormBottomLine:{type:Boolean,default:!1},configFormBottomLine:{type:Boolean,default:!1}},data(){return{visible:!1}},computed:{dialogSearchFormVisibility(){return void 0!==this.searchForm.formConfigList&&this.searchForm.formConfigList.length>0},dialogConfigFormVisibility(){return void 0!==this.configForm.formConfigList&&this.configForm.formConfigList.length>0},dialogTableVisibility(){return!!(this.dialogTable&&this.dialogTable.columns.length>0)},needSearchOperateBtn(){return void 0===this.searchForm.needOperateBtn||!!this.searchForm.needOperateBtn},needOperateBtn(){return!!this.configForm.needOperateBtn&&this.configForm.needOperateBtn},tableIsSearch(){return!!this.dialogTable.isSearch},isSingleCheck(){return!!this.dialogTable.isSingleCheck},onSelectionChange(){return this.dialogTable.onSelectionChange?this.dialogTable.onSelectionChange:()=>{}},singleChange(){return this.dialogTable.singleChange?this.dialogTable.singleChange:()=>{}}},watch:{dialogVisible:{handler(e){this.visible=e},immediate:!0},visible:{handler(e){this.$emit("show-dialog",e),this.$emit("update:dialogVisible",e)}}},methods:{handleClose(){this.visible=!1},handleCancelClick(){this.$emit("cancel-btn-click")},handleConfirmClick(){this.$emit("confirm-btn-click")},closedDialog(){this.$emit("closed-dialog")},openedDialog(){this.$emit("opened-dialog")},reset(){this.$emit("search-reset")},search(){this.$refs.dialogSearchForm.validate(e=>{e&&(this.dialogTable.isSearch=!0,this.$emit("update:searchLoading",!0))})}}},n=l,c=(a("ef8d"),a("2877")),m=Object(c["a"])(n,o,r,!1,null,"090905a0",null);t["a"]=m.exports},ef8d:function(e,t,a){"use strict";a("7f33")},f40c:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e._self._c;return t("div",{staticClass:"task-history-container"},[t("div",{staticClass:"page-header"},[t("div",{staticClass:"title"},[e._v(e._s(e.projectObj.title))]),t("div",{staticClass:"desc"},[e._v(e._s(e.projectObj.desc))])]),t("div",{staticClass:"page-content"},[t("portal-form",{ref:"searchFormRef",attrs:{searchBtnLoading:e.searchLoading,"form-config-list":e.formConfigList,formRules:e.dateValidate,"form-data":e.formData},on:{"reset-btn-click":e.resetSearch,"search-btn-click":e.search}}),t("div",{staticClass:"table-container"},[t("div",{staticClass:"table-operate-header"},[t("span"),t("div",{staticClass:"right-btn"},[t("el-select",{attrs:{size:"small",clearable:!1,placeholder:e.$t("common.placeholder.sortBy")+""},on:{change:e.handleCommand},model:{value:e.sortTime,callback:function(t){e.sortTime=t},expression:"sortTime"}},e._l(e.sortData,(function(e){return t("el-option",{key:e.label,attrs:{value:e.value,label:e.label}})})),1)],1)]),t("table-page",{ref:"workflowTableRef",staticClass:"initiated-workflow-table",attrs:{columns:e.columns,sortArr:["creationTime","dueTime"],getTableData:e.getTableData,"has-pagination":e.hasPagination,pagination:e.paginationConfig,"is-search":e.isSearch},scopedSlots:e._u([{key:"operation",fn:function(a){return e.detailBtnIsShow(a.data.row)&&e.hasPerm("WF_MYTASK_HISTORY_VIEW_BTN")?[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleDetail(a.data.row)}}},[e._v(e._s(e.$t("common.label.detail")))])]:void 0}},{key:"taskStatus",fn:function(a){return[t("div",{staticClass:"flex flex-align"},[t("span",{staticClass:"status-circle",style:e.statusStyle(a.data.row)}),t("span",[e._v(e._s(a.data.row.status))])])]}}],null,!0)})],1)],1),t("div",{staticClass:"page-dialog"},[t("portal-dialog",{ref:"selectTaskNameDialogRef",staticClass:"select-task-name",attrs:{title:"Select Task Name",dialogVisible:e.taskNameDialogVisible,searchForm:e.taskNameSearchForm,needSearchFormBottomLine:!0,formRules:e.formRules,dialogTable:e.dialogTable,searchLoading:e.taskNameSearchLoading},on:{"update:dialogVisible":function(t){e.taskNameDialogVisible=t},"update:dialog-visible":function(t){e.taskNameDialogVisible=t},"update:searchLoading":function(t){e.taskNameSearchLoading=t},"update:search-loading":function(t){e.taskNameSearchLoading=t},"close-dialog":e.closeDialog,"search-reset":e.selectTaskDialogReset,"cancel-btn-click":e.closeDialog,"confirm-btn-click":e.comfirmTaskNameHandler}}),t("portal-dialog",{ref:"selectOperatorDialogRef",staticClass:"select-operator-dialog",attrs:{title:"Select Operator",dialogVisible:e.selectOperatorDialogVisible,searchForm:e.selectOperatorSearchForm,needSearchFormBottomLine:!0,formRules:e.formRules,dialogTable:e.selectOperatorDialogTable,searchLoading:e.selectOperatorSearchLoading},on:{"update:dialogVisible":function(t){e.selectOperatorDialogVisible=t},"update:dialog-visible":function(t){e.selectOperatorDialogVisible=t},"close-dialog":e.selectOperatorCloseDialog,"search-reset":e.selectOperatorDialogReset,"cancel-btn-click":e.selectOperatorCloseDialog,"confirm-btn-click":e.comfirmselectOperator}})],1)])},r=[],i=a("3186"),s=a("4c09"),l=a("d91c"),n=a("a10b"),c=a("8e76"),m=a("5a0c"),d=a.n(m),h={name:"taskHistory",components:{PortalForm:i["a"],TablePage:s["a"],PortalDialog:l["a"]},data(){return{projectObj:{title:this.$t("TAC.taskHistoryManagement.title"),desc:this.$t("TAC.taskHistoryManagement.desc")},searchLoading:!1,formData:{taskNo:"",priority:"",taskName:"",taskType:"",status:"",dueTime:"",creationTime:"",currentHandler:""},dateValidate:Object(n["a"])(),tempTaskName:"",curSelectTaskNameToTaskType:"",tempCurrentHandler:"",sortTime:"",searchFormPriority:[{label:"All",value:""}],searchFormTaskType:[{label:"All",value:""}],searchFormStatus:[{label:"All",value:""}],sortData:[],columns:[{label:this.$t("TAC.myTodo.taskNo"),prop:"workflowId",align:"left",width:"150px"},{label:this.$t("TAC.myTodo.description"),prop:"description",align:"left",width:"200px"},{label:this.$t("TAC.myTodo.priority"),prop:"priority",align:"left",width:"150px"},{label:this.$t("TAC.myTodo.creationTime"),prop:"creationTime",width:"150px",align:"left","sort-method":(e,t)=>e.creationTime>t.creationTime?1:-1},{label:this.$t("TAC.taskHistoryManagement.endTime"),prop:"dueTime",width:"150px",align:"left","sort-method":(e,t)=>e.dueTime>t.dueTime?1:-1},{label:this.$t("TAC.taskHistoryManagement.initiator"),prop:"initiator",align:"left",width:"150px"},{label:this.$t("TAC.myInitiatedWorkFlow.status"),prop:"status",align:"left",width:"150px",__slotName:"taskStatus","sort-method":(e,t)=>e.status>t.status?1:-1},{label:this.$t("TAC.taskHistoryManagement.processResult"),prop:"processResult",align:"left",width:"150px"},{label:this.$t("TAC.taskHistoryManagement.currentHandler"),prop:"currentHandler",align:"left",width:"150px"},{label:this.$t("TAC.myTodo.taskType"),prop:"taskType",align:"left",width:"150px"},{label:this.$t("TAC.myInitiatedWorkFlow.operation"),prop:"operation",align:"left",width:"150px",__slotName:"operation",fixed:"right"}],paginationConfig:{total:0,pageIndex:1,pageSize:10},hasPagination:!1,isSearch:!1,taskNameDialogVisible:!1,taskNameSearchFormData:{taskName:"",taskType:""},dialogTable:{columns:[{label:this.$t("TAC.myTodo.taskName"),prop:"taskName",align:"left"},{label:this.$t("TAC.myTodo.taskType"),prop:"taskType",align:"left"}],isSearch:!1,isSingleCheck:!0,hasPagination:!0,paginationConfig:{total:0,pageIndex:1,pageSize:5},getTableData:this.getTaskNameDialogData,singleChange:this.selectTaskName},taskNameSearchLoading:!1,selectOperatorDialogVisible:!1,selectOperatorSearchFormData:{userName:"",firstName:"",middleName:"",lastName:"",operatorType:"",shortCode:""},formRules:Object(n["c"])(),pickerOptions:{onPick:({maxDate:e,minDate:t})=>{this.selectDate=t.getTime(),e&&(this.selectDate="")},disabledDate:e=>{if(""!==this.selectDate){const t=2592e6,a=this.selectDate-t,o=this.selectDate+t;return e.getTime()<a||e.getTime()>o}}},selectOperatorDialogTable:{columns:[{label:this.$t("TAC.myTodo.userName"),prop:"userName",align:"left"},{label:this.$t("TAC.myTodo.firstName"),prop:"firstName",align:"left"},{label:this.$t("TAC.myTodo.middleName"),prop:"middleName",align:"left"},{label:this.$t("TAC.myTodo.lastName"),prop:"lastName",align:"left"}],isSearch:!1,isSingleCheck:!0,hasPagination:!0,paginationConfig:{total:0,pageIndex:1,pageSize:5},getTableData:this.getHandlerData,singleChange:this.selectOperator},selectOperatorId:"",newSearchType:!1,selectOperatorSearchLoading:!1,selectRoleFormConfigList:[{label:this.$t("TAC.myTodo.roleName"),key:"roleName",prop:"roleName",comp:"el-input",bind:{clearable:!0,placeholder:this.$t("common.placeholder.enter")}},{label:this.$t("TAC.myTodo.roleCategory"),key:"roleCategory",prop:"roleCategory",comp:"el-select",option:[{value:"all",label:"All"}],bind:{placeholder:this.$t("common.placeholder.enter")}}],selectRoleSearchFormData:{roleName:"",roleCategory:""},tempOptConfigData:[],tempOptFormData:{},tempOptTableCol:[],assignRoleFormConfigList:[{label:this.$t("TAC.myTodo.roleName"),key:"roleName",prop:"roleName",comp:"el-input",bind:{clearable:!0,placeholder:this.$t("common.placeholder.enter")}},{label:this.$t("TAC.myTodo.roleCategory"),key:"roleCategory",prop:"roleCategory",comp:"el-select",option:[{value:"all",label:"All"}],bind:{placeholder:this.$t("common.placeholder.enter")}}],assignRoleSearchFormData:{roleName:"",roleCategory:""},tempConfig:{label:this.$t("TAC.activeTaskManagement.shortCode"),key:"shortCode",prop:"shortCode",comp:"el-input",bind:{clearable:!0,placeholder:this.$t("common.placeholder.enter")}}}},computed:{formConfigList(){return[{label:this.$t("TAC.myTodo.taskNo"),key:"taskNo",prop:"taskNo",comp:"el-input",bind:{clearable:!0,placeholder:this.$t("common.placeholder.enter")}},{label:this.$t("TAC.myTodo.priority"),key:"priority",prop:"priority",comp:"el-select",options:this.searchFormPriority,bind:{placeholder:this.$t("common.placeholder.enter")}},{formItemClass:"org-short-code",label:this.$t("TAC.myTodo.taskName"),key:"taskName",prop:"taskName",comp:"el-input",bind:{clearable:!0,placeholder:this.$t("common.placeholder.select")},slots:[{comp:"el-link",name:"append",class:"short-code-icon",bind:{icon:"el-icon-more",underline:!1},event:{click:()=>{this.taskNameDialogVisible=!0,this.taskNameSearchForm.formData.taskType=this.searchFormTaskType[0].value,this.dialogTable.isSearch=!0}}}]},{label:this.$t("TAC.myTodo.taskType"),key:"taskType",prop:"taskType",comp:"el-select",options:this.searchFormTaskType,bind:{placeholder:this.$t("common.placeholder.select")}},{formItemClass:"org-short-code",label:this.$t("TAC.taskHistoryManagement.Handler"),key:"currentHandler",prop:"currentHandler",comp:"el-input",bind:{clearable:!0,placeholder:this.$t("common.placeholder.select")},slots:[{comp:"el-link",name:"append",class:"short-code-icon",bind:{icon:"el-icon-more",underline:!1},event:{click:()=>{this.selectOperatorDialogVisible=!0,this.selectOperatorSearchForm.formData.operatorType="spOperator"}}}]},{label:this.$t("TAC.myTodo.status"),key:"status",prop:"status",comp:"el-select",options:this.searchFormStatus,bind:{placeholder:this.$t("common.placeholder.enter")}},{label:this.$t("TAC.myTodo.creationTime"),formItemClass:"form-special-date-box",sameGroup:!0,prop:"creationTime",comp:[{key:"creationTime",comp:"el-date-picker",bind:{placeholder:this.$t("common.placeholder.enter"),align:"right",type:"datetimerange",format:"dd/MM/yyyy HH:mm:ss","picker-options":this.pickerOptions,"range-separator":"~","value-format":"yyyy-MM-dd HH:mm:ss","default-time":["00:00:00","23:59:59"],"start-placeholder":"Please select","end-placeholder":"Please select"}},{comp:"i",class:"el-icon-date data_icon"}]},{formItemClass:"due-time",label:this.$t("TAC.taskHistoryManagement.endTime"),prop:"dueTime",key:"dueTime",comp:"el-date-picker",bind:{type:"datetime",format:"dd/MM/yyyy HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:this.$t("common.placeholder.select")}}]},taskNameSearchForm(){return{formConfigList:[{formItemClass:"taskName",label:this.$t("TAC.myTodo.taskName"),key:"taskName",prop:"taskName",comp:"el-input",bind:{clearable:!0,placeholder:this.$t("common.placeholder.enter")}},{label:this.$t("TAC.myTodo.taskType"),key:"taskType",prop:"taskType",comp:"el-select",options:this.searchFormTaskType,bind:{placeholder:this.$t("common.placeholder.select")}}],formData:this.taskNameSearchFormData}},selectOperatorSearchForm(){return{formConfigList:[{label:this.$t("TAC.myTodo.operatorType"),key:"operatorType",prop:"operatorType",comp:"el-select",options:[{value:"orgOperator",label:"Organization Operator"},{value:"spOperator",label:"SP Operator"}],bind:{placeholder:this.$t("common.placeholder.select")}},{label:this.$t("TAC.myTodo.userName"),key:"userName",prop:"userName",comp:"el-input",bind:{clearable:!0,placeholder:this.$t("common.placeholder.enter")}},{label:this.$t("TAC.myTodo.firstName"),key:"firstName",prop:"firstName",comp:"el-input",bind:{clearable:!0,placeholder:this.$t("common.placeholder.enter")}},{label:this.$t("TAC.myTodo.middleName"),key:"middleName",prop:"middleName",comp:"el-input",formItemClass:{isShow:!0},bind:{clearable:!0,placeholder:this.$t("common.placeholder.enter")}},{label:this.$t("TAC.myTodo.lastName"),key:"lastName",prop:"lastName",comp:"el-input",bind:{clearable:!0,placeholder:this.$t("common.placeholder.enter")}}],formData:this.selectOperatorSearchFormData}}},created(){this.formData.creationTime=[d()(new Date(new Date(d()().year(),d()().month(),d()().date(),0,0,0).getTime()-6048e5)).format("YYYY-MM-DD HH:mm:ss"),d()(new Date(d()().year(),d()().month(),d()().date(),23,59,59)).format("YYYY-MM-DD HH:mm:ss")],this.queryDictDataList()},watch:{selectOperatorSearchFormData:{handler(e){"orgOperator"===e.operatorType?5===this.selectOperatorSearchForm.formConfigList.length&&(this.newSearchType=!0,this.selectOperatorSearchForm.formConfigList.splice(1,0,this.tempConfig)):6===this.selectOperatorSearchForm.formConfigList.length&&(this.newSearchType=!1,this.selectOperatorSearchForm.formConfigList.splice(1,1)),""!==e.shortCode&&this.$refs.selectOperatorDialogRef.$refs.dialogSearchForm.clearValidate("shortCode")},deep:!0},newSearchType(e){this.selectOperatorDialogTable.getTableData=e?this.getOrgHandlerData:this.getHandlerData},formData:{handler(e){e.taskType!==this.curSelectTaskNameToTaskType&&(this.formData.taskName="")},deep:!0}},methods:{statusStyle(e){switch(e.status){case"Rejected":return{"background-color":""+this.GlobalStyleVariables.statusErrorColor};case"Cancelled":return{"background-color":""+this.GlobalStyleVariables.fillStrongColor};case"Expired":return{"background-color":""+this.GlobalStyleVariables.fillStrongColor};case"Completed":return{"background-color":""+this.GlobalStyleVariables.statusSuccessColor};default:break}},search(){this.$refs.searchFormRef.validate(e=>{e&&(this.searchLoading=!0,this.isSearch=!0)})},detailBtnIsShow(e){return e.viewFlag},async queryDictDataList(){let e=await Object(c["v"])({dictCodes:["CPS.WORKFLOW.CONFIGURATION.PRIORITY","CPS.TASK.TYPE","CPS.WORKFLOW.HISTORY.ORDER.STATUS","WORK_FLOW_HISTORY_SORT_TIME"]});e.header&&e.header.success&&(this.searchFormPriority=e.dictDetailsMap["CPS.WORKFLOW.CONFIGURATION.PRIORITY"],"All"!==this.searchFormPriority[0].label&&this.searchFormPriority.unshift({label:"All",value:""}),this.searchFormTaskType=e.dictDetailsMap["CPS.TASK.TYPE"],this.searchFormStatus=e.dictDetailsMap["CPS.WORKFLOW.HISTORY.ORDER.STATUS"],"All"!==this.searchFormStatus[0].label&&this.searchFormStatus.unshift({label:"All",value:""}),this.sortData=e.dictDetailsMap["WORK_FLOW_HISTORY_SORT_TIME"].map(e=>("Completion Time Oldest"===e.label&&(e.label="End Time Oldest"),"Completion Time Latest"===e.label&&(e.label=" End Time Latest"),e)),this.sortTime="CREATE_TIME_LATEST")},resetSearch(){this.$refs.searchFormRef.resetFields(),this.tempCurrentHandler="",this.selectOperatorId="",this.isSearch=!0},resConverseList(e,t){t.list=e.map(e=>{let t="";t="200"===e.taskPriority?"High":"100"===e.taskPriority?"Medium":"Low";let a="";this.searchFormTaskType.some(t=>{if(t.value===e.category)return a=t.label,!0});let o=e.createTime.split(" "),r=o[0].split("-"),i=r[2]+"/"+r[1]+"/"+r[0]+" "+o[1],s=e.completedTime.split(" "),l=s[0].split("-"),n=l[2]+"/"+l[1]+"/"+l[0]+" "+s[1];return{workflowId:e.taskId,description:e.taskDesc,workflowName:e.procDefId,workflowType:e.taskType,creationTime:i,dueTime:n,status:e.taskState,taskType:a,taskId:e.taskId,initiator:e.initiatorName,processResult:e.outComeType,priority:t,currentHandler:e.ownerName,viewFlag:e.viewFlag,formURL:e.formURL,processFlag:e.processFlag}})},async getTableData(){let e="";this.formData.taskType.length>1?this.searchFormTaskType.some(t=>{if(t.label===this.formData.taskType)return e=t.value,!0}):e=this.formData.taskType;let t={taskId:this.formData.taskNo,taskName:this.formData.taskName,category:e,priority:this.formData.priority,dueTime:this.formData.dueTime,status:this.formData.status,ownerId:this.selectOperatorId,createTimeFrom:this.formData.creationTime[0],createTimeTo:this.formData.creationTime[1],sortingMode:this.sortTime||"CREATE_TIME_LATEST",pageNo:this.paginationConfig.pageIndex,pageSize:this.paginationConfig.pageSize},a=await Object(c["k"])({taskVO:t});if(this.isSearch=!1,this.searchLoading=!1,a.header&&a.header.success)return a.taskDTOList.length>0?(this.hasPagination=!0,a.totalRecords=a.count,this.searchFormTaskType.length<2?(await this.queryDictDataList(),this.resConverseList(a.taskDTOList,a),a):(this.resConverseList(a.taskDTOList,a),a)):{header:a.header,list:[]};this.isSearch=!1},getHandlerData(){return new Promise(e=>{let t={operatorType:20,status:"03",userName:this.selectOperatorSearchFormData.userName,firstName:this.selectOperatorSearchFormData.firstName,middleName:this.selectOperatorSearchFormData.middleName,lastName:this.selectOperatorSearchFormData.lastName,pageNo:this.selectOperatorDialogTable.paginationConfig.pageIndex,pageSize:this.selectOperatorDialogTable.paginationConfig.pageSize};Object(c["h"])(t).then(t=>{if(this.selectOperatorDialogTable.isSearch=!1,t.list=t.list.map(e=>(e.id=e.identityId,e)),t.header&&t.header.success)return t.totalRecords=t.total,e(t);this.selectOperatorDialogTable.isSearch=!1})})},async getOrgHandlerData(){let e={shortCode:this.selectOperatorSearchFormData.shortCode,operatorName:this.selectOperatorSearchFormData.userName,selectType:"operator",status:"03",operatorType:30,pageSize:this.selectOperatorDialogTable.paginationConfig.pageSize,pageNo:this.selectOperatorDialogTable.paginationConfig.pageIndex},t=await Object(c["o"])(e);if(this.selectOperatorDialogTable.isSearch=!1,t.header&&t.header.success){let e=t.list.map(e=>(e.id=e.operatorId,e));return{header:t.header,list:e,totalRecords:t.totalSize}}this.selectOperatorDialogTable.isSearch=!1},comfirmTaskNameHandler(){if(this.formData.taskName=this.tempTaskName.taskName,"TRANSATION_AND_ACTION"===this.tempTaskName.taskType)this.formData.taskType="Transaction and Action",this.curSelectTaskNameToTaskType="Transaction and Action";else if(this.tempTaskName.taskType){let e=this.tempTaskName.taskType.toLocaleLowerCase().split("_").map(e=>e.replace(e[0],e[0].toLocaleUpperCase()));this.formData.taskType=e.join(" "),this.curSelectTaskNameToTaskType=e.join(" ")}this.taskNameDialogVisible=!1},selectTaskName(e){this.tempTaskName=e},async getTaskNameDialogData(){let e="",t="";this.searchFormTaskType.some(e=>{if(e.value===this.taskNameSearchFormData.taskType)return t=e.label,!0}),t&&"All"!==t&&(e="Transaction and Action"===t?"TRANSATION_AND_ACTION":t.toUpperCase().split(" ").join("_"));let a={taskNameCondition:this.taskNameSearchFormData.taskName,taskTypeCondition:e,pageNo:this.dialogTable.paginationConfig.pageIndex,pageSize:this.dialogTable.paginationConfig.pageSize},o=await Object(c["t"])(a);if(this.taskNameSearchLoading=!1,this.dialogTable.isSearch=!1,o.taskTypeList&&o.taskTypeList.length>0){this.taskNameCount=o.taskTypeList.length,this.taskNameHasData=!1;let e=o.taskTypeList.map(e=>(e.taskType=e.category,e)).slice((this.dialogTable.paginationConfig.pageIndex-1)*this.dialogTable.paginationConfig.pageSize,this.dialogTable.paginationConfig.pageIndex*this.dialogTable.paginationConfig.pageSize);return{header:{success:!0},list:e,totalRecords:o.taskTypeList.length}}},selectOperator(e){this.tempCurrentHandler=e.userName,this.selectOperatorId=e.identityId},handleDetail(e){this.openNewWindow({path:"detail",query:e})},closeDialog(){this.taskNameDialogVisible=!1},selectTaskDialogReset(){this.$refs.selectTaskNameDialogRef.$refs.dialogSearchForm.resetFields(),this.dialogTable.isSearch=!0},selectOperatorCloseDialog(){this.selectOperatorDialogVisible=!1,this.tempCurrentHandler="",this.selectOperatorId="",this.selectOperatorDialogReset()},selectOperatorDialogReset(){this.$refs.selectOperatorDialogRef.$refs.dialogSearchForm.resetFields(),Object.keys(this.$refs.selectOperatorDialogRef.$refs.dialogSearchForm.formData).forEach(e=>{this.$refs.selectOperatorDialogRef.$refs.dialogSearchForm.formData[e]=""}),this.newSearchType=!1,this.selectOperatorSearchForm.formData.operatorType="spOperator",this.$nextTick(()=>{this.selectOperatorDialogTable.isSearch=!0})},comfirmselectOperator(){this.formData.currentHandler=this.tempCurrentHandler,this.selectOperatorDialogVisible=!1},handleCommand(e){this.sortTime=e,this.isSearch=!0},assignEvent(){this.assignTaskDialogVisible=!0}}},p=h,u=(a("7b463"),a("2877")),g=Object(u["a"])(p,o,r,!1,null,"4d83f279",null);t["default"]=g.exports}}]);
//# sourceMappingURL=chunk-a2096f48.js.map