(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-748274a0"],{"02e3":function(e,t,r){"use strict";r.d(t,"e",(function(){return a})),r.d(t,"c",(function(){return o})),r.d(t,"y",(function(){return s})),r.d(t,"z",(function(){return i})),r.d(t,"w",(function(){return d})),r.d(t,"f",(function(){return l})),r.d(t,"u",(function(){return n})),r.d(t,"v",(function(){return c})),r.d(t,"x",(function(){return u})),r.d(t,"g",(function(){return h})),r.d(t,"s",(function(){return p})),r.d(t,"n",(function(){return m})),r.d(t,"r",(function(){return g})),r.d(t,"j",(function(){return b})),r.d(t,"l",(function(){return f})),r.d(t,"q",(function(){return O})),r.d(t,"m",(function(){return v})),r.d(t,"p",(function(){return I})),r.d(t,"k",(function(){return C})),r.d(t,"i",(function(){return y})),r.d(t,"h",(function(){return N})),r.d(t,"t",(function(){return S})),r.d(t,"d",(function(){return L})),r.d(t,"o",(function(){return $})),r.d(t,"a",(function(){return w})),r.d(t,"b",(function(){return D}));let a={required:!0,message:"Please enter content",trigger:"blur"},o={required:!0,message:"Please check content",trigger:"blur"},i={required:!0,message:"Please select content",trigger:"change"},s={pattern:/^[0-9a-zA-Z]*$/,message:"Must be number and letters.",trigger:"blur"},l={pattern:/^[+-]?[0-9]*$/,message:"Must be integer number.",trigger:"blur"},n={pattern:/[0-9]{4}/,message:"The MSISDN must contain at least 4 dligits",trigger:"blur"},d={pattern:/^[^@~`！!#$%^*（）()\-+=|,/<>《》?？;':\"“\[\]{}\\&]*$/,message:"Cannot contain special characters (~`!#$%^*()-+=|,/<>?;':\"[]{}\\&)",trigger:"blur"},c={pattern:/^[^@~`！!#$^*（）()\-+=|,/<>《》?？;':\"“\[\]{}\\&]*$/,message:"Cannot contain special characters (~`!#$^*()-+=|,/<>?;':\"[]{}\\&)",trigger:"blur"},u={pattern:/^[\w- ]+$/,message:"Please do not enter any special characters.",trigger:"blur"};L({minLen:0,maxLen:11});const h=L({minLen:0,maxLen:18}),p=(L({minLen:3,maxLen:3}),L({minLen:6,maxLen:16})),m=(L({minLen:8,maxLen:10}),L({minLen:8,maxLen:11}),L({minLen:4,maxLen:12})),g=L({minLen:6,maxLen:12}),b=L({minLen:0,maxLen:19}),f=L({minLen:0,maxLen:24}),O=L({minLen:0,maxLen:64}),v=(L({minLen:0,maxLen:100}),L({minLen:0,maxLen:256})),I=L({minLen:0,maxLen:512}),C=(L({minLen:8,maxLen:50}),L({minLen:1,maxLen:18})),y=L({minLen:0,maxLen:32}),N=L({minLen:0,maxLen:30}),S=L({minLen:9,maxLen:18});L({minLen:2,maxLen:256});function L({minLen:e=0,maxLen:t=100}){let r="";return r=e>0?`Must be between ${e} and ${t} characters`:`Must be less than ${t} characters`,{min:e,max:t,message:r,trigger:"blur"}}const $=L({minLen:0,maxLen:4});function w(e){let t=[];for(let r in e)e[r]&&e[r].toString().startsWith("%")&&1===e[r].length||!e[r]?t.push(!1):t.push(!0);return!t.every(e=>!1===e)}function D(e){return{validator:(t,r,a)=>{r&&r.startsWith("%")&&1===r.length?a(new Error(""+e)):a()},trigger:"blur"}}},"1d86":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"role-config business-portal-page"},[t("portal-header",{attrs:{projectObj:e.titleConfig,showBottomLine:!0}}),t("portal-form",{ref:"searchList",attrs:{"form-data":e.searchList,"form-config-list":e.formConfigList,searchBtnLoading:e.searchLoading,formRules:e.queryFormRules,searchBtnDisabled:!e.hasPerm("orgOperator"===e.activeName?"IC_OPERATOR_ORG_SEARCH_BTN":"IC_TACKCALL_ORG_SEARCH_BTN ")},on:{"common-enter-event":e.search,"reset-btn-click":e.reset,"search-btn-click":e.search}}),t("div",{staticClass:"table-list-container"},[t("div",{staticClass:"btn-region"},[t("div",{staticClass:"create-btn"},[t("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-plus",disabled:!e.hasPerm("IC_OPERATOR_ORG_ADD_BTN")},on:{click:e.addOrgOperator}},[e._v(" "+e._s(e.$t("common.button.create"))+" ")])],1),"organization"!==e.activeName&&"myOrganization"!==e.activeName?t("div",{staticClass:"right-btn"},[""!==e.sortCode?t("el-select",{staticClass:"selectSort",staticStyle:{width:"200px"},attrs:{placeholder:"Please Select",size:"small"},on:{change:e.handleCommandSort},model:{value:e.sortDataCode,callback:function(t){e.sortDataCode=t},expression:"sortDataCode"}},e._l(e.sort,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1):e._e(),t("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"Sort by...",size:"small"},on:{change:e.handleCommand},model:{value:e.sortCode,callback:function(t){e.sortCode=t},expression:"sortCode"}},e._l(e.todoInfoList.sortData,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1):e._e()]),t("table-page",{staticClass:"table-page",attrs:{size:"small","has-pagination":!0,columns:e.columns,initializingLoading:!1,pagination:e.paginationConfig,getTableData:e.getTableData,"is-search":e.refreshTableFlag,sortArr:"orgOperator"==e.activeName?e.sortArr:[]},scopedSlots:e._u([{key:"status",fn:function(r){return[t("div",{staticClass:"edit-button-container"},[""!==r.data.row.status?t("span",{staticClass:"status-circle",style:e.statusStyle(r.data.row.status)}):e._e(),t("span",{staticClass:"content-item"},[e._v(e._s(e.showStatus(r.data.row.status)))]),"03"!=r.data.row.status&&"04"!=r.data.row.status||e.initiatorIdentityId==r.data.row.orgOperatorId?e._e():t("el-link",{attrs:{underline:!1,disabled:!e.hasPerm("IC_CHANGEORGOPERATORSTATUS_BTN"),icon:"el-icon-edit"},on:{click:function(t){return e.showEditDialog(r.data.row)}}})],1)]}},{key:"roles",fn:function(r){return[t("span",[e._v(" "+e._s(r.data.row.role||"-")+" ")])]}},{key:"suspended",fn:function(t){return[e._v(" "+e._s(t.data.row.verifySuspend?"Yes":"No")+" ")]}},{key:"operation",fn:function(r){return[e.initiatorIdentityId!=r.data.row.orgOperatorId?t("el-button",{staticClass:"btn",attrs:{type:"text",size:"small"},on:{click:function(t){return e.handleDetail(r.data.row)}}},[e._v(" "+e._s(e.$t("common.label.detail"))+" ")]):e._e(),"06"!=r.data.row.status&&"00"!=r.data.row.status&&e.initiatorIdentityId!=r.data.row.orgOperatorId?t("span",{staticClass:"buttomBar"},[e._v("|")]):e._e(),"06"!=r.data.row.status&&"00"!=r.data.row.status&&e.initiatorIdentityId!=r.data.row.orgOperatorId?t("el-button",{staticClass:"btn",attrs:{type:"text",size:"small"},on:{click:function(t){return e.handleCloseDialog(r.data.row)}}},[e._v(" "+e._s(e.$t("common.button.close"))+" ")]):e._e()]}}])})],1),t("org-edit-status",{attrs:{editStatusVisible:e.statusDialogVisible,curStatus:e.oldStatus,receiverIdentityId:e.receiverIdentityId,newStatusList:e.newStatusList,isShowReason:"orgOperator"==e.activeName},on:{"update:editStatusVisible":function(t){e.statusDialogVisible=t},"update:edit-status-visible":function(t){e.statusDialogVisible=t},"update:curStatus":function(t){e.oldStatus=t},"update:cur-status":function(t){e.oldStatus=t},"update:receiverIdentityId":function(t){e.receiverIdentityId=t},"update:receiver-identity-id":function(t){e.receiverIdentityId=t},updateList:e.updateList}}),[t("el-dialog",{attrs:{title:e.$t("IDC.orgOperator.closeOperatorTitle"),visible:e.closeOperatorVisible,width:"448px","before-close":e.closeOperator},on:{"update:visible":function(t){e.closeOperatorVisible=t}}},[t("el-form",{ref:"closeOperatorForm",staticClass:"add-form",attrs:{"label-position":"top",model:e.closeOperatorForm,rules:e.closeOperatorFormRules}},[t("div",{staticClass:"close-note"},[e._v(e._s(e.closeNote))]),t("el-divider"),t("el-row",[t("p",{staticClass:"remark-reason"},[e._v(e._s(e.$t("IDC.orgOperator.remarkAndReason")))]),t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:e.$t("IDC.orgOperator.reason"),prop:"reason"}},[t("el-select",{attrs:{size:"small",placeholder:e.$t("common.placeholder.select")},model:{value:e.closeOperatorForm.reason,callback:function(t){e.$set(e.closeOperatorForm,"reason",t)},expression:"closeOperatorForm.reason"}},e._l(e.reasonList,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:e.$t("IDC.orgOperator.remark"),prop:"remark"}},[t("el-input",{attrs:{size:"small",type:"textarea",rows:"4",placeholder:e.$t("common.placeholder.enter")},model:{value:e.closeOperatorForm.remark,callback:function(t){e.$set(e.closeOperatorForm,"remark",t)},expression:"closeOperatorForm.remark"}})],1)],1)],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{size:"small"},on:{click:e.closeOperator}},[e._v(e._s(e.$t("common.button.cancel")))]),t("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{type:"primary",size:"small"},on:{click:e.closeOperatorSubmit}},[e._v(e._s(e.$t("common.button.submit")))])],1)],1)],t("portal-short-code",{attrs:{searchVisible:e.searchVisible,"short-code":e.searchList.shortCode,isSelect:!0},on:{"update:searchVisible":function(t){e.searchVisible=t},"update:search-visible":function(t){e.searchVisible=t},"update:shortCode":function(t){return e.$set(e.searchList,"shortCode",t)},"update:short-code":function(t){return e.$set(e.searchList,"shortCode",t)}}})],2)},o=[],i=r("c811"),s=r("4c09"),l=r("3186"),n=r("8f48"),d=r("4865"),c=r("02e3"),u=r("4e1a"),h=r("0360"),p=r("d8d3"),m={components:{PortalHeader:i["a"],TablePage:s["a"],PortalForm:l["a"],portalShortCode:n["a"],OrgEditStatus:u["a"]},name:"OrgOperator",props:{activeName:{type:String,default:"orgOperator"},propShortCode:{type:String,default:""}},data(){let e=(e,t,r)=>{if(!t)return r();Object(d["l"])(this.searchList.shortCode).then(e=>{if(e.header&&e.header.success)if("Exist"===e.check)r();else{if("NotExist"===e.check)return r(new Error("The Organization Short Code is not existed"));if("Invalid"===e.check)return r(new Error("The Organization Short Code is not invalid"))}}).catch(()=>r(new Error("The Organization Short Code Exception")))};return{sortDataCode:"",sortCode:"",checkNull:!1,todoInfoList:{sortData:[{label:"Sort by",value:""},{label:"Dare of Birth",value:"birthDay"},{label:"First Name",value:"firstName"},{label:"Last Name",value:"lastName"},{label:"Middle Name",value:"middleName"},{label:"Organization Short Code",value:"shortCode"},{label:"User Name",value:"userName"}]},sort:[{label:"Ascending",value:"true"},{label:"Descending",value:"false"}],sortBy:null,sortByMode:null,searchLoading:!1,refreshTableFlag:!1,searchVisible:!1,isReset:!1,paginationConfig:{total:0,pageIndex:1,pageSize:10},reasonList:[{label:"Not Use",value:"1"},{label:"Id Expired",value:"2"}],searchList:{identityId:"",shortCode:this.propShortCode,operatorId:"%",status:"",operatorName:"",roles:"",username:"%",firstName:"%",middleName:"%",lastName:"%",birthday:""},sortArr:["identityId","orgOperatorId","organizationCode","operatorId","status","operatorName","firstName","middleName","lastName","dateBirth","verifySuspend","shortCode","userName","birthday"],oldStatus:"",receiverIdentityId:"",statusDialogVisible:!1,queryFormRules:{identityId:[c["v"]],operatorId:[c["v"],c["g"]],operatorName:[c["v"],c["s"]],shortCode:[c["v"],{validator:e,trigger:"blur"},c["l"]],username:[c["v"],c["i"]],firstName:[c["v"],c["h"]],middleName:[c["v"],c["h"]],lastName:[c["v"],c["h"]]},availableRoleList:[],closeOperatorVisible:!1,closeNote:"",closeOperatorForm:{originalStatus:"",reason:"",remark:"",receiverIdentityId:""},closeOperatorFormRules:{reason:[c["z"]],remark:[{required:!0,message:"Please enter content",trigger:"blur"}]},orgOperatorId:"",initiatorIdentityId:"",newStatusList:[]}},computed:{statusStyle(){return e=>{switch(e){case"03":return{"background-color":"#658DF9"};case"06":return{"background-color":""+this.GlobalStyleVariables.fillStrongColor};case"07":return{"background-color":""+this.GlobalStyleVariables.statusSuccessColor};case"00":return{"background-color":""+this.GlobalStyleVariables.backgroundColor,border:"1px solid "+this.GlobalStyleVariables.initialColor};case"02":return{"background-color":""+this.GlobalStyleVariables.backgroundColor,border:"1px solid "+this.GlobalStyleVariables.initialColor};case"04":return{"background-color":""+this.GlobalStyleVariables.statusColorwarning};case"05":return{"background-color":""+this.GlobalStyleVariables.fillStrongColor};case"08":return{"background-color":""+this.GlobalStyleVariables.fillStrongColor};default:return}}},titleConfig(){return"organization"==this.activeName?{title:this.$t("IDC.orgOperator.oragationTitle"),desc:this.$t("IDC.orgOperator.myOragationDesc")}:"myOrganization"==this.activeName?{title:"",desc:this.$t("IDC.orgOperator.myOragationDesc")}:{title:this.$t("IDC.orgOperator.orgOperator"),desc:this.$t("IDC.orgOperator.myOragationDesc")}},formConfigList(){return"organization"==this.activeName||"myOrganization"==this.activeName?[{label:this.$t("IDC.orgOperator.identityID"),key:"identityId",comp:"el-input",bind:{clearable:!0,placeholder:this.$t("common.placeholder.enter")}},{label:this.$t("IDC.orgOperator.operatorID"),key:"operatorId",comp:"el-input",bind:{clearable:!0,placeholder:this.$t("common.placeholder.enter")}},{label:this.$t("IDC.organizationOperatorDetail.label.Role"),key:"roles",prop:"roles",comp:"el-select",options:this.availableRoleList,bind:{clearable:!1,placeholder:this.$t("common.placeholder.select")}},{label:this.$t("IDC.organizationOperatorDetail.label.IdentityStatus"),key:"status",comp:"el-select",bind:{placeholder:this.$t("common.placeholder.select"),id:"status"},options:[{label:"All",value:"All"},{value:"03",label:"Active"},{value:"00",label:"New"},{value:"02",label:"Pending Active"},{value:"04",label:"Suspended"},{value:"05",label:"Frozen"},{value:"06",label:"Closed"},{value:"07",label:"Capped"},{value:"08",label:"Dormant"}]},{label:this.$t("IDC.orgOperator.userName"),key:"username",comp:"el-input",bind:{clearable:!0,placeholder:this.$t("common.placeholder.enter")}}]:[{label:this.$t("IDC.orgOperator.identityID"),key:"identityId",comp:"el-input",bind:{clearable:!0,placeholder:this.$t("common.placeholder.enter")}},{formItemClass:"org-short-code",label:this.$t("IDC.orgOperator.orgShortCode"),key:"shortCode",comp:"el-input",bind:{placeholder:this.$t("common.placeholder.select"),clearable:!0},slots:[{name:"append",comp:"el-link",class:"short-code-icon",bind:{icon:"el-icon-more",underline:!1},event:{click:this.openVisible}}]},{label:this.$t("IDC.orgOperator.operatorID"),key:"operatorId",comp:"el-input",bind:{clearable:!0,placeholder:this.$t("common.placeholder.enter")}},{label:this.$t("IDC.organizationOperatorDetail.label.Role"),key:"roles",prop:"roles",comp:"el-select",options:this.availableRoleList,bind:{clearable:!1,placeholder:this.$t("common.placeholder.select")}},{label:this.$t("common.label.status"),key:"status",comp:"el-select",bind:{placeholder:this.$t("common.placeholder.select"),id:"status"},options:[{label:"All",value:"All"},{label:"Active",value:"03"},{label:"Closed",value:"06"},{label:"Dormant",value:"07"},{label:"New",value:"00"},{label:"Pending Active",value:"02"},{label:"Suspended",value:"04"}]},{label:this.$t("IDC.orgOperator.userName"),key:"username",comp:"el-input",bind:{clearable:!0,placeholder:this.$t("common.placeholder.enter")}},{label:"First Name",key:"firstName",comp:"el-input",bind:{id:"firstName",clearable:!0,placeholder:this.$t("common.placeholder.enter")}},{label:"Middle Name",key:"middleName",comp:"el-input",bind:{id:"middleName",clearable:!0,placeholder:this.$t("common.placeholder.enter")}},{label:"Last Name",key:"lastName",comp:"el-input",bind:{id:"lastName",clearable:!0,placeholder:this.$t("common.placeholder.enter")}},{label:"Date of Birth",key:"birthday",comp:"el-date-picker",bind:{id:"birthday",type:"date","value-format":"yyyyMMdd",placeholder:"Please select",format:"dd-MM-yyyy"}}]},columns(){return"organization"==this.activeName?[{label:this.$t("IDC.orgOperator.identityID"),prop:"orgOperatorId",align:"left","min-width":"185"},{label:this.$t("IDC.orgOperator.operatorID"),prop:"operatorId",align:"left","min-width":"165"},{label:this.$t("IDC.organizationOperatorDetail.label.Role"),prop:"role",align:"left","min-width":"200",__slotName:"roles"},{label:this.$t("IDC.organizationOperatorDetail.label.IdentityStatus"),prop:"status",align:"left","min-width":"165",__slotName:"status"},{label:this.$t("IDC.orgOperator.userName"),prop:"userName",align:"left","min-width":"135"},{label:this.$t("IDC.orgOperator.operation"),prop:"operation",align:"left",width:"165",__slotName:"operation",fixed:"right"}]:"myOrganization"==this.activeName?[{label:this.$t("IDC.orgOperator.identityID"),prop:"orgOperatorId",align:"left","min-width":"185"},{label:this.$t("IDC.orgOperator.operatorID"),prop:"operatorId",align:"left","min-width":"165"},{label:this.$t("IDC.organizationOperatorDetail.label.Role"),prop:"role",align:"left","min-width":"165",__slotName:"roles"},{label:this.$t("IDC.organizationOperatorDetail.label.IdentityStatus"),prop:"status",align:"left","min-width":"165",__slotName:"status"},{label:this.$t("IDC.orgOperator.operation"),prop:"operation",align:"left",width:"165",__slotName:"operation",fixed:"right"}]:[{label:this.$t("IDC.orgOperator.identityID"),prop:"identityId",align:"left","min-width":"185","sort-method":(e,t)=>e.identityId>t.identityId?1:-1},{label:this.$t("IDC.orgOperator.orgShortCode"),prop:"shortCode",align:"left","min-width":"250","sort-method":(e,t)=>e.shortCode>t.shortCode?1:-1},{label:this.$t("IDC.orgOperator.operatorID"),prop:"operatorId",align:"left","min-width":"165","sort-method":(e,t)=>e.operatorId>t.operatorId?1:-1},{label:this.$t("IDC.orgOperator.status"),prop:"status",align:"left","min-width":"165",__slotName:"status","sort-method":(e,t)=>e.status>t.status?1:-1},{label:this.$t("IDC.orgOperator.userName"),prop:"userName",align:"left","min-width":"135","sort-method":(e,t)=>e.userName>t.userName?1:-1},{label:this.$t("IDC.orgOperator.firstName"),prop:"firstName",align:"left","min-width":"135","sort-method":(e,t)=>e.firstName>t.firstName?1:-1},{label:this.$t("IDC.orgOperator.middleName"),prop:"middleName",align:"left","min-width":"155","sort-method":(e,t)=>e.middleName>t.middleName?1:-1},{label:this.$t("IDC.orgOperator.lastName"),prop:"lastName",align:"left","min-width":"135","sort-method":(e,t)=>e.lastName>t.lastName?1:-1},{label:this.$t("IDC.orgOperator.dateBirth"),prop:"birthday",align:"left","min-width":"155","sort-method":(e,t)=>e.birthday>t.birthday?1:-1},{label:this.$t("IDC.orgOperator.suspended"),prop:"verifySuspend",align:"left","min-width":"135","sort-method":(e,t)=>e.verifySuspend>t.verifySuspend?1:-1,__slotName:"suspended"},{label:this.$t("IDC.orgOperator.operation"),prop:"operation",align:"left",fixed:"right",width:"165",__slotName:"operation"}]}},watch:{propShortCode(e){this.searchList.shortCode=e}},methods:{showStatus(e){return p["c"][e]||"-"},updateList(){this.refreshTableFlag=!0},handleCommand(e){this.sortBy=e,this.sortByMode="",this.sortDataCode="",this.checkNullFn(),this.refreshTableFlag=!0,this.paginationConfig.pageIndex=1},handleCommandSort(e){this.sortByMode=e,this.checkNullFn(),this.refreshTableFlag=!0,this.paginationConfig.pageIndex=1},reset(){this.isReset=!0,this.searchList={identityId:"",shortCode:this.propShortCode,operatorId:"%",status:"All",operatorName:"",roles:"",username:"%",firstName:"%",middleName:"%",lastName:"%",birthday:""},this.$refs["searchList"].innerFormRef.resetFields(),this.sortBy="",this.sortByMode="",this.sortDataCode="",this.sortCode="",this.refreshTableFlag=!0,"organization"!==this.activeName&&"myOrganization"!==this.activeName||(this.refreshTableFlag=!0,this.searchList.shortCode=this.propShortCode)},checkNullFn(){""===this.searchList.operatorId&&""===this.searchList.firstName&&""===this.searchList.middleName&&""===this.searchList.lastName&&""===this.searchList.username&&""===this.searchList.roles?this.checkNull=!0:this.checkNull=!1},search(){this.checkNullFn(),this.searchLoading=!0,this.refreshTableFlag=!0,this.paginationConfig.pageIndex=1,this.$refs["searchList"].innerFormRef.validate(e=>{if(!e)return this.searchLoading=!1,!1;this.refreshTableFlag=!0,this.paginationConfig.pageIndex=1})},openVisible(){this.searchVisible=!0},addOrgOperator(){let e="";e="/mainPage/identifierCenter/organizationInfo/orgOperator/create",this.openNewWindow({path:e})},handleDetail(e){let t={orgOperatorId:e.identityId,identityId:e.organizationId},r="";r="/mainPage/identifierCenter/organizationInfo/orgOperator/detail",this.openNewWindow({path:r,query:{data:encodeURIComponent(JSON.stringify(t))}})},showEditDialog(e){this.getListNewStatus(e.status),this.statusDialogVisible=!0,this.receiverIdentityId=e.orgOperatorId,this.statusCode=e.status,this.oldStatus=e.status},getListNewStatus(e){"03"===e?this.newStatusList=[{label:"Suspended",value:"04"}]:"04"===e&&(this.newStatusList=[{label:"Active",value:"03"}])},handleCloseDialog(e){this.closeOperatorVisible=!0,this.closeNote=this.$t("IDC.orgOperator.closeNote",{obj:e.orgOperatorId}),this.orgOperatorId=e.orgOperatorId,this.closeOperatorForm.originalStatus=e.status,this.closeOperatorForm.receiverIdentityId=e.orgOperatorId},closeOperator(){this.closeOperatorVisible=!1,this.$refs["closeOperatorForm"].resetFields()},closeOperatorSubmit(){this.$refs["closeOperatorForm"].validate(e=>{if(e){let e=this.closeOperatorForm;Object(d["n"])(e).then(e=>{if(this.closeOperatorVisible=!1,e.header&&e.header.success){let e=this.$t("IDC.orgOperator.closeSuccessTip",{obj:this.orgOperatorId});this.$refs["closeOperatorForm"].resetFields(),this.$message.success(e),this.refreshTableFlag=!0}})}})},getTableData(){let e={pageNo:this.paginationConfig.pageIndex,pageSize:this.paginationConfig.pageSize,shortCode:this.searchList.shortCode,operatorIdentityId:this.searchList.identityId,operatorId:this.searchList.operatorId,status:this.searchList.status,roleId:this.searchList.roles,firstName:this.searchList.firstName,middleName:this.searchList.middleName,lastName:this.searchList.lastName,operatorName:this.searchList.username,birthday:this.searchList.birthday};(this.sortBy||this.sortByMode)&&(e.sortingQueryResultsBy=this.sortBy||"",e.sortAcs=this.sortByMode||null);let t={firstName:e.firstName,middleName:e.middleName,lastName:e.lastName,operatorName:e.operatorName,roleId:e.roleId,operatorId:e.operatorId};return Object(c["a"])(t)?new Promise(t=>{this.isReset?(t(),this.isReset=!1,this.refreshTableFlag=!1,this.searchLoading=!1):Object(d["r"])(e).then(e=>{e.header&&e.header.success?(e.list=e.list||[],e.totalRecords=Number(e.totalRecord)||0,e.list.map(e=>{e.orgOperatorId=e.identityId}),t(e)):(e.list=[],e.totalRecords=0,this.$message.error(e.header.responseDesc),t(e))}).finally(()=>{this.refreshTableFlag=!1,this.searchLoading=!1})}):(this.$modal.msgError("Specify at least one search condition of First Name, Middle Name, Last Name, Role, User Name, and Operator ID."),this.refreshTableFlag=!1,void(this.searchLoading=!1))},async getRoleSelect(){let e={};e.shortCode=this.searchList.shortCode,e.roleType="30";let t=await Object(d["A"])(e);if(t.header&&t.header.success){let e=t.grantRoleList||[];this.availableRoleList=e.map(e=>({value:e.roleCode,label:e.roleName})),this.availableRoleList.unshift({value:"",label:"All"})}},showRoleName(e){let t=this.availableRoleList.filter(t=>e.some(e=>t.value===e.roleId));return t.map(e=>e.label).join(",")||"-"}},created(){"organization"==this.activeName||"myOrganization"==this.activeName?this.getRoleSelect():(this.isReset=!0,this.getRoleSelect(),this.propShortCode=""),this.searchList.status="All",this.searchList.roles=""},mounted(){this.searchList.shortCode&&this.searchList.shortCode.startsWith("%")&&1===this.searchList.shortCode.length?(this.searchList={identityId:"",shortCode:this.propShortCode,operatorId:"",msisdn:"",status:"All",roles:"",username:""},this.refreshTableFlag=!0,this.isReset=!1):this.searchList.shortCode&&(this.searchList={identityId:"",shortCode:this.propShortCode,operatorId:"",msisdn:"",status:"All",roles:"",username:""},this.isReset=!1),this.initiatorIdentityId=h["default"].get("initiatorIdentityId")}},g=m,b=(r("4aa3"),r("2877")),f=Object(b["a"])(g,a,o,!1,null,"c11ba610",null);t["default"]=f.exports},4865:function(e,t,r){"use strict";r.d(t,"r",(function(){return i})),r.d(t,"s",(function(){return s})),r.d(t,"g",(function(){return l})),r.d(t,"u",(function(){return n})),r.d(t,"n",(function(){return d})),r.d(t,"l",(function(){return c})),r.d(t,"m",(function(){return u})),r.d(t,"a",(function(){return h})),r.d(t,"A",(function(){return p})),r.d(t,"v",(function(){return m})),r.d(t,"c",(function(){return g})),r.d(t,"w",(function(){return b})),r.d(t,"y",(function(){return f})),r.d(t,"x",(function(){return O})),r.d(t,"t",(function(){return v})),r.d(t,"o",(function(){return I})),r.d(t,"j",(function(){return C})),r.d(t,"d",(function(){return y})),r.d(t,"z",(function(){return N})),r.d(t,"k",(function(){return S})),r.d(t,"f",(function(){return L})),r.d(t,"q",(function(){return w})),r.d(t,"p",(function(){return D})),r.d(t,"B",(function(){return k})),r.d(t,"h",(function(){return _})),r.d(t,"b",(function(){return F})),r.d(t,"e",(function(){return R})),r.d(t,"i",(function(){return x}));var a=r("0bbd"),o=r("5f9a");function i(e){return Object(a["a"])({url:"/fintech/v1/orgOperator/queryOrgOperatorList",method:"post",data:e})}function s(e){return Object(a["a"])({url:Object(o["a"])("/fintech/v1/organization/list",e),method:"get"})}function l(e){return Object(a["a"])({url:Object(o["a"])("/fintech/v1/orgOperator/changeStatus"),method:"post",data:e})}function n(e){return Object(a["a"])({url:Object(o["a"])("/fintech/v1/orgOperator/status",e),method:"get"})}function d(e){return Object(a["a"])({url:Object(o["a"])("/fintech/v1/orgOperator/closeOrgOperator"),method:"post",data:e})}function c(e){return Object(a["a"])({url:"/fintech/v1/identity/verify/"+e,method:"post",data:{}})}function u(e){return Object(a["a"])({url:"/fintech/v1/identity/verify/userName",method:"post",data:e})}function h(e){return Object(a["a"])({url:"/fintech/v1/orgOperator/create",method:"post",data:e})}function p(e){return Object(a["a"])({url:"/fintech/v1/orgOperator/roles",method:"post",data:e})}function m(e){return Object(a["a"])({url:Object(o["a"])("/fintech/v1/orgOperator/detail",e),method:"get"})}function g(e){return Object(a["a"])({url:"/fintech/v1/orgOperator/changeIdentityLanguage",method:"post",data:e})}function b(e){return Object(a["a"])({url:"/fintech/v1/orgOperator/pin/reset",method:"post",data:e})}function f(e){return Object(a["a"])({url:"/fintech/v1/orgOperator/pin/unlock",method:"post",data:e})}function O(e){return Object(a["a"])({url:"/fintech/v1/orgOperator/pin/setPassword",method:"post",data:e})}function v(e){return Object(a["a"])({url:"/fintech/v1/orgOperator/getOrgOperatorRuleProfile",method:"post",data:e})}function I(e){return Object(a["a"])({url:"/fintech/v1/orgOperator/getRule",method:"get",data:e})}function C(e){return Object(a["a"])({url:"/fintech/v1/orgOperator/checkMsisdn",method:"post",data:e})}function y(e){return Object(a["a"])({url:"/fintech/v1/orgOperator/changeMsisdn",method:"post",data:e})}function N(e){return Object(a["a"])({url:"/fintech/v1/orgOperator/resetPassword",method:"post",data:e})}function S(e){return Object(a["a"])({url:"/fintech/v1/identity/verify/operatorId",method:"post",data:e})}function L(e){return Object(a["a"])({url:"/fintech/v1/orgOperator/changeOrgOperatorRuleProfile",method:"post",data:e})}const $="/fintech/v1/notification_type";function w(e){return Object(a["a"])({url:Object(o["a"])($+"/list",e),method:"get"})}function D(e){return Object(a["a"])({url:`${$}/queryInfo?typeId=${e}`,method:"get"})}function k(e){return Object(a["a"])({url:"/fintech/v1/notification/send",method:"post",data:e})}function _(e){return Object(a["a"])({url:"fintech/v1/orgOperator/checkAPIPasswordFormat",method:"post",data:e})}function F(e){return Object(a["a"])({url:"fintech/v1/orgOperator/changeAuthentication",method:"post",data:e})}function R(e){return Object(a["a"])({url:Object(o["a"])("/fintech/v1/changeOrgOperatorRole"),method:"post",data:e})}function x(e){return Object(a["a"])({url:"/fintech/v1/orgOperator/checkInputKyc",method:"post",data:e})}},"4aa3":function(e,t,r){"use strict";r("8561")},"4e1a":function(e,t,r){"use strict";var a=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:e.$t("IDC.orgOperator.editStatus"),visible:e.editStatusVisible,width:"448px","before-close":e.closeEdit},on:{"update:visible":function(t){e.editStatusVisible=t}}},[t("el-form",{ref:"editForm",staticClass:"add-form",attrs:{"label-position":"top",model:e.editForm,rules:e.editFormRules}},[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:e.$t("IDC.orgOperator.currentStatus"),prop:"oldStatus"}},[t("div",{staticClass:"text"},[t("span",{staticClass:"text",domProps:{textContent:e._s(e.showStatus(e.editForm.oldStatus))}})])])],1),t("el-col",{staticClass:"new-status",attrs:{span:24}},[t("el-form-item",{attrs:{label:e.$t("IDC.orgOperator.newStatus"),prop:"newStatus"}},[t("el-select",{attrs:{size:"small",placeholder:e.$t("common.placeholder.select")},model:{value:e.editForm.newStatus,callback:function(t){e.$set(e.editForm,"newStatus",t)},expression:"editForm.newStatus"}},e._l(e.newStatusList,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),t("el-col",{attrs:{span:24}},[e.isShowReason?t("div",{staticClass:"remark-reason"},[e._v(e._s(e.$t("IDC.orgOperator.remarkAndReason")))]):e._e()]),e.isShowReason?t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:e.$t("IDC.orgOperator.reason"),prop:"reasonId"}},[t("el-select",{attrs:{size:"small",placeholder:e.$t("common.placeholder.select")},model:{value:e.editForm.reasonId,callback:function(t){e.$set(e.editForm,"reasonId",t)},expression:"editForm.reasonId"}},e._l(e.reasonList,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1):e._e(),t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:e.$t("IDC.orgOperator.remark"),prop:"remark"}},[t("el-input",{attrs:{size:"small",type:"textarea",rows:"4",placeholder:e.$t("common.placeholder.enter")},model:{value:e.editForm.remark,callback:function(t){e.$set(e.editForm,"remark",t)},expression:"editForm.remark"}})],1)],1)],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{size:"small"},on:{click:e.closeEdit}},[e._v(e._s(e.$t("common.button.cancel")))]),t("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{loading:e.submitLoading,type:"primary",size:"small"},on:{click:e.editSubmit}},[e._v(e._s(e.$t("common.button.submit")))])],1)],1)},o=[],i=r("4865"),s=r("d8d3"),l={name:"OrgEditStatus",props:{editStatusVisible:{type:Boolean,default:!1},curStatus:{type:String,default:()=>""},receiverIdentityId:{type:String,default:()=>""},currentPage:{type:String,default:()=>""},isShowReason:{type:Boolean,default:!0},newStatusList:{type:Array,default:()=>[]},submitLoading:{type:Boolean,default:!1}},data(){return{editForm:{oldStatus:"",newStatus:"",reasonId:"",remark:"",receiverIdentityId:""},reasonList:[{label:"Not Use",value:"1"},{label:"Id Expired",value:"2"}],editFormRules:{newStatus:[{required:!0,message:"Please select content",trigger:"change"}],remark:[{required:!0,message:"Please enter remark",trigger:"blur"}]},operatorId:""}},watch:{curStatus:{handler(e){this.editForm.oldStatus=e}},receiverIdentityId:{handler(e){this.editForm.receiverIdentityId=e}}},created(){},methods:{showStatus(e){return s["c"][e]||"-"},closeEdit(){this.$emit("update:editStatusVisible",!1),this.$refs["editForm"].resetFields()},editSubmit(){this.$refs["editForm"].validate(e=>{if(e){let e=this.editForm;Object(i["g"])(e).then(e=>{this.$emit("update:editStatusVisible",!1),e.header&&e.header.success&&("detail"!=this.currentPage||e.taskId||this.$emit("update:curStatus",this.editForm.newStatus),this.$emit("update:editStatusVisible",!1),this.$emit("updateList"),this.$refs["editForm"].resetFields(),e.taskId?this.$message.success("The request must be approved by another operator."):(this.$message.success("Submit change request success!"),this.refreshCurrentPage()))}).catch(()=>{this.$emit("update:editStatusVisible",!1)})}})}}},n=l,d=(r("8061"),r("2877")),c=Object(d["a"])(n,a,o,!1,null,"21a2dc66",null);t["a"]=c.exports},"5d2c":function(e,t,r){},8061:function(e,t,r){"use strict";r("5d2c")},8561:function(e,t,r){}}]);
//# sourceMappingURL=chunk-748274a0.js.map