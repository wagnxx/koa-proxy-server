{"version":3,"sources":["webpack:///./src/views/business-center/pages/settlement/detail/index.vue?95b0","webpack:///./src/common/utils/file-utils.js","webpack:///./src/views/business-center/pages/settlement/detail/index.vue","webpack:///src/views/business-center/pages/settlement/detail/index.vue","webpack:///./src/views/business-center/pages/settlement/detail/index.vue?946f","webpack:///./src/views/business-center/pages/settlement/detail/index.vue?d513"],"names":["downLoadFile","url","data","method","hasXXSRFTOKEN","xhr","XMLHttpRequest","open","setRequestHeader","cookie","get","responseType","onload","this","status","blob","response","temp","getResponseHeader","split","fileName","decodeURIComponent","zipUrl","URL","createObjectURL","link","document","createElement","href","download","click","MessageBox","alert","type","confirmButtonText","send","JSON","stringify","render","_vm","_c","_self","staticClass","attrs","titleConfig","slot","_v","_s","params","statusName","on","handleDownloadClick","_e","basicInfo","$t","staticStyle","isSearch","columns","getTableData","staticRenderFns","name","components","PortalHeader","TablePage","BasicInfoItem","entriesList","settlementInfoAmountLabel","entriesAmountLabel","computed","title","content","co","xs","sm","md","lg","xl","label","prop","align","created","methods","planOrderId","setBasicInfo","header","success","list","resolve","exportType","FileUtil","component"],"mappings":"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","file":"js/chunk-055f8472.js","sourcesContent":["export * from \"-!../../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=c5e24588&prod&lang=scss&scoped=true&\"","import cookie from './cookie';\nimport { MessageBox } from 'element-ui';\n\nexport default {\n  downLoadFile: function (url, data, method, hasXXSRFTOKEN) {\n    let xhr = new XMLHttpRequest();\n    xhr.open(method || 'POST', url, true);\n    xhr.setRequestHeader('Content-type', 'application/json');\n    if (hasXXSRFTOKEN) {\n      xhr.setRequestHeader('X-XSRF-TOKEN', cookie.get('O-XSRF-TOKEN'));\n    }\n    xhr.setRequestHeader('o-token', cookie.get('o-token'));\n    xhr.setRequestHeader('Cache-Control', 'no-store, max-age=0, must-revalidate');\n    xhr.responseType = 'blob'; // 返回类型blob\n    xhr.onload = function () {\n      // 定义请求完成的处理函数，请求前也可以增加加载框/禁用下载按钮逻辑\n      if (this.status === 200) {\n        let blob = this.response;\n        let temp = xhr.getResponseHeader('content-disposition').split(';')[1].split('filename=')[1];\n        let fileName = decodeURIComponent(temp);\n        let zipUrl = URL.createObjectURL(blob);\n        let link = document.createElement('a');\n        link.href = zipUrl;\n        link.download = fileName;\n        link.click();\n      } else {\n        MessageBox.alert('Download failed.', 'Error', { type: 'error', confirmButtonText: 'Confirm' });\n      }\n    };\n    xhr.send(JSON.stringify(data));\n  },\n};\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"detail-list\"},[_c('portal-header',{attrs:{\"projectObj\":_vm.titleConfig}},[_c('span',{staticClass:\"detail-color\",attrs:{\"slot\":\"title-suffix\"},slot:\"title-suffix\"},[_vm._v(_vm._s(_vm.params.statusName))]),(_vm.params.statusName === 'Completed')?_c('div',{staticClass:\"downloadBox\",attrs:{\"slot\":\"header-right\"},on:{\"click\":_vm.handleDownloadClick},slot:\"header-right\"},[_c('svg-icon',{staticClass:\"svgIcon\",attrs:{\"icon-class\":\"download\"}}),_c('br'),_c('span',{staticClass:\"scgDes\"},[_vm._v(\"Down Load\")])],1):_vm._e()]),_c('div',{staticClass:\"basicInfo\"},[_c('basic-info-item',{attrs:{\"itemInfoList\":_vm.basicInfo}})],1),_c('div',{staticClass:\"settlementEntries\"},[_c('div',{staticClass:\"subtitle subtitle-table\"},[_vm._v(_vm._s(_vm.$t('BUC.revenueSettlement.settlementEntries')))]),_c('table-page',{staticClass:\"margin-top-16\",staticStyle:{\"padding-bottom\":\"16px\",\"margin-top\":\"20px\",\"padding-left\":\"20px\",\"padding-right\":\"20px\"},attrs:{\"id\":\"table\",\"size\":\"small\",\"has-pagination\":false,\"isSearch\":_vm.isSearch,\"max-height\":\"280\",\"initializingLoading\":false,\"sortArr\":[\n        'settlementTypeName',\n        'tenantId',\n        'reasonTypeName',\n        'debitAccountTypeName',\n        'creditAccountTypeName',\n        'statusName',\n      ],\"columns\":_vm.columns,\"getTableData\":_vm.getTableData}})],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"detail-list\">\n    <portal-header :projectObj=\"titleConfig\">\n      <span slot=\"title-suffix\" class=\"detail-color\">{{ params.statusName }}</span>\n      <div\n        slot=\"header-right\"\n        class=\"downloadBox\"\n        @click=\"handleDownloadClick\"\n        v-if=\"params.statusName === 'Completed'\"\n      >\n        <svg-icon class=\"svgIcon\" icon-class=\"download\"></svg-icon><br />\n        <span class=\"scgDes\">Down Load</span>\n      </div>\n    </portal-header>\n    <div class=\"basicInfo\">\n      <basic-info-item :itemInfoList=\"basicInfo\"></basic-info-item>\n    </div>\n    <div class=\"settlementEntries\">\n      <div class=\"subtitle subtitle-table\">{{ $t('BUC.revenueSettlement.settlementEntries') }}</div>\n      <table-page\n        id=\"table\"\n        class=\"margin-top-16\"\n        style=\"padding-bottom: 16px; margin-top: 20px; padding-left: 20px; padding-right: 20px\"\n        size=\"small\"\n        :has-pagination=\"false\"\n        :isSearch=\"isSearch\"\n        max-height=\"280\"\n        :initializingLoading=\"false\"\n        :sortArr=\"[\n          'settlementTypeName',\n          'tenantId',\n          'reasonTypeName',\n          'debitAccountTypeName',\n          'creditAccountTypeName',\n          'statusName',\n        ]\"\n        :columns=\"columns\"\n        :getTableData=\"getTableData\"\n      ></table-page>\n    </div>\n  </div>\n</template>\n\n<script>\nimport PortalHeader from '@/components/portal-header';\nimport TablePage from '@/components/tablePage';\nimport BasicInfoItem from '../component/basic-info-item.vue';\nimport { getRevenueSettlementDetail } from '../api/revenue-settlement';\nimport AmountUnit from '../utils/amount-utils';\nimport FileUtil from '@/common/utils/file-utils';\nexport default {\n  name: 'settlementDetail',\n  components: {\n    PortalHeader,\n    TablePage,\n    BasicInfoItem,\n  },\n  data() {\n    return {\n      params: {},\n      isSearch: false,\n      entriesList: [],\n      settlementInfoAmountLabel: '',\n      entriesAmountLabel: '',\n    };\n  },\n  computed: {\n    titleConfig() {\n      return {\n        title: this.$t('BUC.revenueSettlement.detailTitle'),\n      };\n    },\n    basicInfo() {\n      return [\n        {\n          title: this.$t('BUC.revenueSettlement.planId'),\n          content: '-',\n        },\n        {\n          title: this.$t('BUC.revenueSettlement.fundingSource'),\n          content: '-',\n        },\n        {\n          title: this.$t('BUC.revenueSettlement.eventType'),\n          content: '-',\n        },\n        {\n          title: this.$t('BUC.revenueSettlement.processType'),\n          content: '-',\n        },\n        {\n          title: this.$t('BUC.revenueSettlement.status'),\n          content: '-',\n        },\n        {\n          title: this.$t('BUC.revenueSettlement.settlementAccount'),\n          content: '-',\n        },\n        {\n          title: this.$t('BUC.revenueSettlement.organizationShortCode'),\n          content: '-',\n        },\n        {\n          title: this.$t('BUC.revenueSettlement.organizationName'),\n          content: '-',\n        },\n        {\n          title: this.settlementInfoAmountLabel,\n          content: '-',\n        },\n        {\n          title: this.$t('BUC.revenueSettlement.errorMessage'),\n          content: '-',\n          co: {\n            xs: 8 * 3,\n            sm: 8 * 3,\n            md: 8 * 3,\n            lg: 8 * 3,\n            xl: 6 * 3,\n          },\n        },\n      ];\n    },\n    columns() {\n      return [\n        {\n          label: this.$t('BUC.revenueSettlement.settlementType'),\n          prop: 'settlementTypeName',\n          align: 'left',\n          'sort-method': (a, b) => {\n            return a.settlementTypeName > b.settlementTypeName ? 1 : -1;\n          },\n        },\n        {\n          label: this.$t('BUC.revenueSettlement.transactionId'),\n          prop: 'tenantId',\n          align: 'left',\n          'sort-method': (a, b) => {\n            return a.tenantId > b.tenantId ? 1 : -1;\n          },\n        },\n        {\n          label: this.$t('BUC.revenueSettlement.reasonType'),\n          prop: 'reasonTypeName',\n          align: 'left',\n          'sort-method': (a, b) => {\n            return a.reasonTypeName > b.reasonTypeName ? 1 : -1;\n          },\n        },\n        {\n          label: this.$t('BUC.revenueSettlement.debitAccount'),\n          prop: 'debitAccountTypeName',\n          align: 'left',\n          'sort-method': (a, b) => {\n            return a.debitAccountTypeName > b.debitAccountTypeName ? 1 : -1;\n          },\n        },\n        {\n          label: this.$t('BUC.revenueSettlement.creditAccount'),\n          prop: 'creditAccountTypeName',\n          align: 'left',\n          'sort-method': (a, b) => {\n            return a.creditAccountTypeName > b.creditAccountTypeName ? 1 : -1;\n          },\n        },\n        { label: this.entriesAmountLabel, prop: 'amount', align: 'left' },\n        {\n          label: this.$t('BUC.revenueSettlement.status'),\n          prop: 'statusName',\n          align: 'left',\n          'sort-method': (a, b) => {\n            return a.statusName > b.statusName ? 1 : -1;\n          },\n        },\n        { label: this.$t('BUC.revenueSettlement.errorMessage'), prop: 'errorMsg', align: 'left' },\n      ];\n    },\n  },\n  created() {\n    this.params = JSON.parse(decodeURIComponent(this.$route.query.params));\n    this.getDetailInfo();\n  },\n  methods: {\n    async getDetailInfo() {\n      let data = { planOrderId: this.params.planOrderId };\n      let res = await getRevenueSettlementDetail(data);\n      if (res.header && res.header.success) {\n        this.isSearch = true;\n        this.entriesList = res.entryList;\n      }\n    },\n    setBasicInfo() {\n      this.basicInfo[0].content = this.params.planOrderId || '-';\n      this.basicInfo[1].content = this.params.fundingSourceValue || '-';\n      this.basicInfo[2].content = this.params.eventTypeName || '-';\n      this.basicInfo[3].content = this.params.planTypeName || '-';\n      this.basicInfo[4].content = this.params.statusName || '-';\n      this.basicInfo[5].content = this.params.settlementAccountTypeName || '-';\n      this.basicInfo[6].content = this.params.shortCode || '-';\n      this.basicInfo[7].content = this.params.orgName || '-';\n      this.basicInfo[8].content = this.params.expectedNetAmount || '-';\n      this.basicInfo[9].content = this.params.errorMsg || '-';\n    },\n    getTableData() {\n      let symbol = AmountUnit.format('100', this.params.currency);\n      let symbolFirst = symbol.substring(0, 1);\n      this.settlementInfoAmountLabel = `${this.$t('BUC.revenueSettlement.amount')}(${symbolFirst})`;\n      this.entriesAmountLabel = `${this.$t('BUC.revenueSettlement.tableAmount')}(${symbolFirst})`;\n      this.setBasicInfo();\n      return new Promise((resolve) => {\n        this.isSearch = false;\n        let res = {\n          header: {\n            success: true,\n          },\n          list: this.entriesList,\n        };\n        resolve(res);\n      });\n    },\n    handleDownloadClick() {\n      let data = {\n        planOrderId: this.params.planOrderId,\n        exportType: 'Excel',\n      };\n      const url = `${process.env.VUE_APP_BASEAPI}/fintech/v1/settlement/revenue/org/downloadOrgRevenueReport`;\n      FileUtil.downLoadFile(url, data, 'POST', true);\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.detail-list {\n  margin: 20px;\n  .downloadBox {\n    &:hover {\n      cursor: pointer;\n    }\n    .svgIcon {\n      position: absolute;\n      right: 80px;\n      top: 15px;\n      width: 24px;\n      height: 22px;\n    }\n    .scgDes {\n      font-size: 13px;\n      position: absolute;\n      right: 56px;\n      top: 42px;\n    }\n  }\n  .subtitle {\n    font-weight: bold;\n    color: $--text_color--emphasis;\n    font-size: 16px;\n    border-bottom: 1px solid $--fill_color--regular;\n    padding-bottom: 13px;\n    padding-left: 20px;\n    padding-right: 20px;\n  }\n  .detail-color {\n    color: $--status_color--success;\n    background-color: $--background_color--green;\n    padding: 6px 8px;\n    margin-left: 12px;\n    border-radius: 4px;\n    font-size: 14px;\n  }\n  .basicInfo {\n    background-color: $base-menu-background;\n    padding: 20px 20px 0 20px;\n    border-radius: 0 0 4px 4px !important;\n    .subtitle-basic {\n      margin-bottom: 20px;\n    }\n  }\n  .settlementEntries {\n    margin-top: 20px;\n    padding-top: 20px;\n    border-radius: 4px;\n    background-color: $base-menu-background;\n  }\n}\n/deep/ .page-header {\n  border-radius: 4px 4px 0 0;\n}\n</style>\n","import mod from \"-!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=c5e24588&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=c5e24588&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"c5e24588\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}