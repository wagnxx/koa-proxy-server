(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-613927e6"],{"0798":function(t,e,a){},"0cbd":function(t,e,a){"use strict";var i=function(){var t=this,e=t._self._c;return e("div",{class:["portal-add-popup",t.checkBoxClass]},[e("el-dialog",{staticClass:"search",attrs:{title:t.addForm.title,visible:t.searchVisible,width:"800px","close-on-click-modal":!1,"before-close":t.cancel},on:{"update:visible":function(e){t.searchVisible=e}}},[t.isShowSearch?e("portal-form",{ref:"searchList",attrs:{"form-data":t.formData,"form-config-list":t.formConfigList,needOperateBtn:!0,"form-rules":t.tempFormRules,searchBtnLoading:t.searchLoading,needBottomLine:!0,smallAutoColumn:t.smallAutoColumn,bigAutoColumn:t.bigAutoColumn},on:{"common-enter-event":t.search,"reset-btn-click":t.reset,"search-btn-click":t.search}}):t._e(),e("table-page",{ref:"data-table",attrs:{size:"small",isSingleCheck:t.isSingleCheck,"is-check":t.isCheck,"is-check-memory":!0,"is-search":t.refreshTableFlag,"has-pagination":t.hasPagination,columns:t.addForm.columns,pagination:t.paginationConfig,getTableData:t.getTableData,"init-checks":t.multipleChecks,"id-key":t.addForm.idKey},on:{fetchData:t.fetchData,"selection-change":t.onSelectionChange,"single-selection-change":t.singelSekectionChange},scopedSlots:t._u([t._l(t.addForm.columns.filter(t=>t.__slotName),(function(e){return{key:e.__slotName,fn:function(a){return[t._t(e.__slotName,null,{row:a.data.row})]}}}))],null,!0)}),e("div",{attrs:{slot:"footer"},slot:"footer"},[t.isShowCloseBtn?e("div",[e("el-button",{attrs:{id:"cancel",size:"small"},on:{click:t.cancel}},[t._v(t._s(t.$t("common.button.close"))+" ")])],1):e("div",[e("el-button",{attrs:{id:"cancel",size:"small"},on:{click:t.cancel}},[t._v(t._s(t.$t("common.button.cancel"))+" ")]),e("el-button",{attrs:{id:"confirm",size:"small",type:"primary"},on:{click:t.submit}},[t._v(" "+t._s(t.$t("common.button.confirm"))+" ")])],1)])],1)],1)},s=[],n=a("3186"),r=a("4c09"),l={name:"addPrompt",components:{TablePage:r["a"],PortalForm:n["a"]},props:{searchVisible:{type:Boolean,default:!1},hasCheckBox:{type:Boolean,default:!0},hasPagination:{type:Boolean,default:!1},isCheck:{type:Boolean,default:!1},isCheckMemory:{type:Boolean,default:!1},isShowCloseBtn:{type:Boolean,default:!1},tableData:{type:Array,default:()=>[]},initChecks:{type:Array,default:()=>[]},options:{type:Object,default:()=>({})},addForm:{type:Object,default:()=>{}},submitCallBack:{type:String,default:()=>""},childSearch:{type:Function,default:null},smallAutoColumn:{type:Number,default:2,validate:t=>!(24%t)},bigAutoColumn:{type:Number,default:2,validate:t=>!(24%t)},isShowSearch:{type:Boolean,default:!0},isSingleCheck:{type:Boolean,default:!1}},watch:{searchVisible(t){t&&(this.refreshTableFlag=!0,this.multipleSelection=this.getCheckedSelection()),this.firstLoadTableEnd=!1}},data(){return{tempFormRules:{propertyName:[{required:!1,message:"Please enter",trigger:"blur"}]},paginationConfig:{total:this.addForm.columns&&this.addForm.columns.length||0,pageIndex:1,pageSize:5,layout:"total,prev, pager, next"},multipleSelection:[],multipleSelectionCache:{},uncommitSelectionache:{},refreshTableFlag:!1,searchLoading:!1,param:{},multipleChecks:this.initChecks,initChecksCache:this.initChecks,firstLoadTableEnd:!1,singelSekectionChangeData:""}},computed:{formConfigList(){return this.addForm.searchForm&&this.addForm.searchForm.formConf||[{label:this.addForm["label"],key:"propertyName",prop:"name",comp:"el-input",bind:{clearable:!0,placeholder:this.$t("common.placeholder.enter")}}]},formData(){return this.addForm.searchForm&&this.addForm.searchForm.formData},checkBoxClass(){const t=this.hasCheckBox;return t?"checkbox-on":"checkbox-off"}},methods:{singelSekectionChange(t){this.singelSekectionChangeData=t},getCheckedSelection(){const t=this.addForm.idKey||"id",e=this.initChecks.map(e=>e[t]),a=this.getObjFlatValue(this.multipleSelectionCache,t);return a?a.filter(a=>e.includes(a[t])):[]},fetchData(t){this.paginationConfig.total=t.total,this.searchLoading=!1,this.$emit("data-fetcher",t)},filterListByField(t,e){return t.reduce((t,a)=>{if(!t.length)return[...t,a];const i=t.some(t=>t[e]===a[e]);return i?t:[...t,a]},[])},getObjFlatValue(t,e){let a=Object.values(t);return a=a.reduce((t,e)=>t.length?[...t,...e]:[...e],[]),a=this.filterListByField(a,e),a},onSelectionChange(t){const e=this.addForm.idKey||"id",a=this.paginationConfig.pageIndex;let i=this.initChecksCache,s=this.multipleSelectionCache[a]||[];const n=t.map(t=>t[e]),r=s.filter(t=>!n.includes(t[e])),l=r.map(t=>t[e]);i=i.filter(t=>!l.includes(t[e])),this.initChecksCache=[...i],this.multipleSelectionCache[a]=[...t],this.multipleSelection=this.getObjFlatValue(this.multipleSelectionCache,e),this.uncommitSelectionache={...this.multipleSelectionCache}},async getTableData(t){let e=null;const a=this.addForm.idKey||"id";this.tableData.length>0?e=this.tableData:(this.param.searchKey&&(t.searchKey=this.param.searchKey),e=await this.childSearch(t));const i=this.getObjFlatValue(this.uncommitSelectionache,a),s=this.firstLoadTableEnd?this.initChecksCache:this.initChecks;this.firstLoadTableEnd=!0;const n=[...s,...i],r=n.map(t=>t[a]),l=e.list||[],o=l.some(t=>r.includes(t[a]));let c=[];return o&&(c=n),window.requestIdleCallback(()=>{this.multipleChecks=c}),this.refreshTableFlag=!1,e},search(t){this.param.pageNo=1,this.param.pageSize=10,this.param.searchKey=t,this.searchLoading=!0,this.$emit("update:search",this.param);try{this.$refs["data-table"].queryData(!0)}finally{this.searchLoading=!1}},reset(){if(this.formData)for(let t in this.formData)this.formData[t]=null;this.refreshTableFlag=!0,this.firstLoadTableEnd=!1},submit(){const t=this.options;this.isSingleCheck&&(this.multipleSelection=this.singelSekectionChangeData),this.$emit("submit-call-back",this.multipleSelection,t),this.$emit("update:searchVisible",!1),this.multipleChecks=[]},cancel(){this.$emit("update:searchVisible",!1),this.multipleChecks=[]}},created(){},mounted(){},activated(){}},o=l,c=(a("7f3c"),a("2877")),u=Object(c["a"])(o,i,s,!1,null,"51661ae8",null);e["a"]=u.exports},3213:function(t,e,a){"use strict";a.d(e,"e",(function(){return r})),a.d(e,"f",(function(){return l})),a.d(e,"a",(function(){return c})),a.d(e,"d",(function(){return h})),a.d(e,"c",(function(){return u})),a.d(e,"b",(function(){return d}));var i=a("02e3"),s=a("e863");let n=(t,e,a)=>{if(e){let t={msisdn:e};Object(s["a"])(t).then(t=>{t.flag?a():a(new Error(""+(t.description||"")))})}},r=()=>({msisdn:[i["k"]],tillNumber:[i["k"]],orgshortcode:[i["f"],i["l"]]}),l=()=>({msisdn:[i["e"],i["v"],i["k"],i["u"]],tillNumber:[i["v"],i["k"]],orgshortcode:[i["f"],i["l"]],status:[i["z"]],productName:[i["z"]],queryCondition:[i["z"]]});let o=(t,e,a)=>{if(e){let t={tillNumber:e};Object(s["b"])(t).then(t=>{if(t.flag)a();else{if(e.trim().length<4||e.trim().length>12)return a(new Error("The length ranges from 4 to 12."));if(!new RegExp(/^([0-9A-Za-z]{4,12})$/).test(e))return a(new Error("Special characters are not allowed. Please enter again."));a()}})}},c=()=>({msisdn:[i["e"],i["w"],i["k"],i["f"],{validator:n,trigger:"blur"}],tillNumber:[i["e"],i["w"],{validator:o,trigger:"blur"}],organizationShortCode:[i["z"],i["e"],i["w"]],languageCode:i["z"],productIdList:[i["z"]]}),u=()=>({newMsisdn:[i["f"],i["e"],i["w"],{validator:n,trigger:"blur"}],remark:[i["e"]]}),h=()=>({remark:[i["e"],i["w"]]}),d=async()=>{let t=await Object(s["e"])();return t.header&&t.header.success&&t.result?[i["z"]]:[]}},"4c1d":function(t,e,a){"use strict";var i=function(){var t=this,e=t._self._c;return e("el-dialog",{staticClass:"dialog-container",attrs:{title:t.$t("IDC.till.editStatus"),visible:t.showEditStatusDialog,width:"448px","close-on-click-modal":!1},on:{close:function(e){return t.closeEditLanguageDialog()}}},[e("el-form",{ref:"editStatusFormRef",attrs:{model:t.editStatusForm,rules:t.editStatusFormRules,"label-position":"top","label-width":"200px"}},[e("el-form-item",{attrs:{prop:"currentStatus",label:t.$t("IDC.till.currentStatus")}},[e("div",{staticClass:"history-item"},[t._v(t._s(this.showStatus(t.editStatusForm.currentStatus)))])]),e("el-form-item",{staticClass:"from-item-title",attrs:{prop:"newStatus",label:t.$t("IDC.till.newStatus")}},[e("el-select",{attrs:{id:"newStatus",placeholder:t.$t("common.placeholder.select"),size:"small"},model:{value:t.editStatusForm.newStatus,callback:function(e){t.$set(t.editStatusForm,"newStatus",e)},expression:"editStatusForm.newStatus"}},t._l(t.newStatusOptions,(function(t){return e("el-option",{key:t.status,attrs:{label:t.value,value:t.status}})})),1)],1),e("el-form-item",{staticClass:"from-item-title",attrs:{prop:"remark",label:t.$t("IDC.till.remark")}},[e("el-input",{attrs:{clearable:"",type:"textarea",rows:4,resize:"none",placeholder:t.$t("common.placeholder.enter")},model:{value:t.editStatusForm.remark,callback:function(e){t.$set(t.editStatusForm,"remark","string"===typeof e?e.trim():e)},expression:"editStatusForm.remark"}})],1)],1),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{id:"cancel",size:"small"},on:{click:function(e){return t.closeEditLanguageDialog()}}},[t._v(t._s(t.$t("common.button.cancel")))]),e("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{loading:t.submitLoading,id:"confirm",type:"primary",size:"small"},on:{click:function(e){return t.submitDialogForm()}}},[t._v(t._s(t.$t("common.button.submit")))])],1)],1)},s=[],n=a("e863"),r=a("02e3"),l={name:"editStatus",data(){return{submitLoading:!1,showEditStatusDialog:!1,editStatusForm:{currentStatus:"",newStatus:"",remark:""},editStatusFormRules:{newStatus:[r["z"]],remark:[r["e"]]},labelData:{},newStatusOptions:[]}},computed:{},watch:{},mounted(){},methods:{submitDialogForm(){this.$refs["editStatusFormRef"].validate(t=>{if(t){this.submitLoading=!0;let t={receiverIdentityId:this.labelData.identityId,targetStatus:this.editStatusForm.newStatus,remark:this.editStatusForm.remark,originalStatus:this.editStatusForm.currentStatus};Object(n["g"])(t).then(t=>{t.header&&t.header.success?this.editSuccess():this.showEditStatusDialog=!1,this.submitLoading=!1})}})},editSuccess(){this.$emit("closeDialog",{type:"status",value:this.editStatusForm.newStatus}),this.showEditStatusDialog=!1,this.$modal.msgSuccess(this.$t("IDC.till.editStatusY")),this.$emit("closeStatusDialog"),this.$refs["editStatusFormRef"].resetFields()},showStatus(t){switch(t){case"03":return"Active";case"05":return"Frozen";default:return}},closeEditLanguageDialog(){this.showEditStatusDialog=!1,this.$refs["editStatusFormRef"].resetFields()},handleEditLanguage(){this.showEditStatusDialog=!0},showView(t){this.showEditStatusDialog=!0,this.labelData=t,this.editStatusForm.currentStatus=t.status,"05"==t.status?(this.newStatusOptions=[{status:"03",value:"Active"}],this.editStatusForm.newStatus="03"):(this.newStatusOptions=[{status:"05",value:"Frozen"}],this.editStatusForm.newStatus="05")}}},o=l,c=(a("6c82"),a("2877")),u=Object(c["a"])(o,i,s,!1,null,"1334304b",null);e["a"]=u.exports},6586:function(t,e,a){},"6c82":function(t,e,a){"use strict";a("6586")},"7f3c":function(t,e,a){"use strict";a("0798")},e863:function(t,e,a){"use strict";a.d(e,"r",(function(){return n})),a.d(e,"p",(function(){return r})),a.d(e,"d",(function(){return l})),a.d(e,"m",(function(){return o})),a.d(e,"f",(function(){return c})),a.d(e,"g",(function(){return u})),a.d(e,"h",(function(){return h})),a.d(e,"i",(function(){return d})),a.d(e,"c",(function(){return m})),a.d(e,"j",(function(){return f})),a.d(e,"k",(function(){return p})),a.d(e,"o",(function(){return g})),a.d(e,"l",(function(){return b})),a.d(e,"n",(function(){return S})),a.d(e,"q",(function(){return k})),a.d(e,"a",(function(){return C})),a.d(e,"b",(function(){return v})),a.d(e,"e",(function(){return w}));var i=a("0bbd"),s=a("5f9a");function n(t){return Object(i["a"])({url:"/fintech/v1/till/queryBusinessTillList",method:"post",data:t})}function r(t){return Object(i["a"])({url:"/fintech/v1/till/query",method:"post",data:t})}function l(t){return Object(i["a"])({url:"/fintech/v1/till/create",method:"post",data:t})}function o(t){return Object(i["a"])({url:"/fintech/v1/till/dcc/queryProduct",method:"post",data:t})}function c(t){return Object(i["a"])({url:"/fintech/v1/till/changeTillDeviceService",method:"post",data:t})}function u(t){return Object(i["a"])({url:"/fintech/v1/till/changeStatus",method:"post",data:t})}function h(t){return Object(i["a"])({url:"/fintech/v1/till/changeLanguage",method:"post",data:t})}function d(t){return Object(i["a"])({url:"/fintech/v1/till/changeTillOperatorId",method:"post",data:t})}function m(t){return Object(i["a"])({url:"/fintech/v1/till/close",method:"post",data:t})}function f(t){return Object(i["a"])({url:"/fintech/v1/till/changeTillProduct",method:"post",data:t})}function p(t){return Object(i["a"])({url:"/fintech/v1/till/getLanguages",method:"post",data:t})}function g(t){return Object(i["a"])({url:"/fintech/v1/till/queryOrgOperatorIdList",method:"post",data:t})}function b(t){return Object(i["a"])({url:Object(s["a"])("/fintech/v1/organization/list",t),method:"get"})}function S(t){return Object(i["a"])({url:"/fintech/v1/till/loadRangeDcc",method:"post",data:t})}function k(t){return Object(i["a"])({url:"/fintech/v1/till/queryTillProductList",data:t,method:"post"})}function C(t){return Object(i["a"])({url:"/fintech/v1/till/checkRangeDcc",method:"post",data:t})}function v(t){return Object(i["a"])({url:"/fintech/v1/till/checkTill",method:"post",data:t})}function w(t){return Object(i["a"])({url:"/fintech/v1/till/defaultOperatorIdRule",method:"get",data:t})}}}]);
//# sourceMappingURL=chunk-613927e6.js.map