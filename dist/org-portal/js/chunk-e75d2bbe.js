(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e75d2bbe","chunk-43eec914"],{"034d":function(e,t,a){},"0798":function(e,t,a){},"0cbd":function(e,t,a){"use strict";var r=function(){var e=this,t=e._self._c;return t("div",{class:["portal-add-popup",e.checkBoxClass]},[t("el-dialog",{staticClass:"search",attrs:{title:e.addForm.title,visible:e.searchVisible,width:"800px","close-on-click-modal":!1,"before-close":e.cancel},on:{"update:visible":function(t){e.searchVisible=t}}},[e.isShowSearch?t("portal-form",{ref:"searchList",attrs:{"form-data":e.formData,"form-config-list":e.formConfigList,needOperateBtn:!0,"form-rules":e.tempFormRules,searchBtnLoading:e.searchLoading,needBottomLine:!0,smallAutoColumn:e.smallAutoColumn,bigAutoColumn:e.bigAutoColumn},on:{"common-enter-event":e.search,"reset-btn-click":e.reset,"search-btn-click":e.search}}):e._e(),t("table-page",{ref:"data-table",attrs:{size:"small",isSingleCheck:e.isSingleCheck,"is-check":e.isCheck,"is-check-memory":!0,"is-search":e.refreshTableFlag,"has-pagination":e.hasPagination,columns:e.addForm.columns,pagination:e.paginationConfig,getTableData:e.getTableData,"init-checks":e.multipleChecks,"id-key":e.addForm.idKey},on:{fetchData:e.fetchData,"selection-change":e.onSelectionChange,"single-selection-change":e.singelSekectionChange},scopedSlots:e._u([e._l(e.addForm.columns.filter(e=>e.__slotName),(function(t){return{key:t.__slotName,fn:function(a){return[e._t(t.__slotName,null,{row:a.data.row})]}}}))],null,!0)}),t("div",{attrs:{slot:"footer"},slot:"footer"},[e.isShowCloseBtn?t("div",[t("el-button",{attrs:{id:"cancel",size:"small"},on:{click:e.cancel}},[e._v(e._s(e.$t("common.button.close"))+" ")])],1):t("div",[t("el-button",{attrs:{id:"cancel",size:"small"},on:{click:e.cancel}},[e._v(e._s(e.$t("common.button.cancel"))+" ")]),t("el-button",{attrs:{id:"confirm",size:"small",type:"primary"},on:{click:e.submit}},[e._v(" "+e._s(e.$t("common.button.confirm"))+" ")])],1)])],1)],1)},o=[],i=a("3186"),s=a("4c09"),l={name:"addPrompt",components:{TablePage:s["a"],PortalForm:i["a"]},props:{searchVisible:{type:Boolean,default:!1},hasCheckBox:{type:Boolean,default:!0},hasPagination:{type:Boolean,default:!1},isCheck:{type:Boolean,default:!1},isCheckMemory:{type:Boolean,default:!1},isShowCloseBtn:{type:Boolean,default:!1},tableData:{type:Array,default:()=>[]},initChecks:{type:Array,default:()=>[]},options:{type:Object,default:()=>({})},addForm:{type:Object,default:()=>{}},submitCallBack:{type:String,default:()=>""},childSearch:{type:Function,default:null},smallAutoColumn:{type:Number,default:2,validate:e=>!(24%e)},bigAutoColumn:{type:Number,default:2,validate:e=>!(24%e)},isShowSearch:{type:Boolean,default:!0},isSingleCheck:{type:Boolean,default:!1}},watch:{searchVisible(e){e&&(this.refreshTableFlag=!0,this.multipleSelection=this.getCheckedSelection()),this.firstLoadTableEnd=!1}},data(){return{tempFormRules:{propertyName:[{required:!1,message:"Please enter",trigger:"blur"}]},paginationConfig:{total:this.addForm.columns&&this.addForm.columns.length||0,pageIndex:1,pageSize:5,layout:"total,prev, pager, next"},multipleSelection:[],multipleSelectionCache:{},uncommitSelectionache:{},refreshTableFlag:!1,searchLoading:!1,param:{},multipleChecks:this.initChecks,initChecksCache:this.initChecks,firstLoadTableEnd:!1,singelSekectionChangeData:""}},computed:{formConfigList(){return this.addForm.searchForm&&this.addForm.searchForm.formConf||[{label:this.addForm["label"],key:"propertyName",prop:"name",comp:"el-input",bind:{clearable:!0,placeholder:this.$t("common.placeholder.enter")}}]},formData(){return this.addForm.searchForm&&this.addForm.searchForm.formData},checkBoxClass(){const e=this.hasCheckBox;return e?"checkbox-on":"checkbox-off"}},methods:{singelSekectionChange(e){this.singelSekectionChangeData=e},getCheckedSelection(){const e=this.addForm.idKey||"id",t=this.initChecks.map(t=>t[e]),a=this.getObjFlatValue(this.multipleSelectionCache,e);return a?a.filter(a=>t.includes(a[e])):[]},fetchData(e){this.paginationConfig.total=e.total,this.searchLoading=!1,this.$emit("data-fetcher",e)},filterListByField(e,t){return e.reduce((e,a)=>{if(!e.length)return[...e,a];const r=e.some(e=>e[t]===a[t]);return r?e:[...e,a]},[])},getObjFlatValue(e,t){let a=Object.values(e);return a=a.reduce((e,t)=>e.length?[...e,...t]:[...t],[]),a=this.filterListByField(a,t),a},onSelectionChange(e){const t=this.addForm.idKey||"id",a=this.paginationConfig.pageIndex;let r=this.initChecksCache,o=this.multipleSelectionCache[a]||[];const i=e.map(e=>e[t]),s=o.filter(e=>!i.includes(e[t])),l=s.map(e=>e[t]);r=r.filter(e=>!l.includes(e[t])),this.initChecksCache=[...r],this.multipleSelectionCache[a]=[...e],this.multipleSelection=this.getObjFlatValue(this.multipleSelectionCache,t),this.uncommitSelectionache={...this.multipleSelectionCache}},async getTableData(e){let t=null;const a=this.addForm.idKey||"id";this.tableData.length>0?t=this.tableData:(this.param.searchKey&&(e.searchKey=this.param.searchKey),t=await this.childSearch(e));const r=this.getObjFlatValue(this.uncommitSelectionache,a),o=this.firstLoadTableEnd?this.initChecksCache:this.initChecks;this.firstLoadTableEnd=!0;const i=[...o,...r],s=i.map(e=>e[a]),l=t.list||[],n=l.some(e=>s.includes(e[a]));let c=[];return n&&(c=i),window.requestIdleCallback(()=>{this.multipleChecks=c}),this.refreshTableFlag=!1,t},search(e){this.param.pageNo=1,this.param.pageSize=10,this.param.searchKey=e,this.searchLoading=!0,this.$emit("update:search",this.param);try{this.$refs["data-table"].queryData(!0)}finally{this.searchLoading=!1}},reset(){if(this.formData)for(let e in this.formData)this.formData[e]=null;this.refreshTableFlag=!0,this.firstLoadTableEnd=!1},submit(){const e=this.options;this.isSingleCheck&&(this.multipleSelection=this.singelSekectionChangeData),this.$emit("submit-call-back",this.multipleSelection,e),this.$emit("update:searchVisible",!1),this.multipleChecks=[]},cancel(){this.$emit("update:searchVisible",!1),this.multipleChecks=[]}},created(){},mounted(){},activated(){}},n=l,c=(a("7f3c"),a("2877")),d=Object(c["a"])(n,r,o,!1,null,"51661ae8",null);t["a"]=d.exports},"0e19":function(e,t,a){},"0fb1":function(e,t,a){"use strict";var r=function(){var e=this,t=e._self._c;return t("div",{class:{"portal-add-popup":!0,[e.checkBoxClass]:!0,"portal-add-popup--no-pagination":!e.hasPagination}},[t("el-dialog",{staticClass:"search",attrs:{title:e.addForm.title,visible:e.productVisible,width:"800px","close-on-click-modal":!1,"before-close":e.cancel},on:{"update:visible":function(t){e.productVisible=t}}},[t("div",{staticClass:"topTitle"},[e._v(e._s(e.$t("IDC.orgCustomer.selectedProduct")))]),t("div",{staticClass:"selected-container"},[t("div",{staticClass:"show-selected-div"},e._l(e.getObjFlatValue(e.uncommitSelectionache,e.addForm.idKey),(function(a,r){return t("el-tag",{key:r,attrs:{type:"info",closable:!0},on:{close:function(t){return e.removeSelected(a)}}},[e._v(" "+e._s(a.productName)+" ")])})),1)]),t("table-page",{ref:"data-table",attrs:{size:"small",idKey:"productId","is-check":e.isCheck,"is-check-memory":!0,"is-search":e.refreshTableFlag,"has-pagination":e.hasPagination,columns:e.addForm.columns,pagination:e.paginationConfig,getTableData:e.getTableData,"init-checks":e.multipleChecks,"id-key":e.addForm.idKey,"expand-row-keys":e.expands,sortArr:["productName","productDesc"]},on:{fetchData:e.fetchData,"selection-change":e.onSelectionChange}}),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{id:"cancel",size:"small"},on:{click:e.cancel}},[e._v(e._s(e.$t("common.button.cancel"))+" ")]),t("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{id:"confirm",size:"small",type:"primary"},on:{click:e.submit}},[e._v(" "+e._s(e.$t("common.button.confirm"))+" ")])],1)],1)],1)},o=[],i=a("4c09"),s={name:"addPrompt",components:{TablePage:i["a"]},props:{productVisible:{type:Boolean,default:!1},hasCheckBox:{type:Boolean,default:!0},hasPagination:{type:Boolean,default:!1},isCheck:{type:Boolean,default:!1},isCheckMemory:{type:Boolean,default:!1},isShowCloseBtn:{type:Boolean,default:!1},tableData:{type:Array,default:()=>[]},initChecks:{type:Array,default:()=>[]},options:{type:Object,default:()=>({})},addForm:{type:Object,default:()=>{}},submitCallBack:{type:String,default:()=>""},childSearch:{type:Function,default:null},smallAutoColumn:{type:Number,default:3,validate:e=>!(24%e)},bigAutoColumn:{type:Number,default:4,validate:e=>!(24%e)}},watch:{productVisible(e){e&&(this.refreshTableFlag=!0,this.multipleSelection=this.getCheckedSelection()),this.firstLoadTableEnd=!1}},data(){return{expands:[],paginationConfig:{total:this.addForm&&this.addForm.columns&&this.addForm.columns.length||0,pageIndex:1,pageSize:5},multipleSelection:[],multipleSelectionCache:{},uncommitSelectionache:{},refreshTableFlag:!1,searchLoading:!1,param:{},multipleChecks:this.initChecks,initChecksCache:this.initChecks,firstLoadTableEnd:!1}},computed:{formConfigList(){return this.addForm&&this.addForm.searchForm&&this.addForm.searchForm.formConf},formData(){return this.addForm&&this.addForm.searchForm&&this.addForm.searchForm.formData},checkBoxClass(){const e=this.hasCheckBox;return e?"checkbox-on":"checkbox-off"}},methods:{getCheckedSelection(){const e=this.addForm.idKey||"id",t=this.initChecks.map(t=>t[e]),a=this.getObjFlatValue(this.multipleSelectionCache,e);return a?a.filter(a=>t.includes(a[e])):[]},fetchData(e){this.paginationConfig.total=e.total,this.searchLoading=!1,this.$emit("data-fetcher",e)},filterListByField(e,t){return e.reduce((e,a)=>{if(!e.length)return[...e,a];const r=e.some(e=>e[t]===a[t]);return r?e:[...e,a]},[])},getObjFlatValue(e,t){let a=Object.values(e);return a=a.reduce((e,t)=>e.length?[...e,...t]:[...t],[]),a=this.filterListByField(a,t),a},onSelectionChange(e){const t=this.addForm.idKey,a=this.paginationConfig.pageIndex;let r=this.initChecksCache,o=this.multipleSelectionCache[a]||[];const i=e.map(e=>e[t]),s=o.filter(e=>!i.includes(e[t])),l=s.map(e=>e[t]);r=r.filter(e=>!l.includes(e[t])),this.initChecksCache=[...r],this.multipleSelectionCache[a]=[...e],this.multipleSelection=this.getObjFlatValue(this.multipleSelectionCache,t),this.uncommitSelectionache={...this.multipleSelectionCache}},async getTableData(e){let t=null;const a=this.addForm.idKey;this.tableData.length>0?t=this.tableData:(this.param.searchKey&&(e.searchKey=this.param.searchKey),t=await this.childSearch(e));const r=this.getObjFlatValue(this.uncommitSelectionache,a),o=this.firstLoadTableEnd?this.initChecksCache:this.initChecks;this.firstLoadTableEnd=!0;const i=[...o,...r],s=i.map(e=>e[a]),l=t.list||[],n=l.some(e=>s.includes(e[a]));let c=[];return n&&(c=i),window.requestIdleCallback(()=>{this.multipleChecks=c}),this.refreshTableFlag=!1,t},submit(){const e=this.options;this.$emit("submit-call-back",this.multipleSelection,e),this.$emit("update:productVisible",!1),this.multipleChecks=[]},cancel(){this.$emit("update:productVisible",!1),this.multipleChecks=[]},handleSelect(e){let t=e.data.row.productId;-1===this.expands.indexOf(t)?this.expands.push(t):this.expands.splice(this.expands.indexOf(t),1)},removeSelected(e){this.$refs["data-table"].$refs.tableRef.toggleRowSelection(e)}},filters:{obj2str(e){const t=[];return t.push(Object.values(e)[1]),t.join(",")}},created(){},mounted(){},activated(){}},l=s,n=(a("953e"),a("2877")),c=Object(n["a"])(l,r,o,!1,null,"40730a68",null);t["a"]=c.exports},"1c9c":function(e,t,a){},"1e7b":function(e,t,a){},"32ee":function(e,t,a){"use strict";a("4230")},3448:function(e,t,a){},"35a4":function(e,t,a){"use strict";a.d(t,"n",(function(){return o})),a.d(t,"d",(function(){return i})),a.d(t,"p",(function(){return s})),a.d(t,"h",(function(){return l})),a.d(t,"g",(function(){return n})),a.d(t,"e",(function(){return c})),a.d(t,"o",(function(){return d})),a.d(t,"k",(function(){return u})),a.d(t,"c",(function(){return p})),a.d(t,"j",(function(){return f})),a.d(t,"i",(function(){return h})),a.d(t,"l",(function(){return m})),a.d(t,"m",(function(){return g})),a.d(t,"b",(function(){return b})),a.d(t,"a",(function(){return C})),a.d(t,"q",(function(){return v})),a.d(t,"f",(function(){return y}));var r=a("0bbd");function o(e){return Object(r["a"])({url:"/fintech/v1/group/product",method:"post",data:e})}function i(e){return Object(r["a"])({url:"/fintech/v1/group/checkInputKyc",method:"post",data:e})}function s(e){return Object(r["a"])({url:"/fintech/v1/group/trustLevelAndSegment",method:"post",data:e})}function l(e){return Object(r["a"])({url:"/fintech/v1/group/assign/product",method:"post",data:e})}function n(e){return Object(r["a"])({url:"/fintech/v1/group/queryAccountType",method:"post",data:e})}function c(e){return Object(r["a"])({url:"fintech/v1/identity/verify/activeMsisdn",method:"post",data:e})}function d(e){return Object(r["a"])({url:"/fintech/v1/group/create",method:"post",data:e})}function u(e){return Object(r["a"])({url:"/fintech/v1/identity/generateIdentifier",method:"post",data:e})}function p(e){return Object(r["a"])({url:"/fintech/v1/identity/verify/groupCode",method:"post",data:e})}function f(e){return Object(r["a"])({url:"/fintech/v1/group/dcc/queryProduct",method:"POST",data:e})}function h(e){return Object(r["a"])({url:"fintech/v1/group/queryBusinessGroupList",method:"post",data:e})}function m(e){return Object(r["a"])({url:"fintech/v1/groupMember/listGroupMembersByCustomer",method:"post",data:e})}function g(e){return Object(r["a"])({url:"fintech/v1/groupMember/queryGroupMemberRule",method:"post",data:e})}function b(e){return Object(r["a"])({url:"fintech/v1/groupMember/changeGroupMember/rule",method:"post",data:e})}function C(e){return Object(r["a"])({url:"fintech/v1/groupMember/addGroupMember",method:"post",data:e})}function v(e){return Object(r["a"])({url:"fintech/v1/groupMember/removeGroupMember",method:"post",data:e})}function y(e){return Object(r["a"])({url:"fintech/v1/group/info",method:"post",data:e})}},4230:function(e,t,a){},"5d10":function(e,t,a){"use strict";a("82ee")},6198:function(e,t,a){"use strict";a("bfbd")},6226:function(e,t,a){e.exports={activeMenuColor:"#366bfc",primaryColor:"#366bfc",menuColor:"#5c5c5c",fillEmphasisColor:"#5c5c5c",fillLightColor:"#fafafa",fillStrongColor:"#c7c7c7",fillRegularColor:"#f0f0f0",fillColorDark:"#e0e0e0",lineStrongColor:"#8f8f8f",textEmphasisColor:"#282828",backgroundColor:"#fff",statusErrorColor:"#ff4040",statusSuccessColor:"#27bf88",statusColorwarning:"#ff7420",statusColorSAecondaryWarning:"#faaf0c",statusNoticeColor:"#338bff",statusDark:"#c7c7c7",initialColor:"#E0E0E0",statusNoticeBackgroundColor:"#F0F9FF",statusErrorBackgroundColor:"#FFF2F0",statusSuccessBackgroundColor:"#F0FFF7",statusSecondaryWarningBackgroundColor:"#FFFBE6",statusWarningBackgroundColor:"#FFF6E6",statusDarkBackgroundColor:"#FAFAFA",lineColorBlue:"#ADD9FF",lineColorError:"#FFC1BA",lineColorGreen:"#A5E6C6",lineColorWarning:"#FFF7ed"}},"65bf":function(e,t,a){"use strict";a("88dd")},"67d5":function(e,t,a){"use strict";a("034d")},"6d4a":function(e,t,a){"use strict";a("3448")},"7f3c":function(e,t,a){"use strict";a("0798")},"82ee":function(e,t,a){e.exports={activeMenuColor:"#366bfc",primaryColor:"#366bfc",menuColor:"#5c5c5c",fillEmphasisColor:"#5c5c5c",fillLightColor:"#fafafa",fillStrongColor:"#c7c7c7",fillRegularColor:"#f0f0f0",fillColorDark:"#e0e0e0",lineStrongColor:"#8f8f8f",textEmphasisColor:"#282828",backgroundColor:"#fff",statusErrorColor:"#ff4040",statusSuccessColor:"#27bf88",statusColorwarning:"#ff7420",statusColorSAecondaryWarning:"#faaf0c",statusNoticeColor:"#338bff",statusDark:"#c7c7c7",initialColor:"#E0E0E0",statusNoticeBackgroundColor:"#F0F9FF",statusErrorBackgroundColor:"#FFF2F0",statusSuccessBackgroundColor:"#F0FFF7",statusSecondaryWarningBackgroundColor:"#FFFBE6",statusWarningBackgroundColor:"#FFF6E6",statusDarkBackgroundColor:"#FAFAFA",lineColorBlue:"#ADD9FF",lineColorError:"#FFC1BA",lineColorGreen:"#A5E6C6",lineColorWarning:"#FFF7ed"}},"88dd":function(e,t,a){},9488:function(e,t,a){"use strict";a("0e19")},"953e":function(e,t,a){"use strict";a("1e7b")},9822:function(e,t,a){},9981:function(e,t,a){"use strict";var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"create-success"},[e._m(0),e.iconText?t("div",{staticClass:"icon-text"},[e._v(e._s(e.iconText))]):e._e(),t("div",{staticClass:"success-info"},[e._v(e._s(e.successText))]),e.tip?t("div",{staticClass:"success-tip"},[e._v(e._s(e.tip))]):e._e(),t("div",{staticClass:"success-operate"},[t("span",{staticClass:"success-operate__pretext"},[e._v("You can:")]),e.detailText?t("span",{staticClass:"view-detail operate-btn",attrs:{id:"viewDetail"},on:{click:e.handleViewDetail}},[e._v(" "+e._s(e.detailText)+" ")]):e._e(),t("span",{staticClass:"operate-btn",attrs:{id:"continueAdd"},on:{click:e.handleContinueAddClick}},[e._v(e._s(e.addText))])])])},o=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"check-icon"},[t("i",{staticClass:"el-icon-a-create-successsmall success-icon"})])}],i={name:"PortalCreateSuccess",props:{iconText:{type:String,default:""},successText:{type:String,default:"created successfully."},detailText:{type:String,default:"View Detail >>"},addText:{type:String,default:"Continue to Add >>"}},data(){return{tip:""}},methods:{handleViewDetail(){this.$emit("view-detail")},handleContinueAddClick(){this.$emit("continue-add")}}},s=i,l=(a("6198"),a("2877")),n=Object(l["a"])(s,r,o,!1,null,"c62ed3d4",null);t["a"]=n.exports},"9cd1":function(e,t,a){"use strict";a("6226")},bfbd:function(e,t,a){},c811:function(e,t,a){"use strict";var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"page-header",class:{"no-bottom-border":!e.showBottomLine,"no-desc-height":!e.projectObj.desc}},[t("div",{staticClass:"header-left"},[e.projectObj.title?t("div",{staticClass:"page-title"},[e._v(" "+e._s(e.projectObj.title)+" "),e._t("title-suffix")],2):e._e(),e.projectObj.desc?t("div",{staticClass:"page-desc"},[e._v(" "+e._s(e.projectObj.desc)+" ")]):e._e()]),t("div",{staticClass:"header-right"},[e._t("header-right")],2)])},o=[],i={name:"PortalHeader",components:{},props:{projectObj:{type:Object,default(){return{}}},showBottomLine:{type:Boolean,default:!0}}},s=i,l=(a("9488"),a("2877")),n=Object(l["a"])(s,r,o,!1,null,"73566ca8",null);t["a"]=n.exports},d3d3:function(e,t,a){"use strict";var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"footer-tap-button"},[t("div",{staticClass:"footer-tap-content",class:{"has-sidebar":e.hasSidebar}},[e.showCancel?t("el-button",{attrs:{id:"reset",type:"primary",plain:"",size:"small"},on:{click:e.resetHndle}},[e._v(e._s(e.$t("common.button.cancel")))]):e._e(),e.showCancel||e.hasOnlySubmitBtn?e._e():t("el-button",{attrs:{id:"reset",type:"primary",plain:"",size:"small"},on:{click:e.resetHndle}},[e._v(e._s(e.$t("common.button.reset")))]),e.showPrevious?t("el-button",{attrs:{id:"previous",size:"small",type:"primary",plain:""},on:{click:e.previousHandle}},[e._v(e._s(e.$t("common.button.prevent"))+" ")]):e._e(),e.showNext?t("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{id:"next",size:"small",type:"primary",disabled:e.submitDisabled,loading:e.submitLoading},on:{click:e.nextHandle}},[e._v(e._s(e.$t("common.button.next")))]):t("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{id:"Submit",size:"small",type:"primary",disabled:e.submitDisabled,loading:e.submitLoading},on:{click:e.submitHanle}},[e._v(" "+e._s(e.$t("common.button.submit"))+" ")])],1)])},o=[],i={name:"footer-tap-button",props:{activeName:{type:String,default:""},steps:{type:Array,default:()=>[]},submitLoading:{type:Boolean,default:!1},submitDisabled:{type:Boolean,default:!1},showCancel:{type:Boolean,default:!1},hasSidebar:{type:Boolean,default:!1},hasOnlySubmitBtn:{type:Boolean,default:!1}},data(){return{inputeValue:"",showQuickLinks:!1}},computed:{showNext(){const{steps:e,activeName:t}=this;return e.length&&e[e.length-1].name!==t},showPrevious(){const{steps:e,activeName:t}=this;return e.length&&e[0].name!==t}},methods:{resetHndle(){this.$emit("reset")},nextHandle(){this.$emit("next")},previousHandle(){this.$emit("previous")},submitHanle(){this.$emit("submit")}}},s=i,l=(a("67d5"),a("9cd1"),a("2877")),n=Object(l["a"])(s,r,o,!1,null,"6b579326",null);t["a"]=n.exports},dc4e:function(e,t,a){"use strict";a("9822")},eb59:function(e,t,a){"use strict";var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"steps-tabs-container"},[t("el-tabs",{staticClass:"info-tabs-container",staticStyle:{"margin-top":"20px","pointer-events":"none"},model:{value:e.tabsActiveName,callback:function(t){e.tabsActiveName=t},expression:"tabsActiveName"}},e._l(e.tabsPanel,(function(a,r){return t("el-tab-pane",{key:r,staticStyle:{"pointer-events":"auto"},attrs:{name:a.name}},[t("div",{attrs:{slot:"label"},slot:"label"},["COMPLETED"===e.getItemStatus(a,r)?t("div",{staticClass:"steps-container",class:{"complete-steps-container":"COMPLETED"===e.getItemStatus(a,r)}},[t("i",{staticClass:"el-icon-a-create-successsmall success-icon"})]):e._e(),"COMPLETED"!==e.getItemStatus(a,r)?t("div",{staticClass:"steps-container",class:{"active-steps-container":"ACTIVE"===e.getItemStatus(a,r)}},[e._v(" "+e._s(r+1)+" ")]):e._e(),t("div",{staticClass:"steps-title",class:{"active-steps-title":"ACTIVE"===e.getItemStatus(a,r)}},[e._v(" "+e._s(a.title)+" ")]),t("div",{staticClass:"steps-sub-title"},[e._v(e._s(a.subTitle))])]),e._t(a.name)],2)})),1)],1)},o=[],i={name:"StepsTabs",props:{activeName:{type:String,default:"first"},tabsPanel:{type:Array,default:()=>[]}},data(){return{tabsActiveName:""}},computed:{getItemStatus(){const e=this.activeName;return function(t,a){const r=this.tabsPanel.findIndex(t=>t.name===e);return a===r?"ACTIVE":a<r?"COMPLETED":"INACTIVE"}}},watch:{activeName(){this.tabsActiveName=this.activeName}},created(){this.tabsActiveName=this.activeName}},s=i,l=(a("fa55"),a("2877")),n=Object(l["a"])(s,r,o,!1,null,"5a4622ae",null);t["a"]=n.exports},f993:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"group-create-config"},[e.createCompleted?t("portal-create-success",{attrs:{successText:e.successText,detailText:"View Detail >>",addText:e.addjmuText},on:{"view-detail":e.goViewDetail,"continue-add":e.goContinueToAdd}}):t("div",[t("portal-header",{attrs:{projectObj:e.titleConfig}}),t("el-form",{ref:"ruleForm",staticClass:"add-form",attrs:{"label-width":"100px","label-position":"top",rules:e.queryFormRules,model:e.groupModel}},[t("steps-tabs",{attrs:{activeName:e.activeName,"tabs-panel":e.tabsPanel}},[t("template",{slot:"first"},[t("group-create-info",{ref:"GroupInfo",attrs:{dataObj:e.groupModel},on:{"update:dataObj":function(t){e.groupModel=t},"update:data-obj":function(t){e.groupModel=t},"App-Product":e.setAppProduct,"groupkycinfo-validate":e.GroupKycInfoValidate}})],1),t("template",{slot:"second"},["second"==e.activeName?t("group-create-details",{attrs:{dataObj:e.groupModel,detaileLoading:e.detaileLoading},on:{"update:dataObj":function(t){e.groupModel=t},"update:data-obj":function(t){e.groupModel=t},"refresh-accountType":e.refreshAccountType,chargeUseDefault:e.chargeUseDefault,ruleUseDefault:e.ruleUseDefault}}):e._e()],1),t("template",{slot:"third"},[t("group-create-review",{attrs:{dataObj:e.groupModel},on:{"update:dataObj":function(t){e.groupModel=t},"update:data-obj":function(t){e.groupModel=t}}})],1)],2),t("footer-tap",{attrs:{"submit-loading":e.footerButtonLoading,"active-name":e.activeName,submitDisabled:!e.hasPerm("IC_IDENTITY_CREATEGROUP_BTN"),steps:e.tabsPanel},on:{reset:e.cancelEvn,previous:e.previousEvn,next:e.submitEvn,submit:e.submitEvn}})],1)],1)],1)},o=[],i=a("9981"),s=a("eb59"),l=function(){var e=this,t=e._self._c;return t("div",{staticStyle:{width:"100%"},attrs:{data:e.dataObj,border:""}},[t("div",{staticClass:"group-card"},[t("div",{staticClass:"group-card__header"},[t("span",{staticClass:"group-card__title"},[e._v(e._s(" Basic Product"))])]),t("div",{staticClass:"group-card__body"},[t("el-form-item",{staticStyle:{"margin-bottom":"0px"},attrs:{label:"Product",required:""}}),t("el-form-item",{attrs:{prop:"showproductInfoList",required:""}},[e.dataObj.showproductInfoList.length>0?t("el-button",{attrs:{plain:"",size:"small",type:"primary"},on:{click:e.showProductPopup}},[t("i",{staticClass:"el-icon-edit el-icon--right"}),t("span",[e._v(" "+e._s(e.$t("IDC.orgCustomer.edit"))+" ")])]):t("el-button",{attrs:{icon:"el-icon-plus",plain:"",size:"small",type:"primary"},on:{click:e.showProductPopup}},[t("span",[e._v(" "+e._s(e.$t("common.button.add"))+" ")])])],1),e.dataObj.showproductInfoList.length>0?t("el-form-item",[t("table-page",{attrs:{columns:e.selectProductColums,"has-pagination":!0,outSideTableData:e.dataObj.showproductInfoList},scopedSlots:e._u([{key:"trustLevel",fn:function(t){return[e._v(" "+e._s(t.data.row.trustLevel)+":"+e._s(t.data.row.trustLevelName)+" ")]}}],null,!1,659622596)})],1):e._e()],1)]),t("div",{staticClass:"segmentation"}),t("div",{staticClass:"group-card"},[t("div",{staticClass:"group-card__header"},[t("span",{staticClass:"group-card__title"},[e._v(e._s(" Identity Info"))])]),t("div",{staticClass:"group-card__body"},[t("el-row",{staticClass:"detail",attrs:{gutter:20}},[t("el-col",e._b({staticClass:"identity"},"el-col",e.colOptions,!1),[t("el-form-item",{staticClass:"tip-wrapper",attrs:{label:"Group Code",required:"",rules:[{validator:e.checkGroupCodeOnBlur,trigger:"blur"}],prop:"identityInfo.groupCode"}},[t("el-input",{attrs:{placeholder:"Please enter"},model:{value:e.dataObj.identityInfo.groupCode,callback:function(t){e.$set(e.dataObj.identityInfo,"groupCode",t)},expression:"dataObj.identityInfo.groupCode"}})],1),t("div",{staticClass:"identity-btn",on:{click:e.GeneratedCode}},[e._v(e._s("Generate Another Identitier"))])],1),t("el-col",e._b({},"el-col",e.colOptions,!1),[t("el-form-item",{staticClass:"tip-wrapper",attrs:{label:"Group Name",required:"",prop:"identityInfo.groupName"}},[t("el-input",{attrs:{placeholder:"Please enter"},model:{value:e.dataObj.identityInfo.groupName,callback:function(t){e.$set(e.dataObj.identityInfo,"groupName",t)},expression:"dataObj.identityInfo.groupName"}})],1)],1)],1),t("el-form-item",{staticClass:"description",staticStyle:{"margin-bottom":"0"},attrs:{label:e.$t("common.label.description"),prop:"identityInfo.description"}},[t("el-input",{staticStyle:{"margin-bottom":"25px"},attrs:{rows:4,type:"textarea",placeholder:"Please enter"},model:{value:e.dataObj.identityInfo.description,callback:function(t){e.$set(e.dataObj.identityInfo,"description",t)},expression:"dataObj.identityInfo.description"}})],1)],1)]),t("div",{staticClass:"segmentation"}),t("div",{staticClass:"group-card"},[t("div",{staticClass:"group-card__header"},[t("span",{staticClass:"group-card__title"},[e._v(e._s(" KYC Info"))])]),t("div",{staticClass:"group-card__body"},[t("kyc-form",{ref:"groupKycInfo",attrs:{identityType:"1002",identityClassify:"group",kycInfo:e.dataObj.kycFormData,mode:"create",basicProductId:e.dataObj.productInfoList.length?e.dataObj.productInfoList[0].productId:""},on:{"update:kycInfo":function(t){return e.$set(e.dataObj,"kycFormData",t)},"update:kyc-info":function(t){return e.$set(e.dataObj,"kycFormData",t)}}})],1)]),t("portal-add-popup",{attrs:{id:"popup-property",searchVisible:e.searchVisible,hasCheckBox:!1,isCheck:!0,isCheckMemory:!1,isSingleCheck:!0,hasPagination:!0,addForm:e.servicePopupConf,childSearch:e.loadSegments,"init-checks":e.initCheckList},on:{"update:searchVisible":function(t){e.searchVisible=t},"update:search-visible":function(t){e.searchVisible=t},"submit-call-back":e.onPropertyChange},scopedSlots:e._u([{key:"trustLevel",fn:function(t){return[e._v(" "+e._s(`${t.row.trustLevel}:${t.row.trustLevelName}`)+" ")]}}])})],1)},n=[],c=a("4c09"),d=a("5b4e"),u=a("0cbd"),p=a("5a0c"),f=a.n(p),h=a("35a4"),m=a("02e3"),g={name:"GroupCreateInfo",components:{KycForm:d["a"],PortalAddPopup:u["a"],TablePage:c["a"]},props:{dataObj:{labels:Object,default(){return{}}}},provide(){return{}},data(){return{addProduct:"Add Product",searchVisible:!1,initCheckList:[],servicePopupConf:{title:"Add Product",label:"Product Name",idKey:"productId",key:"productId",columns:[{label:"Product Name",prop:"productName",align:"left"},{label:"Trust Level",prop:"trustLevelName",align:"left",__slotName:"trustLevel"},{label:"Description",prop:"productDesc",align:"left"}],searchForm:{formData:{name:null},formConf:[{label:"Product Name",key:"productName",prop:"productName",comp:"el-input",bind:{clearable:!0,placeholder:this.$t("common.placeholder.enter")}}]}},selectProductColums:[{label:"Product Name",prop:"productName",align:"left"},{label:"Trust Level",prop:"trustLevel",align:"left",__slotName:"trustLevel"},{label:"Description",prop:"productDesc",align:"left"}],inputRequiredValidateObj:m["e"],nonSpecialCharValidateObj:m["w"]}},created(){this.GeneratedCode()},methods:{showProductPopup(){this.searchVisible=!0},GeneratedCode(){const e=this;Object(h["k"])({identityType:"Group",isBtnTrigger:!0}).then(t=>{t.header.success&&t.identifier&&(e.dataObj.identityInfo.groupCode=t.identifier)})},checkGroupCodeOnBlur(e,t,a){if(t){if(t.length>12||t.length<6)return a(new Error("Must be between 6 and 12 characters"));{let e={groupCode:t};Object(h["c"])(e).then(e=>e.header&&e.header.success?"NotExist"==e.check?a():"Invalid"==e.check?a(new Error("The group code is invalid.")):a(new Error("The group code is existed.")):a(new Error("Query group code error.")))}}else a(new Error("Please enter the code"))},onPropertyChange(e){e&&(this.initCheckList=[],this.initCheckList.push(e),this.$emit("App-Product",{content:e}))},loadSegments(e){return new Promise(t=>{let a={page:e.pageNo||1,productName:e.searchKey?e.searchKey.productName:""};Object(h["n"])(a).then(e=>{e.header&&e.header.success&&(e.list=e.products,e.total=e.page.totalSize),t(e)}).catch(()=>{}).finally(()=>{})})},pickerOptionsEffectiveDate(e){return{disabledDate:e=>e.getTime()<f()().startOf("date")}},pickerOptionsExpireDate(e,t){return{disabledDate:a=>{let r=e,o=t;if(r){let e=new Date(r).getTime()+864e5,t=new Date(o).getTime()+864e5;return e<t}return a.getTime()<f()().startOf("date")}}},getEffectiveDateRange(e,t,a){let r=t.split("/"),o=r[2]+"/"+r[1]+"/"+r[0],i=new Date(o).getTime(),s=f()().startOf("date");i<s?a(new Error("Please select the correct date")):a()},checkKYC(){this.$refs.groupKycInfo.validate(e=>{this.$emit("groupkycinfo-validate",{content:e})})},getGroupkycinfoDataEvn(){return this.$refs.groupKycInfo.getKYCRequestParams()}}},b=g,C=(a("65bf"),a("2877")),v=Object(C["a"])(b,l,n,!1,null,"e227a312",null),y=v.exports,_=function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.detaileLoading,expression:"detaileLoading"}],staticStyle:{width:"100%"},attrs:{data:e.dataObj,border:""}},[t("div",{staticClass:"group-card"},[t("div",{staticClass:"group-card__header"},[t("span",{staticClass:"group-card__title"},[e._v(e._s(" Trust Level and Segment"))])]),t("div",{staticClass:"group-card__body"},[t("el-form-item",{staticClass:"none-margin-bottom"},[t("el-descriptions",{attrs:{column:2,direction:"vertical",colon:!1,"label-style":e.labelStyle,"content-style":e.contentStyle}},[t("el-descriptions-item",{attrs:{label:"Trust Level"}},[e._v(e._s(e.dataObj.trustLevel)+":"+e._s(e.dataObj.trustLevelName))]),t("el-descriptions-item",{attrs:{label:"Segment"}},[e._v(e._s(e.dataObj.selectSegmentName))])],1)],1)],1)]),t("div",{staticClass:"segmentation"}),t("div",{staticClass:"group-card"},[t("div",{staticClass:"group-card__header"},[t("span",{staticClass:"group-card__title"},[e._v(e._s(" First Member"))])]),t("div",{staticClass:"group-card__body"},[t("el-row",[t("el-col",[t("el-form-item",{attrs:{label:"MSISDN",required:"",prop:"msisdn",rules:[{validator:e.checkGroupMsisdnOnBlur,trigger:"blur"}]}},[t("el-row",[t("el-col",e._b({},"el-col",e.colOptions,!1),[t("el-input",{attrs:{size:"small",placeholder:"Please enter"},model:{value:e.dataObj.msisdn,callback:function(t){e.$set(e.dataObj,"msisdn",t)},expression:"dataObj.msisdn"}})],1)],1)],1)],1)],1)],1)]),t("div",{staticClass:"segmentation"}),t("div",{staticClass:"group-card"},[t("div",{staticClass:"group-card__header"},[t("span",{staticClass:"group-card__title"},[e._v(e._s("Product"))])]),t("div",{staticClass:"group-card__body"},[t("el-form-item",[t("table-page",{attrs:{columns:e.selectProductColums,"has-pagination":!0,outSideTableData:e.dataObj.productInfoList},scopedSlots:e._u([{key:"effectiveDate",fn:function(a){return[t("el-form-item",{attrs:{prop:`productInfoList.${a.data.$index}.effectiveDate`,rules:[{required:!0,message:"Please select content",trigger:"change"},{validator:e.getEffectiveDateRange(a.data.row.expireDate),trigger:"blur"}]}},[t("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",size:"small",placeholder:e.$t("common.placeholder.enter"),format:"dd/MM/yyyy","value-format":"dd/MM/yyyy HH:mm:ss","picker-options":e.pickerOptionsEffectiveDate(a.data.row.effectiveDateInit,a.data.row.expireDateInit)},model:{value:a.data.row.effectiveDate,callback:function(t){e.$set(a.data.row,"effectiveDate",t)},expression:"scope.data.row.effectiveDate"}})],1)]}},{key:"expireDate",fn:function(a){return[t("el-form-item",{attrs:{prop:`productInfoList.${a.data.$index}.expireDate`,rules:[{required:!0,message:"Please select content",trigger:"change"},{validator:e.getExpireDateRange(a.data.row.effectiveDate),trigger:"blur"}]}},[t("el-date-picker",{staticStyle:{width:"100%"},attrs:{format:"dd/MM/yyyy","value-format":"dd/MM/yyyy HH:mm:ss",type:"date",size:"small",placeholder:e.$t("common.placeholder.enter"),"picker-options":e.pickerOptionsEffectiveDate(a.data.row.effectiveDateInit,a.data.row.expireDateInit)},model:{value:a.data.row.expireDate,callback:function(t){e.$set(a.data.row,"expireDate",t)},expression:"scope.data.row.expireDate"}})],1)]}},{key:"chargeProfileId",fn:function(a){return[t("el-select",{attrs:{size:"small",placeholder:"Please select"},model:{value:a.data.row.chargeProfileId,callback:function(t){e.$set(a.data.row,"chargeProfileId",t)},expression:"scope.data.row.chargeProfileId"}},e._l(a.data.row.chargeProfiles,(function(e){return t("el-option",{key:e.chargeProfileId,attrs:{label:e.chargeProfileName,value:e.chargeProfileId}})})),1)]}}])})],1)],1)]),t("div",{staticClass:"segmentation"}),t("div",{staticClass:"group-card"},[t("div",{staticClass:"group-card__header"},[t("span",{staticClass:"group-card__title"},[e._v(e._s("Group Member Role"))])]),t("div",{staticClass:"group-card__body"},[t("el-form-item",[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.dataObj.groupMemberRoleList,"empty-text":"No records found."}},[t("el-table-column",{attrs:{fixed:"",label:"Group Role Name",prop:"name"}}),t("el-table-column",{attrs:{fixed:"",label:"Minimum Number Required",prop:"minNumRequired"}}),t("el-table-column",{attrs:{fixed:"",label:"Maximum Number Allowed",prop:"maxNumAllowed"}}),t("el-table-column",{attrs:{fixed:"",label:"Assign to First Member by Default",prop:"default"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.default?"Yes":"No")+" ")]}}])})],1)],1)],1)]),t("div",{staticClass:"segmentation"}),t("div",{staticClass:"group-card"},[t("div",{staticClass:"group-card__header"},[t("span",{staticClass:"group-card__title"},[e._v(e._s("Profile"))])]),t("div",{staticClass:"group-card__body"},[t("el-row",{staticClass:"detail",attrs:{gutter:20}},[t("el-col",e._b({},"el-col",e.colOptions,!1),[t("el-form-item",{staticClass:"identity",attrs:{label:"Charge Profile",prop:"chargeProfileobj"}},[t("el-select",{attrs:{placeholder:"Please select",clearable:""},on:{change:e.seletedChargeProfile},model:{value:e.dataObj.chargeProfileobj.chargeProfileId,callback:function(t){e.$set(e.dataObj.chargeProfileobj,"chargeProfileId",t)},expression:"dataObj.chargeProfileobj.chargeProfileId"}},e._l(e.dataObj.selectChargeProfileList,(function(e){return t("el-option",{key:e.chargeProfileId,attrs:{label:e.chargeProfileName,value:e.chargeProfileId}})})),1),t("div",{staticClass:"identity-btn",on:{click:e.chargeProfileUseDefault}},[e._v(e._s("Use Default"))])],1)],1),t("el-col",e._b({staticClass:"identity"},"el-col",e.colOptions,!1),[t("el-form-item",{attrs:{label:"Rule Profile",required:"",prop:"ruleProfileobj"}},[t("el-select",{attrs:{placeholder:"Please select"},on:{change:e.seletedRuleProfile},model:{value:e.dataObj.ruleProfileobj.ruleProfileId,callback:function(t){e.$set(e.dataObj.ruleProfileobj,"ruleProfileId",t)},expression:"dataObj.ruleProfileobj.ruleProfileId"}},e._l(e.dataObj.selectRuleProfileList,(function(e){return t("el-option",{key:e.ruleProfileId,attrs:{label:e.ruleProfileName,value:e.ruleProfileId}})})),1),t("div",{staticClass:"identity-btn",on:{click:e.ruleProfileUseDefault}},[e._v(e._s("Use Default"))])],1)],1)],1)],1)]),t("div",{staticClass:"segmentation"}),t("div",{staticClass:"group-card"},[t("div",{staticClass:"group-card__header"},[t("span",{staticClass:"group-card__title"},[e._v(e._s("Account"))])]),t("div",{staticClass:"group-card__body"},[t("el-form-item",[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.dataObj.accountTypeList}},[t("el-table-column",{attrs:{fixed:"",label:"Account Type",prop:"accountType.accountTypeName"}}),t("el-table-column",{attrs:{fixed:"",label:"Currency",prop:"currency"}}),t("el-table-column",{attrs:{fixed:"",label:"Rule Profile",prop:"ruleProfile"},scopedSlots:e._u([{key:"default",fn:function(a){return[a.row.accountType.limitExclude?t("span",[e._v(" -- ")]):t("el-select",{attrs:{size:"small",placeholder:"Please select"},model:{value:a.row.ruleProfileId,callback:function(t){e.$set(a.row,"ruleProfileId",t)},expression:"scope.row.ruleProfileId"}},e._l(a.row.ruleProfileBeans,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)]}}])}),t("el-table-column",{attrs:{fixed:"",label:"Operation"},scopedSlots:e._u([{key:"default",fn:function(a){return[a.row.accountType.limitExclude?e._e():t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.handleUseDefault(a)}}},[e._v("Use Default")])]}}])})],1)],1)],1)]),t("product-dialog",{attrs:{productVisible:e.productVisible,addForm:e.productForm,isCheck:!0,isCheckMemory:!0,hasPagination:!0,childSearch:e.loadProductParam},on:{"update:productVisible":function(t){e.productVisible=t},"update:product-visible":function(t){e.productVisible=t},"submit-call-back":e.onProductChange}})],1)},I=[],P=a("0fb1"),D={name:"GroupCreateDetails",components:{TablePage:c["a"],productDialog:P["a"]},props:{dataObj:{labels:Object,default(){return{}}},detaileLoading:{type:Boolean,default:!1}},provide(){return{}},data(){return{labelStyle:{"font-size":"14px !important",color:"var(--descriptions-label-color) !important","font-weight":"400 !important",padding:"0 10px 8px 0 !important","font-family":"Huawei Sans"},contentStyle:{"font-size":"14px !important",color:"var(--descriptions-content-color) !important","font-weight":"400 !important",padding:"0 10px 20px 0 !important","font-family":"Huawei Sans"},productVisible:!1,productForm:{title:this.$t("IDC.orgCustomer.addProduct"),idKey:"productId",columns:[{label:this.$t("IDC.orgCustomer.productName"),prop:"productName","sort-method":(e,t)=>e.productName>t.productName?1:-1,align:"left"},{label:this.$t("IDC.orgCustomer.description"),prop:"productDesc","sort-method":(e,t)=>e.productDesc>t.productDesc?1:-1,align:"left"}],searchForm:{formData:{name:null},formConf:[{label:this.$t("operatorRoleCreate.productName"),key:"productName",prop:"productName",comp:"el-input",bind:{clearable:!0,placeholder:this.$t("common.placeholder.enter")}},{label:this.$t("operatorRoleCreate.serviceName"),key:"serviceName",prop:"serviceName",comp:"el-input",bind:{clearable:!0,placeholder:this.$t("common.placeholder.enter")}}]}},selectProductColums:[{label:this.$t("IDC.orgCustomer.productName"),prop:"productName",align:"left"},{label:this.$t("IDC.orgCustomer.EffectiveDate"),prop:"effectiveDate",align:"left",__slotName:"effectiveDate"},{label:this.$t("IDC.orgCustomer.expirationDate"),prop:"expireDate",align:"left",__slotName:"expireDate"},{label:this.$t("IDC.orgCustomer.chargeProfile"),prop:"chargeProfileId",align:"left",__slotName:"chargeProfileId"},{label:this.$t("IDC.orgCustomer.description"),prop:"productDesc",align:"left"},{label:this.$t("common.label.operation"),prop:"operation",align:"left",__slotName:"operation",fixed:"right"}]}},methods:{handleUseDefault(e){let t=e.row;t.ruleProfileId=e.row.defaultRuleProfileId},checkGroupMsisdnOnBlur(e,t,a){if(t){let e={msisdn:t};Object(h["e"])(e).then(e=>e.header&&e.header.success?"NotExist"==e.check?a(new Error("The MSISDN is not existed.")):"Invalid"==e.check?a(new Error("The MSISDN is invalid.")):a():a(new Error("Query MSISDN error.")))}else a(new Error("Please enter the MSISDN"))},chargeProfileUseDefault(){this.$emit("chargeUseDefault")},ruleProfileUseDefault(){this.$emit("ruleUseDefault")},productAddEvn(){this.productVisible=!0},loadProductParam(e){return new Promise(t=>{let a={page:e.pageNo||1,productName:e.searchKey,selectProducts:this.dataObj.productInfoList.map(e=>e.productId),trustLevelId:this.dataObj.trustLevelId,segmentIds:this.dataObj.segmentIds};Object(h["h"])(a).then(e=>{e.header&&e.header.success&&(e.list=e.products.map(e=>(e.effectiveDateInit=e.effectiveDate,e.expireDateInit=e.expireDate,e.effectiveDate=f()(e.effectiveDate,"DD/MM/YYYY").format("DD/MM/YYYY HH:mm:ss"),e.expireDate=f()(e.expireDate,"DD/MM/YYYY").format("DD/MM/YYYY HH:mm:ss"),{...e}))),t(e)}).catch(()=>{}).finally(()=>{})})},onProductChange(e){e.forEach(e=>{let t=Object.assign({},e);t.isProduct=1,t.chargeProfileId=t.chargeProfileId||t.defaultChargProfileId||"",t.chargeProfiles=t.chargeProfiles||"",this.dataObj.productInfoList.push(t)}),e.length>0&&this.$emit("refresh-accountType",{})},handleDelete(e){this.$confirm("Are you sure to delete it?","",{confirmButtonText:this.$t("common.button.delete"),cancelButtonText:this.$t("common.button.cancel"),closeOnClickModal:!1,type:"warning",customClass:"delete-confirm"}).then(()=>{this.dataObj.productInfoList.splice(e,1),this.$emit("refresh-accountType",{})})},getEffectiveDateRange(e){return(t,a,r)=>{a?e&&f()(a,"DD/MM/YYYY HH:mm:ss").valueOf()>f()(e,"DD/MM/YYYY HH:mm:ss").valueOf()?r(new Error("Effective Date cannot be later than Expire Date")):r():r(new Error("Please select the correct date"))}},getExpireDateRange(e){return(t,a,r)=>{a?e&&f()(e,"DD/MM/YYYY HH:mm:ss").valueOf()>f()(a,"DD/MM/YYYY HH:mm:ss").valueOf()?r(new Error("Effective Date cannot be later than Expire Date")):r():r(new Error("Please select the correct date"))}},pickerOptionsEffectiveDate(e,t=""){return{disabledDate:a=>{let r=e,o=t;return o?a.getTime()<f()(r,"DD/MM/YYYY").valueOf()||a.getTime()>f()(o,"DD/MM/YYYY").valueOf():a.getTime()<f()(r,"DD/MM/YYYY").valueOf()}}},seletedChargeProfile(e){this.dataObj.chargeProfileobj={...this.dataObj.selectChargeProfileList.filter(t=>t.chargeProfileId==e)[0]}},seletedRuleProfile(e){this.dataObj.ruleProfileobj={...this.dataObj.selectRuleProfileList.filter(t=>t.ruleProfileId==e)[0]}}}},k=D,x=(a("6d4a"),Object(C["a"])(k,_,I,!1,null,"5b050fb1",null)),S=x.exports,O=function(){var e=this,t=e._self._c;return t("div",{staticStyle:{width:"100%"},attrs:{data:e.dataObj,border:""}},[t("div",{staticClass:"group-card"},[t("div",{staticClass:"group-card__header"},[t("span",{staticClass:"group-card__title"},[e._v(e._s("Product"))])]),t("div",{staticClass:"group-card__body"},[t("el-table",{staticClass:"table-wrapper",attrs:{data:e.dataObj.productInfoList}},[t("el-table-column",{attrs:{fixed:"",label:"Product Name",prop:"productName"}}),t("el-table-column",{attrs:{fixed:"",label:"Effective Date",prop:"effectiveDate"}}),t("el-table-column",{attrs:{fixed:"",label:"Expiry Date",prop:"expireDate"}}),t("el-table-column",{attrs:{fixed:"",label:"Charge Profile",prop:"chargeProfile"},scopedSlots:e._u([{key:"default",fn:function(a){return[a.row.chargeProfileId&&a.row.chargeProfiles.length?t("span",[e._v(e._s(a.row.chargeProfiles.filter(e=>e.chargeProfileId==a.row.chargeProfileId)[0].chargeProfileName))]):t("span",[e._v(" -- ")])]}}])}),t("el-table-column",{attrs:{fixed:"",label:"Description",prop:"productDesc"}})],1)],1)]),t("div",{staticClass:"segmentation"}),t("div",{staticClass:"group-card"},[t("div",{staticClass:"group-card__header"},[t("span",{staticClass:"group-card__title"},[e._v(e._s("Identity Info"))])]),t("div",{staticClass:"group-card__body"},[t("el-form-item",[t("el-descriptions",{attrs:{column:2,direction:"vertical",colon:!1,"label-style":e.labelStyle,"content-style":e.contentStyle}},[t("el-descriptions-item",{attrs:{label:"Group Code"}},[e._v(e._s(e.dataObj.identityInfo.groupCode))]),t("el-descriptions-item",{attrs:{label:"Group Name"}},[e._v(e._s(e.dataObj.identityInfo.groupName))]),t("el-descriptions-item",{attrs:{label:"Description"}},[e._v(e._s(e.dataObj.identityInfo.description))])],1)],1)],1)]),t("div",{staticClass:"segmentation"}),t("div",{staticClass:"group-card"},[t("div",{staticClass:"group-card__header"},[t("span",{staticClass:"group-card__title"},[e._v(e._s("KYC Info"))])]),t("div",{staticClass:"group-card__body"},[t("kyc-form",{ref:"customerKycInfo",attrs:{mode:"review",reviewKycData:e.dataObj.kycFormData,identityClassify:"customer"}})],1)]),t("div",{staticClass:"segmentation"}),t("div",{staticClass:"group-card"},[t("div",{staticClass:"group-card__header"},[t("span",{staticClass:"group-card__title"},[e._v(e._s("Trust Level and Segment"))])]),t("div",{staticClass:"group-card__body"},[t("el-form-item",[t("el-descriptions",{attrs:{column:2,direction:"vertical",colon:!1,"label-style":e.labelStyle,"content-style":e.contentStyle}},[t("el-descriptions-item",{attrs:{label:"Trust Level"}},[e._v(e._s(e.dataObj.trustLevel)+":"+e._s(e.dataObj.trustLevelName))]),t("el-descriptions-item",{attrs:{label:"Segment"}},[e._v(e._s(e.dataObj.selectSegmentName))])],1)],1)],1)]),t("div",{staticClass:"segmentation"}),t("div",{staticClass:"group-card"},[t("div",{staticClass:"group-card__header"},[t("span",{staticClass:"group-card__title"},[e._v(e._s("First Member"))])]),t("div",{staticClass:"group-card__body"},[t("el-form-item",[t("el-descriptions",{attrs:{column:2,direction:"vertical",colon:!1,"label-style":e.labelStyle,"content-style":e.contentStyle}},[t("el-descriptions-item",{attrs:{label:"MSISDN"}},[e._v(e._s(e.dataObj.msisdn))])],1)],1)],1)]),t("div",{staticClass:"segmentation"}),t("div",{staticClass:"group-card"},[t("div",{staticClass:"group-card__header"},[t("span",{staticClass:"group-card__title"},[e._v(e._s("Group Member Role"))])]),t("div",{staticClass:"group-card__body"},[t("el-table",{staticClass:"table-wrapper",attrs:{data:e.dataObj.groupMemberRoleList,"empty-text":"No records found."}},[t("el-table-column",{attrs:{fixed:"",label:"Group Role Name",prop:"name"}}),t("el-table-column",{attrs:{fixed:"",label:"Minimum Number Required",prop:"minNumRequired"}}),t("el-table-column",{attrs:{fixed:"",label:"Maximum Number Allowed",prop:"maxNumAllowed"}}),t("el-table-column",{attrs:{fixed:"",label:"Assign to First Member by Default",prop:"default"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.default?"Y":"N")+" ")]}}])})],1)],1)]),t("div",{staticClass:"segmentation"}),t("div",{staticClass:"group-card"},[t("div",{staticClass:"group-card__header"},[t("span",{staticClass:"group-card__title"},[e._v(e._s("Profile"))])]),t("div",{staticClass:"group-card__body"},[t("el-form-item",[t("el-descriptions",{attrs:{column:2,direction:"vertical",colon:!1,"label-style":e.labelStyle,"content-style":e.contentStyle}},[t("el-descriptions-item",{attrs:{label:"Charge Profile"}},[e._v(e._s(e.dataObj.chargeProfileobj.chargeProfileName))]),t("el-descriptions-item",{attrs:{label:"Rule Profile"}},[e._v(e._s(e.dataObj.ruleProfileobj.ruleProfileName))])],1)],1)],1)]),t("div",{staticClass:"segmentation"}),t("div",{staticClass:"group-card"},[t("div",{staticClass:"group-card__header"},[t("span",{staticClass:"group-card__title"},[e._v(e._s("Account"))])]),t("div",{staticClass:"group-card__body"},[t("el-form-item",[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.dataObj.accountTypeList}},[t("el-table-column",{attrs:{fixed:"",label:"Account Type",prop:"accountType.accountTypeName"}}),t("el-table-column",{attrs:{fixed:"",label:"Currency",prop:"currency"}}),t("el-table-column",{attrs:{fixed:"",label:"Rule Profile",prop:"ruleProfile"},scopedSlots:e._u([{key:"default",fn:function(a){return[!a.row.accountType.limitExclude&&a.row.ruleProfileBeans.length?t("span",[e._v(e._s(a.row.ruleProfileBeans.filter(e=>e.id==a.row.ruleProfileId)[0].name))]):t("span",[e._v(" -- ")])]}}])})],1)],1)],1)])])},j=[],w={name:"GroupCreateReview",components:{KycForm:d["a"]},props:{dataObj:{labels:Object,data:[],default(){return{}}}},provide(){return{}},data(){return{labelStyle:{"font-size":"14px !important",color:"var(--descriptions-label-color) !important","font-weight":"400 !important",padding:"0 10px 8px 0 !important","font-family":"Huawei Sans"},contentStyle:{"font-size":"14px !important",color:"var(--descriptions-content-color) !important","font-weight":"400 !important",padding:"0 10px 20px 0 !important","font-family":"Huawei Sans"}}},methods:{}},L=w,M=(a("dc4e"),Object(C["a"])(L,O,j,!1,null,"035afa68",null)),N=M.exports,F=a("d3d3"),T=a("c811");const E={validator:(e,t,a)=>t.length>64?a(new Error("Please enter a maximum of 64 characters.")):a()},$=()=>{const e=(e,t,a)=>{let r={identitySortTypeDTO:{sortField:"",sortType:"ASC"},groupName:t,pageNo:1,pageSize:2};Object(h["i"])(r).then(e=>e.header&&e.header.success?e.totalRecords>0?a(new Error("The Group Name is existed")):a():a(new Error("Query Group Name failed.")))};return{validator:e}},B=()=>({"identityInfo.groupCode":[m["e"],m["r"],m["w"]],"identityInfo.groupName":[m["e"],m["w"],E,$()],"identityInfo.description":[m["x"]],showproductInfoList:[m["z"]],msisdn:[m["e"]],"ruleProfileobj.ruleProfileId":[m["z"]]});var A=a("0360"),Y={components:{StepsTabs:s["a"],GroupCreateInfo:y,PortalCreateSuccess:i["a"],GroupCreateDetails:S,GroupCreateReview:N,footerTap:F["a"],PortalHeader:T["a"]},name:"GroupcreateConfiguration",data(){return{identityId:"",createCompleted:!1,submitLoading:!1,successText:"Created Successfully",addjmuText:"Continue to Add >>",activeName:"first",buttonText:"Next",progressIndex:0,tabsPanel:[{name:"first",title:this.$t("IDC.orgCustomer.identityInfo"),subTitle:this.$t("IDC.orgCustomer.identityInfoSub")},{name:"second",title:"Enter Details",subTitle:this.$t("IDC.orgCustomer.enterDetailsSub")},{name:"third",title:"Review",subTitle:this.$t("IDC.orgCustomer.reviewSub")}],queryFormRules:B(),groupModel:{productInfoList:[],showproductInfoList:[],identityInfo:{groupCode:"",groupName:"",description:""},trustLevel:"",segment:"",msisdn:"",pegisteredBy:A["default"].get("user_account")||"",groupMemberRoleList:[],profile:{chargeProfile:"",ruleProfile:"",ruleProfileList:[],chargeProfileList:[]},accountList:[],kycFormData:{},chargeProfileobj:{},ruleProfileobj:{},selectChargeProfileList:[],selectRuleProfileList:[],selectSegmentName:"",trustLevelId:"",trustLevelName:"",accountTypeList:[],segmentIds:""},product:{productName:"",EffectiveDate:"",ExpiryDate:"",chargeProfile:"",description:""},groupMemberRole:{groupRoleName:"",minimumNumberRequired:"",maximumNumberAllowed:"",assigntoFirstMemberbyDefault:""},account:{accountType:"",currency:"",ruleProfile:""},detaileLoading:!1,footerButtonLoading:!1,defaultChargeProfileId:"",defaultRuleProfileId:""}},computed:{titleConfig(){return{title:this.$t("IDC.group.createGroup"),desc:this.$t("IDC.group.dic")}}},created(){},activated(){},methods:{cancelEvn(){this.$confirm("Are you sure to reset all data you have  entered/selected  in this page?","",{confirmButtonText:"Confirm",cancelButtonText:"Cancel",closeOnClickModal:!1,type:"warning"}).then(()=>{this.refreshCurrentPage()})},previousEvn(){this.changeProgressIndex(!1)},submitEvn(){2==this.progressIndex?this.createGroup():0==this.progressIndex?this.$refs.ruleForm.validate(e=>{e&&this.$refs.GroupInfo.checkKYC()}):1==this.progressIndex&&this.$refs.ruleForm.validate(e=>{e&&this.changeProgressIndex(!0)})},changeProgressIndex(e){e?this.progressIndex<2&&this.progressIndex++:this.progressIndex>0&&this.progressIndex--,this.mapProgressIndex()},mapProgressIndex(){0==this.progressIndex?(this.activeName="first",this.buttonText="Next"):1==this.progressIndex?(this.activeName="second",this.buttonText="Next"):2==this.progressIndex&&(this.activeName="third",this.buttonText="Submit")},setAppProduct(e){let t=null,a=e.content;Array.isArray(a)&&!a.length||(t=Object.assign({},a),t.isProduct=0,t.chargeProfileId=t.chargeProfileId||t.defaultChargProfileId||"",t.chargeProfiles=t.chargeProfiles||""),0==this.groupModel.productInfoList.length?t&&(this.groupModel.productInfoList.push(t),this.groupModel.showproductInfoList.push(t)):t?(this.groupModel.showproductInfoList.splice(0,1,t),this.groupModel.productInfoList.splice(0,1,t)):(this.groupModel.showproductInfoList.splice(0,1),this.groupModel.productInfoList.splice(0,1))},GroupKycInfoValidate(e){if(e.content){let e={identityKYCData:this.$refs.GroupInfo.getGroupkycinfoDataEvn(),trustLevelId:this.groupModel.productInfoList[0].trustLevelId};this.footerButtonLoading=!0,Object(h["d"])(e).then(e=>{e.result&&(this.loadQueryTrustLevelAndSegment(),this.changeProgressIndex(!0))}).finally(()=>{this.footerButtonLoading=!1})}},loadQueryTrustLevelAndSegment(){let e=this.groupModel.productInfoList.find(e=>0===e.isProduct),t={selectBasicProductId:e.productId,identityKYCData:this.$refs.GroupInfo.getGroupkycinfoDataEvn()};this.detaileLoading=!0,Object(h["p"])(t).then(t=>{Object(h["m"])({productIds:[e.productId]}).then(e=>{e.header&&e.header.success&&(this.groupModel.groupMemberRoleList=e.groupTypeRoles)}),t.header&&t.header.success&&(this.groupModel.selectChargeProfileList=t.chargeProfileList||[],this.groupModel.chargeProfileobj={...(t.chargeProfileList||[]).filter(e=>e.chargeProfileId==t.selectChargeProfileId)[0]},this.groupModel.selectRuleProfileList=t.ruleProfileList||[],this.groupModel.ruleProfileobj={...(t.ruleProfileList||[]).filter(e=>e.ruleProfileId==t.selectedRuleProfileId)[0]},this.defaultChargeProfileId=t.defaultChargeProfileId,this.defaultRuleProfileId=t.defaultRuleProfileId,this.groupModel.selectSegmentName=t.selectSegmentName,this.groupModel.trustLevel=t.trustLevel,this.groupModel.trustLevelId=t.trustLevelId,this.groupModel.trustLevelName=t.trustLevelName,this.groupModel.accountTypeList=t.accountTypeRuleProfileBeanList.map(e=>(e.ruleProfileId||(e.ruleProfileId=e.defaultRuleProfileId),{...e})),this.groupModel.segmentIds=t.segmentIds||[],this.groupModel.productInfoList=[],t.products.forEach(e=>{this.groupModel.showproductInfoList.forEach(t=>{let a=Object.assign({},e);a.chargeProfileId=a.chargeProfileId||a.defaultChargProfileId||"",a.chargeProfiles=a.chargeProfiles||[],a.effectiveDateInit=a.effectiveDate,a.expireDateInit=a.expireDate,a.effectiveDate=f()(a.effectiveDate,"DD/MM/YYYY").format("DD/MM/YYYY HH:mm:ss"),a.expireDate=f()(a.expireDate,"DD/MM/YYYY").format("DD/MM/YYYY HH:mm:ss"),e.productId!=t.productId?(a.isProduct=2,this.groupModel.productInfoList.push(a)):(a.isProduct=0,this.groupModel.productInfoList.unshift(a))})}))}).finally(()=>{this.detaileLoading=!1})},createGroup(){this.footerButtonLoading=!0,Object(h["o"])({trustLevelId:this.groupModel.trustLevelId,groupCode:this.groupModel.identityInfo.groupCode,groupName:this.groupModel.identityInfo.groupName,description:this.groupModel.identityInfo.description,trustLevel:this.groupModel.trustLevel,chargeProfileId:""+this.groupModel.chargeProfileobj.chargeProfileId||"",ruleProfileId:""+this.groupModel.ruleProfileobj.ruleProfileId||"",groupProductList:this.groupModel.productInfoList,segmentList:this.groupModel.segmentIds.map(e=>({segmentId:e})),groupKyc:this.$refs.GroupInfo.getGroupkycinfoDataEvn(),groupMember:{groupMemberMSISDN:this.groupModel.msisdn,groupMemberRoles:this.groupModel.groupMemberRoleList.map(e=>({...e,roleName:e.name,defaultRole:e.default}))},basicKyc:{msisdn:this.groupModel.msisdn},groupType:this.groupModel.productInfoList[0].productId,accountList:this.groupModel.accountTypeList.map(e=>({accountType:""+(e.accountType.accountTypeId||""),currency:e.currency,ruleProfileId:""+(e.ruleProfileId||"")}))}).then(e=>{e.header&&e.header.success&&(this.changeProgressIndex(!0),this.createCompleted=!0,this.identityId=e.identityId)}).finally(()=>{this.footerButtonLoading=!1})},refreshAccountType(){if(this.groupModel.productInfoList.length>0){let e=[];this.groupModel.accountTypeList=[],this.groupModel.productInfoList.forEach(t=>{e.push(t.productId)});let t={productIds:e,trustLevelId:this.groupModel.trustLevelId,segmentIds:this.groupModel.segmentIds};Object(h["g"])(t).then(e=>{e.accountTypeRuleProfileBeanList.forEach(e=>{e.ruleid=e.ruleProfileId,e.rule=e.ruleProfileName,this.groupModel.accountTypeList.push(e)})})}},goViewDetail(){if(!this.identityId)return;let e={identityId:this.identityId,groupCode:this.groupModel.identityInfo.groupCode};this.$router.push({path:"detail",query:{params:encodeURIComponent(JSON.stringify(e))}})},goContinueToAdd(){this.refreshCurrentPage()},chargeUseDefault(){this.groupModel.chargeProfileobj={...this.groupModel.selectChargeProfileList.filter(e=>e.chargeProfileId==this.defaultChargeProfileId)[0]}},ruleUseDefault(){this.groupModel.ruleProfileobj={...this.groupModel.selectRuleProfileList.filter(e=>e.ruleProfileId==this.defaultRuleProfileId)[0]}}}},R=Y,V=(a("32ee"),a("5d10"),Object(C["a"])(R,r,o,!1,null,"1d933778",null));t["default"]=V.exports},fa55:function(e,t,a){"use strict";a("1c9c")}}]);
//# sourceMappingURL=chunk-e75d2bbe.js.map