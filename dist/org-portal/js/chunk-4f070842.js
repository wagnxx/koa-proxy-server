(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4f070842","chunk-43eec914"],{"02e3":function(t,e,n){"use strict";n.d(e,"e",(function(){return i})),n.d(e,"c",(function(){return a})),n.d(e,"y",(function(){return o})),n.d(e,"z",(function(){return r})),n.d(e,"w",(function(){return l})),n.d(e,"f",(function(){return s})),n.d(e,"u",(function(){return c})),n.d(e,"v",(function(){return u})),n.d(e,"x",(function(){return d})),n.d(e,"g",(function(){return h})),n.d(e,"s",(function(){return p})),n.d(e,"n",(function(){return f})),n.d(e,"r",(function(){return m})),n.d(e,"j",(function(){return g})),n.d(e,"l",(function(){return b})),n.d(e,"q",(function(){return y})),n.d(e,"m",(function(){return v})),n.d(e,"p",(function(){return C})),n.d(e,"k",(function(){return O})),n.d(e,"i",(function(){return L})),n.d(e,"h",(function(){return T})),n.d(e,"t",(function(){return S})),n.d(e,"d",(function(){return j})),n.d(e,"o",(function(){return w})),n.d(e,"a",(function(){return I})),n.d(e,"b",(function(){return P}));let i={required:!0,message:"Please enter content",trigger:"blur"},a={required:!0,message:"Please check content",trigger:"blur"},r={required:!0,message:"Please select content",trigger:"change"},o={pattern:/^[0-9a-zA-Z]*$/,message:"Must be number and letters.",trigger:"blur"},s={pattern:/^[+-]?[0-9]*$/,message:"Must be integer number.",trigger:"blur"},c={pattern:/[0-9]{4}/,message:"The MSISDN must contain at least 4 dligits",trigger:"blur"},l={pattern:/^[^@~`！!#$%^*（）()\-+=|,/<>《》?？;':\"“\[\]{}\\&]*$/,message:"Cannot contain special characters (~`!#$%^*()-+=|,/<>?;':\"[]{}\\&)",trigger:"blur"},u={pattern:/^[^@~`！!#$^*（）()\-+=|,/<>《》?？;':\"“\[\]{}\\&]*$/,message:"Cannot contain special characters (~`!#$^*()-+=|,/<>?;':\"[]{}\\&)",trigger:"blur"},d={pattern:/^[\w- ]+$/,message:"Please do not enter any special characters.",trigger:"blur"};j({minLen:0,maxLen:11});const h=j({minLen:0,maxLen:18}),p=(j({minLen:3,maxLen:3}),j({minLen:6,maxLen:16})),f=(j({minLen:8,maxLen:10}),j({minLen:8,maxLen:11}),j({minLen:4,maxLen:12})),m=j({minLen:6,maxLen:12}),g=j({minLen:0,maxLen:19}),b=j({minLen:0,maxLen:24}),y=j({minLen:0,maxLen:64}),v=(j({minLen:0,maxLen:100}),j({minLen:0,maxLen:256})),C=j({minLen:0,maxLen:512}),O=(j({minLen:8,maxLen:50}),j({minLen:1,maxLen:18})),L=j({minLen:0,maxLen:32}),T=j({minLen:0,maxLen:30}),S=j({minLen:9,maxLen:18});j({minLen:2,maxLen:256});function j({minLen:t=0,maxLen:e=100}){let n="";return n=t>0?`Must be between ${t} and ${e} characters`:`Must be less than ${e} characters`,{min:t,max:e,message:n,trigger:"blur"}}const w=j({minLen:0,maxLen:4});function I(t){let e=[];for(let n in t)t[n]&&t[n].toString().startsWith("%")&&1===t[n].length||!t[n]?e.push(!1):e.push(!0);return!e.every(t=>!1===t)}function P(t){return{validator:(e,n,i)=>{n&&n.startsWith("%")&&1===n.length?i(new Error(""+t)):i()},trigger:"blur"}}},"0e19":function(t,e,n){},2069:function(t,e,n){"use strict";var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"entity-search-dialog"},[e("el-dialog",{attrs:{title:t.dialogTitle,"destroy-on-close":!0,visible:t.dialogVisible_,"close-on-click-modal":!1,width:"800px"},on:{"update:visible":function(e){t.dialogVisible_=e},close:t.isClosedDialog}},[e("div",{staticClass:"dialog-form-search"},[e("portal-form",{ref:"dialogFormRef",attrs:{id:"dialogForm","form-data":t.dialogForm,"form-rules":t.dialogFormRules,"form-config-list":t.formConfigList,searchBtnLoading:t.searchLoading,smallAutoColumn:t.smallAutoColumn,bigAutoColumn:t.bigAutoColumn},on:{"common-enter-event":t.searchEntity,"reset-btn-click":t.resetForm,"search-btn-click":t.searchEntity}})],1),e("div",{staticClass:"dialog-table-list margin-top-20"},[e("table-page",{attrs:{size:"small",isCheck:!0,isCheckMemory:!1,isSingleCheck:!0,isSearch:t.isSearchTable,columns:t.dialogTableColumns,getTableData:t.getDialogTableData,initializingLoading:!1,pagination:t.pagination},on:{"single-selection-change":t.handleTableSelection},scopedSlots:t._u([{key:"status",fn:function(n){return[e("div",{staticClass:"flex flex-align"},[""!==n.data.row.status?e("span",{staticClass:"status-circle",style:t.statusStyle(n.data.row.status)}):t._e(),e("span",[t._v(t._s(t.showStatus(n.data.row.status)))])])]}}])})],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("div",{staticClass:"option-buttons"},[e("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.isOk}},[t._v(t._s(t.$t("common.button.confirm"))+" ")]),e("el-button",{attrs:{plain:"",size:"small"},on:{click:t.isClosedDialog}},[t._v(t._s(t.$t("common.button.cancel")))])],1)])])],1)},a=[],r=n("5826"),o=n("cb9d"),s=n("35a4"),c=n("3186"),l=n("4c09"),u={name:"EntitySearchDialog",props:{smallAutoColumn:{type:Number,default:2,validate:t=>!(24%t)},bigAutoColumn:{type:Number,default:2,validate:t=>!(24%t)},dialogTitle:{type:String,default:""},fieldName:{type:String,default:""},dialogVisible:{type:Boolean,default:!1}},components:{PortalForm:c["a"],TablePage:l["a"]},data(){return{identityStatus:[{label:"All",value:""},{label:"Active",value:"03"},{label:"Dormant",value:"08"},{label:"Frozen",value:"05"},{label:"New",value:"00"},{label:"Suspended",value:"04"}],status:[{label:"All",value:""}],dialogForm:{shortCode:"",msisdn:"",bankName:"",bankShortCode:"",groupCode:"",groupName:""},dialogFormRules:{},searchLoading:!1,isSearchTable:!1,selectedData:{}}},computed:{formConfigList(){return this.computedForm()},dialogTableColumns(){return this.computedTableColumns()},dialogVisible_:{get(){return this.dialogVisible},set(){this.isClosedDialog()}},statusStyle(){return t=>{switch(t){case"03":return{"background-color":"#658DF9"};case"06":return{"background-color":""+this.GlobalStyleVariables.fillStrongColor};case"07":return{"background-color":""+this.GlobalStyleVariables.statusSuccessColor};case"00":return{"background-color":"#658DF9"};case"02":return{"background-color":""+this.GlobalStyleVariables.statusSuccessColor};case"04":return{"background-color":""+this.GlobalStyleVariables.statusSuccessColor};case"05":return{"background-color":""+this.GlobalStyleVariables.fillStrongColor};case"08":return{"background-color":""+this.GlobalStyleVariables.fillStrongColor};default:return}}},pagination(){return{pageIndex:1,pageSize:5,layout:"total, prev, pager, next"}}},methods:{computedForm(){let t;switch(this.fieldName){case"msisdn":t=[{label:"MSISDN",key:"msisdn",comp:"el-input",bind:{placeholder:"Please enter"}}];break;case"shortCode":t=[{label:"Short Code",key:"shortCode",comp:"el-input",bind:{id:"identityId",placeholder:"Please enter",maxlength:21}},{label:"Organization Name",key:"organizationName",comp:"el-input",bind:{placeholder:"Please enter"}},{label:"Identity Status",key:"status",comp:"el-select",options:this.identityStatus,bind:{id:"identityId",placeholder:"Please select",maxlength:21}}];break;case"groupCode":t=[{label:"Group Code",key:"groupCode",comp:"el-input",bind:{placeholder:"Please enter"}},{label:"Group Name",key:"groupName",comp:"el-input",bind:{placeholder:"Please enter"}},{label:"Status",key:"status",comp:"el-select",options:this.status,bind:{id:"identityId",placeholder:"Please enter",maxlength:21}}];break}return t},computedTableColumns(){let t;switch(this.fieldName){case"msisdn":t=[{label:"MSISDN",prop:"msisdn",align:"left"},{label:"Customer Type",prop:"customerType",align:"left",__slotName:"customerType"},{label:"Status",prop:"status",align:"left",__slotName:"status"}];break;case"shortCode":t=[{label:"Short Code",prop:"shortCode",align:"left"},{label:"Organization Name ",prop:"organizationName",align:"left"},{label:"Status",prop:"status",align:"left",__slotName:"status"}];break;case"groupCode":t=[{label:"Group Code",prop:"groupCode",align:"left"},{label:"Group Name",prop:"groupName",align:"left"},{label:"Status",prop:"status",align:"left",__slotName:"status"}];break}return t},isClosedDialog(){this.$refs["dialogFormRef"].innerFormRef.resetFields(),this.selectedData={},this.pagination.pageIndex=1,this.$emit("onCloseDialog",!1)},searchEntity(){this.$refs["dialogFormRef"].innerFormRef.validate(t=>{if(!t)return this.searchLoading=!1,!1;this.isSearchTable=!0,this.searchLoading=!0})},resetForm(){this.$refs["dialogFormRef"].innerFormRef.resetFields()},getDialogTableData(t){switch(this.fieldName){case"msisdn":return new Promise(t=>{this.getCustomerList(t)});case"shortCode":return new Promise(e=>{this.getOrgList(t,e)});case"groupCode":return new Promise(e=>{this.getGroupList(t,e)})}},getOrgList(t,e){t.shortCode=this.dialogForm.shortCode,t.status=this.dialogForm.status,t.organizationName=this.dialogForm.organizationName,t.pageSize=this.pagination.pageSize,Object(o["G"])(t).then(t=>{if(t.header&&t.header.success){let n={header:t.header,list:t.list||[],totalRecords:t.totalRecord};e(n)}else e()}).catch(()=>{e()}).finally(()=>{this.isSearchTable=!1,this.searchLoading=!1})},async getCustomerList(t){let e={},n={msisdn:this.dialogForm.msisdn,page:this.pagination.pageIndex,pageSize:this.pagination.pageSize};const i=await Object(r["j"])({msisdn:this.dialogForm.msisdn});i.header&&i.header.success?i.identityId?(e.customerId=i.identityId,e.cpId=i.cpId):(this.$modal.msgError("The MSISDN does not exist"),t()):t();let a=null;try{a=await Object(r["h"])(n)}catch(o){t()}finally{if(a.header&&a.header.success){let e={header:a.header,list:a.customerList||[],totalRecords:a.total};t(e)}else t(),this.$modal.msgError(a.header.responseDesc);this.isSearchTable=!1,this.searchLoading=!1}},getGroupList(t,e){let n={groupCode:this.dialogForm.groupCode,groupName:this.dialogForm.groupName,pageSize:this.pagination.pageSize,pageNo:this.pagination.pageIndex};Object(s["i"])(n).then(t=>{if(t.header&&t.header.success){let n={header:t.header,list:t.list||[],totalRecords:t.totalRecords};e(n)}else e()}).catch(()=>{e()}).finally(()=>{this.isSearchTable=!1,this.searchLoading=!1})},handleTableSelection(t){this.selectedData=t},isOk(){"{}"!==JSON.stringify(this.selectedData)&&(this.$emit("select",this.selectedData),this.isClosedDialog())},showStatus(t){switch(t){case"00":return"New";case"02":return"Pending Active";case"03":return"Active";case"04":return"Suspended";case"05":return"Frozen";case"06":return"Closed";case"07":return"Capped";case"08":return"Dormant";default:return}}}},d=u,h=(n("a0cc"),n("2877")),p=Object(h["a"])(d,i,a,!1,null,"3a57a3c1",null);e["a"]=p.exports},"35a4":function(t,e,n){"use strict";n.d(e,"n",(function(){return a})),n.d(e,"d",(function(){return r})),n.d(e,"p",(function(){return o})),n.d(e,"h",(function(){return s})),n.d(e,"g",(function(){return c})),n.d(e,"e",(function(){return l})),n.d(e,"o",(function(){return u})),n.d(e,"k",(function(){return d})),n.d(e,"c",(function(){return h})),n.d(e,"j",(function(){return p})),n.d(e,"i",(function(){return f})),n.d(e,"l",(function(){return m})),n.d(e,"m",(function(){return g})),n.d(e,"b",(function(){return b})),n.d(e,"a",(function(){return y})),n.d(e,"q",(function(){return v})),n.d(e,"f",(function(){return C}));var i=n("0bbd");function a(t){return Object(i["a"])({url:"/fintech/v1/group/product",method:"post",data:t})}function r(t){return Object(i["a"])({url:"/fintech/v1/group/checkInputKyc",method:"post",data:t})}function o(t){return Object(i["a"])({url:"/fintech/v1/group/trustLevelAndSegment",method:"post",data:t})}function s(t){return Object(i["a"])({url:"/fintech/v1/group/assign/product",method:"post",data:t})}function c(t){return Object(i["a"])({url:"/fintech/v1/group/queryAccountType",method:"post",data:t})}function l(t){return Object(i["a"])({url:"fintech/v1/identity/verify/activeMsisdn",method:"post",data:t})}function u(t){return Object(i["a"])({url:"/fintech/v1/group/create",method:"post",data:t})}function d(t){return Object(i["a"])({url:"/fintech/v1/identity/generateIdentifier",method:"post",data:t})}function h(t){return Object(i["a"])({url:"/fintech/v1/identity/verify/groupCode",method:"post",data:t})}function p(t){return Object(i["a"])({url:"/fintech/v1/group/dcc/queryProduct",method:"POST",data:t})}function f(t){return Object(i["a"])({url:"fintech/v1/group/queryBusinessGroupList",method:"post",data:t})}function m(t){return Object(i["a"])({url:"fintech/v1/groupMember/listGroupMembersByCustomer",method:"post",data:t})}function g(t){return Object(i["a"])({url:"fintech/v1/groupMember/queryGroupMemberRule",method:"post",data:t})}function b(t){return Object(i["a"])({url:"fintech/v1/groupMember/changeGroupMember/rule",method:"post",data:t})}function y(t){return Object(i["a"])({url:"fintech/v1/groupMember/addGroupMember",method:"post",data:t})}function v(t){return Object(i["a"])({url:"fintech/v1/groupMember/removeGroupMember",method:"post",data:t})}function C(t){return Object(i["a"])({url:"fintech/v1/group/info",method:"post",data:t})}},5826:function(t,e,n){"use strict";n.d(e,"f",(function(){return a})),n.d(e,"n",(function(){return r})),n.d(e,"m",(function(){return o})),n.d(e,"l",(function(){return s})),n.d(e,"p",(function(){return c})),n.d(e,"q",(function(){return l})),n.d(e,"o",(function(){return u})),n.d(e,"j",(function(){return d})),n.d(e,"h",(function(){return h})),n.d(e,"d",(function(){return p})),n.d(e,"a",(function(){return f})),n.d(e,"k",(function(){return m})),n.d(e,"e",(function(){return g})),n.d(e,"g",(function(){return b})),n.d(e,"b",(function(){return y})),n.d(e,"c",(function(){return v})),n.d(e,"i",(function(){return C})),n.d(e,"r",(function(){return O}));var i=n("0bbd");function a(t){return Object(i["a"])({url:"/fintech/v1/customer/queryAccountType",method:"post",data:t})}function r(t){return Object(i["a"])({url:"/fintech/v1/customer/product",method:"post",data:t})}function o(t){return Object(i["a"])({url:"/fintech/v1/customer/loadRange",method:"get",data:t})}function s(t){return Object(i["a"])({url:"/fintech/v1/customer/languages",method:"get",data:t})}function c(t){return Object(i["a"])({url:"/fintech/v1/customer/checkRange",method:"post",data:t})}function l(t){return Object(i["a"])({url:"/fintech/v1/customer/trustLevelAndSegment",method:"post",data:t})}function u(t){return Object(i["a"])({url:"/fintech/v1/customer/addCustomer",method:"post",data:t})}function d(t){return Object(i["a"])({url:"/fintech/v1/queryCustomerIdentity/msisdn",method:"post",data:t})}function h(t){return Object(i["a"])({url:"/fintech/v1/queryBusinessCustomerList",method:"post",data:t})}function p(t){return Object(i["a"])({url:"/fintech/v1/customer/getStatusList",method:"post",data:t})}function f(t){return Object(i["a"])({url:"/fintech/v1/customer/changeStatus",method:"post",data:t})}function m(t){return Object(i["a"])({url:"/fintech/v1/queryCustomerInfo",method:"post",data:t})}function g(t){return Object(i["a"])({url:"/fintech/v1/beneficiaryMgt/lookUpBeneficiary/"+t,method:"get",data:t})}function b(t){return Object(i["a"])({url:"/fintech/v1/customer/assign/product",method:"post",data:t})}function y(t){return Object(i["a"])({url:"/fintech/v1/customer/checkInputKyc",method:"post",data:t})}function v(){return Object(i["a"])({url:"/fintech/v1/customer/getIdType",method:"get"})}function C(t){return Object(i["a"])({url:"/fintech/v1/groupMember/queryCustomerGroup",method:"post",data:t})}function O(t){return Object(i["a"])({url:"/fintech/v1/imtOrgTransaction/upgradeCustomer",method:"post",data:t})}},"5e70":function(t,e,n){"use strict";n.d(e,"r",(function(){return a})),n.d(e,"p",(function(){return r})),n.d(e,"c",(function(){return o})),n.d(e,"d",(function(){return s})),n.d(e,"e",(function(){return c})),n.d(e,"s",(function(){return l})),n.d(e,"a",(function(){return u})),n.d(e,"b",(function(){return d})),n.d(e,"j",(function(){return h})),n.d(e,"h",(function(){return p})),n.d(e,"l",(function(){return f})),n.d(e,"k",(function(){return m})),n.d(e,"f",(function(){return g})),n.d(e,"t",(function(){return b})),n.d(e,"g",(function(){return y})),n.d(e,"q",(function(){return v})),n.d(e,"o",(function(){return C})),n.d(e,"i",(function(){return O})),n.d(e,"m",(function(){return L})),n.d(e,"n",(function(){return T}));var i=n("0bbd");n("5f9a");function a(t){return Object(i["a"])({url:"/fintech/v1/transaction/orderList",method:"post",data:t})}function r(t){return Object(i["a"])({url:"/fintech/v1/transaction/order/orderDetail",method:"post",data:t})}function o(t){return Object(i["a"])({url:"/fintech/v1/transaction/orderList/export",method:"post",data:t,responseType:"blob"})}function s(t){return Object(i["a"])({url:"fintech/v1/transaction/export/reversalRequest",method:"post",data:t,responseType:"blob"})}function c(t){return Object(i["a"])({url:"/fintech/v1/customer/account",method:"post",data:t})}function l(t){return Object(i["a"])({url:"/fintech/v1/transaction/reverseTransaction",method:"post",data:t})}function u(t){return Object(i["a"])({url:"/fintech/v1/transaction/batchApprovalTransaction",method:"post",data:t})}function d(t){return Object(i["a"])({url:"/fintech/v1/transaction/confirmTransaction",method:"post",data:t})}function h(t){return Object(i["a"])({url:"/fintech/v1/Account/queryAccount",method:"post",data:t})}function p(t){return Object(i["a"])({url:"/fintech/v1/transaction/initiateTransaction",method:"post",data:t})}function f(t){return Object(i["a"])({url:"/fintech/v1/transaction/queryAvailableService",method:"post",data:t})}function m(t){return Object(i["a"])({url:"/fintech/v1/transaction/queryAvailableReasonType",method:"post",data:t})}function g(t){return Object(i["a"])({url:"/fintech/v1/transaction/account/statementList",method:"post",data:t})}function b(t){return Object(i["a"])({url:"/fintech/v1/transaction/getTransactionIdentity",method:"post",data:t})}function y(t){return Object(i["a"])({url:"/fintech/v1/account/queryUnFinishHotEntry",method:"post",data:t})}function v(t){return Object(i["a"])({url:"/fintech/v1/transaction/queryServicePreValidation",method:"post",data:t})}function C(t){return Object(i["a"])({url:"/fintech/v1/transaction/queryBudget",method:"post",data:t})}function O(t){return Object(i["a"])({url:"/fintech/v1/transaction/initiateWithdrawTransaction",method:"post",data:t})}function L(t){return Object(i["a"])({url:"/fintech/v1/bankAccount/query",method:"post",data:t})}function T(t){return Object(i["a"])({url:"/fintech/v1/bank/queryBankInfo",method:"post",data:t})}},"7ab9":function(t,e,n){},"88cd":function(t,e,n){"use strict";n("7ab9")},9488:function(t,e,n){"use strict";n("0e19")},a0cc:function(t,e,n){"use strict";n("fcbf")},c32d:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"business-portal-page"},[e("portal-header",{attrs:{projectObj:t.titleConfig}}),e("portal-form",{ref:"searchList",attrs:{"form-data":t.searchList,"form-rules":t.formRules,"form-config-list":t.formConfigList,searchBtnLoading:t.searchLoading},on:{"common-enter-event":t.search,"reset-btn-click":t.reset,"search-btn-click":t.search},scopedSlots:t._u([{key:"oppositeParty",fn:function(){return[e("el-row",{staticClass:"grouped-input",attrs:{gutter:4}},[e("el-col",{staticClass:"grouped-input-type",attrs:{span:t.handleSpanWidth}},[e("el-form-item",{attrs:{label:t.$t("IDC.accountStatement.oppositeParty"),prop:"oppositePartyType"}},[e("el-select",{attrs:{placeholder:t.$t("common.placeholder.select")},on:{change:t.handleSelect},model:{value:t.searchList.oppositePartyType,callback:function(e){t.$set(t.searchList,"oppositePartyType",e)},expression:"searchList.oppositePartyType"}},t._l(t.partySelectOptions,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1),t.showRightCode?e("el-col",{staticClass:"grouped-input-value",attrs:{span:16}},[e("el-form-item",{staticClass:"hidden-label",attrs:{label:t.oppositeInputTitleLabel,prop:"oppositeParty",required:t.oppositePartyRequired}},[e("el-input",{staticClass:"input-with-select",attrs:{placeholder:t.oppositeInputTitleLabel,readonly:"readonly"},on:{blur:function(e){return t.debitPartyShortCodeBlur(e)}},model:{value:t.searchList.oppositeParty,callback:function(e){t.$set(t.searchList,"oppositeParty",e)},expression:"searchList.oppositeParty"}},["all"!==t.searchList.oppositePartyType||"8000"!==t.searchList.oppositePartyType?e("i",{staticClass:"el-icon-more icon-cursor",attrs:{slot:"suffix"},on:{click:t.openDebitShortCodeDialog},slot:"suffix"}):t._e()])],1)],1):t._e()],1)]},proxy:!0}])}),e("entity-search-dialog",{attrs:{"dialog-title":t.entityDialogTitle,dialogVisible:t.dialogVisible,fieldName:t.inputField},on:{"update:dialogVisible":function(e){t.dialogVisible=e},"update:dialog-visible":function(e){t.dialogVisible=e},select:t.receiverSelected,onCloseDialog:t.closeCallBack}}),e("div",{staticClass:"table-list-container"},[e("el-dropdown",{on:{command:t.handleExportClick}},[e("el-button",{staticClass:"margin-bottom-16",attrs:{disabled:t.exportDisabled,type:"primary",size:"small"}},[t._v(" "+t._s(t.$t("common.button.export"))+" "),e("i",{staticClass:"el-icon-arrow-down el-icon--right",staticStyle:{"font-size":"12px"}})]),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e("el-dropdown-item",{attrs:{command:"Excel"}},[t._v("Excel")]),e("el-dropdown-item",{attrs:{command:"Excel2007"}},[t._v("Excel 2007")]),e("el-dropdown-item",{attrs:{command:"CSV"}},[t._v("CSV")]),e("el-dropdown-item",{attrs:{command:"PDF"}},[t._v("PDF")])],1)],1),e("table-page",{ref:"data-table",staticClass:"table-page",attrs:{size:"small","has-pagination":t.hasPagination,columns:t.columns,pagination:t.paginationConfig,getTableData:t.getTableData,"is-search":t.refreshTableFlag},scopedSlots:t._u([{key:"orderIdOperation",fn:function(n){return[e("el-button",{staticStyle:{padding:"0"},attrs:{type:"text"},on:{click:function(e){return t.showDetail(n.data.row)}}},[t._v(" "+t._s(n.data.row.tradeOrderId)+" ")])]}},{key:"operation",fn:function(n){return[t.isShowReverse(n.data.row)?e("el-button",{staticClass:"btn",staticStyle:{padding:"0"},attrs:{type:"text"},on:{click:function(e){return t.reverse(n.data.row)}}},[t._v(" "+t._s(t.$t("IDC.reviewTransaction.button.reverse"))+" ")]):t._e(),t.isShowProcess(n.data.row)?e("el-button",{staticClass:"btn",staticStyle:{padding:"0"},attrs:{type:"text"},on:{click:function(e){return t.goToProcessPage(n.data.row)}}},[t._v(" "+t._s(t.$t("common.button.process"))+" ")]):t._e()]}},{key:"transactionStatus",fn:function(n){return[e("span",{staticClass:"status-circle",style:t.statusStyle(n.data.row.transactionStatus)}),e("span",[t._v(t._s(n.data.row.transactionStatus))])]}}])})],1)],1)},a=[],r=n("c811"),o=n("4c09"),s=n("3186"),c=n("02e3"),l=n("2069"),u=n("5e70"),d=n("7dfc"),h=n("5a0c"),p=n.n(h);const f={all:"all",customer:"1000",group:"7000",organization:"5000",sp:"8000"};var m={name:"ReviewTrasaction",components:{PortalHeader:r["a"],TablePage:o["a"],PortalForm:s["a"],entitySearchDialog:l["a"]},props:{activeName:{type:String,default:""},identityId:{type:String,default:""}},data(){return{dialogVisible:!1,entityDialogTitle:"",inputField:"",handleSpanWidth:24,showRightCode:!1,partySelectOptions:[{label:"All",value:f.all},{label:"Organization",value:f.organization},{label:"Customer",value:f.customer},{label:"Group",value:f.group},{label:"SP",value:f.sp}],oppositeInputTitleLabel:"",oppositePartyRequired:!0,isSearchTableData:!1,identityType:"",searchLoading:!1,searchVisible:!1,refreshTableFlag:!1,hasPagination:!0,exportDisabled:!0,totalRecords:0,relatedAccountList:[],searchList:{queryMode:"1",initiationTime:this.getInitTime(),transactionStatus:"all",debit:"",relatedAccount:"",oppositeParty:"",oppositePartyId:"",oppositePartyType:"all",receiptNo:""},columns:[{label:this.$t("IDC.reviewTransaction.label.receiptNo"),prop:"tradeOrderId",align:"left",__slotName:"orderIdOperation","min-width":150},{label:this.$t("IDC.reviewTransaction.label.completionTime"),prop:"finishTime",align:"left","min-width":180},{label:this.$t("IDC.reviewTransaction.label.details"),prop:"details",align:"left","min-width":185},{label:this.$t("IDC.reviewTransaction.label.oppositeParty"),prop:"opposityPartyName",align:"left","min-width":185},{label:this.$t("IDC.reviewTransaction.label.transactionStatus"),prop:"transactionStatus",align:"left","min-width":150,__slotName:"transactionStatus"},{label:this.$t("IDC.reviewTransaction.label.currency"),prop:"transactionCurrency",align:"left","min-width":120},{label:this.$t("common.label.operation"),prop:"operation",align:"left",fixed:"right",__slotName:"operation","min-width":93}],modeOptions:[{label:"Transactions as Debit/Credit Party",value:"1"},{label:"Transactions as Receipt No.",value:"2"}],statusOptions:[{label:"All",value:"all"},{label:"Authorized",value:"Authorized"},{label:"Pending Authorized",value:"Pending Authorized"},{label:"Refund Pending Authorized",value:"Refund Pending Authorized"},{label:"Completed",value:"Completed"},{label:"Cancelled",value:"Cancelled"},{label:"Declined",value:"Declined"},{label:"Expired",value:"Expired"},{label:"Refunded",value:"Refunded"}],debitOptions:[{label:"Both",value:""},{label:"Debit",value:"1"},{label:"Credit",value:"0"}],relatedAccountOptions:[{label:"All",value:""}],oppositePartyOptions:[{label:"All",value:""},{label:"Customer",value:"10"},{label:"Group",value:"30"},{label:"Organization",value:"50"},{label:"SP",value:"00"}],paginationConfig:{total:0,pageIndex:1,pageSize:10},formRules:{queryMode:[c["z"]],initiationTime:[c["z"]],transactionStatus:[c["z"]],receiptNo:[c["w"]]},pickerOptions:{disabledDate:t=>{let e=p()().startOf("date").subtract(1,"month"),n=p()().endOf("date");return t.getTime()<e||t.getTime()>n}}}},computed:{titleConfig(){return{title:this.$t("IDC.reviewTransaction.pageTitle"),desc:this.$t("IDC.reviewTransaction.pageDesc")}},formConfigList(){return"2"===this.searchList.queryMode?this.receiptNoConfigList:this.debitPartyConfigList},receiptNoConfigList(){return[{label:this.$t("IDC.reviewTransaction.label.queryMode"),key:"queryMode",comp:"el-select",options:this.modeOptions,bind:{placeholder:this.$t("common.placeholder.select"),id:"queryMode"}},{label:this.$t("IDC.reviewTransaction.label.receiptNo"),key:"receiptNo",comp:"el-input",bind:{placeholder:this.$t("common.placeholder.enter"),id:"receiptNo"}}]},debitPartyConfigList(){return[{label:this.$t("IDC.reviewTransaction.label.queryMode"),key:"queryMode",comp:"el-select",options:this.modeOptions,bind:{placeholder:this.$t("common.placeholder.select"),id:"queryMode"}},{formItemClass:"form-special-date-box",sameGroup:!0,align:"left",label:this.$t("IDC.reviewTransaction.label.initiationTime"),description:this.$t("IDC.reviewTransaction.label.initiationTimeDesc"),prop:"initiationTime",comp:[{key:"initiationTime",comp:"el-date-picker",bind:{id:"initiationTime",type:"datetimerange",format:"dd/MM/yyyy HH:mm:ss","range-separator":"~","default-time":["00:00:00","23:59:59"],"start-placeholder":"Please select","end-placeholder":"Please select","picker-options":this.pickerOptions}},{comp:"i",class:"el-icon-date data_icon"}]},{label:this.$t("IDC.reviewTransaction.label.transactionStatus"),key:"transactionStatus",comp:"el-select",options:this.statusOptions,bind:{placeholder:this.$t("common.placeholder.select"),id:"transactionStatus"}},{label:this.$t("IDC.reviewTransaction.label.debit"),key:"debit",comp:"el-select",options:this.debitOptions,bind:{placeholder:this.$t("common.placeholder.select"),id:"debit"}},{label:this.$t("IDC.reviewTransaction.label.relatedAccount"),key:"relatedAccount",comp:"el-select",options:this.relatedAccountOptions,bind:{placeholder:this.$t("common.placeholder.select"),id:"relatedAccount"}},{slotName:"oppositeParty"}]},statusStyle(){return t=>{switch(t){case"Initiated":return{"background-color":""+this.GlobalStyleVariables.initialColor};case"Completed":return{"background-color":""+this.GlobalStyleVariables.statusSuccessColor};case"Pending":case"Authorized":case"Pending_Authorized":case"Refund":return{"background-color":""+this.GlobalStyleVariables.statusColorSAecondaryWarning};case"cancelled":case"Declined":case"Expired":return{"background-color":""+this.GlobalStyleVariables.statusDark};default:return{"background-color":""+this.GlobalStyleVariables.statusNoticeColor}}}}},watch:{"searchList.queryMode":{handler(){this.$refs["searchList"].clearValidate()},deep:!0},"searchList.oppositePartyType":{handler(t){this.searchList.oppositeParty="",t===f.all&&(this.showRightCode=!1,this.handleSpanWidth=24),t===f.organization?(this.oppositeInputTitleLabel=this.$t("TRC.reviewTransaction.label.shortCode"),this.handleSpanWidth=8,this.showRightCode=!0):t===f.customer?(this.oppositeInputTitleLabel=this.$t("TRC.reviewTransaction.label.MSISDN"),this.handleSpanWidth=8,this.showRightCode=!0):t===f.group?(this.oppositeInputTitleLabel=this.$t("TRC.reviewTransaction.label.groupCode"),this.handleSpanWidth=8,this.showRightCode=!0):t===f.sp&&(this.handleSpanWidth=24,this.showRightCode=!1)},immediate:!0,deep:!0}},created(){"orgOperator"===this.activeName?this.identityType="3000":this.identityType="5000"},activated(){},mounted(){this.getRelatedAccountOptions()},methods:{openDebitShortCodeDialog(){"1000"===this.searchList.oppositePartyType||"5000"===this.searchList.oppositePartyType||"7000"===this.searchList.oppositePartyType?this.dialogVisible=!0:this.dialogVisible=!1},receiverSelected(t){const e={msisdn:"identityId",shortCode:"organizationId",groupCode:"identityId"};this.searchList.oppositeParty=t[this.inputField],this.searchList.oppositePartyId=t[e[this.inputField]]},closeCallBack(t){this.dialogVisible=t},handleSelect(t){switch(this.searchList.oppositeParty="",this.searchList.oppositePartyId="",t){case"1000":this.entityDialogTitle="Select Customer",this.inputField="msisdn";break;case"5000":this.entityDialogTitle="Select Organization",this.inputField="shortCode";break;case"7000":this.entityDialogTitle="Select Group Code",this.inputField="groupCode";break}},debitPartyShortCodeBlur(t){t.target.value},getInitTime(){let t=new Date(p()().startOf("date").subtract(1,"month")),e=new Date(p()().endOf("date"));return[t,e]},isShowReverse(t){return!!t.reverseMode&&(("Paid"===t.transactionStatus||"Completed"===t.transactionStatus)&&"A"!==t.reverseMode)},isShowProcess(t){return"Authorized"===t.transactionStatus||"Pending Authorized"===t.transactionStatus},async getRelatedAccountOptions(){let t={identityId:this.identityId},e=await Object(u["j"])(t);e.list&&e.list.length>0&&(this.relatedAccountList=e.list,e.list.forEach(t=>{this.relatedAccountOptions.push({label:t.accountName,value:t.accountNo})}))},reset(){this.clearSearchListData(),this.search()},clearSearchListData(){this.searchList.initiationTime=this.getInitTime(),this.searchList.transactionStatus="all",this.searchList.debit="",this.searchList.relatedAccount="",this.searchList.oppositeParty="",this.searchList.receiptNo=""},search(){this.searchLoading=!0,this.$refs["searchList"].innerFormRef.validate(t=>{t?(this.paginationConfig={total:0,pageIndex:1,pageSize:10},this.refreshTableFlag=!0):this.searchLoading=!1})},showDetail(t){let e={tradeOrderId:t.tradeOrderId,identityId:this.identityId,identityType:this.identityType,status:t.transactionStatus,type:"detail",from:"transaction"};const n="/mainPage/identifierCenter/organizationInfo/organization/transactionDetail";this.openNewWindow({path:n,query:{params:encodeURIComponent(JSON.stringify(e))}})},reverse(t){let e={tradeOrderId:t.tradeOrderId,identityId:this.identityId,identityType:this.identityType,type:"reverse",from:"transaction"};const n="/mainPage/identifierCenter/organizationInfo/organization/transactionDetail";this.openNewWindow({path:n,query:{params:encodeURIComponent(JSON.stringify(e))}})},goToProcessPage(t){let e={tradeOrderId:t.tradeOrderId,identityId:this.identityId,identityType:this.identityType,type:"process",from:"transaction"};const n="/mainPage/identifierCenter/organizationInfo/organization/transactionDetail";this.openNewWindow({path:n,query:{params:encodeURIComponent(JSON.stringify(e))}})},getTableData(){let t={identityType:this.identityType,tradePartyId:this.identityId,createTimeBegin:this.searchList.initiationTime?p()(this.searchList.initiationTime[0]).format("YYYY-MM-DD HH:mm:ss"):"",createTimeEnd:this.searchList.initiationTime?p()(this.searchList.initiationTime[1]).format("YYYY-MM-DD HH:mm:ss"):"",accountNo:this.searchList.relatedAccount,oppositePartyId:this.searchList.oppositePartyId,oppositePartyType:"8000"===this.searchList.oppositePartyType?this.searchList.oppositePartyType:"",transactionRole:this.searchList.debit,status:"all"===this.searchList.transactionStatus?[]:[this.searchList.transactionStatus],startNumber:this.paginationConfig.pageIndex,pageSize:this.paginationConfig.pageSize};return"2"===this.searchList.queryMode&&(t={identityType:this.identityType,tradePartyId:this.identityId,startNumber:this.paginationConfig.pageIndex,pageSize:this.paginationConfig.pageSize,tradeOrderId:this.searchList.receiptNo}),this.searchLoading=!0,new Promise(e=>{Object(u["r"])(t).then(t=>{t.header&&t.header.success?(t.totalRecords=t.totalSize||0,t.list=t.spOrderQueryDTOList||[],t.list=t.list.map(t=>(t.finishTime&&(t.finishTime=p()(t.finishTime).format("DD/MM/YYYY HH:mm:ss")),t))):(t.totalRecords=0,t.list=[]),this.exportDisabled=!(t.list.length>0),e(t)}).catch(()=>{e()}).finally(()=>{this.refreshTableFlag=!1,this.searchLoading=!1})})},handleExportClick(t){this.$refs["searchList"].validate(e=>{if(e){let e=this.relatedAccountList.filter(t=>t.accountNo===this.searchList.relatedAccount),n={tradePartyId:this.identityId,identityType:this.identityType,accountType:e.length?e[0].accountTypeId:"",accountNo:e.length?e[0].accountNo:"",oppositePartyId:this.searchList.oppositePartyId,oppositePartyType:"8000"===this.searchList.oppositePartyType?this.searchList.oppositePartyType:"",transactionRole:"both"===this.searchList.debit?"":this.searchList.debit,initiatorIdentityId:"",serviceCodes:[],status:"all"==this.searchList.transactionStatus?[]:[this.searchList.transactionStatus],createTimeBegin:this.searchList.initiationTime?p()(this.searchList.initiationTime[0]).format("YYYY-MM-DD HH:mm:ss"):"",createTimeEnd:this.searchList.initiationTime?p()(this.searchList.initiationTime[1]).format("YYYY-MM-DD HH:mm:ss"):"",exportType:t,requestType:"allTran",reasonType:"",currency:""};"2"===this.searchList.queryMode&&(n={identityType:this.identityType,tradePartyId:this.identityId,tradeOrderId:this.searchList.receiptNo}),Object(u["c"])(n).then(e=>{if("Excel2007"===t?t="XLS":"Excel"===t&&(t="XLSX"),"application/json"===e.type){const t=new FileReader;t.readAsText(e);const n=this;t.onload=function(){const e=JSON.parse(t.result);n.$modal.msgError(e.header.responseDesc)}}else{const n=new Date,i=Object(d["a"])(n,"YYYYMMDDHHmmss"),a=new Blob([e],{type:"application/ms-excel"}),r=document.createElement("a");r.download="TRANSACTION_"+i+"."+t.toLowerCase(),r.style.display="none",r.href=URL.createObjectURL(a),document.body.appendChild(r),r.click(),URL.revokeObjectURL(r.href),document.body.removeChild(r)}}).catch().finally()}})}}},g=m,b=(n("88cd"),n("2877")),y=Object(b["a"])(g,i,a,!1,null,"1413b048",null);e["default"]=y.exports},c811:function(t,e,n){"use strict";var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"page-header",class:{"no-bottom-border":!t.showBottomLine,"no-desc-height":!t.projectObj.desc}},[e("div",{staticClass:"header-left"},[t.projectObj.title?e("div",{staticClass:"page-title"},[t._v(" "+t._s(t.projectObj.title)+" "),t._t("title-suffix")],2):t._e(),t.projectObj.desc?e("div",{staticClass:"page-desc"},[t._v(" "+t._s(t.projectObj.desc)+" ")]):t._e()]),e("div",{staticClass:"header-right"},[t._t("header-right")],2)])},a=[],r={name:"PortalHeader",components:{},props:{projectObj:{type:Object,default(){return{}}},showBottomLine:{type:Boolean,default:!0}}},o=r,s=(n("9488"),n("2877")),c=Object(s["a"])(o,i,a,!1,null,"73566ca8",null);e["a"]=c.exports},cb9d:function(t,e,n){"use strict";n.d(e,"u",(function(){return r})),n.d(e,"G",(function(){return o})),n.d(e,"j",(function(){return s})),n.d(e,"x",(function(){return c})),n.d(e,"d",(function(){return l})),n.d(e,"w",(function(){return u})),n.d(e,"i",(function(){return d})),n.d(e,"t",(function(){return h})),n.d(e,"s",(function(){return p})),n.d(e,"v",(function(){return f})),n.d(e,"O",(function(){return m})),n.d(e,"g",(function(){return g})),n.d(e,"h",(function(){return b})),n.d(e,"I",(function(){return y})),n.d(e,"A",(function(){return v})),n.d(e,"b",(function(){return C})),n.d(e,"F",(function(){return O})),n.d(e,"e",(function(){return L})),n.d(e,"o",(function(){return T})),n.d(e,"l",(function(){return S})),n.d(e,"r",(function(){return j})),n.d(e,"q",(function(){return w})),n.d(e,"K",(function(){return I})),n.d(e,"n",(function(){return P})),n.d(e,"D",(function(){return D})),n.d(e,"a",(function(){return k})),n.d(e,"J",(function(){return z})),n.d(e,"C",(function(){return N})),n.d(e,"N",(function(){return x})),n.d(e,"E",(function(){return R})),n.d(e,"m",(function(){return _})),n.d(e,"B",(function(){return A})),n.d(e,"p",(function(){return q})),n.d(e,"y",(function(){return $})),n.d(e,"L",(function(){return M})),n.d(e,"M",(function(){return F})),n.d(e,"z",(function(){return G})),n.d(e,"c",(function(){return V})),n.d(e,"f",(function(){return E})),n.d(e,"H",(function(){return Y})),n.d(e,"k",(function(){return B}));var i=n("0bbd"),a=n("5f9a");function r(t){return Object(i["a"])({url:Object(a["a"])("/fintech/v1/organization/list",t),method:"get"})}function o(t){return t.pageNo&&(t.pageIndex=t.pageNo,delete t.pageNo),Object(i["a"])({url:"/fintech/v1/organization/queryOrgListByPage",method:"POST",data:t})}function s(t){return Object(i["a"])({url:"/fintech/v1/identity/verify/"+t,method:"post",data:{}})}function c(t){return Object(i["a"])({url:"fintech/v1/organization/changeStatus",method:"post",data:t})}function l(t){return Object(i["a"])({url:"/fintech/v1/organization/changeOrgName",method:"post",data:t})}function u(){return Object(i["a"])({url:"/fintech/v1/organization/languages",method:"get"})}function d(t){return Object(i["a"])({url:"/fintech/v1/orgOperator/checkRoles",method:"post",data:t})}function h(t){return Object(i["a"])({url:Object(a["a"])("/fintech/v1/organization/detail",t),method:"get"})}function p(t){return Object(i["a"])({url:"/fintech/v1/organization/getChildOrgDetail",method:"post",data:t})}function f(t){return Object(i["a"])({url:Object(a["a"])("/fintech/v1/organization/status",t),method:"get"})}function m(t){return Object(i["a"])({url:"/fintech/v1/organization/updateRuleProfile",method:"post",data:t})}function g(t){return Object(i["a"])({url:"/fintech/v1/identity/verify/merchantName",method:"post",data:t})}function b(t){return Object(i["a"])({url:"/fintech/v1/organization/checkOrganizationName",method:"post",data:t,ignoreError:!0})}function y(t){return Object(i["a"])({url:"/fintech/v1/organization/products",method:"post",data:t})}function v(t){return Object(i["a"])({url:"/fintech/v1/organization/assign/product",method:"post",data:t})}function C(t){return Object(i["a"])({url:"/fintech/v1/organization/create",method:"post",data:t})}function O(t){return Object(i["a"])({url:"/fintech/v1/settlement/queryOrgCommiAgreement",method:"post",data:t,ignoreError:!0})}function L(t){return Object(i["a"])({url:"/fintech/v1/identity/checkRule",method:"post",data:t})}function T(t){return Object(i["a"])({url:"/fintech/v1/identity/generateIdentifier",method:"post",data:t})}function S(t){return Object(i["a"])({url:"/fintech/v1/identity/deleteIdentifier",method:"post",data:t})}function j(){return Object(i["a"])({url:"/fintech/v1/organization/getIdentityTypeEnum",method:"get"})}function w(){return Object(i["a"])({url:"/fintech/v1/organization/getIdentitySubTypeEnum",method:"get"})}function I(t){return Object(i["a"])({url:"/fintech/v1/organization/queryRuleProfileList",method:"post",data:t})}function P(t){return Object(i["a"])({url:"/fintech/v1/organization/downloadChargeProfile",method:"post",data:t,responseType:"blob"})}function D(t){return Object(i["a"])({url:"/fintech/v1/organization/queryChargeProfileList",method:"post",data:t})}function k(t){return Object(i["a"])({url:"/fintech/v1/organization/ChargeProfileRuleList/"+t,method:"get"})}function z(t){return Object(i["a"])({url:"/fintech/v1/organization/queryRuleProfileDetail/"+t,method:"get"})}function N(t){return Object(i["a"])({url:"/fintech/v1/organization/queryChargeProfileDetail",method:"post",data:t})}function x(t){return Object(i["a"])({url:"/fintech/v1/organization/updateChargeProfile",method:"post",data:t})}function R(t){return Object(i["a"])({url:"/fintech/v1/organization/queryChildren",method:"post",data:t})}function _(t){return Object(i["a"])({url:"/fintech/v1/organization/downloadBalanceOverview",method:"post",data:t,responseType:"blob"})}function A(t){return Object(i["a"])({url:"/fintech/v1/organization/queryBalanceOverviewPage",method:"post",data:t})}function q(){return Object(i["a"])({url:"/fintech/v1/organization/queryAccountType",method:"get"})}function $(t){return Object(i["a"])({url:"/fintech/v1/organization/queryAccountType",method:"post",data:t})}function M(t){return Object(i["a"])({url:"/fintech/v1/organization/querySubscribeProducts",method:"post",data:t})}function F(t){return Object(i["a"])({url:"/fintech/v1/organization/trustLevelAndSegment",method:"post",data:t})}function G(t){return Object(i["a"])({url:"/fintech/v1/organization/queryAddProducts",method:"post",data:t})}function V(t){return Object(i["a"])({url:"/fintech/v1/changeOrgProduct",method:"post",data:t})}function E(t){return Object(i["a"])({url:"/fintech/v1/organization/checkInputKyc",method:"post",data:t})}function Y(t){return Object(i["a"])({url:"/fintech/v1/organization/queryOrganizationKYC",method:"post",data:t})}function B(t){return Object(i["a"])({url:"/fintech/v1/organization/close",method:"post",data:t})}},fcbf:function(t,e,n){}}]);
//# sourceMappingURL=chunk-4f070842.js.map