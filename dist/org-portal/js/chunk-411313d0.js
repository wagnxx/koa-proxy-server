(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-411313d0","chunk-08b26fac","chunk-748274a0"],{"02e3":function(t,e,a){"use strict";a.d(e,"e",(function(){return i})),a.d(e,"c",(function(){return o})),a.d(e,"y",(function(){return s})),a.d(e,"z",(function(){return r})),a.d(e,"w",(function(){return c})),a.d(e,"f",(function(){return l})),a.d(e,"u",(function(){return n})),a.d(e,"v",(function(){return d})),a.d(e,"x",(function(){return u})),a.d(e,"g",(function(){return h})),a.d(e,"s",(function(){return m})),a.d(e,"n",(function(){return p})),a.d(e,"r",(function(){return g})),a.d(e,"j",(function(){return b})),a.d(e,"l",(function(){return f})),a.d(e,"q",(function(){return C})),a.d(e,"m",(function(){return v})),a.d(e,"p",(function(){return y})),a.d(e,"k",(function(){return I})),a.d(e,"i",(function(){return O})),a.d(e,"h",(function(){return S})),a.d(e,"t",(function(){return N})),a.d(e,"d",(function(){return D})),a.d(e,"o",(function(){return k})),a.d(e,"a",(function(){return w})),a.d(e,"b",(function(){return $}));let i={required:!0,message:"Please enter content",trigger:"blur"},o={required:!0,message:"Please check content",trigger:"blur"},r={required:!0,message:"Please select content",trigger:"change"},s={pattern:/^[0-9a-zA-Z]*$/,message:"Must be number and letters.",trigger:"blur"},l={pattern:/^[+-]?[0-9]*$/,message:"Must be integer number.",trigger:"blur"},n={pattern:/[0-9]{4}/,message:"The MSISDN must contain at least 4 dligits",trigger:"blur"},c={pattern:/^[^@~`！!#$%^*（）()\-+=|,/<>《》?？;':\"“\[\]{}\\&]*$/,message:"Cannot contain special characters (~`!#$%^*()-+=|,/<>?;':\"[]{}\\&)",trigger:"blur"},d={pattern:/^[^@~`！!#$^*（）()\-+=|,/<>《》?？;':\"“\[\]{}\\&]*$/,message:"Cannot contain special characters (~`!#$^*()-+=|,/<>?;':\"[]{}\\&)",trigger:"blur"},u={pattern:/^[\w- ]+$/,message:"Please do not enter any special characters.",trigger:"blur"};D({minLen:0,maxLen:11});const h=D({minLen:0,maxLen:18}),m=(D({minLen:3,maxLen:3}),D({minLen:6,maxLen:16})),p=(D({minLen:8,maxLen:10}),D({minLen:8,maxLen:11}),D({minLen:4,maxLen:12})),g=D({minLen:6,maxLen:12}),b=D({minLen:0,maxLen:19}),f=D({minLen:0,maxLen:24}),C=D({minLen:0,maxLen:64}),v=(D({minLen:0,maxLen:100}),D({minLen:0,maxLen:256})),y=D({minLen:0,maxLen:512}),I=(D({minLen:8,maxLen:50}),D({minLen:1,maxLen:18})),O=D({minLen:0,maxLen:32}),S=D({minLen:0,maxLen:30}),N=D({minLen:9,maxLen:18});D({minLen:2,maxLen:256});function D({minLen:t=0,maxLen:e=100}){let a="";return a=t>0?`Must be between ${t} and ${e} characters`:`Must be less than ${e} characters`,{min:t,max:e,message:a,trigger:"blur"}}const k=D({minLen:0,maxLen:4});function w(t){let e=[];for(let a in t)t[a]&&t[a].toString().startsWith("%")&&1===t[a].length||!t[a]?e.push(!1):e.push(!0);return!e.every(t=>!1===t)}function $(t){return{validator:(e,a,i)=>{a&&a.startsWith("%")&&1===a.length?i(new Error(""+t)):i()},trigger:"blur"}}},"061d":function(t,e,a){},"0713":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"my-organization-container"},[e("section",{staticClass:"container-top"},[e("div",{staticClass:"info-wrapper"},[t._m(0),e("div",{staticClass:"user-info"},[e("el-descriptions",{attrs:{title:t.organizationName}},[e("el-descriptions-item",{attrs:{label:"Identity Status"}},[t._v(" "+t._s(t.identityStatus)+" "),t._e()],1),e("el-descriptions-item",{attrs:{label:"Registration Date"}},[t._v(t._s(t._f("localTimeFormat")(t.registrationDate,"DD/MM/YYYY"))+" ")])],1)],1)]),e("div",{staticClass:"module-btn"},[t._e(),e("button",{on:{click:t.toChildOrganization}},[e("svg-icon",{staticClass:"module-btn_icon",attrs:{"icon-class":"childOrganization"}}),t._v(" Child Organization ")],1),e("button",{on:{click:t.toViewDetail}},[e("svg-icon",{staticClass:"module-btn_icon",attrs:{"icon-class":"toVisible"}}),t._v(" View Detail ")],1)])]),e("section",{staticClass:"module-page"},[e("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[t.hasPerm("IC_OPERATOR_ORG_SEARCH_BTN")?e("el-tab-pane",{attrs:{lazy:!0,label:"Account",name:"account"}},[e("org-account",{attrs:{identityId:t.organizationId,isTopOrganization:t.isTopOrganization}})],1):t._e(),t.hasPerm("IC_OPERATOR_ORG_SEARCH_BTN")?e("el-tab-pane",{attrs:{lazy:!0,label:"Bank Account",name:"bankAcount"}},[e("bank-account",{attrs:{"identity-id":t.organizationId}})],1):t._e(),t.hasPerm("IC_OPERATOR_ORG_SEARCH_BTN")?e("el-tab-pane",{attrs:{lazy:!0,label:"Operator",name:"operator"}},[e("operator",{attrs:{activeName:"myOrganization",propShortCode:t.shortCode}})],1):t._e(),t.hasPerm("IC_TILL_MANAGE_SEARCH_BTN")||t.hasPerm("IC_TILL_ADDBASICINFO_NEXT_BTN")?e("el-tab-pane",{attrs:{lazy:!0,label:"Till",name:"till"}},[e("till",{attrs:{isOrganization:!0}})],1):t._e()],1)],1),e("portal-dialog",{attrs:{visible:t.dialogVisible,title:t.identityDialogTitle},on:{"closed-dialog":t.editIdentityCancel,"cancel-btn-click":t.editIdentityCancel,"confirm-btn-click":t.editIdentityConfirm}},[e("div",{staticClass:"edit-identity",attrs:{slot:"content"},slot:"content"},[e("span",{staticClass:"sub-title"},[t._v(t._s(t.subtitle))]),e("span",{staticClass:"active"},[t._v(t._s(t.identityStatus))]),e("el-form",{ref:"editIdentityForm",attrs:{model:t.editIdentityForm,rules:t.editIdentityRules}},[e("el-form-item",{attrs:{label:"New Identity Status",prop:"newIdentity"}},[e("el-select",{attrs:{placeholder:"Please select"},model:{value:t.editIdentityForm.newIdentity,callback:function(e){t.$set(t.editIdentityForm,"newIdentity",e)},expression:"editIdentityForm.newIdentity"}},t._l(t.statusOptions,(function(t,a){return e("el-option",{key:a,attrs:{label:t.name,value:t.code}})})),1)],1),e("el-divider"),e("el-form-item",{staticClass:"margin-bottom-0",attrs:{label:"Remark",prop:"remark"}},[e("el-input",{attrs:{type:"textarea",rows:"4"},model:{value:t.editIdentityForm.remark,callback:function(e){t.$set(t.editIdentityForm,"remark",e)},expression:"editIdentityForm.remark"}})],1)],1)],1)])],1)},o=[function(){var t=this,e=t._self._c;return e("span",{staticClass:"avatar"},[e("i",{staticClass:"el-icon-Organization"})])}],r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"business-portal-page"},[e("div",{staticClass:"page-desc"},[t._v(t._s(t.$t("IDC.bankAccount.pageDesc")))]),e("div",{staticClass:"table-list-container"},[e("div",{staticClass:"tab-container"},[e("div",{staticClass:"tab-box"},[e("el-button",{class:["tab-btn","first"===t.activeName?"active":"inactive"],attrs:{type:"text"},on:{click:function(e){return t.activeBtnClick()}}},[t._v(" "+t._s(t.$t("IDC.bankAccount.label.activeAccount"))+" ")]),e("el-button",{class:["tab-btn","second"===t.activeName?"active":"inactive"],attrs:{type:"text"},on:{click:function(e){return t.removedBtnClick()}}},[t._v(" "+t._s(t.$t("IDC.bankAccount.label.removedAccount"))+" ")])],1)]),"first"===t.activeName&&t.identityId?e("div",[e("transition",{attrs:{name:"el-fade-in-linear"}},[e("ActiveAccountContent",{directives:[{name:"show",rawName:"v-show",value:"first"===t.activeName,expression:"activeName === 'first'"}],ref:"activeAccountContent",attrs:{"identity-id":t.identityId,searchForm:t.searchForm,assetTypeOptions:t.assetTypeOptions,bankHeadOfficeOptions:t.bankHeadOfficeOptions}})],1)],1):t._e(),"second"===t.activeName&&t.identityId?e("div",[e("transition",{attrs:{name:"el-fade-in-linear"}},[e("RemovedAccountContent",{directives:[{name:"show",rawName:"v-show",value:"second"===t.activeName,expression:"activeName === 'second'"}],ref:"removedAccountContent",attrs:{"identity-id":t.identityId,searchForm:t.searchForm,assetTypeOptions:t.assetTypeOptions,bankHeadOfficeOptions:t.bankHeadOfficeOptions}})],1)],1):t._e()])])},s=[],l=a("f33d"),n=a("4e20"),c=a("ea41"),d={name:"BankAccountList",components:{ActiveAccountContent:n["a"],RemovedAccountContent:c["a"]},props:{identityId:{require:!0,type:String}},data(){return{searchForm:{assetType:null,accountName:null,bankHeadOffice:null,bankName:null},bankHeadOfficeOptions:[{value:null,label:"All"}],assetTypeOptions:[{value:null,label:"All"}],activeName:"first"}},computed:{},watch:{},created(){this.getAssetTypeList(),this.getBankHeadOfficeList()},activated(){},mounted(){},methods:{activeBtnClick(){this.activeName="first"},removedBtnClick(){this.activeName="second"},async getBankHeadOfficeList(){let t=await Object(l["c"])({});if(t.header&&t.header.success){let e=JSON.parse(t.jsonDataStr);e.map(t=>{let e={value:t.code,label:t.value};this.bankHeadOfficeOptions.push(e)})}},async getAssetTypeList(){let t=await Object(l["i"])({dictType:"AssetType"});if(t.header&&t.header.success){let e=JSON.parse(t.dataDictJson);e.map(t=>{let e={value:t.code,label:t.name};this.assetTypeOptions.push(e)})}}}},u=d,h=(a("8455"),a("2877")),m=Object(h["a"])(u,r,s,!1,null,"72835eb8",null),p=m.exports,g=a("e867"),b=a("1d86"),f=a("9563"),C=a("1c45"),v=a("02e3"),y=a("8ac9"),I=a("0360"),O=a("d8d3"),S={name:"MyOrganization",components:{PortalDialog:y["a"],OrgAccount:f["a"],BankAccount:p,Till:g["default"],Operator:b["default"]},data(){return{activeName:"account",organizationName:"-",identityStatus:"-",statusCode:"",registrationDate:[],dialogVisible:!1,identityDialogTitle:"Edit Identity Status",subtitle:"Current Identity Status",editIdentityForm:{newIdentity:"",remark:""},editIdentityRules:{newIdentity:[v["e"]],remark:[v["e"]]},statusOptions:[],organizationId:"",isTopOrganization:!1,shortCode:""}},created(){this.init()},methods:{init(){Object(C["b"])({identityId:""}).then(t=>{if(t.header&&t.header.success){let e=t.organizationInfo;e&&(this.organizationName=e.shortCode+" - "+e.organizationName,this.statusCode=e.status,this.identityStatus=this.showIdentityStatus(this.statusCode),this.registrationDate=e.createTime,this.organizationId=e.organizationId,this.isTopOrganization=e.isTopOrganization,this.shortCode=e.shortCode,I["default"].set("organizationIdentityId",e.organizationId))}})},toChildOrganization(){this.openNewWindow({path:"/mainPage/identifierCenter/organizationInfo/organization/detail",query:{data:encodeURIComponent(JSON.stringify({activeName:"children",organizationId:this.organizationId,identityId:this.organizationId,propShortCode:this.shortCode}))}})},toTransactions(){this.openNewWindow({path:"/mainPage/identifierCenter/organizationInfo/organization/detail",query:{data:encodeURIComponent(JSON.stringify({activeName:"reviewTransaction",organizationId:this.organizationId,identityId:this.organizationId,propShortCode:this.shortCode}))}})},toViewDetail(){this.openNewWindow({path:"/mainPage/identifierCenter/organizationInfo/organization/detail",query:{data:encodeURIComponent(JSON.stringify({activeName:"organizationInfo",organizationId:this.organizationId,identityId:this.organizationId,propShortCode:this.shortCode}))}})},showIdentityStatus(t){return O["c"][t]||"-"},identityEdit(){this.dialogVisible=!0,this.getStatusOptions()},getStatusOptions(){let t={statusCode:this.statusCode};Object(C["c"])(t).then(t=>{t.header&&t.header.success&&(this.statusOptions=t.statusList)})},editIdentityCancel(){this.$refs["editIdentityForm"].resetFields(),this.dialogVisible=!1},editIdentityConfirm(){this.$refs["editIdentityForm"].validate(t=>{t&&this.changeStatus()})},changeStatus(){let t={newStatus:this.editIdentityForm.newIdentity,oldStatus:this.statusCode,receiverIdentityId:this.organizationId,remark:this.editIdentityForm.remark};Object(C["a"])(t).then(t=>{t.header&&t.header.success?(this.$message.success("Operation succeeded."),this.init(),this.dialogVisible=!1):this.$message.error(t.header.responseDesc||"Operation failed!")}).catch(t=>{this.$message.error(t.message)})}}},N=S,D=(a("5c86"),Object(h["a"])(N,i,o,!1,null,"74717d1a",null));e["default"]=D.exports},"0dda":function(t,e,a){},"15f0":function(t,e,a){"use strict";a("3b90")},"1c45":function(t,e,a){"use strict";a.d(e,"b",(function(){return r})),a.d(e,"c",(function(){return s})),a.d(e,"a",(function(){return l}));var i=a("0bbd"),o=a("5f9a");function r(t){return Object(i["a"])({url:Object(o["a"])("/fintech/v1/organization/detail",t),method:"get"})}function s(t){return Object(i["a"])({url:Object(o["a"])("/fintech/v1/organization/status",t),method:"get"})}function l(t){return Object(i["a"])({url:"/fintech/v1/organization/changeStatus",data:t,method:"post"})}},"1caf":function(t,e,a){"use strict";a.d(e,"a",(function(){return o}));var i=a("7dfc");async function o(t,e,a){const{fileType:o,blobType:r="application/ms-excel"}=a,s=await t(e);if("application/json"===s.type){const t=new FileReader;t.readAsText(s);const e=this;t.onload=function(){const a=JSON.parse(t.result);e.$modal.msgError(a.header.responseDesc)}}else{const t=new Date,e=Object(i["a"])(t,"YYYYMMDDHHmmss");let a="FINANCIAL_RECONCILIATION_"+e+"."+o.toLowerCase();s.headers&&(a=s.headers["content-disposition"].split(";")[1].split("filename=")[1]);const l=new Blob([s],{type:r}),n=document.createElement("a");n.download=a,n.style.display="none",n.href=URL.createObjectURL(l),document.body.appendChild(n),n.click(),URL.revokeObjectURL(n.href),document.body.removeChild(n)}}},"1d86":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"role-config business-portal-page"},[e("portal-header",{attrs:{projectObj:t.titleConfig,showBottomLine:!0}}),e("portal-form",{ref:"searchList",attrs:{"form-data":t.searchList,"form-config-list":t.formConfigList,searchBtnLoading:t.searchLoading,formRules:t.queryFormRules,searchBtnDisabled:!t.hasPerm("orgOperator"===t.activeName?"IC_OPERATOR_ORG_SEARCH_BTN":"IC_TACKCALL_ORG_SEARCH_BTN ")},on:{"common-enter-event":t.search,"reset-btn-click":t.reset,"search-btn-click":t.search}}),e("div",{staticClass:"table-list-container"},[e("div",{staticClass:"btn-region"},[e("div",{staticClass:"create-btn"},[e("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-plus",disabled:!t.hasPerm("IC_OPERATOR_ORG_ADD_BTN")},on:{click:t.addOrgOperator}},[t._v(" "+t._s(t.$t("common.button.create"))+" ")])],1),"organization"!==t.activeName&&"myOrganization"!==t.activeName?e("div",{staticClass:"right-btn"},[""!==t.sortCode?e("el-select",{staticClass:"selectSort",staticStyle:{width:"200px"},attrs:{placeholder:"Please Select",size:"small"},on:{change:t.handleCommandSort},model:{value:t.sortDataCode,callback:function(e){t.sortDataCode=e},expression:"sortDataCode"}},t._l(t.sort,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1):t._e(),e("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"Sort by...",size:"small"},on:{change:t.handleCommand},model:{value:t.sortCode,callback:function(e){t.sortCode=e},expression:"sortCode"}},t._l(t.todoInfoList.sortData,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1):t._e()]),e("table-page",{staticClass:"table-page",attrs:{size:"small","has-pagination":!0,columns:t.columns,initializingLoading:!1,pagination:t.paginationConfig,getTableData:t.getTableData,"is-search":t.refreshTableFlag,sortArr:"orgOperator"==t.activeName?t.sortArr:[]},scopedSlots:t._u([{key:"status",fn:function(a){return[e("div",{staticClass:"edit-button-container"},[""!==a.data.row.status?e("span",{staticClass:"status-circle",style:t.statusStyle(a.data.row.status)}):t._e(),e("span",{staticClass:"content-item"},[t._v(t._s(t.showStatus(a.data.row.status)))]),"03"!=a.data.row.status&&"04"!=a.data.row.status||t.initiatorIdentityId==a.data.row.orgOperatorId?t._e():e("el-link",{attrs:{underline:!1,disabled:!t.hasPerm("IC_CHANGEORGOPERATORSTATUS_BTN"),icon:"el-icon-edit"},on:{click:function(e){return t.showEditDialog(a.data.row)}}})],1)]}},{key:"roles",fn:function(a){return[e("span",[t._v(" "+t._s(a.data.row.role||"-")+" ")])]}},{key:"suspended",fn:function(e){return[t._v(" "+t._s(e.data.row.verifySuspend?"Yes":"No")+" ")]}},{key:"operation",fn:function(a){return[t.initiatorIdentityId!=a.data.row.orgOperatorId?e("el-button",{staticClass:"btn",attrs:{type:"text",size:"small"},on:{click:function(e){return t.handleDetail(a.data.row)}}},[t._v(" "+t._s(t.$t("common.label.detail"))+" ")]):t._e(),"06"!=a.data.row.status&&"00"!=a.data.row.status&&t.initiatorIdentityId!=a.data.row.orgOperatorId?e("span",{staticClass:"buttomBar"},[t._v("|")]):t._e(),"06"!=a.data.row.status&&"00"!=a.data.row.status&&t.initiatorIdentityId!=a.data.row.orgOperatorId?e("el-button",{staticClass:"btn",attrs:{type:"text",size:"small"},on:{click:function(e){return t.handleCloseDialog(a.data.row)}}},[t._v(" "+t._s(t.$t("common.button.close"))+" ")]):t._e()]}}])})],1),e("org-edit-status",{attrs:{editStatusVisible:t.statusDialogVisible,curStatus:t.oldStatus,receiverIdentityId:t.receiverIdentityId,newStatusList:t.newStatusList,isShowReason:"orgOperator"==t.activeName},on:{"update:editStatusVisible":function(e){t.statusDialogVisible=e},"update:edit-status-visible":function(e){t.statusDialogVisible=e},"update:curStatus":function(e){t.oldStatus=e},"update:cur-status":function(e){t.oldStatus=e},"update:receiverIdentityId":function(e){t.receiverIdentityId=e},"update:receiver-identity-id":function(e){t.receiverIdentityId=e},updateList:t.updateList}}),[e("el-dialog",{attrs:{title:t.$t("IDC.orgOperator.closeOperatorTitle"),visible:t.closeOperatorVisible,width:"448px","before-close":t.closeOperator},on:{"update:visible":function(e){t.closeOperatorVisible=e}}},[e("el-form",{ref:"closeOperatorForm",staticClass:"add-form",attrs:{"label-position":"top",model:t.closeOperatorForm,rules:t.closeOperatorFormRules}},[e("div",{staticClass:"close-note"},[t._v(t._s(t.closeNote))]),e("el-divider"),e("el-row",[e("p",{staticClass:"remark-reason"},[t._v(t._s(t.$t("IDC.orgOperator.remarkAndReason")))]),e("el-col",{attrs:{span:24}},[e("el-form-item",{attrs:{label:t.$t("IDC.orgOperator.reason"),prop:"reason"}},[e("el-select",{attrs:{size:"small",placeholder:t.$t("common.placeholder.select")},model:{value:t.closeOperatorForm.reason,callback:function(e){t.$set(t.closeOperatorForm,"reason",e)},expression:"closeOperatorForm.reason"}},t._l(t.reasonList,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1),e("el-col",{attrs:{span:24}},[e("el-form-item",{attrs:{label:t.$t("IDC.orgOperator.remark"),prop:"remark"}},[e("el-input",{attrs:{size:"small",type:"textarea",rows:"4",placeholder:t.$t("common.placeholder.enter")},model:{value:t.closeOperatorForm.remark,callback:function(e){t.$set(t.closeOperatorForm,"remark",e)},expression:"closeOperatorForm.remark"}})],1)],1)],1)],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{size:"small"},on:{click:t.closeOperator}},[t._v(t._s(t.$t("common.button.cancel")))]),e("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{type:"primary",size:"small"},on:{click:t.closeOperatorSubmit}},[t._v(t._s(t.$t("common.button.submit")))])],1)],1)],e("portal-short-code",{attrs:{searchVisible:t.searchVisible,"short-code":t.searchList.shortCode,isSelect:!0},on:{"update:searchVisible":function(e){t.searchVisible=e},"update:search-visible":function(e){t.searchVisible=e},"update:shortCode":function(e){return t.$set(t.searchList,"shortCode",e)},"update:short-code":function(e){return t.$set(t.searchList,"shortCode",e)}}})],2)},o=[],r=a("c811"),s=a("4c09"),l=a("3186"),n=a("8f48"),c=a("4865"),d=a("02e3"),u=a("4e1a"),h=a("0360"),m=a("d8d3"),p={components:{PortalHeader:r["a"],TablePage:s["a"],PortalForm:l["a"],portalShortCode:n["a"],OrgEditStatus:u["a"]},name:"OrgOperator",props:{activeName:{type:String,default:"orgOperator"},propShortCode:{type:String,default:""}},data(){let t=(t,e,a)=>{if(!e)return a();Object(c["l"])(this.searchList.shortCode).then(t=>{if(t.header&&t.header.success)if("Exist"===t.check)a();else{if("NotExist"===t.check)return a(new Error("The Organization Short Code is not existed"));if("Invalid"===t.check)return a(new Error("The Organization Short Code is not invalid"))}}).catch(()=>a(new Error("The Organization Short Code Exception")))};return{sortDataCode:"",sortCode:"",checkNull:!1,todoInfoList:{sortData:[{label:"Sort by",value:""},{label:"Dare of Birth",value:"birthDay"},{label:"First Name",value:"firstName"},{label:"Last Name",value:"lastName"},{label:"Middle Name",value:"middleName"},{label:"Organization Short Code",value:"shortCode"},{label:"User Name",value:"userName"}]},sort:[{label:"Ascending",value:"true"},{label:"Descending",value:"false"}],sortBy:null,sortByMode:null,searchLoading:!1,refreshTableFlag:!1,searchVisible:!1,isReset:!1,paginationConfig:{total:0,pageIndex:1,pageSize:10},reasonList:[{label:"Not Use",value:"1"},{label:"Id Expired",value:"2"}],searchList:{identityId:"",shortCode:this.propShortCode,operatorId:"%",status:"",operatorName:"",roles:"",username:"%",firstName:"%",middleName:"%",lastName:"%",birthday:""},sortArr:["identityId","orgOperatorId","organizationCode","operatorId","status","operatorName","firstName","middleName","lastName","dateBirth","verifySuspend","shortCode","userName","birthday"],oldStatus:"",receiverIdentityId:"",statusDialogVisible:!1,queryFormRules:{identityId:[d["v"]],operatorId:[d["v"],d["g"]],operatorName:[d["v"],d["s"]],shortCode:[d["v"],{validator:t,trigger:"blur"},d["l"]],username:[d["v"],d["i"]],firstName:[d["v"],d["h"]],middleName:[d["v"],d["h"]],lastName:[d["v"],d["h"]]},availableRoleList:[],closeOperatorVisible:!1,closeNote:"",closeOperatorForm:{originalStatus:"",reason:"",remark:"",receiverIdentityId:""},closeOperatorFormRules:{reason:[d["z"]],remark:[{required:!0,message:"Please enter content",trigger:"blur"}]},orgOperatorId:"",initiatorIdentityId:"",newStatusList:[]}},computed:{statusStyle(){return t=>{switch(t){case"03":return{"background-color":"#658DF9"};case"06":return{"background-color":""+this.GlobalStyleVariables.fillStrongColor};case"07":return{"background-color":""+this.GlobalStyleVariables.statusSuccessColor};case"00":return{"background-color":""+this.GlobalStyleVariables.backgroundColor,border:"1px solid "+this.GlobalStyleVariables.initialColor};case"02":return{"background-color":""+this.GlobalStyleVariables.backgroundColor,border:"1px solid "+this.GlobalStyleVariables.initialColor};case"04":return{"background-color":""+this.GlobalStyleVariables.statusColorwarning};case"05":return{"background-color":""+this.GlobalStyleVariables.fillStrongColor};case"08":return{"background-color":""+this.GlobalStyleVariables.fillStrongColor};default:return}}},titleConfig(){return"organization"==this.activeName?{title:this.$t("IDC.orgOperator.oragationTitle"),desc:this.$t("IDC.orgOperator.myOragationDesc")}:"myOrganization"==this.activeName?{title:"",desc:this.$t("IDC.orgOperator.myOragationDesc")}:{title:this.$t("IDC.orgOperator.orgOperator"),desc:this.$t("IDC.orgOperator.myOragationDesc")}},formConfigList(){return"organization"==this.activeName||"myOrganization"==this.activeName?[{label:this.$t("IDC.orgOperator.identityID"),key:"identityId",comp:"el-input",bind:{clearable:!0,placeholder:this.$t("common.placeholder.enter")}},{label:this.$t("IDC.orgOperator.operatorID"),key:"operatorId",comp:"el-input",bind:{clearable:!0,placeholder:this.$t("common.placeholder.enter")}},{label:this.$t("IDC.organizationOperatorDetail.label.Role"),key:"roles",prop:"roles",comp:"el-select",options:this.availableRoleList,bind:{clearable:!1,placeholder:this.$t("common.placeholder.select")}},{label:this.$t("IDC.organizationOperatorDetail.label.IdentityStatus"),key:"status",comp:"el-select",bind:{placeholder:this.$t("common.placeholder.select"),id:"status"},options:[{label:"All",value:"All"},{value:"03",label:"Active"},{value:"00",label:"New"},{value:"02",label:"Pending Active"},{value:"04",label:"Suspended"},{value:"05",label:"Frozen"},{value:"06",label:"Closed"},{value:"07",label:"Capped"},{value:"08",label:"Dormant"}]},{label:this.$t("IDC.orgOperator.userName"),key:"username",comp:"el-input",bind:{clearable:!0,placeholder:this.$t("common.placeholder.enter")}}]:[{label:this.$t("IDC.orgOperator.identityID"),key:"identityId",comp:"el-input",bind:{clearable:!0,placeholder:this.$t("common.placeholder.enter")}},{formItemClass:"org-short-code",label:this.$t("IDC.orgOperator.orgShortCode"),key:"shortCode",comp:"el-input",bind:{placeholder:this.$t("common.placeholder.select"),clearable:!0},slots:[{name:"append",comp:"el-link",class:"short-code-icon",bind:{icon:"el-icon-more",underline:!1},event:{click:this.openVisible}}]},{label:this.$t("IDC.orgOperator.operatorID"),key:"operatorId",comp:"el-input",bind:{clearable:!0,placeholder:this.$t("common.placeholder.enter")}},{label:this.$t("IDC.organizationOperatorDetail.label.Role"),key:"roles",prop:"roles",comp:"el-select",options:this.availableRoleList,bind:{clearable:!1,placeholder:this.$t("common.placeholder.select")}},{label:this.$t("common.label.status"),key:"status",comp:"el-select",bind:{placeholder:this.$t("common.placeholder.select"),id:"status"},options:[{label:"All",value:"All"},{label:"Active",value:"03"},{label:"Closed",value:"06"},{label:"Dormant",value:"07"},{label:"New",value:"00"},{label:"Pending Active",value:"02"},{label:"Suspended",value:"04"}]},{label:this.$t("IDC.orgOperator.userName"),key:"username",comp:"el-input",bind:{clearable:!0,placeholder:this.$t("common.placeholder.enter")}},{label:"First Name",key:"firstName",comp:"el-input",bind:{id:"firstName",clearable:!0,placeholder:this.$t("common.placeholder.enter")}},{label:"Middle Name",key:"middleName",comp:"el-input",bind:{id:"middleName",clearable:!0,placeholder:this.$t("common.placeholder.enter")}},{label:"Last Name",key:"lastName",comp:"el-input",bind:{id:"lastName",clearable:!0,placeholder:this.$t("common.placeholder.enter")}},{label:"Date of Birth",key:"birthday",comp:"el-date-picker",bind:{id:"birthday",type:"date","value-format":"yyyyMMdd",placeholder:"Please select",format:"dd-MM-yyyy"}}]},columns(){return"organization"==this.activeName?[{label:this.$t("IDC.orgOperator.identityID"),prop:"orgOperatorId",align:"left","min-width":"185"},{label:this.$t("IDC.orgOperator.operatorID"),prop:"operatorId",align:"left","min-width":"165"},{label:this.$t("IDC.organizationOperatorDetail.label.Role"),prop:"role",align:"left","min-width":"200",__slotName:"roles"},{label:this.$t("IDC.organizationOperatorDetail.label.IdentityStatus"),prop:"status",align:"left","min-width":"165",__slotName:"status"},{label:this.$t("IDC.orgOperator.userName"),prop:"userName",align:"left","min-width":"135"},{label:this.$t("IDC.orgOperator.operation"),prop:"operation",align:"left",width:"165",__slotName:"operation",fixed:"right"}]:"myOrganization"==this.activeName?[{label:this.$t("IDC.orgOperator.identityID"),prop:"orgOperatorId",align:"left","min-width":"185"},{label:this.$t("IDC.orgOperator.operatorID"),prop:"operatorId",align:"left","min-width":"165"},{label:this.$t("IDC.organizationOperatorDetail.label.Role"),prop:"role",align:"left","min-width":"165",__slotName:"roles"},{label:this.$t("IDC.organizationOperatorDetail.label.IdentityStatus"),prop:"status",align:"left","min-width":"165",__slotName:"status"},{label:this.$t("IDC.orgOperator.operation"),prop:"operation",align:"left",width:"165",__slotName:"operation",fixed:"right"}]:[{label:this.$t("IDC.orgOperator.identityID"),prop:"identityId",align:"left","min-width":"185","sort-method":(t,e)=>t.identityId>e.identityId?1:-1},{label:this.$t("IDC.orgOperator.orgShortCode"),prop:"shortCode",align:"left","min-width":"250","sort-method":(t,e)=>t.shortCode>e.shortCode?1:-1},{label:this.$t("IDC.orgOperator.operatorID"),prop:"operatorId",align:"left","min-width":"165","sort-method":(t,e)=>t.operatorId>e.operatorId?1:-1},{label:this.$t("IDC.orgOperator.status"),prop:"status",align:"left","min-width":"165",__slotName:"status","sort-method":(t,e)=>t.status>e.status?1:-1},{label:this.$t("IDC.orgOperator.userName"),prop:"userName",align:"left","min-width":"135","sort-method":(t,e)=>t.userName>e.userName?1:-1},{label:this.$t("IDC.orgOperator.firstName"),prop:"firstName",align:"left","min-width":"135","sort-method":(t,e)=>t.firstName>e.firstName?1:-1},{label:this.$t("IDC.orgOperator.middleName"),prop:"middleName",align:"left","min-width":"155","sort-method":(t,e)=>t.middleName>e.middleName?1:-1},{label:this.$t("IDC.orgOperator.lastName"),prop:"lastName",align:"left","min-width":"135","sort-method":(t,e)=>t.lastName>e.lastName?1:-1},{label:this.$t("IDC.orgOperator.dateBirth"),prop:"birthday",align:"left","min-width":"155","sort-method":(t,e)=>t.birthday>e.birthday?1:-1},{label:this.$t("IDC.orgOperator.suspended"),prop:"verifySuspend",align:"left","min-width":"135","sort-method":(t,e)=>t.verifySuspend>e.verifySuspend?1:-1,__slotName:"suspended"},{label:this.$t("IDC.orgOperator.operation"),prop:"operation",align:"left",fixed:"right",width:"165",__slotName:"operation"}]}},watch:{propShortCode(t){this.searchList.shortCode=t}},methods:{showStatus(t){return m["c"][t]||"-"},updateList(){this.refreshTableFlag=!0},handleCommand(t){this.sortBy=t,this.sortByMode="",this.sortDataCode="",this.checkNullFn(),this.refreshTableFlag=!0,this.paginationConfig.pageIndex=1},handleCommandSort(t){this.sortByMode=t,this.checkNullFn(),this.refreshTableFlag=!0,this.paginationConfig.pageIndex=1},reset(){this.isReset=!0,this.searchList={identityId:"",shortCode:this.propShortCode,operatorId:"%",status:"All",operatorName:"",roles:"",username:"%",firstName:"%",middleName:"%",lastName:"%",birthday:""},this.$refs["searchList"].innerFormRef.resetFields(),this.sortBy="",this.sortByMode="",this.sortDataCode="",this.sortCode="",this.refreshTableFlag=!0,"organization"!==this.activeName&&"myOrganization"!==this.activeName||(this.refreshTableFlag=!0,this.searchList.shortCode=this.propShortCode)},checkNullFn(){""===this.searchList.operatorId&&""===this.searchList.firstName&&""===this.searchList.middleName&&""===this.searchList.lastName&&""===this.searchList.username&&""===this.searchList.roles?this.checkNull=!0:this.checkNull=!1},search(){this.checkNullFn(),this.searchLoading=!0,this.refreshTableFlag=!0,this.paginationConfig.pageIndex=1,this.$refs["searchList"].innerFormRef.validate(t=>{if(!t)return this.searchLoading=!1,!1;this.refreshTableFlag=!0,this.paginationConfig.pageIndex=1})},openVisible(){this.searchVisible=!0},addOrgOperator(){let t="";t="/mainPage/identifierCenter/organizationInfo/orgOperator/create",this.openNewWindow({path:t})},handleDetail(t){let e={orgOperatorId:t.identityId,identityId:t.organizationId},a="";a="/mainPage/identifierCenter/organizationInfo/orgOperator/detail",this.openNewWindow({path:a,query:{data:encodeURIComponent(JSON.stringify(e))}})},showEditDialog(t){this.getListNewStatus(t.status),this.statusDialogVisible=!0,this.receiverIdentityId=t.orgOperatorId,this.statusCode=t.status,this.oldStatus=t.status},getListNewStatus(t){"03"===t?this.newStatusList=[{label:"Suspended",value:"04"}]:"04"===t&&(this.newStatusList=[{label:"Active",value:"03"}])},handleCloseDialog(t){this.closeOperatorVisible=!0,this.closeNote=this.$t("IDC.orgOperator.closeNote",{obj:t.orgOperatorId}),this.orgOperatorId=t.orgOperatorId,this.closeOperatorForm.originalStatus=t.status,this.closeOperatorForm.receiverIdentityId=t.orgOperatorId},closeOperator(){this.closeOperatorVisible=!1,this.$refs["closeOperatorForm"].resetFields()},closeOperatorSubmit(){this.$refs["closeOperatorForm"].validate(t=>{if(t){let t=this.closeOperatorForm;Object(c["n"])(t).then(t=>{if(this.closeOperatorVisible=!1,t.header&&t.header.success){let t=this.$t("IDC.orgOperator.closeSuccessTip",{obj:this.orgOperatorId});this.$refs["closeOperatorForm"].resetFields(),this.$message.success(t),this.refreshTableFlag=!0}})}})},getTableData(){let t={pageNo:this.paginationConfig.pageIndex,pageSize:this.paginationConfig.pageSize,shortCode:this.searchList.shortCode,operatorIdentityId:this.searchList.identityId,operatorId:this.searchList.operatorId,status:this.searchList.status,roleId:this.searchList.roles,firstName:this.searchList.firstName,middleName:this.searchList.middleName,lastName:this.searchList.lastName,operatorName:this.searchList.username,birthday:this.searchList.birthday};(this.sortBy||this.sortByMode)&&(t.sortingQueryResultsBy=this.sortBy||"",t.sortAcs=this.sortByMode||null);let e={firstName:t.firstName,middleName:t.middleName,lastName:t.lastName,operatorName:t.operatorName,roleId:t.roleId,operatorId:t.operatorId};return Object(d["a"])(e)?new Promise(e=>{this.isReset?(e(),this.isReset=!1,this.refreshTableFlag=!1,this.searchLoading=!1):Object(c["r"])(t).then(t=>{t.header&&t.header.success?(t.list=t.list||[],t.totalRecords=Number(t.totalRecord)||0,t.list.map(t=>{t.orgOperatorId=t.identityId}),e(t)):(t.list=[],t.totalRecords=0,this.$message.error(t.header.responseDesc),e(t))}).finally(()=>{this.refreshTableFlag=!1,this.searchLoading=!1})}):(this.$modal.msgError("Specify at least one search condition of First Name, Middle Name, Last Name, Role, User Name, and Operator ID."),this.refreshTableFlag=!1,void(this.searchLoading=!1))},async getRoleSelect(){let t={};t.shortCode=this.searchList.shortCode,t.roleType="30";let e=await Object(c["A"])(t);if(e.header&&e.header.success){let t=e.grantRoleList||[];this.availableRoleList=t.map(t=>({value:t.roleCode,label:t.roleName})),this.availableRoleList.unshift({value:"",label:"All"})}},showRoleName(t){let e=this.availableRoleList.filter(e=>t.some(t=>e.value===t.roleId));return e.map(t=>t.label).join(",")||"-"}},created(){"organization"==this.activeName||"myOrganization"==this.activeName?this.getRoleSelect():(this.isReset=!0,this.getRoleSelect(),this.propShortCode=""),this.searchList.status="All",this.searchList.roles=""},mounted(){this.searchList.shortCode&&this.searchList.shortCode.startsWith("%")&&1===this.searchList.shortCode.length?(this.searchList={identityId:"",shortCode:this.propShortCode,operatorId:"",msisdn:"",status:"All",roles:"",username:""},this.refreshTableFlag=!0,this.isReset=!1):this.searchList.shortCode&&(this.searchList={identityId:"",shortCode:this.propShortCode,operatorId:"",msisdn:"",status:"All",roles:"",username:""},this.isReset=!1),this.initiatorIdentityId=h["default"].get("initiatorIdentityId")}},g=p,b=(a("4aa3"),a("2877")),f=Object(b["a"])(g,i,o,!1,null,"c11ba610",null);e["default"]=f.exports},"3b90":function(t,e,a){},4865:function(t,e,a){"use strict";a.d(e,"r",(function(){return r})),a.d(e,"s",(function(){return s})),a.d(e,"g",(function(){return l})),a.d(e,"u",(function(){return n})),a.d(e,"n",(function(){return c})),a.d(e,"l",(function(){return d})),a.d(e,"m",(function(){return u})),a.d(e,"a",(function(){return h})),a.d(e,"A",(function(){return m})),a.d(e,"v",(function(){return p})),a.d(e,"c",(function(){return g})),a.d(e,"w",(function(){return b})),a.d(e,"y",(function(){return f})),a.d(e,"x",(function(){return C})),a.d(e,"t",(function(){return v})),a.d(e,"o",(function(){return y})),a.d(e,"j",(function(){return I})),a.d(e,"d",(function(){return O})),a.d(e,"z",(function(){return S})),a.d(e,"k",(function(){return N})),a.d(e,"f",(function(){return D})),a.d(e,"q",(function(){return w})),a.d(e,"p",(function(){return $})),a.d(e,"B",(function(){return _})),a.d(e,"h",(function(){return L})),a.d(e,"b",(function(){return F})),a.d(e,"e",(function(){return A})),a.d(e,"i",(function(){return z}));var i=a("0bbd"),o=a("5f9a");function r(t){return Object(i["a"])({url:"/fintech/v1/orgOperator/queryOrgOperatorList",method:"post",data:t})}function s(t){return Object(i["a"])({url:Object(o["a"])("/fintech/v1/organization/list",t),method:"get"})}function l(t){return Object(i["a"])({url:Object(o["a"])("/fintech/v1/orgOperator/changeStatus"),method:"post",data:t})}function n(t){return Object(i["a"])({url:Object(o["a"])("/fintech/v1/orgOperator/status",t),method:"get"})}function c(t){return Object(i["a"])({url:Object(o["a"])("/fintech/v1/orgOperator/closeOrgOperator"),method:"post",data:t})}function d(t){return Object(i["a"])({url:"/fintech/v1/identity/verify/"+t,method:"post",data:{}})}function u(t){return Object(i["a"])({url:"/fintech/v1/identity/verify/userName",method:"post",data:t})}function h(t){return Object(i["a"])({url:"/fintech/v1/orgOperator/create",method:"post",data:t})}function m(t){return Object(i["a"])({url:"/fintech/v1/orgOperator/roles",method:"post",data:t})}function p(t){return Object(i["a"])({url:Object(o["a"])("/fintech/v1/orgOperator/detail",t),method:"get"})}function g(t){return Object(i["a"])({url:"/fintech/v1/orgOperator/changeIdentityLanguage",method:"post",data:t})}function b(t){return Object(i["a"])({url:"/fintech/v1/orgOperator/pin/reset",method:"post",data:t})}function f(t){return Object(i["a"])({url:"/fintech/v1/orgOperator/pin/unlock",method:"post",data:t})}function C(t){return Object(i["a"])({url:"/fintech/v1/orgOperator/pin/setPassword",method:"post",data:t})}function v(t){return Object(i["a"])({url:"/fintech/v1/orgOperator/getOrgOperatorRuleProfile",method:"post",data:t})}function y(t){return Object(i["a"])({url:"/fintech/v1/orgOperator/getRule",method:"get",data:t})}function I(t){return Object(i["a"])({url:"/fintech/v1/orgOperator/checkMsisdn",method:"post",data:t})}function O(t){return Object(i["a"])({url:"/fintech/v1/orgOperator/changeMsisdn",method:"post",data:t})}function S(t){return Object(i["a"])({url:"/fintech/v1/orgOperator/resetPassword",method:"post",data:t})}function N(t){return Object(i["a"])({url:"/fintech/v1/identity/verify/operatorId",method:"post",data:t})}function D(t){return Object(i["a"])({url:"/fintech/v1/orgOperator/changeOrgOperatorRuleProfile",method:"post",data:t})}const k="/fintech/v1/notification_type";function w(t){return Object(i["a"])({url:Object(o["a"])(k+"/list",t),method:"get"})}function $(t){return Object(i["a"])({url:`${k}/queryInfo?typeId=${t}`,method:"get"})}function _(t){return Object(i["a"])({url:"/fintech/v1/notification/send",method:"post",data:t})}function L(t){return Object(i["a"])({url:"fintech/v1/orgOperator/checkAPIPasswordFormat",method:"post",data:t})}function F(t){return Object(i["a"])({url:"fintech/v1/orgOperator/changeAuthentication",method:"post",data:t})}function A(t){return Object(i["a"])({url:Object(o["a"])("/fintech/v1/changeOrgOperatorRole"),method:"post",data:t})}function z(t){return Object(i["a"])({url:"/fintech/v1/orgOperator/checkInputKyc",method:"post",data:t})}},"4aa3":function(t,e,a){"use strict";a("8561")},"4e1a":function(t,e,a){"use strict";var i=function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{title:t.$t("IDC.orgOperator.editStatus"),visible:t.editStatusVisible,width:"448px","before-close":t.closeEdit},on:{"update:visible":function(e){t.editStatusVisible=e}}},[e("el-form",{ref:"editForm",staticClass:"add-form",attrs:{"label-position":"top",model:t.editForm,rules:t.editFormRules}},[e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:24}},[e("el-form-item",{attrs:{label:t.$t("IDC.orgOperator.currentStatus"),prop:"oldStatus"}},[e("div",{staticClass:"text"},[e("span",{staticClass:"text",domProps:{textContent:t._s(t.showStatus(t.editForm.oldStatus))}})])])],1),e("el-col",{staticClass:"new-status",attrs:{span:24}},[e("el-form-item",{attrs:{label:t.$t("IDC.orgOperator.newStatus"),prop:"newStatus"}},[e("el-select",{attrs:{size:"small",placeholder:t.$t("common.placeholder.select")},model:{value:t.editForm.newStatus,callback:function(e){t.$set(t.editForm,"newStatus",e)},expression:"editForm.newStatus"}},t._l(t.newStatusList,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1),e("el-col",{attrs:{span:24}},[t.isShowReason?e("div",{staticClass:"remark-reason"},[t._v(t._s(t.$t("IDC.orgOperator.remarkAndReason")))]):t._e()]),t.isShowReason?e("el-col",{attrs:{span:24}},[e("el-form-item",{attrs:{label:t.$t("IDC.orgOperator.reason"),prop:"reasonId"}},[e("el-select",{attrs:{size:"small",placeholder:t.$t("common.placeholder.select")},model:{value:t.editForm.reasonId,callback:function(e){t.$set(t.editForm,"reasonId",e)},expression:"editForm.reasonId"}},t._l(t.reasonList,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1):t._e(),e("el-col",{attrs:{span:24}},[e("el-form-item",{attrs:{label:t.$t("IDC.orgOperator.remark"),prop:"remark"}},[e("el-input",{attrs:{size:"small",type:"textarea",rows:"4",placeholder:t.$t("common.placeholder.enter")},model:{value:t.editForm.remark,callback:function(e){t.$set(t.editForm,"remark",e)},expression:"editForm.remark"}})],1)],1)],1)],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{size:"small"},on:{click:t.closeEdit}},[t._v(t._s(t.$t("common.button.cancel")))]),e("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{loading:t.submitLoading,type:"primary",size:"small"},on:{click:t.editSubmit}},[t._v(t._s(t.$t("common.button.submit")))])],1)],1)},o=[],r=a("4865"),s=a("d8d3"),l={name:"OrgEditStatus",props:{editStatusVisible:{type:Boolean,default:!1},curStatus:{type:String,default:()=>""},receiverIdentityId:{type:String,default:()=>""},currentPage:{type:String,default:()=>""},isShowReason:{type:Boolean,default:!0},newStatusList:{type:Array,default:()=>[]},submitLoading:{type:Boolean,default:!1}},data(){return{editForm:{oldStatus:"",newStatus:"",reasonId:"",remark:"",receiverIdentityId:""},reasonList:[{label:"Not Use",value:"1"},{label:"Id Expired",value:"2"}],editFormRules:{newStatus:[{required:!0,message:"Please select content",trigger:"change"}],remark:[{required:!0,message:"Please enter remark",trigger:"blur"}]},operatorId:""}},watch:{curStatus:{handler(t){this.editForm.oldStatus=t}},receiverIdentityId:{handler(t){this.editForm.receiverIdentityId=t}}},created(){},methods:{showStatus(t){return s["c"][t]||"-"},closeEdit(){this.$emit("update:editStatusVisible",!1),this.$refs["editForm"].resetFields()},editSubmit(){this.$refs["editForm"].validate(t=>{if(t){let t=this.editForm;Object(r["g"])(t).then(t=>{this.$emit("update:editStatusVisible",!1),t.header&&t.header.success&&("detail"!=this.currentPage||t.taskId||this.$emit("update:curStatus",this.editForm.newStatus),this.$emit("update:editStatusVisible",!1),this.$emit("updateList"),this.$refs["editForm"].resetFields(),t.taskId?this.$message.success("The request must be approved by another operator."):(this.$message.success("Submit change request success!"),this.refreshCurrentPage()))}).catch(()=>{this.$emit("update:editStatusVisible",!1)})}})}}},n=l,c=(a("8061"),a("2877")),d=Object(c["a"])(n,i,o,!1,null,"21a2dc66",null);e["a"]=d.exports},"563c":function(t,e,a){"use strict";a("061d")},"5c86":function(t,e,a){"use strict";a("d4ce")},"5d2c":function(t,e,a){},8061:function(t,e,a){"use strict";a("5d2c")},8455:function(t,e,a){"use strict";a("e5d3")},8561:function(t,e,a){},"8ac9":function(t,e,a){"use strict";var i=function(){var t=this,e=t._self._c;return e("el-dialog",t._g(t._b({class:["portal-dialog",t.customFooter?"custom-footer":"",t.subtitle?"has-subtitle":""],attrs:{visible:t.dialogVisible,title:t.title,width:t.width,"close-on-click-modal":t.closeOnClickModal,"show-close":t.showClose,"before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e},opened:t.openedDialog,closed:t.closedDialog}},"el-dialog",t.$attrs,!1),t.$listeners),[t.subtitle?e("span",{staticClass:"subtitle"},[t._v(t._s(t.subtitle))]):t._e(),t._t("title"),t._t("content"),t.customFooter?t._t("footer"):e("div",{attrs:{slot:"footer"},slot:"footer"},[t.showCancel?e("button",{class:["cancel-button",t.cancelBtnDisable?"disabled":""],on:{click:t.handleCancelClick}},[t._v(" "+t._s(t.cancelText)+" ")]):t._e(),t.showSubmit?e("el-button",{attrs:{type:"primary",disabled:t.confirmBtnDisable,loading:t.submitLoading,size:"small"},on:{click:t.handleConfirmClick}},[t._v(t._s(t.confirmText))]):t._e()],1)],2)},o=[],r={name:"PortalDialog",props:{visible:{type:Boolean,default:!1},title:{type:String,default:""},width:{type:String,default:"448px"},customFooter:{type:Boolean,default:!1},cancelText:{type:String,default:"Cancel"},confirmText:{type:String,default:"Confirm"},closeOnClickModal:{type:Boolean,default:!1},showClose:{type:Boolean,default:!0},cancelBtnDisable:{type:Boolean,default:!1},confirmBtnDisable:{type:Boolean,default:!1},showSubmit:{type:Boolean,default:!0},subtitle:{type:String,default:""},showCancel:{type:Boolean,default:!0},submitLoading:{type:Boolean,default:!1}},data(){return{dialogVisible:!1}},watch:{visible:{handler(t){this.dialogVisible=t},immediate:!0},dialogVisible:{handler(t){this.$emit("show-dialog",t),this.$emit("update:visible",t)}}},methods:{handleClose(){this.dialogVisible=!1,this.$emit("handle-close")},handleCancelClick(){this.$emit("cancel-btn-click")},handleConfirmClick(){this.$emit("confirm-btn-click")},openedDialog(){this.$emit("opened-dialog")},closedDialog(){this.$emit("closed-dialog")}}},s=r,l=(a("df6c"),a("2877")),n=Object(l["a"])(s,i,o,!1,null,"081459b7",null);e["a"]=n.exports},9563:function(t,e,a){"use strict";var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"org-account-contianer"},[e("portal-header",{attrs:{projectObj:t.titleConfig,showBottomLine:!0}}),e("portal-form",{ref:"searchForm",attrs:{"form-data":t.searchFormData,"form-config-list":t.formConfigList,searchBtnLoading:t.searchLoading},on:{"common-enter-event":t.search,"reset-btn-click":t.reset,"search-btn-click":t.search}}),e("div",{staticClass:"table-list-container"},[e("div",{staticStyle:{"padding-bottom":"16px"}},[e("el-dropdown",{on:{command:t.exportFile}},[e("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{type:"primary",size:"small",disabled:t.disAbledExportBtn||!t.hasPerm("IC_ORG_ACCOUNTINFO_EXPORT_BTN")}},[t._v(" "+t._s(t.$t("common.button.export"))+" "),e("i",{staticClass:"el-icon-arrow-down el-icon--right",staticStyle:{"font-size":"12px"}})]),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e("el-dropdown-item",{attrs:{command:"XLS"}},[t._v("Excel")]),e("el-dropdown-item",{attrs:{command:"XLSX"}},[t._v("Excel 2007")]),e("el-dropdown-item",{attrs:{command:"CSV"}},[t._v("CSV")]),e("el-dropdown-item",{attrs:{command:"PDF"}},[t._v("PDF")])],1)],1)],1),e("table-page",{staticClass:"table-page",attrs:{size:"small","has-pagination":!0,columns:t.columns,initializingLoading:!1,pagination:t.paginationConfig,getTableData:t.getTableData,"is-search":t.isSearch},scopedSlots:t._u([{key:"status",fn:function(a){return[e("div",{staticClass:"flex flex-align"},[e("span",{staticClass:"status-circle",style:t.statusStyle(a.data.row)}),e("span",[t._v(t._s(a.data.row.status))]),e("el-link",{attrs:{underline:!1,disabled:!t.hasPerm("IC_CHANGEORGACCTSTATUS_BTN"),icon:"el-icon-edit"},on:{click:function(e){return t.showEditStatusDialog(a.data.row)}}})],1)]}},{key:"ruleProfile",fn:function(a){return[e("div",{staticClass:"edit-cell"},[e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",disabled:!a.data.row.ruleProfileName,content:a.data.row.ruleProfileName,placement:"top"}},[e("div",{staticClass:"cell el-tooltip"},[t._v(t._s(a.data.row.ruleProfileName||"-"))])]),e("el-link",{staticClass:"edit-text el-icon-edit",attrs:{underline:!1,disabled:!t.hasPerm("IC_CHANGEORGACCTRULEPROFILE_BTN")},on:{click:function(e){return t.showruleProfileDialog(a.data.row)}}})],1)]}}])})],1),e("el-dialog",{staticClass:"edit-status-dialog",attrs:{title:this.$t("IDC.orgAccount.editStatusDialogTitle"),width:"448px",visible:t.editStatusDialogVisible,"close-on-click-modal":!1,"before-close":t.handleEditCancelClick},on:{"update:visible":function(e){t.editStatusDialogVisible=e},closed:t.handleEditCancelClick}},[e("portal-form",{ref:"editStatusForm",staticClass:"edit-status-form",attrs:{needOperateBtn:!1,bigAutoColumn:1,smallAutoColumn:1,formRules:t.searchFormRules,"form-data":t.editStatusFormData,needBottomLine:!1,"form-config-list":t.editFormConfigList}},[e("template",{slot:"currentStatus"},[e("el-form-item",{attrs:{label:t.editFormConfigList[0].label}},[e("span",[t._v(t._s(t.currentStatus||"-"))])])],1)],2),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("button",{staticClass:"cancel-button",attrs:{size:"small"},on:{click:function(e){return e.preventDefault(),t.handleEditStatusCancelClick.apply(null,arguments)}}},[t._v(" "+t._s(this.$t("common.button.cancel"))+" ")]),e("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{type:"primary",size:"small",loading:t.editStatusSubmitLoading},on:{click:t.handleEditStatusConfirmClick}},[t._v(" "+t._s(this.$t("common.button.submit"))+" ")])],1)],1),e("el-dialog",{staticClass:"edit-status-dialog",attrs:{title:this.$t("IDC.orgAccount.editRuleProfileDialogTitle"),width:"448px",visible:t.editRuleProfileDialogVisible,"close-on-click-modal":!1,"before-close":t.handleRuleCancelClick},on:{"update:visible":function(e){t.editRuleProfileDialogVisible=e},closed:t.handleRuleCancelClick}},[e("portal-form",{ref:"ruleProfileForm",staticClass:"edit-status-form",attrs:{needOperateBtn:!1,needBottomLine:!1,bigAutoColumn:1,smallAutoColumn:1,formRules:t.ruleProfileFormRules,"form-data":t.ruleProfileFormData,"form-config-list":t.ruleProfileFormConfigList}},[e("template",{slot:"currentRuleProfile"},[e("el-form-item",{attrs:{label:t.ruleProfileFormConfigList[0].label}},[e("span",[t._v(t._s(t.currentRuleProfile||"-"))])])],1)],2),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("button",{staticClass:"cancel-button",attrs:{size:"small"},on:{click:function(e){return e.preventDefault(),t.handleRuleProfileCancelClick.apply(null,arguments)}}},[t._v(" "+t._s(this.$t("common.button.cancel"))+" ")]),e("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{type:"primary",size:"small",loading:t.ruleProfileSubmitLoading},on:{click:t.handleRuleProfileConfirmClick}},[t._v(" "+t._s(this.$t("common.button.submit"))+" ")])],1)],1)],1)},o=[],r=a("c811"),s=a("4c09"),l=a("3186"),n=a("1caf"),c=a("0bbd");function d(){return Object(c["a"])({url:"/fintech/v1/Account/getAccountTypeInfo",method:"get"})}function u(t){return Object(c["a"])({url:"/fintech/v1/Account/queryAccount",method:"post",data:t})}function h(t){return Object(c["a"])({url:"/fintech/v1/Account/modifyAccount",method:"post",data:t})}function m(t){return Object(c["a"])({url:"/fintech/v1/Account/getRuleProfile",method:"post",data:t})}function p(t){return Object(c["a"])({url:"/fintech/v1/Account/exportAccountInfo",method:"post",data:t,responseType:"blob"})}var g={name:"OrgAccount",components:{PortalHeader:r["a"],TablePage:s["a"],PortalForm:l["a"]},props:{identityId:{type:String,require:!0},isTopOrganization:{type:Boolean,require:!0}},data(){return{titleConfig:{title:"",desc:this.$t("IDC.orgAccount.pageDesc")},searchFormData:{accountNumber:"",accountName:"",accountType:"",status:""},tempOptAccountNo:"",accountTypeInfo:[],searchFormRules:{newStatus:[{required:!0,message:"Please select at least one.",trigger:"change"}],remark:[{required:!0,message:"This field is mandatory.",trigger:"change"}]},ruleProfileFormData:{currentRuleProfile:"",ruleProfile:"",remark:""},ruleProfile:[],ruleProfileFormRules:{ruleProfile:[{required:!0,message:"Please select at least one.",trigger:"change"}],remark:[{required:!0,message:"This field is mandatory.",trigger:"change"}]},searchLoading:!1,paginationConfig:{total:0,pageIndex:1,pageSize:10},isSearch:!1,editStatusDialogVisible:!1,editRuleProfileDialogVisible:!1,editStatusFormData:{currentStatus:"",newStatus:"",remark:""},currentStatus:"",currentRuleProfile:"",dialogNewStatus:[],editStatusSubmitLoading:!1,ruleProfileSubmitLoading:!1,statusList:[{label:"All",value:""},{label:"Active",value:"Active"},{label:"Closed",value:"Closed"},{label:"Frozen",value:"Frozen"},{label:"Suspended",value:"Suspended"}],disAbledExportBtn:!0}},computed:{formConfigList(){return[{label:this.$t("IDC.orgAccount.accountNumber"),key:"accountNumber",prop:"accountNumber",comp:"el-input",bind:{clearable:!0,placeholder:this.$t("common.placeholder.enter")}},{label:this.$t("IDC.orgAccount.accountName"),key:"accountName",prop:"accountName",comp:"el-input",bind:{clearable:!0,placeholder:this.$t("common.placeholder.enter")}},{label:this.$t("IDC.orgAccount.accountType"),key:"accountType",prop:"accountType",comp:"el-select",options:this.accountTypeInfo,bind:{placeholder:this.$t("common.placeholder.select")}},{label:this.$t("IDC.orgAccount.status"),key:"status",prop:"status",comp:"el-select",options:this.statusList,bind:{placeholder:this.$t("common.placeholder.select")}}]},editFormConfigList(){return[{label:this.$t("IDC.orgAccount.currentStatus"),key:"currentStatus",prop:"currentStatus",slotName:"currentStatus"},{label:this.$t("IDC.orgAccount.newStatus"),key:"newStatus",prop:"newStatus",comp:"el-select",options:this.dialogNewStatus,bind:{placeholder:this.$t("common.placeholder.select")}},{formItemClass:"dialog-remark",label:this.$t("IDC.orgAccount.remark"),key:"remark",prop:"remark",comp:"el-input",bind:{type:"textarea",clearable:!0,placeholder:this.$t("common.placeholder.enter")}}]},ruleProfileFormConfigList(){return[{label:this.$t("IDC.orgAccount.currentRuleProfile"),key:"currentRuleProfile",prop:"currentRuleProfile",slotName:"currentRuleProfile"},{label:this.$t("IDC.orgAccount.ruleProfile"),key:"ruleProfile",prop:"ruleProfile",comp:"el-select",options:this.ruleProfile,bind:{placeholder:this.$t("common.placeholder.select")}},{formItemClass:"dialog-remark",label:this.$t("IDC.orgAccount.remark"),key:"remark",prop:"remark",comp:"el-input",bind:{type:"textarea",clearable:!0,placeholder:this.$t("common.placeholder.enter")}}]},columns(){return[{label:this.$t("IDC.orgAccount.accountNo"),prop:"accountNo",align:"left","min-width":"150"},{label:this.$t("IDC.orgAccount.accountName"),prop:"accountName",align:"left","min-width":"150"},{label:this.$t("IDC.orgAccount.accountType"),prop:"accountTypeName",align:"left","min-width":"150"},{label:this.$t("IDC.orgAccount.status"),prop:"status",align:"left","min-width":"170",__slotName:"status"},{label:this.$t("IDC.orgAccount.currency"),prop:"currency",align:"left","min-width":"120"},{label:this.$t("IDC.orgAccount.alias"),prop:"accountAlias",align:"left","min-width":"150"},{label:this.$t("IDC.orgAccount.accountRelationship"),prop:"relationship",align:"left","min-width":"150"},{label:this.$t("IDC.orgAccount.ruleProfile"),prop:"ruleProfileName",align:"left","min-width":"120",showOverflowTooltip:!1,__slotName:"ruleProfile"},{label:this.$t("IDC.orgAccount.currentBalance"),prop:"balance",align:"right","min-width":"150"},{label:this.$t("IDC.orgAccount.availableBalance"),prop:"availableBalance",align:"right","min-width":"150"},{label:this.$t("IDC.orgAccount.reservedBalance"),prop:"reservedBalance",align:"right","min-width":"150"},{label:this.$t("IDC.orgAccount.unclearBalance"),prop:"unclearBalance",align:"right","min-width":"150"}]}},created(){this.getAccountTypeList()},watch:{identityId(){this.identityId&&(this.isSearch=!0)}},methods:{statusStyle(t){switch(t.status){case"Active":return{"background-color":""+this.GlobalStyleVariables.statusNoticeColor};case"Suspended":return{"background-color":""+this.GlobalStyleVariables.statusColorSAecondaryWarning};case"Frozen":return{"background-color":""+this.GlobalStyleVariables.statusColorSAecondaryWarning};case"Closed":return{"background-color":""+this.GlobalStyleVariables.fillStrongColor};default:break}},search(){this.searchLoading=!0,this.isSearch=!0},reset(){this.$refs.searchForm.resetFields(),this.isSearch=!0},async getTableData(){let t={dataScope:["ALL"],accountNo:this.searchFormData.accountNumber,accountName:this.searchFormData.accountName,accountTypeId:this.searchFormData.accountType,status:this.searchFormData.status,identityId:this.identityId},e=await u(t);if(this.isSearch=!1,this.searchLoading=!1,e.header&&e.header.success)return e.list.length>0?this.disAbledExportBtn=!1:this.disAbledExportBtn=!0,e},async getAccountTypeList(){let t=await d();t.header&&t.header.success&&(this.accountTypeInfo=t.list.map(t=>({label:t.accountTypeName,value:t.accountTypeId})))},exportFile(t){let e={identityId:this.identityId,accountNo:this.searchFormData.accountNumber,dataScope:["All"],accountName:this.searchFormData.accountName,accountTypeId:this.searchFormData.accountType,status:this.searchFormData.status,fileType:t},a="account_"+Date.parse(new Date);Object(n["a"])(p,e,{fileType:t,fileName:a})},handleEditCancelClick(){this.editStatusDialogVisible=!1},handleRuleCancelClick(){this.editRuleProfileDialogVisible=!1},showEditStatusDialog(t){this.tempOptAccountNo=t.accountNo,this.currentStatus=t.status,"Active"===t.status?this.dialogNewStatus=[{label:"Frozen",value:"Frozen"},{label:"Suspended",value:"Suspended"}]:"Frozen"===t.status?this.dialogNewStatus=[{label:"Active",value:"Active"},{label:"Suspended",value:"Suspended"}]:"Suspended"===t.status&&(this.dialogNewStatus=[{label:"Active",value:"Active"},{label:"Frozen",value:"Frozen"}]),this.editStatusDialogVisible=!0},async showruleProfileDialog(t){this.editRuleProfileDialogVisible=!0,this.currentRuleProfile=t.ruleProfileName;let e=await this.getRuleProfileList(t.accountTypeId);this.ruleProfile=e.filter(e=>e.label!==t.ruleProfileName),this.tempOptAccountNo=t.accountNo},async getRuleProfileList(t){let e=this.isTopOrganization?"5001":"5002",a={identityType:"5000",identitySubType:e,accountTypeId:t},i=await m(a);if(i.header&&i.header.success)return i.list.map(t=>({label:t.ruleProfileName,value:t.id}))},handleEditStatusCancelClick(){this.$refs.editStatusForm.clearValidate(),this.$refs.editStatusForm.resetFields(),this.editStatusDialogVisible=!1},handleRuleProfileCancelClick(){this.$refs.ruleProfileForm.clearValidate(),this.$refs.ruleProfileForm.resetFields(),this.editRuleProfileDialogVisible=!1},handleEditStatusConfirmClick(){this.$refs.editStatusForm.validate(t=>{if(t){this.editStatusSubmitLoading=!0;let t={modifyOpTypes:["MODIFY_STATUS"],account:{accountNo:this.tempOptAccountNo,status:this.editStatusFormData.newStatus,identityId:this.identityId},header:{remark:this.editStatusFormData.remark}};h(t).then(t=>{this.editStatusSubmitLoading=!1,t.header&&t.header.success?(this.$refs.editStatusForm.resetFields(),this.$modal.msgSuccess("Operation success."),this.isSearch=!0,this.editStatusDialogVisible=!1):this.$modal.msgError("Operation fail.")})}})},handleRuleProfileConfirmClick(){this.$refs.ruleProfileForm.validate(t=>{if(t){this.ruleProfileSubmitLoading=!0;let t={modifyOpTypes:["MODIFY_RULE_PROFILE"],account:{accountNo:this.tempOptAccountNo,ruleProfileId:this.ruleProfileFormData.ruleProfile,identityId:this.identityId},header:{remark:this.ruleProfileFormData.remark}};h(t).then(t=>{this.ruleProfileSubmitLoading=!1,t.header&&t.header.success?(this.$refs.ruleProfileForm.resetFields(),this.$modal.msgSuccess("Operation success."),this.editRuleProfileDialogVisible=!1,this.isSearch=!0):this.$modal.msgError("Operation fail.")})}})}}},b=g,f=(a("15f0"),a("2877")),C=Object(f["a"])(b,i,o,!1,null,"08db7ef8",null);e["a"]=C.exports},c5ea:function(t,e,a){},d4ce:function(t,e,a){},df6c:function(t,e,a){"use strict";a("c5ea")},e5d3:function(t,e,a){},e867:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t._self._c;return e("div",[e("portal-header",{class:t.isShowheaderTitle(),attrs:{projectObj:t.titleConfig}}),e("div",{staticClass:"table-search-container"},[!t.isOrganization||t.activeName?e("el-divider",{staticClass:"header-divider"}):t._e(),e("el-collapse-transition",[e("portal-form",{directives:[{name:"show",rawName:"v-show",value:t.collapseValue,expression:"collapseValue"}],ref:"tillForm",class:t.isOrganization&&!t.activeName?"till-portal-form":"",attrs:{needBottomLine:!1,"form-data":t.tillForm,"form-rules":t.tillFormRules,"form-config-list":t.formConfigArray,searchBtnLoading:t.searchLoading,searchBtnDisabled:!t.hasPerm("IC_TILL_MANAGE_SEARCH_BTN")},on:{"common-enter-event":t.searchTill,"reset-btn-click":t.reset,"search-btn-click":t.searchTill}})],1)],1),e("div",{staticClass:"till-table-list"},[e("el-divider"),e("el-button",{attrs:{disabled:!t.hasPerm("IC_TILL_ADDBASICINFO_NEXT_BTN"),icon:"el-icon-plus",size:"small",type:"primary"},on:{click:t.createTill}},[t._v(" "+t._s(t.$t("common.button.create"))+" ")]),e("table-page",{staticClass:"margin-top-16",attrs:{size:"small","has-pagination":!0,isSearch:t.isSearch,columns:t.isOrganization?t.isOrgCokumns:t.tillColumns,pagination:t.paginationConfig,getTableData:t.getTableData,"initializing-loading":t.fristSearchMap,sortArr:["status","shortCode","msisdn","tillNumber"]},scopedSlots:t._u([{key:"status",fn:function(a){return[e("div",{staticClass:"flex flex-align"},[""!==a.data.row.status?e("span",{staticClass:"status-circle",style:t.statusStyle(a.data.row.status)}):t._e(),e("span",[t._v(t._s(t.showStatus(a.data.row.status)))]),"03"==a.data.row.status||"05"==a.data.row.status?e("i",{staticClass:"el-icon-black-edit icon-cursor margin-left-12",attrs:{id:"language"},on:{click:function(e){return t.handleEditStatus(a.data.row)}}}):t._e()])]}},{key:"operation",fn:function(a){return[e("el-button",{staticClass:"table-operation-btn icon-cursor operation-button",attrs:{size:"mini",type:"text"},on:{click:function(e){return t.handleDetail(a.data.row)}}},[t._v(" "+t._s(t.$t("common.button.detail"))+" ")]),"03"==a.data.row.status||"05"==a.data.row.status?e("el-button",{staticClass:"table-operation-btn icon-cursor",attrs:{size:"mini",type:"text"},on:{click:function(e){return t.showColose(a.data.row)}}},[t._v(" "+t._s(t.$t("common.button.close"))+" ")]):t._e()]}}])})],1),e("close-dialog",{attrs:{closeData:t.closeData,closeDialog:t.closeDialog},on:{ishow:t.ishow,"update:closeDialog":function(e){t.closeDialog=e},"update:close-dialog":function(e){t.closeDialog=e},closeSubmit:t.closeSubmit}}),e("portal-short-code",{ref:"selectShortCode",attrs:{"invoking-flag":"createOrgOperator",searchVisible:t.searchVisible,"merchant-id":t.tillFormData.merchantId,"short-code":t.tillForm.orgshortcode,isSelect:!0},on:{"update:searchVisible":function(e){t.searchVisible=e},"update:search-visible":function(e){t.searchVisible=e},"update:merchantId":function(e){return t.$set(t.tillFormData,"merchantId",e)},"update:merchant-id":function(e){return t.$set(t.tillFormData,"merchantId",e)},"update:shortCode":function(e){return t.$set(t.tillForm,"orgshortcode",e)},"update:short-code":function(e){return t.$set(t.tillForm,"orgshortcode",e)}}}),e("edit-status",{ref:"editStatus",on:{closeStatusDialog:t.closeStatusDialog}}),e("portal-add-popup",{attrs:{id:"popup-product",isCheck:!0,isSingleCheck:!0,isCheckMemory:!0,hasCheckBox:!1,searchVisible:t.addProductVisible,addForm:t.addForm,childSearch:t.loadProduct,"init-checks":t.initCheckList,"has-pagination":!0},on:{"update:searchVisible":function(e){t.addProductVisible=e},"update:search-visible":function(e){t.addProductVisible=e},"submit-call-back":t.selectProductList}})],1)},o=[],r=a("3213"),s=a("c811"),l=a("0cbd"),n=a("4c09"),c=a("3186"),d=a("e863"),u=function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{visible:t.isShow,title:t.$t("IDC.till.closeTillTitle"),width:"448px",top:"29vh",height:"342","close-on-click-modal":!1,"before-close":t.closeService},nativeOn:{submit:function(t){t.preventDefault()}}},[e("h1",{staticClass:"dialog-title"},[t._v(t._s(t.$t("IDC.till.closeTill")+" "+t.closeData.tillNumber+" ?"))]),e("el-divider"),e("el-form",{ref:"tillDialog",attrs:{rules:t.rules,"label-position":"top",model:t.submitData}},[e("el-form-item",{attrs:{label:"Remark",prop:"remark"}},[e("el-input",{attrs:{type:"textarea",rows:5,resize:"none",placeholder:"Please enter "},model:{value:t.submitData.remark,callback:function(e){t.$set(t.submitData,"remark",e)},expression:"submitData.remark"}})],1)],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{staticClass:"btn-cancel",on:{click:function(e){return t.closeService()}}},[t._v(t._s(t.$t("common.button.cancel")))]),e("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{type:"primary",loading:t.submitLoading,size:"small"},on:{click:function(e){return t.submitService()}}},[t._v(t._s(t.$t("common.button.confirm")))])],1)],1)},h=[],m=a("02e3"),p={name:"closeDialog",props:{closeDialog:{type:Boolean,default:!1},closeData:{type:Object}},data(){return{rules:{remark:[m["e"]]},submitLoading:!1,isShow:this.closeDialog,submitData:{remark:""}}},watch:{closeDialog(t){this.isShow=t}},computed:{},methods:{closeService(){this.$refs.tillDialog.resetFields(),this.isShow=!1,this.$emit("ishow",!1)},submitService(){this.$refs["tillDialog"].validate(t=>{if(t){let t={receiverIdentityId:this.closeData.identityId,remark:this.submitData.remark};this.submitLoading=!0,Object(d["c"])(t).then(t=>{t.header&&t.header.success?(this.$modal.msgSuccess(`Till "${this.closeData.tillNumber}" closed successfully.`),this.closeService(),this.$emit("closeSubmit")):this.closeService(),this.submitLoading=!1})}})}},mounted(){}},g=p,b=(a("f8bd"),a("2877")),f=Object(b["a"])(g,u,h,!1,null,"4ea12e7c",null),C=f.exports,v=a("8f48"),y=a("4c1d"),I=a("d8d3");const O=[{label:"MSISDN",value:"0"},{label:"Till Number + Organization Short Code",value:"1"},{label:"Product",value:"2"},{label:"Status",value:"3"}];var S={name:"TillList",components:{TablePage:n["a"],PortalHeader:s["a"],PortalForm:c["a"],closeDialog:C,portalShortCode:v["a"],EditStatus:y["a"],PortalAddPopup:l["a"]},props:{activeName:{type:Boolean,default:!1},isOrganization:{type:Boolean,default:!1}},data(){return{fristSearch:!1,isOrganizationPage:this.isOrganization,queryConditionSelectOptions:O,searchVisible:!1,tillFormData:{orgshortcode:"",merchantId:""},addProductVisible:!1,closeData:{identityId:"",tillNumber:""},closeDialog:!1,total:0,pageNo:1,pageSize:10,tillForm:{msisdn:"%",tillNumber:"%",orgshortcode:"",status:"All",productName:"",queryCondition:"0"},addForm:{title:this.$t("IDC.till.selectProduct"),label:"",idKey:"productIndex",key:"till",columns:[{label:this.$t("IDC.till.productName"),prop:"productName",align:"left"},{label:this.$t("IDC.till.description"),prop:"description",align:"left"}],searchForm:{formData:{producrName:""},formConf:[{label:this.$t("IDC.till.productName"),key:"producrName",prop:"producrName",comp:"el-input",bind:{clearable:!0,placeholder:this.$t("common.placeholder.enter")}}]}},searchLoading:!1,tills:[],paginationConfig:{total:0,pageIndex:1,pageSize:10},initCheckList:[],productIndex:"",isOrgCokumns:[{"sort-method":(t,e)=>t.tillNumber>e.tillNumber?1:-1,label:this.$t("IDC.till.tillNumber"),prop:"tillNumber",align:"left"},{"sort-method":(t,e)=>t.msisdn>e.msisdn?1:-1,label:this.$t("IDC.till.msisdn"),prop:"msisdn",align:"left"},{label:this.$t("common.label.status"),prop:"status","sort-method":(t,e)=>t.status>e.status?1:-1,align:"left",__slotName:"status"},{label:this.$t("common.label.operation"),prop:"operation",align:"left",__slotName:"operation",width:200}],tillColumns:[{"sort-method":(t,e)=>t.shortCode>e.shortCode?1:-1,label:this.$t("IDC.till.organizationShortCode"),prop:"shortCode",align:"left"},{"sort-method":(t,e)=>t.tillNumber>e.tillNumber?1:-1,label:this.$t("IDC.till.tillNumber"),prop:"tillNumber",align:"left"},{"sort-method":(t,e)=>t.organizationName>e.organizationName?1:-1,label:this.$t("IDC.till.organizationName"),prop:"organizationName",align:"left"},{"sort-method":(t,e)=>t.msisdn>e.msisdn?1:-1,label:this.$t("IDC.till.msisdn"),prop:"msisdn",align:"left"},{label:this.$t("common.label.status"),prop:"status","sort-method":(t,e)=>t.status>e.status?1:-1,align:"left",__slotName:"status"},{label:this.$t("common.label.operation"),prop:"operation",align:"left",fixed:"right",__slotName:"operation",width:"160"}],isSearch:!1,collapseValue:!0,hasPagination:!0,titleConfig:{title:this.$t("IDC.till.pageTitle"),desc:this.$t("IDC.till.createTitle")}}},watch:{"tillForm.orgshortcode":{handler(t){t||(this.tillFormData={orgshortcode:"",merchantId:""})}},"tillForm.productName":{handler(t){t||(this.productIndex="")}},isOrganization(t){this.isOrganizationPage=t}},computed:{statusOptions(){let t=[{label:"Active",value:"03"},{label:"Closed",value:"06"},{label:"Frozen",value:"05"},{label:"New",value:"00"},{label:"Pending Active",value:"02"}];return this.isOrganizationPage&&t.unshift({label:"All",value:"All"}),t},tillFormRules(){return this.isOrganizationPage?Object(r["e"])():Object(r["f"])()},fristSearchMap(){return!(!this.isOrganizationPage||!this.activeName)},formConfigArray(){let t=[{hidden:this.isOrganizationPage,label:"Query Condition",key:"queryCondition",comp:"el-select",required:!0,options:this.queryConditionSelectOptions,bind:{placeholder:this.$t("common.placeholder.select")},event:{change:t=>{this.tillForm={msisdn:"%",tillNumber:"%",orgshortcode:"",status:"3"===t?"03":"All",productName:"",queryCondition:t}}}},{hidden:this.isShowItem("1"),label:this.$t("IDC.till.tillNumber"),key:"tillNumber",comp:"el-input",bind:{placeholder:this.$t("common.placeholder.enter"),id:"tillNumber"}},{hidden:this.isShowItem("0"),label:this.$t("IDC.till.msisdn"),key:"msisdn",comp:"el-input",bind:{placeholder:this.$t("common.placeholder.enter"),id:"msisdn"}},{hidden:this.isShowItem("2"),formItemClass:"org-short-code",label:this.$t("IDC.till.product"),key:"productName",comp:"el-input",bind:{placeholder:this.$t("common.placeholder.select"),clearable:!0},slots:[{name:"append",comp:"el-link",class:"short-code-icon",bind:{icon:"el-icon-more",underline:!1},event:{click:()=>{this.addProduct()}}}],event:{focus:this.addProduct}},{hidden:this.isShowItem("3"),label:this.isOrganizationPage?this.$t("common.label.status"):"Identity Status",key:"status",comp:"el-select",options:this.statusOptions,bind:{placeholder:this.$t("common.placeholder.select")}},{hidden:this.isShowItem("1",!1),formItemClass:"org-short-code",label:this.$t("IDC.till.organizationShortCode"),key:"orgshortcode",comp:"el-input",bind:{placeholder:this.$t("common.placeholder.select"),clearable:!0},slots:[{name:"append",comp:"el-link",class:"short-code-icon",bind:{icon:"el-icon-more",underline:!1},event:{click:()=>{this.searchVisible=!0}}}]}];return t},statusStyle(){return t=>{switch(t){case"03":return{"background-color":this.GlobalStyleVariables.statusNoticeColor};case"06":return{"background-color":""+this.GlobalStyleVariables.fillStrongColor};case"05":return{"background-color":this.GlobalStyleVariables.statusColorwarning};case"04":return{"background-color":""+this.GlobalStyleVariables.statusColorwarning};case"07":return{"background-color":""+this.GlobalStyleVariables.statusSuccessColor};case"00":case"02":return`background-color:${this.GlobalStyleVariables.backgroundColor};border:1px solid ${this.GlobalStyleVariables.initialColor};`;default:return}}}},methods:{isShowItem(t,e=!0){let a=["1","2"];return this.isOrganizationPage?!(!t.includes(a)&&e):this.tillForm.queryCondition!==t},isShowheaderTitle(){this.fristSearch=this.isOrganizationPage;let t="";return this.isOrganizationPage&&(t="till-page-header",this.$set(this.titleConfig,"desc",this.$t("IDC.till.detailTile"))),this.activeName&&(this.isOrganizationPage=!0,this.$set(this.titleConfig,"title",this.$t("IDC.till.tillList")),this.$set(this.titleConfig,"desc",this.$t("IDC.till.detailTile")),t=""),t},selectProductList(t){this.productIndex=t.productIndex,this.tillForm.productName=t.productName},async loadProduct(t){let e={pageSize:t.pageSize||10,pageNo:t.pageNo||1,pageQuery:!0};t.searchKey&&(e.productName=t.searchKey.producrName);let a=await Object(d["m"])(e);return a},addProduct(){this.addProductVisible=!0},closeStatusDialog(){this.getList()},getList(){this.isSearch=!0},handleEditStatus(t){let e=t;e.identityId=t.tillId,this.$refs["editStatus"].showView(e)},showColose(t){this.closeData={identityId:t.tillId,tillNumber:t.tillNumber},this.closeDialog=!0},ishow(){this.closeDialog=!1},closeSubmit(){this.isSearch=!0},showStatus(t){return I["c"][t]||"-"},reset(){this.$refs["tillForm"].innerFormRef.resetFields(),this.isSearch=!0},searchTill(){let{queryCondition:t,tillNumber:e,orgshortcode:a}=this.tillForm,i={tillNumber:e,orgshortcode:a};"1"!==t||Object(m["a"])(i)?(this.searchLoading=!0,this.$refs["tillForm"].innerFormRef.validate(t=>{if(!t)return this.searchLoading=!1,!1;this.isSearch=!0})):this.$message({message:this.$t("IDC.till.listTips"),type:"warning"})},handleDetail(t){let e={title:t.tillNumber,tillId:t.tillId};this.openNewWindow({path:"../../organizationInfo/till/view",query:{data:encodeURIComponent(JSON.stringify(e))}})},async createTill(){this.openNewWindow({path:"../../organizationInfo/till/create"})},getTableData(){if(this.hasPerm("IC_TILL_MANAGE_SEARCH_BTN"))return new Promise(t=>{let{queryCondition:e,status:a}=this.tillForm;"3"===e||this.isOrganizationPage||(a="");let i={pageIndex:this.paginationConfig.pageIndex,pageSize:this.paginationConfig.pageSize,msisdn:"%"===this.tillForm.msisdn?"":this.tillForm.msisdn,tillNumber:"%"===this.tillForm.tillNumber?"":this.tillForm.tillNumber,status:a,productId:this.productIndex,shortCode:this.tillForm.orgshortcode||""};Object(d["r"])(i).then(e=>{e.header&&e.header.success&&(e.list?e.totalRecords=e.totalRecord:(e.totalRecords=0,e.list=[]),t(e))}).catch(()=>{}).finally(()=>{this.searchLoading=!1,this.isSearch=!1})})}}},N=S,D=(a("563c"),Object(b["a"])(N,i,o,!1,null,"f95268e0",null));e["default"]=D.exports},f8bd:function(t,e,a){"use strict";a("0dda")}}]);
//# sourceMappingURL=chunk-411313d0.js.map