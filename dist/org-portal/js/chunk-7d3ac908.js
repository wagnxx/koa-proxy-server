(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7d3ac908","chunk-43eec914"],{"02e3":function(t,e,a){"use strict";a.d(e,"e",(function(){return i})),a.d(e,"c",(function(){return s})),a.d(e,"y",(function(){return r})),a.d(e,"z",(function(){return l})),a.d(e,"w",(function(){return d})),a.d(e,"f",(function(){return n})),a.d(e,"u",(function(){return o})),a.d(e,"v",(function(){return c})),a.d(e,"x",(function(){return u})),a.d(e,"g",(function(){return m})),a.d(e,"s",(function(){return g})),a.d(e,"n",(function(){return h})),a.d(e,"r",(function(){return p})),a.d(e,"j",(function(){return b})),a.d(e,"l",(function(){return f})),a.d(e,"q",(function(){return L})),a.d(e,"m",(function(){return D})),a.d(e,"p",(function(){return w})),a.d(e,"k",(function(){return I})),a.d(e,"i",(function(){return C})),a.d(e,"h",(function(){return v})),a.d(e,"t",(function(){return _})),a.d(e,"d",(function(){return O})),a.d(e,"o",(function(){return $})),a.d(e,"a",(function(){return k})),a.d(e,"b",(function(){return S}));let i={required:!0,message:"Please enter content",trigger:"blur"},s={required:!0,message:"Please check content",trigger:"blur"},l={required:!0,message:"Please select content",trigger:"change"},r={pattern:/^[0-9a-zA-Z]*$/,message:"Must be number and letters.",trigger:"blur"},n={pattern:/^[+-]?[0-9]*$/,message:"Must be integer number.",trigger:"blur"},o={pattern:/[0-9]{4}/,message:"The MSISDN must contain at least 4 dligits",trigger:"blur"},d={pattern:/^[^@~`！!#$%^*（）()\-+=|,/<>《》?？;':\"“\[\]{}\\&]*$/,message:"Cannot contain special characters (~`!#$%^*()-+=|,/<>?;':\"[]{}\\&)",trigger:"blur"},c={pattern:/^[^@~`！!#$^*（）()\-+=|,/<>《》?？;':\"“\[\]{}\\&]*$/,message:"Cannot contain special characters (~`!#$^*()-+=|,/<>?;':\"[]{}\\&)",trigger:"blur"},u={pattern:/^[\w- ]+$/,message:"Please do not enter any special characters.",trigger:"blur"};O({minLen:0,maxLen:11});const m=O({minLen:0,maxLen:18}),g=(O({minLen:3,maxLen:3}),O({minLen:6,maxLen:16})),h=(O({minLen:8,maxLen:10}),O({minLen:8,maxLen:11}),O({minLen:4,maxLen:12})),p=O({minLen:6,maxLen:12}),b=O({minLen:0,maxLen:19}),f=O({minLen:0,maxLen:24}),L=O({minLen:0,maxLen:64}),D=(O({minLen:0,maxLen:100}),O({minLen:0,maxLen:256})),w=O({minLen:0,maxLen:512}),I=(O({minLen:8,maxLen:50}),O({minLen:1,maxLen:18})),C=O({minLen:0,maxLen:32}),v=O({minLen:0,maxLen:30}),_=O({minLen:9,maxLen:18});O({minLen:2,maxLen:256});function O({minLen:t=0,maxLen:e=100}){let a="";return a=t>0?`Must be between ${t} and ${e} characters`:`Must be less than ${e} characters`,{min:t,max:e,message:a,trigger:"blur"}}const $=O({minLen:0,maxLen:4});function k(t){let e=[];for(let a in t)t[a]&&t[a].toString().startsWith("%")&&1===t[a].length||!t[a]?e.push(!1):e.push(!0);return!e.every(t=>!1===t)}function S(t){return{validator:(e,a,i)=>{a&&a.startsWith("%")&&1===a.length?i(new Error(""+t)):i()},trigger:"blur"}}},"0e19":function(t,e,a){},"2f5f":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"customer-info-container"},[e("div",[e("div",{staticClass:"till-title"},[e("div",{staticClass:"title"},[t._v("Till - "+t._s(t.labelData.tillNumber))]),e("span",{staticClass:"status-label"},[t._v(t._s(t.$t("common.label.status")+":"))]),e("span",{staticClass:"edit-status"},[t._v(" "+t._s(t.that.showStatus(t.labelData.status))+" "),"03"==t.labelData.status||"05"==t.labelData.status?e("i",{staticClass:"el-icon-black-edit icon-cursor margin-left-8",attrs:{id:"language"},on:{click:function(e){return t.handleEditStatus(t.labelData)}}}):t._e()])]),e("el-tabs",{staticClass:"tabs",on:{"tab-click":t.tabChange},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[e("el-tab-pane",{attrs:{label:t.$t("IDC.till.info"),name:"info"}},[e("div",{staticClass:"basic-info"},[e("div",{staticClass:"basic-info-title"},[e("span",[t._v(t._s(t.$t("IDC.till.basicInfo")))])]),e("div",{staticClass:"info-style"},[e("div",{staticClass:"basic-info-content"},[e("el-row",{attrs:{gutter:20}},[e("el-col",{staticClass:"el-col-org-adaption"},[e("p",[t._v(t._s(t.$t("IDC.till.tillNumber")))]),e("p",[t._v(t._s(t._f("formatEmpty")(t.labelData.tillNumber)))])]),e("el-col",{staticClass:"el-col-org-adaption"},[e("p",[t._v(t._s(t.$t("IDC.till.organizationShortCode")))]),e("p",[t._v(t._s(t._f("formatEmpty")(t.labelData.shortCode)))])]),e("el-col",{staticClass:"el-col-org-adaption"},[e("p",[t._v(t._s(t.$t("IDC.till.organizationName")))]),e("p",[t._v(t._s(t._f("formatEmpty")(t.labelData.organizationName)))])]),e("el-col",{staticClass:"el-col-org-adaption"},[e("p",[t._v(t._s(t.$t("IDC.till.language")))]),e("p",[t._v(" "+t._s(this.formatLanguage(t.labelData.languageCode))+" "),e("i",{staticClass:"el-icon-black-edit icon-cursor margin-left-8",attrs:{id:"language"},on:{click:function(e){return t.handleEditLanguage(t.labelData)}}})])]),e("el-col",{staticClass:"el-col-org-adaption"},[e("p",[t._v(t._s(t.$t("IDC.till.defaultOperatorId")))]),e("p",[t._v(" "+t._s(t._f("formatEmpty")(t.labelData.defaultOperatorIdentifier))+" "),e("i",{staticClass:"el-icon-black-edit icon-cursor margin-left-8",attrs:{id:"language"},on:{click:function(e){return t.handleEditDefaultOperator(t.labelData)}}})])]),e("el-col",{staticClass:"el-col-org-adaption"},[e("p",[t._v(t._s(t.$t("IDC.till.registrationDate")))]),e("p",[t._v(t._s(t._f("localTimeFormat")(t.labelData.createTime,"DD-MM-YYYY HH:mm:ss")))])])],1)],1)]),e("div",{staticClass:"detailInfo el-des"},[e("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.tabData,callback:function(e){t.tabData=e},expression:"tabData"}},[e("el-tab-pane",{attrs:{label:t.$t("IDC.till.device"),name:"first"}},[e("div",{staticClass:"sub-title"},[t._v(" "+t._s(t.$t("IDC.till.labelTitle"))+" ")]),e("table-page",{staticClass:"till-tab",attrs:{outSideTableData:t.labelData.devices,hasPagination:!1,sortArr:["status"],columns:t.columns},scopedSlots:t._u([{key:"msisdn",fn:function(a){return[t._v(" "+t._s(a.data.row.msisdn)+" "),e("i",{staticClass:"el-icon-black-edit icon-cursor margin-left-8",attrs:{id:"language"},on:{click:function(e){return t.handleEditMsisdn(t.labelData)}}})]}},{key:"status",fn:function(a){return[e("span",{class:"status status"+a.data.row.status,staticStyle:{"margin-right":"4px"}}),e("span",[t._v(t._s(t.showStatus(a.data.row.status)))])]}}])}),e("div",{staticClass:"historyDevice"},[e("span",[t._v(t._s(t.$t("IDC.till.historyDevice")))])]),e("table-page",{staticClass:"till-tab histor-device-tab",attrs:{hasPagination:!1,outSideTableData:t.labelData.deviceHisList,columns:t.historyDevice,sortArr:["status","lastUpdateTime"]},scopedSlots:t._u([{key:"status",fn:function(a){return[e("span",{class:"status status"+a.data.row.status,staticStyle:{"margin-right":"4px"}}),e("span",[t._v(t._s(t.showStatus(a.data.row.status)))])]}},{key:"lastUpdateTime",fn:function(a){return[e("span",[t._v(t._s(t._f("localTimeFormat")(a.data.row.lastUpdateTime,"DD-MM-YYYY HH:mm:ss")))])]}}])})],1),e("el-tab-pane",{attrs:{label:t.$t("IDC.till.product"),name:"second"}},[e("div",{staticClass:"sub-title"},[t._v(" "+t._s(t.$t("IDC.till.tabTitle"))+" ")]),t.isShowProduct?e("el-button",{staticClass:"till-tab",class:"06"===t.labelData.status?"disabled-btn":"editBtn",attrs:{size:"small",icon:"el-icon-edit"},on:{click:t.showProduct}},[t._v(t._s(t.$t("common.button.edit")))]):t._e(),t.isShowProduct?t._e():e("el-button",{staticClass:"editBtn till-tab",attrs:{size:"small",icon:"el-icon-plus"},on:{click:t.addProduct}},[t._v(t._s(t.$t("common.button.add")))]),e("table-page",{staticClass:"till-tab",class:t.isShowProduct?"till-tab-bottom":"",attrs:{outSideTableData:t.showTillProducts,hasPagination:!1,columns:t.productColumns,sortArr:["productName","description"]},scopedSlots:t._u([{key:"operation",fn:function(a){return[e("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){return t.deleteTill(a.data.$index)}}},[t._v(" "+t._s(t.$t("common.button.delete"))+" ")])]}}])}),t.isShowProduct?t._e():e("el-form",{ref:"productForm",staticClass:"till-bottom",attrs:{model:t.productDataForm,rules:t.tillFormRules}},[e("el-form-item",{attrs:{prop:"remark",label:"Remark"}},[e("el-input",{attrs:{id:"editLanguageFormRemark",clearable:"",type:"textarea"},model:{value:t.productDataForm.remark,callback:function(e){t.$set(t.productDataForm,"remark",e)},expression:"productDataForm.remark"}})],1)],1)],1),t.isShowProduct?t._e():e("div",[e("div",{staticClass:"margin-right-20 produce-sumit",staticStyle:{float:"right"}},[e("el-button",{staticClass:"cancel-button",attrs:{size:"small",type:"plain",id:"cancel"},on:{click:function(e){return t.cancel()}}},[t._v(t._s(t.$t("common.button.cancel")))]),e("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{loading:t.editProductLogding,id:"submitCreateTaskjob",size:"small",type:"primary"},on:{click:t.changeProduct}},[t._v(" "+t._s(t.$t("common.button.submit"))+" ")])],1)])],1)],1)])]),e("el-tab-pane",{attrs:{lazy:!0,label:t.$t("IDC.till.auditLog"),name:"auditLog"}},[e("audit-log",{attrs:{title:t.tillAudioLog,initiatorType:"Till",identityId:t.tillId}})],1)],1)],1),e("edit-language",{ref:"editLanguage",on:{closeDialog:t.closeDialog}}),e("edit-status",{ref:"editStatus",on:{closeDialog:t.closeDialog}}),e("edit-msisdn",{ref:"editMsisdn",on:{closeDialog:t.closeDialog}}),e("edit-operatorId",{ref:"editDefaultOperator",on:{closeDialog:t.closeDialog}}),t.searchVisible?e("portal-add-popup",{attrs:{id:"popup-product",isShowSearch:!1,hasPagination:!1,isCheck:!0,isCheckMemory:!0,searchVisible:t.searchVisible,addForm:t.addForm,childSearch:t.loadProduct,"init-checks":t.initCheckList},on:{"update:searchVisible":function(e){t.searchVisible=e},"update:search-visible":function(e){t.searchVisible=e},"submit-call-back":t.selectProductList}}):t._e()],1)},s=[],l=a("4c09"),r=function(){var t=this,e=t._self._c;return e("el-dialog",{staticClass:"dialog-container",attrs:{title:t.$t("IDC.till.editLanguage"),visible:t.showEditLanguageDialog,width:"448px","close-on-click-modal":!1},on:{close:function(e){return t.closeEditLanguageDialog()}}},[e("el-form",{ref:"editLanguageFormRef",attrs:{model:t.editLanguageForm,rules:t.editLanguageFormRules,"label-position":"top","label-width":"200px"}},[e("el-form-item",{attrs:{prop:"oldLanguage",label:t.$t("IDC.till.oldLanguage")}},[e("div",{staticClass:"history-item"},[t._v(t._s(this.formatLanguage(t.editLanguageForm.oldLanguage)))])]),e("el-form-item",{staticClass:"from-item-title",attrs:{prop:"newLanguage",label:t.$t("IDC.till.newLanguage")}},[e("el-select",{attrs:{id:"newLanguage",placeholder:t.$t("common.placeholder.select"),size:"small"},model:{value:t.editLanguageForm.newLanguage,callback:function(e){t.$set(t.editLanguageForm,"newLanguage",e)},expression:"editLanguageForm.newLanguage"}},t._l(t.newLanguageOptions,(function(t){return e("el-option",{key:t.languageCode,attrs:{label:t.languageName,value:t.languageCode}})})),1)],1),e("el-form-item",{staticClass:"from-item-title",attrs:{prop:"remark",label:t.$t("IDC.till.remark")}},[e("el-input",{attrs:{id:"editLanguageFormRemark",clearable:"",type:"textarea",rows:4,resize:"none",placeholder:t.$t("common.placeholder.enter")},model:{value:t.editLanguageForm.remark,callback:function(e){t.$set(t.editLanguageForm,"remark","string"===typeof e?e.trim():e)},expression:"editLanguageForm.remark"}})],1)],1),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("el-button",{staticStyle:{width:"82px"},attrs:{id:"cancel",size:"small"},on:{click:function(e){return t.closeEditLanguageDialog()}}},[t._v(t._s(t.$t("common.button.cancel")))]),e("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],staticStyle:{width:"96px"},attrs:{loading:t.submitLoading,id:"confirm",type:"primary",size:"small"},on:{click:function(e){return t.submitDialogForm()}}},[t._v(t._s(t.$t("common.button.submit")))])],1)],1)},n=[],o=a("e863"),d=a("02e3"),c={name:"editLanguage",data(){return{submitLoading:!1,showEditLanguageDialog:!1,editLanguageForm:{oldLanguage:"",newLanguage:"",remark:""},editLanguageFormRules:{newLanguage:[d["z"]],remark:[d["e"]]},newLanguageOptions:[],languages:[],labelData:{}}},computed:{},watch:{},created(){},mounted(){},methods:{async getLanguagesList(){let t={dataId:"CACHE_LANGUAGE",groupId:"AG"},e=await Object(o["k"])(t);e.header&&e.header.success&&(this.newLanguageOptions=e.list)},closeEditLanguageDialog(){this.showEditLanguageDialog=!1,this.$refs["editLanguageFormRef"].resetFields()},handleEditLanguage(){this.showEditLanguageDialog=!0},showLanguageName(){},showView(t){this.getLanguagesList(),this.showEditLanguageDialog=!0,this.labelData=t,this.editLanguageForm.oldLanguage=t.languageCode,this.editLanguageForm.newLanguage=t.languageCode},submitDialogForm(){this.$refs["editLanguageFormRef"].validate(t=>{if(t){this.submitLoading=!0;let t={receiverIdentityId:this.labelData.identityId,languageCode:this.editLanguageForm.newLanguage,remark:this.editLanguageForm.remark};Object(o["h"])(t).then(t=>{t.header&&t.header.success?this.editSuccess():this.showEditLanguageDialog=!1,this.submitLoading=!1})}})},formatLanguage(t){let e="-";return this.newLanguageOptions.forEach(a=>{t===a.languageCode&&(e=a.languageName)}),e},editSuccess(){this.$emit("closeDialog",{type:"language",value:this.editLanguageForm.newLanguage}),this.showEditLanguageDialog=!1,this.$modal.msgSuccess(this.$t("IDC.till.editLanguageY")),this.$refs["editLanguageFormRef"].resetFields()}}},u=c,m=a("2877"),g=Object(m["a"])(u,r,n,!1,null,null,null),h=g.exports,p=a("4c1d"),b=function(){var t=this,e=t._self._c;return e("el-dialog",{staticClass:"dialog-container",attrs:{title:t.$t("IDC.till.editMSISDN"),visible:t.showEditMsisdneDialog,width:t.showMsisdnRange?"845px":"448px","close-on-click-modal":!1},on:{close:function(e){return t.closeEditLanguageDialog()}}},[e("div",{staticClass:"dialog"},[e("div",[e("el-form",{ref:"editMsisdnFormRef",attrs:{model:t.editMsisdnForm,rules:t.editLanguageFormRules,"label-position":"top","label-width":"200px"}},[e("el-form-item",{attrs:{prop:"currentMSISDN",label:t.$t("IDC.till.currentMSISDN")}},[e("div",{staticClass:"history-item"},[t._v(t._s(t.editMsisdnForm.currentMSISDN))])]),e("el-form-item",{staticClass:"from-item-title",attrs:{prop:"newMsisdn",label:t.$t("IDC.till.newMSISDN")}},[e("span",{staticClass:"view-change",attrs:{type:"primary",underline:!1},on:{click:t.viewMsisdnRange}},[t._v(t._s(t.$t("IDC.till.viewRange"))+" "),t.showMsisdnRange?e("svg-icon",{staticClass:"icon-double-arrow",attrs:{"icon-class":"double-arrow-left"},on:{click:t.viewMsisdnRange}}):e("svg-icon",{staticClass:"icon-double-arrow",attrs:{"icon-class":"double-arrow-right"},on:{click:t.viewMsisdnRange}})],1),e("el-input",{attrs:{id:"newMsisdn",prop:"newMsisdn",placeholder:t.$t("common.placeholder.enter")},model:{value:t.editMsisdnForm.newMsisdn,callback:function(e){t.$set(t.editMsisdnForm,"newMsisdn",e)},expression:"editMsisdnForm.newMsisdn"}})],1),e("el-form-item",{staticClass:"from-item-title",attrs:{prop:"remark",label:t.$t("IDC.till.remark")}},[e("el-input",{attrs:{id:"editLanguageFormRemark",clearable:"",type:"textarea",rows:4,resize:"none",placeholder:t.$t("common.placeholder.enter")},model:{value:t.editMsisdnForm.remark,callback:function(e){t.$set(t.editMsisdnForm,"remark","string"===typeof e?e.trim():e)},expression:"editMsisdnForm.remark"}})],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{id:"cancel",size:"small"},on:{click:function(e){return t.closeEditLanguageDialog()}}},[t._v(t._s(t.$t("common.button.cancel")))]),e("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{loading:t.submitLoading,id:"confirm",type:"primary",size:"small"},on:{click:function(e){return t.submitDialogForm()}}},[t._v(t._s(t.$t("common.button.submit")))])],1)],1),t.showMsisdnRange?e("div",{staticClass:"dialog-item"},[e("div",{staticStyle:{"margin-top":"24px",width:"348px"}},[e("span",{staticClass:"range-title"},[t._v("Till MSISDN Range")]),e("table-page",{staticClass:"till-tab",staticStyle:{"margin-top":"20px",overflow:"auto"},attrs:{height:"270",outSideTableData:t.msisdnRangeLists,hasPagination:!1,columns:t.columns}})],1)]):t._e()])])},f=[],L=a("3213"),D={name:"editMsisdn",components:{TablePage:l["a"]},data(){return{submitLoading:!1,labelData:{},showMsisdnRange:!1,msisdnRangeLists:[],showEditMsisdneDialog:!1,editMsisdnForm:{currentMSISDN:"",newMsisdn:"",remark:""},editLanguageFormRules:Object(L["c"])(),columns:[{width:"85px",label:this.$t("IDC.till.no")+".",prop:"index",align:"left"},{label:this.$t("IDC.till.range"),prop:"range",align:"left"}],newLanguageOptions:[],languages:[]}},mounted(){},methods:{initMsisdnRange(){null!=this.msisdnRangeLists&&this.msisdnRangeLists.length>0||Object(o["n"])({}).then(t=>{t.missdnRanges&&t.missdnRanges.length&&t.missdnRanges.forEach((t,e)=>{this.msisdnRangeLists.push({range:t.numberBegin+" ~ "+t.numberEnd,index:e+1})})})},submitDialogForm(){this.$refs["editMsisdnFormRef"].validate(t=>{if(t){this.submitLoading=!0;let t={receiverIdentityId:this.labelData.identityId,msisdn:this.editMsisdnForm.newMsisdn,remark:this.editMsisdnForm.remark};Object(o["f"])(t).then(t=>{this.submitLoading=!1,t.header&&t.header.success?this.editSuccess():this.showEditMsisdneDialog=!1})}})},editSuccess(){this.$emit("closeDialog",{type:"msisdn",value:""}),this.showEditMsisdneDialog=!1,this.$modal.msgSuccess(this.$t("IDC.till.editMSISDNY")),this.$refs["editMsisdnFormRef"].resetFields()},closeEditLanguageDialog(){this.showEditMsisdneDialog=!1,this.$refs["editMsisdnFormRef"].resetFields(),this.showMsisdnRange=!1},handleEditLanguage(){this.showEditMsisdneDialog=!0},showView(t){this.showEditMsisdneDialog=!0,this.labelData=t,this.editMsisdnForm.currentMSISDN=t.devices[0].msisdn,this.initMsisdnRange()},viewMsisdnRange(){this.showMsisdnRange=!this.showMsisdnRange}}},w=D,I=(a("6803"),Object(m["a"])(w,b,f,!1,null,"2246efc4",null)),C=I.exports,v=function(){var t=this,e=t._self._c;return e("el-dialog",{staticClass:"dialog-container",attrs:{title:t.$t("IDC.till.editDefaultOperatorId"),visible:t.showOperatorIdDialog,width:"448px","close-on-click-modal":!1},on:{close:function(e){return t.closeEditLanguageDialog()}}},[e("el-form",{ref:"eeditOperatorIdDialog",attrs:{model:t.editOperatorId,rules:t.editLanguageFormRules,"label-position":"top","label-width":"200px"}},[e("el-form-item",{attrs:{prop:"currentOperatorId",label:t.$t("IDC.till.currentOperatorId")}},[e("div",{staticClass:"history-item"},[t._v(t._s(t.editOperatorId.currentOperatorId))])]),e("el-form-item",{staticClass:"from-item-title",attrs:{rules:t.defaultOperatorIDRules,prop:"newOperatorId",label:t.$t("IDC.till.newOperatorId")}},[e("el-select",{attrs:{id:"newOperatorId",placeholder:t.$t("common.placeholder.select"),size:"small"},on:{change:t.selectChange},model:{value:t.editOperatorId.newOperatorId,callback:function(e){t.$set(t.editOperatorId,"newOperatorId",e)},expression:"editOperatorId.newOperatorId"}},t._l(t.newOperatorIdList,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t}})})),1)],1),e("el-form-item",{staticClass:"from-item-title",attrs:{prop:"remark",label:t.$t("IDC.till.remark")}},[e("el-input",{attrs:{id:"editLanguageFormRemark",clearable:"",type:"textarea",rows:4,resize:"none",placeholder:t.$t("common.placeholder.enter")},model:{value:t.editOperatorId.remark,callback:function(e){t.$set(t.editOperatorId,"remark","string"===typeof e?e.trim():e)},expression:"editOperatorId.remark"}})],1)],1),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("el-button",{staticStyle:{width:"82px"},attrs:{id:"cancel",size:"small"},on:{click:function(e){return t.closeEditLanguageDialog()}}},[t._v(t._s(t.$t("common.button.cancel")))]),e("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],staticStyle:{width:"96px"},attrs:{loading:t.submitLoading,id:"confirm",type:"primary",size:"small"},on:{click:function(e){return t.submitDialogForm()}}},[t._v(t._s(t.$t("common.button.submit")))])],1)],1)},_=[],O={name:"editDefaultOperator",data(){return{submitLoading:!1,showOperatorIdDialog:!1,editOperatorId:{currentOperatorId:"",newOperatorId:"",remark:""},newOperatorIdList:[],editLanguageFormRules:{remark:[d["e"]]},labelData:{},defaultOperatorIDRules:[]}},mounted(){},methods:{selectChange(t){""===t.value&&(this.editOperatorId.newOperatorId=""),this.$refs["eeditOperatorIdDialog"].validateField("newOperatorId")},async getIdrulues(){this.defaultOperatorIDRules=await Object(L["b"])()},async getSelectList(){let t={identityId:this.labelData.organizationId};this.newOperatorIdList=[];let e=await Object(o["o"])(t);if(e.header&&e.header.success){let t=[];e.orgOperatorList&&e.orgOperatorList.length&&e.orgOperatorList.forEach(e=>{t.push({label:e.operatorId,value:e.orgOperatorId})}),this.newOperatorIdList=t}this.newOperatorIdList.unshift({label:"Please select",value:""})},closeEditLanguageDialog(){this.showOperatorIdDialog=!1,this.$refs["eeditOperatorIdDialog"].resetFields()},handleEditLanguage(){this.showOperatorIdDialog=!0},showLanguageName(){},showView(t){this.showOperatorIdDialog=!0,this.labelData=t,this.getSelectList(),this.editOperatorId.currentOperatorId=t.defaultOperatorIdentifier,t.defaultOperatorId&&t.defaultOperatorIdentifier?this.editOperatorId.newOperatorId={value:t.defaultOperatorId,label:t.defaultOperatorIdentifier}:this.editOperatorId.newOperatorId="",this.getIdrulues()},submitDialogForm(){this.$refs["eeditOperatorIdDialog"].validate(t=>{if(t){this.submitLoading=!0;let t={receiverIdentityId:this.labelData.identityId,defaultOperatorId:this.editOperatorId.newOperatorId.value||"",remark:this.editOperatorId.remark};Object(o["i"])(t).then(t=>{this.submitLoading=!1,t.header&&t.header.success?this.editSuccess():this.showOperatorIdDialog=!1})}})},editSuccess(){let t=this.editOperatorId.newOperatorId.label?this.editOperatorId.newOperatorId.label:"",e=this.editOperatorId.newOperatorId.label?this.editOperatorId.newOperatorId.value:"";this.$emit("closeDialog",{type:"operatorId",value:{label:t,value:e}}),this.showOperatorIdDialog=!1,this.$modal.msgSuccess(this.$t("IDC.till.editIdY")),this.$refs["eeditOperatorIdDialog"].resetFields()}}},$=O,k=Object(m["a"])($,v,_,!1,null,null,null),S=k.exports,y=a("516e"),F=a("0cbd"),x=a("d8d3"),M={name:"TillView",components:{TablePage:l["a"],EditLanguage:h,EditStatus:p["a"],EditMsisdn:C,EditOperatorId:S,PortalAddPopup:F["a"],AuditLog:y["default"]},data(){return{editProductLogding:!1,tillAudioLog:{title:this.$t("IDC.auditlog.AuditLogTitle"),desc:this.$t("IDC.auditlog.tillDesc")},tabData:"first",activeName:"info",submitProductList:[],initCheckList:[],ishandleClick:!1,productDataForm:{remark:""},searchVisible:!1,addForm:{},that:this,tillId:"",devices:[],labelData:"",msisdn:"",showTillProducts:[],isShowProduct:!0,tillFormRules:Object(L["d"])(this),languagesList:[],columns:[{label:this.$t("IDC.till.msisdn"),prop:"msisdn",align:"left",__slotName:"msisdn"},{label:this.$t("IDC.till.iccid"),prop:"iccid",align:"left"},{label:this.$t("IDC.till.simSize"),prop:"simSize",align:"left"},{label:this.$t("common.label.status"),prop:"status",align:"left",__slotName:"status","sort-method":(t,e)=>t.jobStatus>e.jobStatus?1:-1}],historyDevice:[{label:this.$t("IDC.till.msisdn"),prop:"msisdn",align:"left"},{label:this.$t("IDC.till.iccid"),prop:"iccid",align:"left"},{label:this.$t("IDC.till.simSize"),prop:"simSize",align:"left"},{label:this.$t("common.label.status"),prop:"status",align:"left",__slotName:"status","sort-method":(t,e)=>t.jobStatus>e.jobStatus?1:-1},{"sort-method":(t,e)=>t.recycleTime>e.recycleTime?1:-1,label:this.$t("IDC.till.time"),prop:"lastUpdateTime",align:"left",__slotName:"lastUpdateTime"}],productColumns:[{width:"559",label:this.$t("IDC.till.createProductName"),prop:"productName",align:"left","sort-method":(t,e)=>t.productName>e.productName?1:-1},{label:this.$t("common.label.description"),prop:"description",align:"left","sort-method":(t,e)=>t.description>e.description?1:-1}]}},computed:{},watch:{},created(){this.getLanguagesList()},mounted(){let t=decodeURIComponent(this.$route.query.data);t=JSON.parse(t),this.tillId=t.tillId,this.getTillDetail()},methods:{async getLanguagesList(){let t={dataId:"CACHE_LANGUAGE",groupId:"AG"},e=await Object(o["k"])(t);e.header&&e.header.success&&(this.languagesList=e.list)},formatLanguage(t){let e="-";return this.languagesList.forEach(a=>{t===a.languageCode&&(e=a.languageName)}),e},handleEditLanguage(t){this.$refs["editLanguage"].showView(t)},selectProductList(t){let e=[];this.submitProductList=[],this.initCheckList=t,t&&t.length&&t.forEach(t=>{e.push({productName:t.productName,description:t.description,productId:t.productIndex}),this.submitProductList.push(t.productIndex)}),this.showTillProducts=JSON.parse(JSON.stringify(e))},changeProduct(){this.$refs["productForm"].validate(t=>{if(t){this.submitLoading=!0;let t={receiverIdentityId:this.labelData.identityId,remark:this.productDataForm.remark,productIdList:this.submitProductList};this.editProductLogding=!0,Object(o["j"])(t).then(t=>{this.submitLoading=!1,t.header&&t.header.success?(this.submitProductList=[],this.productDataForm.remark="",this.productColumns.pop(),this.$modal.msgSuccess(this.$t("IDC.till.editProductY")),this.isShowProduct=!0,this.$refs.productForm.resetFields(),this.labelData.tillProducts=JSON.parse(JSON.stringify(this.showTillProducts))):this.cancel()}).finally(()=>{this.editProductLogding=!1})}})},handleClick(t){"0"===t.index&&this.ishandleClick?(this.ishandleClick=!1,this.isShowProduct||this.cancel()):"1"===t.index&&(this.ishandleClick=!0)},tabChange(t){"1"===t.index&&(this.tabData="first")},handleEditStatus(t){this.$refs["editStatus"].showView(t)},handleEditMsisdn(t){this.$refs["editMsisdn"].showView(t)},cancel(){this.initCheckList=[],this.productDataForm.remark="",this.productColumns.pop(),this.isShowProduct=!0;let t=this.labelData.tillProducts;t&&t.length>0?(this.showTillProducts=JSON.parse(JSON.stringify(this.labelData.tillProducts)),this.showTillProducts.forEach(t=>{this.initCheckList.push({productIndex:1*t.productId})})):(this.showTillProducts=[],this.initCheckList=[])},addProduct(){this.searchVisible=!0,this.addForm={title:this.$t("IDC.till.addProduct"),label:"",idKey:"productIndex",key:"productIndex",columns:[{label:this.$t("IDC.till.productName"),prop:"productName",align:"left"},{label:this.$t("IDC.till.description"),prop:"description",align:"left"}]}},showProduct(){let t=this.labelData;if("06"!==t.status)this.isShowProduct=!1,this.productColumns.push({width:"200",label:this.$t("common.label.operation"),prop:"operation",align:"left",__slotName:"operation"});else{let t=`The Till-${this.labelData.tillNumber} is in the Closed state which does not support the current service.`;this.$confirm(t,{confirmButtonText:this.$t("common.button.confirm"),showCancelButton:!1,closeOnClickModal:!1,type:"warning"})}},deleteTill(t){let e=this.$t("IDC.till.deleteProduct"),a=this.$t("common.button.delete");this.$confirm(e,a,{confirmButtonText:this.$t("common.button.delete"),cancelButtonText:this.$t("common.button.cancel"),closeOnClickModal:!1,customClass:"delete-confirm",type:"warning"}).then(()=>{this.showTillProducts.splice(t,1),this.submitProductList.splice(t,1),this.initCheckList.splice(t,1)})},handleEditDefaultOperator(t){this.$refs["editDefaultOperator"].showView(t)},getTillDetail(t){let e={tillId:this.tillId};Object(o["p"])(e).then(e=>{if(e.header&&e.header.success){this.closeDialog(t),this.labelData=JSON.parse(JSON.stringify(e)),this.showTillProducts=JSON.parse(JSON.stringify(e.tillProducts||[]));let a=[];this.showTillProducts&&this.showTillProducts.length>0&&this.showTillProducts.forEach(t=>{a.push(t.productId),this.initCheckList.push({productIndex:1*t.productId,productName:t.productName||""})}),this.submitProductList=a}})},closeDialog(t=""){""!=t&&("language"==t.type?this.labelData.languageCode=t.value:"msisdn"===t.type?this.getTillDetail():"operatorId"===t.type?""===t.value.value?(this.$set(this.labelData,"defaultOperatorIdentifier",""),this.$set(this.labelData,"defaultOperatorId","")):(this.$set(this.labelData,"defaultOperatorIdentifier",t.value.label),this.$set(this.labelData,"defaultOperatorId",t.value.value)):"status"===t.type&&(this.labelData.status=t.value))},async loadProduct(){let t={permCode:"MANAGE_TILL_CHANGE_SERVICE",dataPermCode:"TILL_PRODUCT"},e=await Object(o["q"])(t);return e},showStatus(t){return x["c"][t]||"-"}}},P=M,N=(a("5fd7"),Object(m["a"])(P,i,s,!1,null,"4c10f2f0",null));e["default"]=N.exports},"5fd7":function(t,e,a){"use strict";a("b502")},6803:function(t,e,a){"use strict";a("f9a1")},9488:function(t,e,a){"use strict";a("0e19")},b502:function(t,e,a){},c811:function(t,e,a){"use strict";var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"page-header",class:{"no-bottom-border":!t.showBottomLine,"no-desc-height":!t.projectObj.desc}},[e("div",{staticClass:"header-left"},[t.projectObj.title?e("div",{staticClass:"page-title"},[t._v(" "+t._s(t.projectObj.title)+" "),t._t("title-suffix")],2):t._e(),t.projectObj.desc?e("div",{staticClass:"page-desc"},[t._v(" "+t._s(t.projectObj.desc)+" ")]):t._e()]),e("div",{staticClass:"header-right"},[t._t("header-right")],2)])},s=[],l={name:"PortalHeader",components:{},props:{projectObj:{type:Object,default(){return{}}},showBottomLine:{type:Boolean,default:!0}}},r=l,n=(a("9488"),a("2877")),o=Object(n["a"])(r,i,s,!1,null,"73566ca8",null);e["a"]=o.exports},d8d3:function(t,e,a){"use strict";a.d(e,"c",(function(){return i})),a.d(e,"a",(function(){return s})),a.d(e,"b",(function(){return l}));const i={"00":"New","02":"Pending Active","03":"Active","04":"Suspended","05":"Frozen","06":"Closed","07":"Capped","08":"Dormant"},s={1005:"Web",1007:"Handset",1010:"API"},l={1:"Porta",2:"AG",3:"ThirdParty",4:"System",5:"NC",6:"TransactionCenter",7:"IdentityBusiness",8:"BulkCenter"}},f9a1:function(t,e,a){}}]);
//# sourceMappingURL=chunk-7d3ac908.js.map