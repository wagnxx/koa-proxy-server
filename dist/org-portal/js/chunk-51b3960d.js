(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-51b3960d","chunk-43eec914"],{"0e19":function(e,t,a){},"0fc4":function(e,t,a){e.exports={activeMenuColor:"#366bfc",primaryColor:"#366bfc",menuColor:"#5c5c5c",fillEmphasisColor:"#5c5c5c",fillLightColor:"#fafafa",fillStrongColor:"#c7c7c7",fillRegularColor:"#f0f0f0",fillColorDark:"#e0e0e0",lineStrongColor:"#8f8f8f",textEmphasisColor:"#282828",backgroundColor:"#fff",statusErrorColor:"#ff4040",statusSuccessColor:"#27bf88",statusColorwarning:"#ff7420",statusColorSAecondaryWarning:"#faaf0c",statusNoticeColor:"#338bff",statusDark:"#c7c7c7",initialColor:"#E0E0E0",statusNoticeBackgroundColor:"#F0F9FF",statusErrorBackgroundColor:"#FFF2F0",statusSuccessBackgroundColor:"#F0FFF7",statusSecondaryWarningBackgroundColor:"#FFFBE6",statusWarningBackgroundColor:"#FFF6E6",statusDarkBackgroundColor:"#FAFAFA",lineColorBlue:"#ADD9FF",lineColorError:"#FFC1BA",lineColorGreen:"#A5E6C6",lineColorWarning:"#FFF7ed"}},"107c":function(e,t,a){"use strict";a("a857")},"15f0":function(e,t,a){"use strict";a("3b90")},"1c45":function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"c",(function(){return o})),a.d(t,"a",(function(){return l}));var i=a("0bbd"),n=a("5f9a");function r(e){return Object(i["a"])({url:Object(n["a"])("/fintech/v1/organization/detail",e),method:"get"})}function o(e){return Object(i["a"])({url:Object(n["a"])("/fintech/v1/organization/status",e),method:"get"})}function l(e){return Object(i["a"])({url:"/fintech/v1/organization/changeStatus",data:e,method:"post"})}},"1caf":function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var i=a("7dfc");async function n(e,t,a){const{fileType:n,blobType:r="application/ms-excel"}=a,o=await e(t);if("application/json"===o.type){const e=new FileReader;e.readAsText(o);const t=this;e.onload=function(){const a=JSON.parse(e.result);t.$modal.msgError(a.header.responseDesc)}}else{const e=new Date,t=Object(i["a"])(e,"YYYYMMDDHHmmss");let a="FINANCIAL_RECONCILIATION_"+t+"."+n.toLowerCase();o.headers&&(a=o.headers["content-disposition"].split(";")[1].split("filename=")[1]);const l=new Blob([o],{type:r}),s=document.createElement("a");s.download=a,s.style.display="none",s.href=URL.createObjectURL(l),document.body.appendChild(s),s.click(),URL.revokeObjectURL(s.href),document.body.removeChild(s)}}},"28ba":function(e,t,a){"use strict";a("0fc4")},"2fa9":function(e,t,a){},"3b90":function(e,t,a){},"423d":function(e,t,a){e.exports={activeMenuColor:"#366bfc",primaryColor:"#366bfc",menuColor:"#5c5c5c",fillEmphasisColor:"#5c5c5c",fillLightColor:"#fafafa",fillStrongColor:"#c7c7c7",fillRegularColor:"#f0f0f0",fillColorDark:"#e0e0e0",lineStrongColor:"#8f8f8f",textEmphasisColor:"#282828",backgroundColor:"#fff",statusErrorColor:"#ff4040",statusSuccessColor:"#27bf88",statusColorwarning:"#ff7420",statusColorSAecondaryWarning:"#faaf0c",statusNoticeColor:"#338bff",statusDark:"#c7c7c7",initialColor:"#E0E0E0",statusNoticeBackgroundColor:"#F0F9FF",statusErrorBackgroundColor:"#FFF2F0",statusSuccessBackgroundColor:"#F0FFF7",statusSecondaryWarningBackgroundColor:"#FFFBE6",statusWarningBackgroundColor:"#FFF6E6",statusDarkBackgroundColor:"#FAFAFA",lineColorBlue:"#ADD9FF",lineColorError:"#FFC1BA",lineColorGreen:"#A5E6C6",lineColorWarning:"#FFF7ed"}},"5c44":function(e,t,a){},6133:function(e,t,a){"use strict";a("fe84")},6195:function(e,t,a){"use strict";var i,n,r=function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.initLoading,expression:"initLoading"}],staticClass:"panel"},["detail"===e.pageType?t("el-row",[t("el-col",[t("div",{staticClass:"prompt-title"},[e._v(e._s(e.$t("IDC.revenueSettlementInfo.promptTitle")))])])],1):e._e(),e.isEditModel||"detail"!==e.pageType?e._e():t("el-row",[t("el-col",[t("el-button",{staticClass:"portal-operation-button",staticStyle:{"margin-bottom":"20px"},attrs:{size:"small",plain:""},on:{click:function(t){return e.setEditModel(!0)}}},[t("i",{staticClass:"el-icon-edit el-icon--right"}),e._v(e._s(e.$t("common.button.edit"))+" ")])],1)],1),t("el-form",{ref:"revenueForm",staticClass:"settlement-form",class:{viewModel:!e.isEditModel},attrs:{"label-position":"top",model:e.revenueFormData,rules:e.revenueRules}},[t("div",{staticClass:"content-wrapper"},[t("div",{staticClass:"sub-block"},[t("el-row",{attrs:{gutter:20}},[t("el-col",e._b({},"el-col",e.colOptions,!1),[t("el-form-item",{attrs:{prop:"profileName",label:e.$t("IDC.revenueSettlementInfo.revenueSettlementProfile")}},[e.isEditModel?[t("el-select",{attrs:{placeholder:"Please select",size:"small",clearable:""},on:{change:e.getProfileChange},nativeOn:{click:function(t){return e.getProfileClick.apply(null,arguments)}},model:{value:e.revenueFormData.profileId,callback:function(t){e.$set(e.revenueFormData,"profileId",t)},expression:"revenueFormData.profileId"}},e._l(e.profileList,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)]:t("span",{domProps:{textContent:e._s(e.revenueFormData.profileName||"-")}})],2)],1),e.revenueFormData.isShowModel?[t("el-col",e._b({},"el-col",e.colOptions,!1),[t("el-form-item",{attrs:{prop:"periodicSwitch",label:e.$t("IDC.revenueSettlementInfo.periodicRevenueSettlement")}},[e.isEditModel?t("switch-with-text",{attrs:{value:e.revenueFormData.periodicSwitch,change:e.PeriodicHandleChange,bind:{size:"small"}},on:{"update:value":function(t){return e.$set(e.revenueFormData,"periodicSwitch",t)}}}):t("span",{domProps:{textContent:e._s(!0===e.revenueFormData.periodicSwitch?"ON":"OFF")}})],1)],1),e.revenueFormData.periodicSwitch?t("el-col",e._b({},"el-col",e.colOptions,!1),[t("el-form-item",{attrs:{prop:"intervalValue",label:e.$t("IDC.revenueSettlementInfo.settlementCycle")}},[e.isEditModel?t("div",{staticStyle:{display:"flex",gap:"4px"}},[t("el-input",{staticStyle:{width:"68%"},attrs:{size:"small"},model:{value:e.revenueFormData.intervalValue,callback:function(t){e.$set(e.revenueFormData,"intervalValue",t)},expression:"revenueFormData.intervalValue"}}),t("el-select",{staticStyle:{width:"32%"},attrs:{placeholder:"please select",size:"small"},on:{change:function(t){return e.onTimeUnitChange()}},model:{value:e.revenueFormData.intervalTypeCode,callback:function(t){e.$set(e.revenueFormData,"intervalTypeCode",t)},expression:"revenueFormData.intervalTypeCode"}},e._l(e.settlementCycleUnitList,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1):t("span",{domProps:{textContent:e._s(e.revenueFormData.intervalValue+" "+e.getLableToOptions(e.revenueFormData.intervalTypeCode,e.settlementCycleUnitList))}})])],1):e._e(),e.revenueFormData.periodicSwitch?t("el-col",e._b({},"el-col",e.colOptions,!1),[t("el-form-item",{attrs:{label:e.$t("IDC.revenueSettlementInfo.startDate"),prop:"startDate"}},[e.isEditModel?t("el-date-picker",{attrs:{type:"date",size:"small",format:"dd/MM/yyyy",placeholder:"Please select date","value-format":"yyyy-MM-dd","picker-options":e.startDatePicker,clearable:!1},on:{change:e.startDateChange},model:{value:e.revenueFormData.startDate,callback:function(t){e.$set(e.revenueFormData,"startDate",t)},expression:"revenueFormData.startDate"}}):t("span",{domProps:{textContent:e._s(e.getDateFormat(e.revenueFormData.startDate))}})],1)],1):e._e(),e.revenueFormData.periodicSwitch?t("el-col",e._b({},"el-col",e.colOptions,!1),[t("el-form-item",{attrs:{label:e.$t("IDC.revenueSettlementInfo.endDate"),prop:"endDate"}},[e.isEditModel?t("el-date-picker",{attrs:{type:"date",size:"small",format:"dd/MM/yyyy",placeholder:"Please select date","value-format":"yyyy-MM-dd","picker-options":e.endDatePicker,clearable:!1},on:{change:e.endDateChange},model:{value:e.revenueFormData.endDate,callback:function(t){e.$set(e.revenueFormData,"endDate",t)},expression:"revenueFormData.endDate"}}):t("span",{domProps:{textContent:e._s(e.getDateFormat(e.revenueFormData.endDate))}})],1)],1):e._e()]:e._e(),e.revenueFormData.isShowModel?t("el-col",e._b({},"el-col",e.colOptions,!1),[t("el-form-item",{attrs:{label:e.$t("IDC.revenueSettlementInfo.manualInitiation"),prop:"manualWsSwitch"}},[e.isEditModel?t("switch-with-text",{attrs:{value:e.revenueFormData.manualWsSwitch,bind:{disabled:!0,size:"small"}},on:{"update:value":function(t){return e.$set(e.revenueFormData,"manualWsSwitch",t)}}}):t("span",{domProps:{textContent:e._s(!0===e.revenueFormData.manualWsSwitch?"ON":"OFF")}})],1)],1):e._e(),e.revenueFormData.isShowModel?t("el-col",e._b({},"el-col",e.colOptions,!1),[t("el-form-item",{attrs:{label:e.$t("IDC.revenueSettlementInfo.scheduledInitiation"),prop:"scheduledInitiation"}},[e.isEditModel?t("switch-with-text",{attrs:{value:e.revenueFormData.autoWsSwitch,bind:{disabled:!0,size:"small"}},on:{"update:value":function(t){return e.$set(e.revenueFormData,"autoWsSwitch",t)}}}):t("span",{domProps:{textContent:e._s(!0===e.revenueFormData.autoWsSwitch?"ON":"OFF")}})],1)],1):e._e()],2)],1),e.revenueFormData.isShowModel?t("section",{staticClass:"tabs-container",class:{create:"create"===e.pageType}},[t("el-tabs",{staticStyle:{"margin-right":"20px"},attrs:{id:"tab-pane",type:"border-card"},on:{"tab-click":e.handleTabClick},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},e._l(e.revenueFormData.settlementProfileList,(function(a,i){return t("el-tab-pane",{key:a["fundingSourceCode"]+a["settlementAccountTypeId"]+a["currency"],attrs:{label:"Settlement "+(i+1),name:a["fundingSourceCode"]+a["settlementAccountTypeId"]+a["currency"]}},[t("div",{staticClass:"sub-block"},[t("el-row",{attrs:{gutter:20}},[t("el-col",e._b({},"el-col",e.colOptions,!1),[t("el-form-item",{attrs:{label:e.$t("IDC.revenueSettlementInfo.settAccountMinBalance")+e.showBalanceWithUnit(a.currency),prop:"settlementMinBalance"}},[e.isEditModel?t("el-input",{attrs:{clearable:"",size:"small"},on:{focus:function(t){return e.unInputMoney(t)},blur:function(t){return e.inputMoney(t)}},model:{value:a.settlementMinBalance,callback:function(t){e.$set(a,"settlementMinBalance",t)},expression:"item.settlementMinBalance"}}):t("span",{domProps:{textContent:e._s(a.settlementMinBalance)}})],1)],1)],1)],1),t("el-divider",{staticClass:"divider-margin-2"}),t("div",{staticClass:"sub-block"},[t("div",{staticClass:"sub-block__title sub-block__title--normal"},[e._v(" "+e._s(e.$t("IDC.revenueSettlementInfo.revenueSettlementConfiguration"))+" ")]),t("revenue-table-list",{attrs:{tableData:a.grossRevenueList,isEditModel:e.isEditModel,currency:a.currency}})],1),t("div",{staticClass:"sub-block margin-top-45"},[t("div",{staticClass:"sub-block__title sub-block__title--normal"},[e._v(" "+e._s(e.$t("IDC.revenueSettlementInfo.liabSettlementConfiguration"))+" ")]),t("liability-table-list",{attrs:{tableData:a.grossLiabilityList,isEditModel:e.isEditModel,currency:a.currency}})],1)],1)})),1)],1):e._e()])]),e.isEditModel&&e.isShowBtn?t("div",{staticClass:"page-bottom-wrap"},[t("div",[t("el-button",{staticClass:"cancel-button",attrs:{id:"cancel",size:"small"},on:{click:e.cancel}},[e._v("Cancel ")]),t("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{id:"submitProduct",type:"primary",size:"small",loading:e.submitLoading},on:{click:e.submitEvn}},[e._v(" Submit ")])],1)]):e._e()],1)},o=[],l={name:"SwitchWithText",props:{value:{type:Boolean,default:()=>!0},change:{Type:Function,default:()=>{}},bind:{type:Object,default:()=>({})},activeText:{type:String,default:()=>"ON"},inactiveText:{type:String,default:()=>"OFF"},position:{type:String,default:()=>"right",validator:function(e){return["left","right","leftRight"].includes(e)}}},data(){return{val:this.value}},watch:{value(e){this.val=e}},methods:{getStatusText(e){return e?this.activeText:this.inactiveText},changeHandle(e){this.$emit("update:value",e),this.change(e)}},render(e){const t={};"right"===this.position&&(t.activeText=this.getStatusText(this.val)),"left"===this.position&&(t.inactiveText=this.getStatusText(this.val)),"leftRight"===this.position&&(t.inactiveText=this.inactiveText,t.activeText=this.activeText);const a=[];let i={};this.bind&&this.bind.class&&a.push(this.bind.class),this.bind&&this.bind.style&&(i={...i,...this.bind.style});const n={class:a,style:i,props:{...this.bind,...t,value:this.val},on:{change:this.changeHandle}};return e("el-switch",n)}},s=l,c=a("2877"),u=Object(c["a"])(s,i,n,!1,null,null,null),d=u.exports,g=a("e036"),h=function(){var e=this,t=e._self._c;return t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"","row-style":{height:"56px"}}},[t("el-table-column",{attrs:{label:e.$t("IDC.revenueSettlementInfo.liabilityAccount"),prop:"accountTypeName","min-width":"168px"}}),t("el-table-column",{attrs:{label:e.$t("IDC.revenueSettlementInfo.targetBalance")+e.showBalanceWithUnit(e.currency),prop:"targetBalance",required:"","min-width":"158px","render-header":e.requiredStar},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{staticClass:"columns"},[t("el-tooltip",{attrs:{content:e.getContentTips(a.row,"target"),effect:"light",placement:"top-start","arrow-offset":16,"popper-class":"text-content-error-tooltip",disabled:a.row.targetDisabled}},[t("el-form-item",{attrs:{prop:"targetBalance",rules:e.checkRules(a.row,"target")}},[t("el-input",{staticStyle:{width:"100%"},attrs:{size:"small",type:"text",disabled:!e.isEditModel},on:{focus:function(t){return e.unInputMoney(t,a,"target")},blur:function(t){return e.inputMoney(t,a,"target")}},model:{value:a.row.targetBalance,callback:function(t){e.$set(a.row,"targetBalance",t)},expression:"scope.row.targetBalance"}})],1)],1)],1)]}}])}),t("el-table-column",{attrs:{label:e.$t("IDC.revenueSettlementInfo.settlementTriggerBalance")+e.showBalanceWithUnit(e.currency),prop:"triggerBalance","min-width":"208px","render-header":e.addRequiredStar},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{staticClass:"columns"},[t("el-tooltip",{attrs:{content:e.getContentTips(a.row,"trigger"),effect:"light",placement:"top-start","arrow-offset":16,"popper-class":"text-content-error-tooltip",disabled:a.row.triggerDisabled}},[t("el-form-item",{attrs:{prop:"triggerBalance",rules:e.checkRules(a.row,"trigger")}},[t("el-switch",{staticStyle:{"margin-right":"10px"},attrs:{"active-text":a.row.triggerSwitch?"ON":"OFF",disabled:!e.isEditModel},on:{change:function(t){return e.triggerHandleChange(a.row,a.$index)}},model:{value:a.row.triggerSwitch,callback:function(t){e.$set(a.row,"triggerSwitch",t)},expression:"scope.row.triggerSwitch"}}),a.row.triggerSwitch?t("el-input",{staticStyle:{width:"72%"},attrs:{size:"small",type:"text",disabled:!e.isEditModel},on:{focus:function(t){return e.unInputMoney(t,a,"trigger")},blur:function(t){return e.inputMoney(t,a,"trigger")}},model:{value:a.row.triggerBalance,callback:function(t){e.$set(a.row,"triggerBalance",t)},expression:"scope.row.triggerBalance"}}):e._e()],1)],1)],1)]}}])}),t("el-table-column",{attrs:{label:e.$t("IDC.revenueSettlementInfo.MinBalanceTrigger"),prop:"maxMinBalanceTrigger","min-width":"100px"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{staticClass:"columns"},[t("el-switch",{staticStyle:{width:"95px"},attrs:{"active-text":a.row.maxMinBalanceTrigger?"ON":"OFF",disabled:!e.isEditModel},model:{value:a.row.maxMinBalanceTrigger,callback:function(t){e.$set(a.row,"maxMinBalanceTrigger",t)},expression:"scope.row.maxMinBalanceTrigger"}})],1)]}}])})],1)},m=[],f=a("89b2"),p={name:"TblProductService",props:{tableData:{type:Array,default:()=>[]},isEditModel:{type:Boolean,default:!1},dateRange:{type:Object,default:()=>{}},currency:{type:String,default:""}},data(){return{services:[],amount:"",hasTriggerSwitch:!1}},computed:{},watch:{},methods:{deleteRow(e,t){t.splice(e,1)},inputMoney(e,t,a){let i=null;i="0"===e.target.value?Number(e.target.value):Number(e.target.value)||null,"trigger"===a?t.row.triggerBalance=Object(f["d"])(i):t.row.targetBalance=Object(f["d"])(i)},unInputMoney(e,t,a){e.target.value&&("trigger"===a?t.row.triggerBalance=Object(f["a"])(e.target.value):t.row.targetBalance=Object(f["a"])(e.target.value))},showBalanceWithUnit(e){return"USD"===e?"($)":`(${e})`},checkRules(e,t){return{trigger:"blur",validator:async(a,i,n)=>{let r=null!=e.triggerBalance&&0!=e.triggerBalance.length,o=null!=e.targetBalance&&0!=e.targetBalance.length,l=null==e.targetBalance;if(this.hasTriggerSwitch=e.triggerSwitch,r&&o){let a=Number(Object(f["a"])(e.triggerBalance)),i=Number(Object(f["a"])(e.targetBalance));switch(t){case"target":if(i<=a)return n(new Error("Please enter an amount less than "+e.triggerBalance));break;case"trigger":if(a>=i)return n(new Error("Please enter an amount greater than "+e.targetBalance));break}}else if(l){if("target"==t)return n(new Error("Please enter content"))}else if(o&&this.hasTriggerSwitch&&"trigger"==t)return n(new Error("Please enter content"));n()}}},getContentTips(e,t){let a=null!=e.triggerBalance&&0!=e.triggerBalance.length,i=null!=e.targetBalance&&0!=e.targetBalance.length,n=null==e.targetBalance,r=null==e.triggerBalance;this.hasTriggerSwitch=e.triggerSwitch;let o="";if(a&&i){let a=Number(Object(f["a"])(e.triggerBalance)),i=Number(Object(f["a"])(e.targetBalance));switch(t){case"target":if(i>a)return void(e.targetDisabled=!0);o="Please enter an amount greater than "+a,e.targetDisabled=!1;break;case"trigger":if(a<i)return void(e.triggerDisabled=!0);o="Please enter an amount less than "+i,e.triggerDisabled=!1;break}}else if(n&&a)o="Please enter content",e.targetDisabled=!1,e.triggerDisabled=!0;else if(i&&r&&this.hasTriggerSwitch)o="Please enter content",e.targetDisabled=!0,e.triggerDisabled=!1;else{if(i&&!this.hasTriggerSwitch)return e.targetDisabled=!0,void(e.triggerDisabled=!0);o="Please enter content",e.targetDisabled=!1,e.triggerDisabled=!1}return o},requiredStar(e,{column:t}){return[e("span",{class:"required-star",style:"margin-left: 8px"},t.label)]},addRequiredStar(e,{column:t}){return[e("span",{class:{"required-star":this.hasTriggerSwitch},style:"margin-left: 8px"},t.label)]},triggerHandleChange(e,t){if(this.hasTriggerSwitch=e.triggerSwitch,!e.triggerSwitch){let e=this.tableData;e[t].triggerBalance=null}}}},b=p,v=(a("b7e5"),a("631b"),Object(c["a"])(b,h,m,!1,null,"7f2ad130",null)),C=v.exports,y=function(){var e=this,t=e._self._c;return t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"","row-style":{height:"56px"}}},[t("el-table-column",{attrs:{label:e.$t("IDC.revenueSettlementInfo.revenueAccount"),prop:"accountTypeName","min-width":"168px"}}),t("el-table-column",{attrs:{label:e.$t("IDC.revenueSettlementInfo.targetBalance")+e.showBalanceWithUnit(e.currency),prop:"targetBalance",required:"","min-width":"158px","render-header":e.requiredStar},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{staticClass:"columns"},[t("el-tooltip",{attrs:{content:e.getContentTips(a.row,"target"),effect:"light",placement:"top-start","arrow-offset":16,"popper-class":"text-content-error-tooltip",disabled:a.row.targetDisabled}},[t("el-form-item",{attrs:{prop:"targetBalance",rules:e.isEditModel?e.checkRules(a.row,"target"):{}}},[t("el-input",{staticStyle:{width:"100%"},attrs:{size:"small",type:"text",disabled:!e.isEditModel},on:{focus:function(t){return e.unInputMoney(t,a,"target")},blur:function(t){return e.inputMoney(t,a,"target")}},model:{value:a.row.targetBalance,callback:function(t){e.$set(a.row,"targetBalance",t)},expression:"scope.row.targetBalance"}})],1)],1)],1)]}}])}),t("el-table-column",{attrs:{label:e.$t("IDC.revenueSettlementInfo.settlementTriggerBalance")+e.showBalanceWithUnit(e.currency),prop:"triggerBalance","min-width":"208px","render-header":e.addRequiredStar},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{staticClass:"columns"},[t("el-tooltip",{attrs:{content:e.getContentTips(a.row,"trigger"),effect:"light",placement:"top-start","arrow-offset":16,"popper-class":"text-content-error-tooltip",disabled:a.row.triggerDisabled}},[t("el-form-item",{attrs:{prop:"triggerBalance",rules:e.checkRules(a.row,"trigger")}},[t("el-switch",{staticStyle:{"margin-right":"10px"},attrs:{"active-text":a.row.triggerSwitch?"ON":"OFF",disabled:!e.isEditModel},on:{change:function(t){return e.triggerHandleChange(a.row,a.$index)}},model:{value:a.row.triggerSwitch,callback:function(t){e.$set(a.row,"triggerSwitch",t)},expression:"scope.row.triggerSwitch"}}),a.row.triggerSwitch?t("el-input",{staticStyle:{width:"72%"},attrs:{size:"small",type:"text",disabled:!e.isEditModel},on:{focus:function(t){return e.unInputMoney(t,a,"trigger")},blur:function(t){return e.inputMoney(t,a,"trigger")}},model:{value:a.row.triggerBalance,callback:function(t){e.$set(a.row,"triggerBalance",t)},expression:"scope.row.triggerBalance"}}):e._e()],1)],1)],1)]}}])}),t("el-table-column",{attrs:{label:e.$t("IDC.revenueSettlementInfo.maxBalanceTrigger"),prop:"maxMinBalanceTrigger","min-width":"100px"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{staticClass:"columns"},[t("el-switch",{staticStyle:{width:"95px"},attrs:{"active-text":a.row.maxMinBalanceTrigger?"ON":"OFF",disabled:!e.isEditModel},model:{value:a.row.maxMinBalanceTrigger,callback:function(t){e.$set(a.row,"maxMinBalanceTrigger",t)},expression:"scope.row.maxMinBalanceTrigger"}})],1)]}}])})],1)},w=[],I={name:"TblProductService",props:{tableData:{type:Array,default:()=>[]},isEditModel:{type:Boolean,default:!1},dateRange:{type:Object,default:()=>{}},currency:{type:String,default:""}},watch:{},data(){return{services:[],amount:"",hasTriggerSwitch:!1}},computed:{},methods:{deleteRow(e,t){t.splice(e,1)},inputMoney(e,t,a){let i=null;i="0"===e.target.value?Number(e.target.value):Number(e.target.value)||null,"trigger"===a?t.row.triggerBalance=Object(f["d"])(i):t.row.targetBalance=Object(f["d"])(i)},unInputMoney(e,t,a){e.target.value&&("trigger"===a?t.row.triggerBalance=Object(f["a"])(e.target.value):t.row.targetBalance=Object(f["a"])(e.target.value))},showBalanceWithUnit(e){return"USD"===e?"($)":`(${e})`},checkRules(e,t){return{trigger:"blur",validator:async(a,i,n)=>{let r=null!=e.triggerBalance&&0!=e.triggerBalance.length,o=null!=e.targetBalance&&0!=e.targetBalance.length,l=null==e.targetBalance;if(r&&o){let a=Number(Object(f["a"])(e.triggerBalance)),i=Number(Object(f["a"])(e.targetBalance));switch(t){case"target":if(i>=a)return n(new Error("Please enter an amount less than "+e.triggerBalance));break;case"trigger":if(a<=i)return n(new Error("Please enter an amount greater than "+e.targetBalance));break}}else if(l){if("target"==t)return n(new Error("Please enter content"))}else if(o&&this.hasTriggerSwitch&&"trigger"==t)return n(new Error("Please enter content"));n()}}},getContentTips(e,t){let a=null!=e.triggerBalance&&0!=e.triggerBalance.length,i=null!=e.targetBalance&&0!=e.targetBalance.length,n=null==e.targetBalance,r=null==e.triggerBalance;this.hasTriggerSwitch=e.triggerSwitch;let o="";if(a&&i){let a=Number(Object(f["a"])(e.triggerBalance)),i=Number(Object(f["a"])(e.targetBalance));switch(t){case"target":if(i<a)return void(e.targetDisabled=!0);o="Please enter an amount less than "+a,e.targetDisabled=!1;break;case"trigger":if(a>i)return void(e.triggerDisabled=!0);o="Please enter an amount greater than "+i,e.triggerDisabled=!1;break}}else if(n&&a)o="Please enter content",e.targetDisabled=!1,e.triggerDisabled=!0;else if(i&&r&&this.hasTriggerSwitch)o="Please enter content",e.targetDisabled=!0,e.triggerDisabled=!1;else{if(i&&!this.hasTriggerSwitch)return e.targetDisabled=!0,void(e.triggerDisabled=!0);o="Please enter content",e.targetDisabled=!1,e.triggerDisabled=!1}return o},requiredStar(e,{column:t}){return[e("span",{class:"required-star",style:"margin-left: 8px"},t.label)]},addRequiredStar(e,{column:t}){return[e("span",{class:{"required-star":this.hasTriggerSwitch},style:"margin-left: 8px"},t.label)]},triggerHandleChange(e,t){if(this.hasTriggerSwitch=e.triggerSwitch,!e.triggerSwitch){let e=this.tableData;e[t].triggerBalance=null}}}},D=I,S=(a("107c"),a("28ba"),Object(c["a"])(D,y,w,!1,null,"6a6e68d1",null)),O=S.exports,F=a("689d"),P=a("5a0c"),k=a.n(P),T={name:"RevenueSettlementInfo",components:{switchWithText:d,LiabilityTableList:C,RevenueTableList:O},props:{dataObj:{labels:Object,default(){return{}}},revenueFormData:{type:Object,default(){return{}}},panelActived:{type:Boolean,default:!1},isViewMode:{type:Boolean,default:!1},isShowBtn:{type:Boolean,default:!1},pageType:{type:String,default:""},identityId:{type:String,default:""},assignInfo:{type:Object,default:()=>{}}},data(){return{activeTab:"",tabName:"first",revenueRules:Object(f["c"])(this),submitLoading:!1,initLoading:!1,revenueSettlement:this.revenueFormData,isEditModel:!this.isViewMode,type:this.pageType,operationMode:"",profileList:[],distributionModelList:[],settlementTemplateList:[],settlementCycleUnitList:[],settlementConfigTemplate:[],settlementList:[],queryProfileInfo:{},remark:"",startDatePicker:{disabledDate:e=>{const t=this.revenueFormData.endDate;if(t)return e.getTime()>new Date(t).getTime()-864e5}},endDatePicker:{disabledDate:e=>{const t=this.revenueFormData.startDate;return t?e.getTime()<Date.now()||e.getTime()<new Date(t).getTime():e.getTime()<Date.now()}}}},watch:{panelActived:{handler(e){e&&this.initPanel()},immediate:!0},revenueSettlement:{handler(e){e&&this.$emit("update:revenueFormData",Object(F["b"])(e))},deep:!0},"revenueFormData.settlementProfileList":{handler(e){e&&e.length>0&&(this.activeTab=e[0]["fundingSourceCode"]+e[0]["settlementAccountTypeId"]+e[0]["currency"])},immediate:!0},isViewMode:{handler(e){this.isEditModel=!e},immediate:!0},pageType(e){this.type=e}},methods:{async initPanel(){this.initLoading=!0,this.revenueSettlement.isShowModel&&this.setEditModel(!1);const e=await this.getAllInitData();if(!e)return;if(!e.profileMap)return;const t=Object.entries(e.profileMap);this.profileList=t.map(([e,t])=>({label:t,value:e})),this.settlementCycleUnitList=e.settlementCycleUnitList&&e.settlementCycleUnitList.map(Object(F["f"])("key","value")),"detail"===this.type&&this.firstQueryOrgProfile(this.identityId),this.initLoading=!1},async getAllInitData(){try{const e=await Object(F["e"])({profileMap:Object(F["a"])(g["d"],"revenueTemplateNameMap",{}),settlementCycleUnitList:Object(F["a"])(g["a"],"dictList",{type:"SettlementPeriod"})});return e}catch(e){return null}},async firstQueryOrgProfile(e){this.initLoading=!0,this.setEditModel(!1);const t=await this.getOrgProfile({orgId:e});this.initLoading=!1,t?(this.revenueFormData.isShowModel=!0,this.operationMode="2",this.setProfileConfig(t)):(this.revenueSettlement.isShowModel=!1,this.profileList=[],this.operationMode="1",this.revenueSettlement.profileId="",this.initLoading=!1)},async getOrgProfile({orgId:e,profileId:t}){let a={};e?a.orgId=e:a.profileId=t;const i=await Object(F["a"])(g["c"],"profile",a);return i},getProfileClick(){Object(F["a"])(g["d"],"revenueTemplateNameMap",{}).then(e=>{if(!e)return;const t=Object.entries(e);this.profileList=t.map(([e,t])=>({label:t,value:e}))})},async getProfileChange(e){if("detail"===this.type){const t="Changing the revenue settlement profile of the organization will delete data of the original revenue settlement profile. Are you sure to continue?";this.$confirm(t,"Confirm",{confirmButtonText:"Confirm",cancelButtonText:"Cancel",closeOnClickModal:!1,type:"warning"}).then(async()=>{this.resetFields(),this.initLoading=!0,this.queryProfileData(e)})}else this.queryProfileData(e)},async queryProfileData(e){if(!e)return"detail"===this.type?(this.revenueFormData.isShowModel=!1,this.initLoading=!1,this.operationMode="3",this.profileList=[],void(this.revenueSettlement={template:!1,orgId:this.identityId})):void(this.revenueFormData.isShowModel=!1);this.revenueFormData.isShowModel=!0;const t=await this.getOrgProfile({profileId:e});this.initLoading=!1,t&&this.setProfileConfig(t)},setProfileConfig(e){const t=e.settlementProfileList.find(e=>e.settlementMinBalance)||{};this.revenueSettlement={...this.revenueFormData,...e,template:!1,settlementMinBalance:t.settlementMinBalance,orgId:this.identityId}},getLableToOptions(e,t){if(!e)return"-";if(!t||!t.length)return"";if("Please Select"===e)return"";const a=t.find(t=>t.value===e)||{};return a.label||"-"},PeriodicHandleChange(e){this.revenueFormData.periodicSwitch=e},startDateChange(e){this.revenueFormData.startDate=e},endDateChange(e){this.revenueFormData.endDate=e},handleTabClick(){},cancel(){this.$confirm("Are you sure to cancel the operation?","Cancel",{confirmButtonText:"Confirm",cancelButtonText:"Cancel",closeOnClickModal:!1,type:"warning"}).then(()=>{this.firstQueryOrgProfile(this.identityId)})},onTimeUnitChange(){this.revenueFormData.intervalValue&&this.$refs["revenueForm"].validateField("intervalValue")},setStatus(){this.revenueFormData.isShowModel||"1"!==this.operationMode||(this.operationMode="3",this.revenueSettlement={template:!1,orgId:this.identityId})},excuteRevenueData(e){e.settlementProfileList.forEach(e=>{e.settlementMinBalance=Object(f["a"])(e.settlementMinBalance),e.grossLiabilityList.forEach(e=>{e.targetBalance=Object(f["a"])(e.targetBalance),e.triggerBalance=Object(f["a"])(e.triggerBalance)}),e.grossRevenueList.forEach(e=>{e.targetBalance=Object(f["a"])(e.targetBalance),e.triggerBalance=Object(f["a"])(e.triggerBalance)}),e.liabilityList.forEach(e=>{e.targetBalance=Object(f["a"])(e.targetBalance),e.triggerBalance=Object(f["a"])(e.triggerBalance)}),e.revenueList.forEach(e=>{e.targetBalance=Object(f["a"])(e.targetBalance),e.triggerBalance=Object(f["a"])(e.triggerBalance)})})},submitEvn(){this.setStatus(),"3"!==this.operationMode?this.$refs["revenueForm"].validateField(["targetBalance","triggerBalance"],e=>{if(e)return!1;this.submitEvnData()}):this.submitEvnData()},submitEvnData(){this.$refs["revenueForm"].validate(e=>{if(!e)return;let t={};"3"!==this.operationMode?(t=JSON.parse(JSON.stringify(this.revenueFormData)),this.excuteRevenueData(t)):t={template:!1,orgId:this.identityId},this.submitLoading=!0,this.$confirm("Are you sure to submit it?","Tips",{confirmButtonText:"Confirm",cancelButtonText:"Cancel",closeOnClickModal:!1}).then(()=>{let e={operationMode:this.operationMode,profile:t};Object(g["e"])(e).then(e=>{e.header&&e.header.success&&(this.$modal.msgSuccess("orgRevenueSettlementProfile submitted successfully."),this.setEditModel(!1),this.firstQueryOrgProfile(this.identityId))}).finally(()=>{this.submitLoading=!1})})})},setEditModel(e){this.isEditModel=e,this.profileList=[],this.revenueSettlement.profileId?(this.revenueFormData.profileId="",this.revenueFormData.isShowModel=!0):this.revenueFormData.isShowModel=!1},resetFields(){this.$refs.revenueForm.resetFields()},inputMoney(e){let t=null;t="0"===e.target.value?Number(e.target.value):Number(e.target.value)||null,e.target.value=Object(f["d"])(t)},unInputMoney(e){e.target.value?this.revenueFormData.settlementMinBalance=Object(f["a"])(e.target.value):this.revenueFormData.settlementMinBalance=null},showBalanceWithUnit(e){return"USD"===e?"($)":`(${e})`},getDateFormat(e){return k()(e,"YYYY-MM-DD").format("DD/MM/YYYY")}},activated(){this.initPanel()}},_=T,B=(a("adbd"),a("ead9"),Object(c["a"])(_,r,o,!1,null,"33f68428",null));t["a"]=B.exports},"631b":function(e,t,a){"use strict";a("423d")},"68f5":function(e,t,a){"use strict";a("5c44")},7335:function(e,t,a){e.exports={activeMenuColor:"#366bfc",primaryColor:"#366bfc",menuColor:"#5c5c5c",fillEmphasisColor:"#5c5c5c",fillLightColor:"#fafafa",fillStrongColor:"#c7c7c7",fillRegularColor:"#f0f0f0",fillColorDark:"#e0e0e0",lineStrongColor:"#8f8f8f",textEmphasisColor:"#282828",backgroundColor:"#fff",statusErrorColor:"#ff4040",statusSuccessColor:"#27bf88",statusColorwarning:"#ff7420",statusColorSAecondaryWarning:"#faaf0c",statusNoticeColor:"#338bff",statusDark:"#c7c7c7",initialColor:"#E0E0E0",statusNoticeBackgroundColor:"#F0F9FF",statusErrorBackgroundColor:"#FFF2F0",statusSuccessBackgroundColor:"#F0FFF7",statusSecondaryWarningBackgroundColor:"#FFFBE6",statusWarningBackgroundColor:"#FFF6E6",statusDarkBackgroundColor:"#FAFAFA",lineColorBlue:"#ADD9FF",lineColorError:"#FFC1BA",lineColorGreen:"#A5E6C6",lineColorWarning:"#FFF7ed"}},7892:function(e,t,a){},"89b2":function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"d",(function(){return r})),a.d(t,"c",(function(){return d})),a.d(t,"b",(function(){return g}));var i=a("02e3");let n=e=>e?(e=e.toString(),e=e.replace(/,/gi,""),e.indexOf(".00")>0&&(e=parseInt(e)),e):e,r=(e,t)=>{t=t||2;let a=",";if(null===e)return null;if("number"!==typeof e)throw new TypeError("The num parameter should be of the number type.");if(t<0)throw new Error("Parameter n should not be less than 0.");let i=parseInt(e)!==e,n=void 0!==t&&null!=t?t:1;return e=0===n?e.toFixed(n)+".":i?t?e.toFixed(t):e:e.toFixed(n),a=a||",",e=e.toString().replace(/(\d)(?=(\d{3})+\.)/g,(function(e,t){return t+a})),0!==t&&(i||t)||(e=e.substring(0,e.indexOf("."))),e},o=e=>({trigger:["blur","change"],required:!0,validator:(t,a,i)=>{let n=e.revenueFormData.intervalValue,r=e.revenueFormData.intervalTypeCode;return n&&r?n&&r&&(n>=1e4||n<=0)?i(new Error("Please enter a number between 1 and 9999.")):i():i(new Error("Please enter content"))}}),l=e=>({required:!0,validator:(t,a,i)=>{let n=e.revenueFormData.startDate;n||i(new Error("Please select content.")),i()},trigger:"change"}),s=e=>({required:!0,validator:(t,a,i)=>{e.subAgentExpansionModel||i(new Error("Please select content.")),i()},trigger:"change"}),c=e=>({required:!0,validator:(t,a,i)=>{e.subSettlementConfigTemplate||i(new Error("Please select content.")),i()},trigger:"change"}),u=()=>({trigger:"blur",validator:(e,t,a)=>{const i=t;t=n(i),t<-1e9?a(new Error("Please enter an amount greater than -1,000,000,000.")):t>1e9?a(new Error("Please enter an amount less than 1,000,000,000.")):a()}}),d=e=>({intervalValue:[o(e)],startDate:[l(e)],settlementMinBalance:[i["e"],u()],targetBalance:[i["e"],u()],triggerBalance:[i["e"],u()]}),g=e=>({subAgentExpansionModel:[s(e)],subSettlementConfigTemplate:[c(e)]})},9488:function(e,t,a){"use strict";a("0e19")},9563:function(e,t,a){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"org-account-contianer"},[t("portal-header",{attrs:{projectObj:e.titleConfig,showBottomLine:!0}}),t("portal-form",{ref:"searchForm",attrs:{"form-data":e.searchFormData,"form-config-list":e.formConfigList,searchBtnLoading:e.searchLoading},on:{"common-enter-event":e.search,"reset-btn-click":e.reset,"search-btn-click":e.search}}),t("div",{staticClass:"table-list-container"},[t("div",{staticStyle:{"padding-bottom":"16px"}},[t("el-dropdown",{on:{command:e.exportFile}},[t("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{type:"primary",size:"small",disabled:e.disAbledExportBtn||!e.hasPerm("IC_ORG_ACCOUNTINFO_EXPORT_BTN")}},[e._v(" "+e._s(e.$t("common.button.export"))+" "),t("i",{staticClass:"el-icon-arrow-down el-icon--right",staticStyle:{"font-size":"12px"}})]),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",{attrs:{command:"XLS"}},[e._v("Excel")]),t("el-dropdown-item",{attrs:{command:"XLSX"}},[e._v("Excel 2007")]),t("el-dropdown-item",{attrs:{command:"CSV"}},[e._v("CSV")]),t("el-dropdown-item",{attrs:{command:"PDF"}},[e._v("PDF")])],1)],1)],1),t("table-page",{staticClass:"table-page",attrs:{size:"small","has-pagination":!0,columns:e.columns,initializingLoading:!1,pagination:e.paginationConfig,getTableData:e.getTableData,"is-search":e.isSearch},scopedSlots:e._u([{key:"status",fn:function(a){return[t("div",{staticClass:"flex flex-align"},[t("span",{staticClass:"status-circle",style:e.statusStyle(a.data.row)}),t("span",[e._v(e._s(a.data.row.status))]),t("el-link",{attrs:{underline:!1,disabled:!e.hasPerm("IC_CHANGEORGACCTSTATUS_BTN"),icon:"el-icon-edit"},on:{click:function(t){return e.showEditStatusDialog(a.data.row)}}})],1)]}},{key:"ruleProfile",fn:function(a){return[t("div",{staticClass:"edit-cell"},[t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",disabled:!a.data.row.ruleProfileName,content:a.data.row.ruleProfileName,placement:"top"}},[t("div",{staticClass:"cell el-tooltip"},[e._v(e._s(a.data.row.ruleProfileName||"-"))])]),t("el-link",{staticClass:"edit-text el-icon-edit",attrs:{underline:!1,disabled:!e.hasPerm("IC_CHANGEORGACCTRULEPROFILE_BTN")},on:{click:function(t){return e.showruleProfileDialog(a.data.row)}}})],1)]}}])})],1),t("el-dialog",{staticClass:"edit-status-dialog",attrs:{title:this.$t("IDC.orgAccount.editStatusDialogTitle"),width:"448px",visible:e.editStatusDialogVisible,"close-on-click-modal":!1,"before-close":e.handleEditCancelClick},on:{"update:visible":function(t){e.editStatusDialogVisible=t},closed:e.handleEditCancelClick}},[t("portal-form",{ref:"editStatusForm",staticClass:"edit-status-form",attrs:{needOperateBtn:!1,bigAutoColumn:1,smallAutoColumn:1,formRules:e.searchFormRules,"form-data":e.editStatusFormData,needBottomLine:!1,"form-config-list":e.editFormConfigList}},[t("template",{slot:"currentStatus"},[t("el-form-item",{attrs:{label:e.editFormConfigList[0].label}},[t("span",[e._v(e._s(e.currentStatus||"-"))])])],1)],2),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("button",{staticClass:"cancel-button",attrs:{size:"small"},on:{click:function(t){return t.preventDefault(),e.handleEditStatusCancelClick.apply(null,arguments)}}},[e._v(" "+e._s(this.$t("common.button.cancel"))+" ")]),t("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{type:"primary",size:"small",loading:e.editStatusSubmitLoading},on:{click:e.handleEditStatusConfirmClick}},[e._v(" "+e._s(this.$t("common.button.submit"))+" ")])],1)],1),t("el-dialog",{staticClass:"edit-status-dialog",attrs:{title:this.$t("IDC.orgAccount.editRuleProfileDialogTitle"),width:"448px",visible:e.editRuleProfileDialogVisible,"close-on-click-modal":!1,"before-close":e.handleRuleCancelClick},on:{"update:visible":function(t){e.editRuleProfileDialogVisible=t},closed:e.handleRuleCancelClick}},[t("portal-form",{ref:"ruleProfileForm",staticClass:"edit-status-form",attrs:{needOperateBtn:!1,needBottomLine:!1,bigAutoColumn:1,smallAutoColumn:1,formRules:e.ruleProfileFormRules,"form-data":e.ruleProfileFormData,"form-config-list":e.ruleProfileFormConfigList}},[t("template",{slot:"currentRuleProfile"},[t("el-form-item",{attrs:{label:e.ruleProfileFormConfigList[0].label}},[t("span",[e._v(e._s(e.currentRuleProfile||"-"))])])],1)],2),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("button",{staticClass:"cancel-button",attrs:{size:"small"},on:{click:function(t){return t.preventDefault(),e.handleRuleProfileCancelClick.apply(null,arguments)}}},[e._v(" "+e._s(this.$t("common.button.cancel"))+" ")]),t("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{type:"primary",size:"small",loading:e.ruleProfileSubmitLoading},on:{click:e.handleRuleProfileConfirmClick}},[e._v(" "+e._s(this.$t("common.button.submit"))+" ")])],1)],1)],1)},n=[],r=a("c811"),o=a("4c09"),l=a("3186"),s=a("1caf"),c=a("0bbd");function u(){return Object(c["a"])({url:"/fintech/v1/Account/getAccountTypeInfo",method:"get"})}function d(e){return Object(c["a"])({url:"/fintech/v1/Account/queryAccount",method:"post",data:e})}function g(e){return Object(c["a"])({url:"/fintech/v1/Account/modifyAccount",method:"post",data:e})}function h(e){return Object(c["a"])({url:"/fintech/v1/Account/getRuleProfile",method:"post",data:e})}function m(e){return Object(c["a"])({url:"/fintech/v1/Account/exportAccountInfo",method:"post",data:e,responseType:"blob"})}var f={name:"OrgAccount",components:{PortalHeader:r["a"],TablePage:o["a"],PortalForm:l["a"]},props:{identityId:{type:String,require:!0},isTopOrganization:{type:Boolean,require:!0}},data(){return{titleConfig:{title:"",desc:this.$t("IDC.orgAccount.pageDesc")},searchFormData:{accountNumber:"",accountName:"",accountType:"",status:""},tempOptAccountNo:"",accountTypeInfo:[],searchFormRules:{newStatus:[{required:!0,message:"Please select at least one.",trigger:"change"}],remark:[{required:!0,message:"This field is mandatory.",trigger:"change"}]},ruleProfileFormData:{currentRuleProfile:"",ruleProfile:"",remark:""},ruleProfile:[],ruleProfileFormRules:{ruleProfile:[{required:!0,message:"Please select at least one.",trigger:"change"}],remark:[{required:!0,message:"This field is mandatory.",trigger:"change"}]},searchLoading:!1,paginationConfig:{total:0,pageIndex:1,pageSize:10},isSearch:!1,editStatusDialogVisible:!1,editRuleProfileDialogVisible:!1,editStatusFormData:{currentStatus:"",newStatus:"",remark:""},currentStatus:"",currentRuleProfile:"",dialogNewStatus:[],editStatusSubmitLoading:!1,ruleProfileSubmitLoading:!1,statusList:[{label:"All",value:""},{label:"Active",value:"Active"},{label:"Closed",value:"Closed"},{label:"Frozen",value:"Frozen"},{label:"Suspended",value:"Suspended"}],disAbledExportBtn:!0}},computed:{formConfigList(){return[{label:this.$t("IDC.orgAccount.accountNumber"),key:"accountNumber",prop:"accountNumber",comp:"el-input",bind:{clearable:!0,placeholder:this.$t("common.placeholder.enter")}},{label:this.$t("IDC.orgAccount.accountName"),key:"accountName",prop:"accountName",comp:"el-input",bind:{clearable:!0,placeholder:this.$t("common.placeholder.enter")}},{label:this.$t("IDC.orgAccount.accountType"),key:"accountType",prop:"accountType",comp:"el-select",options:this.accountTypeInfo,bind:{placeholder:this.$t("common.placeholder.select")}},{label:this.$t("IDC.orgAccount.status"),key:"status",prop:"status",comp:"el-select",options:this.statusList,bind:{placeholder:this.$t("common.placeholder.select")}}]},editFormConfigList(){return[{label:this.$t("IDC.orgAccount.currentStatus"),key:"currentStatus",prop:"currentStatus",slotName:"currentStatus"},{label:this.$t("IDC.orgAccount.newStatus"),key:"newStatus",prop:"newStatus",comp:"el-select",options:this.dialogNewStatus,bind:{placeholder:this.$t("common.placeholder.select")}},{formItemClass:"dialog-remark",label:this.$t("IDC.orgAccount.remark"),key:"remark",prop:"remark",comp:"el-input",bind:{type:"textarea",clearable:!0,placeholder:this.$t("common.placeholder.enter")}}]},ruleProfileFormConfigList(){return[{label:this.$t("IDC.orgAccount.currentRuleProfile"),key:"currentRuleProfile",prop:"currentRuleProfile",slotName:"currentRuleProfile"},{label:this.$t("IDC.orgAccount.ruleProfile"),key:"ruleProfile",prop:"ruleProfile",comp:"el-select",options:this.ruleProfile,bind:{placeholder:this.$t("common.placeholder.select")}},{formItemClass:"dialog-remark",label:this.$t("IDC.orgAccount.remark"),key:"remark",prop:"remark",comp:"el-input",bind:{type:"textarea",clearable:!0,placeholder:this.$t("common.placeholder.enter")}}]},columns(){return[{label:this.$t("IDC.orgAccount.accountNo"),prop:"accountNo",align:"left","min-width":"150"},{label:this.$t("IDC.orgAccount.accountName"),prop:"accountName",align:"left","min-width":"150"},{label:this.$t("IDC.orgAccount.accountType"),prop:"accountTypeName",align:"left","min-width":"150"},{label:this.$t("IDC.orgAccount.status"),prop:"status",align:"left","min-width":"170",__slotName:"status"},{label:this.$t("IDC.orgAccount.currency"),prop:"currency",align:"left","min-width":"120"},{label:this.$t("IDC.orgAccount.alias"),prop:"accountAlias",align:"left","min-width":"150"},{label:this.$t("IDC.orgAccount.accountRelationship"),prop:"relationship",align:"left","min-width":"150"},{label:this.$t("IDC.orgAccount.ruleProfile"),prop:"ruleProfileName",align:"left","min-width":"120",showOverflowTooltip:!1,__slotName:"ruleProfile"},{label:this.$t("IDC.orgAccount.currentBalance"),prop:"balance",align:"right","min-width":"150"},{label:this.$t("IDC.orgAccount.availableBalance"),prop:"availableBalance",align:"right","min-width":"150"},{label:this.$t("IDC.orgAccount.reservedBalance"),prop:"reservedBalance",align:"right","min-width":"150"},{label:this.$t("IDC.orgAccount.unclearBalance"),prop:"unclearBalance",align:"right","min-width":"150"}]}},created(){this.getAccountTypeList()},watch:{identityId(){this.identityId&&(this.isSearch=!0)}},methods:{statusStyle(e){switch(e.status){case"Active":return{"background-color":""+this.GlobalStyleVariables.statusNoticeColor};case"Suspended":return{"background-color":""+this.GlobalStyleVariables.statusColorSAecondaryWarning};case"Frozen":return{"background-color":""+this.GlobalStyleVariables.statusColorSAecondaryWarning};case"Closed":return{"background-color":""+this.GlobalStyleVariables.fillStrongColor};default:break}},search(){this.searchLoading=!0,this.isSearch=!0},reset(){this.$refs.searchForm.resetFields(),this.isSearch=!0},async getTableData(){let e={dataScope:["ALL"],accountNo:this.searchFormData.accountNumber,accountName:this.searchFormData.accountName,accountTypeId:this.searchFormData.accountType,status:this.searchFormData.status,identityId:this.identityId},t=await d(e);if(this.isSearch=!1,this.searchLoading=!1,t.header&&t.header.success)return t.list.length>0?this.disAbledExportBtn=!1:this.disAbledExportBtn=!0,t},async getAccountTypeList(){let e=await u();e.header&&e.header.success&&(this.accountTypeInfo=e.list.map(e=>({label:e.accountTypeName,value:e.accountTypeId})))},exportFile(e){let t={identityId:this.identityId,accountNo:this.searchFormData.accountNumber,dataScope:["All"],accountName:this.searchFormData.accountName,accountTypeId:this.searchFormData.accountType,status:this.searchFormData.status,fileType:e},a="account_"+Date.parse(new Date);Object(s["a"])(m,t,{fileType:e,fileName:a})},handleEditCancelClick(){this.editStatusDialogVisible=!1},handleRuleCancelClick(){this.editRuleProfileDialogVisible=!1},showEditStatusDialog(e){this.tempOptAccountNo=e.accountNo,this.currentStatus=e.status,"Active"===e.status?this.dialogNewStatus=[{label:"Frozen",value:"Frozen"},{label:"Suspended",value:"Suspended"}]:"Frozen"===e.status?this.dialogNewStatus=[{label:"Active",value:"Active"},{label:"Suspended",value:"Suspended"}]:"Suspended"===e.status&&(this.dialogNewStatus=[{label:"Active",value:"Active"},{label:"Frozen",value:"Frozen"}]),this.editStatusDialogVisible=!0},async showruleProfileDialog(e){this.editRuleProfileDialogVisible=!0,this.currentRuleProfile=e.ruleProfileName;let t=await this.getRuleProfileList(e.accountTypeId);this.ruleProfile=t.filter(t=>t.label!==e.ruleProfileName),this.tempOptAccountNo=e.accountNo},async getRuleProfileList(e){let t=this.isTopOrganization?"5001":"5002",a={identityType:"5000",identitySubType:t,accountTypeId:e},i=await h(a);if(i.header&&i.header.success)return i.list.map(e=>({label:e.ruleProfileName,value:e.id}))},handleEditStatusCancelClick(){this.$refs.editStatusForm.clearValidate(),this.$refs.editStatusForm.resetFields(),this.editStatusDialogVisible=!1},handleRuleProfileCancelClick(){this.$refs.ruleProfileForm.clearValidate(),this.$refs.ruleProfileForm.resetFields(),this.editRuleProfileDialogVisible=!1},handleEditStatusConfirmClick(){this.$refs.editStatusForm.validate(e=>{if(e){this.editStatusSubmitLoading=!0;let e={modifyOpTypes:["MODIFY_STATUS"],account:{accountNo:this.tempOptAccountNo,status:this.editStatusFormData.newStatus,identityId:this.identityId},header:{remark:this.editStatusFormData.remark}};g(e).then(e=>{this.editStatusSubmitLoading=!1,e.header&&e.header.success?(this.$refs.editStatusForm.resetFields(),this.$modal.msgSuccess("Operation success."),this.isSearch=!0,this.editStatusDialogVisible=!1):this.$modal.msgError("Operation fail.")})}})},handleRuleProfileConfirmClick(){this.$refs.ruleProfileForm.validate(e=>{if(e){this.ruleProfileSubmitLoading=!0;let e={modifyOpTypes:["MODIFY_RULE_PROFILE"],account:{accountNo:this.tempOptAccountNo,ruleProfileId:this.ruleProfileFormData.ruleProfile,identityId:this.identityId},header:{remark:this.ruleProfileFormData.remark}};g(e).then(e=>{this.ruleProfileSubmitLoading=!1,e.header&&e.header.success?(this.$refs.ruleProfileForm.resetFields(),this.$modal.msgSuccess("Operation success."),this.editRuleProfileDialogVisible=!1,this.isSearch=!0):this.$modal.msgError("Operation fail.")})}})}}},p=f,b=(a("15f0"),a("2877")),v=Object(b["a"])(p,i,n,!1,null,"08db7ef8",null);t["a"]=v.exports},"9aca":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"container"},[t("organization-basic-info",{attrs:{header:e.header,"basic-info":e.basicInfo}}),t("section",{staticClass:"tabs-container"},[t("el-tabs",{model:{value:e.tabName,callback:function(t){e.tabName=t},expression:"tabName"}},[t("el-tab-pane",{attrs:{label:e.$t("IDC.groupDetail.label.AccountInfo"),name:"first",lazy:!0}},[t("org-account",{attrs:{"identity-id":e.basicInfo.organizationId,"is-top-organization":e.basicInfo.isTopOrganization}})],1),t("el-tab-pane",{attrs:{label:e.$t("IDC.organization.product"),name:"second",lazy:!0}},[t("product-info",{attrs:{"identity-id":e.basicInfo.organizationId}})],1),t("el-tab-pane",{attrs:{label:e.$t("IDC.groupDetail.label.KYCInfo"),name:"third",lazy:!0}},[t("div",{staticClass:"org-kyc-info"},[t("div",{staticClass:"tips"},[e._v("KYC information of an organization. The field marked with * is mandatory.")]),t("kyc-form",{ref:"kycForm",attrs:{mode:"edit",identityId:e.identityId,identityClassify:"org"}})],1)]),t("el-tab-pane",{attrs:{label:e.$t("IDC.revenueSettlementInfo.revenueSettlementConfig"),name:"fourth",lazy:!0}},[t("revenue-settlement-info",{ref:"revenueForm",attrs:{panelActived:"fourth"===e.tabName,revenueFormData:e.revenueFormData,identityId:e.basicInfo.organizationId,pageType:e.pageType,isShowBtn:e.isShowBtn},on:{"update:revenueFormData":function(t){e.revenueFormData=t},"update:revenue-form-data":function(t){e.revenueFormData=t}}})],1)],1)],1)],1)},n=[],r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"container"},[t("section",[t("div",{staticClass:"content-container"},[t("section",{staticClass:"header p-l-r-20"},[t("div",{staticClass:"icon-organization"},[t("svg-icon",{staticClass:"org-icon",attrs:{"icon-class":"organization"}})],1),t("div",{staticClass:"content-container flex flex-col flex-jus-between"},[t("div",{staticClass:"content-title"},[e._v(e._s(e.header.title))]),t("div",{staticClass:"content-sub-title"},[e._v(" "+e._s(e.$t("IDC.organizationDetail.identityStatus"))+" "),t("span",{staticClass:"identity-status"},[e._v(e._s(e.getIdentityStatusName(e.basicInfo.status)||"-"))]),e.isAllowedEdit&&!e.isClosed?t("el-link",{attrs:{underline:!1,icon:"el-icon-edit"},on:{click:e.editIdentityStatus}}):e._e()],1)])]),t("section",{staticClass:"p-l-r-20"},[t("el-row",{attrs:{gutter:20}},[t("el-col",e._b({},"el-col",e.colOptions,!1),[t("el-row",[t("div",{staticClass:"content content-item-label"},[e._v(e._s(e.$t("IDC.organization.parentShortCode")))])]),t("el-row",[t("div",{staticClass:"content content-item"},[e._v(e._s(e.basicInfo.parentShortCode||"-"))])])],1),t("el-col",e._b({},"el-col",e.colOptions,!1),[t("el-row",[t("div",{staticClass:"content content-item-label"},[e._v(e._s(e.$t("IDC.organization.identityModel")))])]),t("el-row",[t("div",{staticClass:"content content-item"},[e._v(e._s(e.getSubAgentModelName(e.basicInfo.identityModel)||"-"))])])],1),t("el-col",e._b({},"el-col",e.colOptions,!1),[t("el-row",[t("div",{staticClass:"content content-item-label"},[e._v(e._s(e.$t("IDC.organization.hierarchyLevel")))])]),t("el-row",[t("div",{staticClass:"content content-item"},[e._v(e._s(e.basicInfo.hierLevel||"-"))])])],1),t("el-col",e._b({},"el-col",e.colOptions,!1),[t("el-row",[t("div",{staticClass:"content content-item-label"},[e._v(e._s(e.$t("IDC.organization.topOrganization")))])]),t("el-row",[t("div",{staticClass:"content content-item"},[e._v(e._s(e.basicInfo.topOrganizationShortCode||"-"))])])],1),t("el-col",e._b({},"el-col",e.colOptions,!1),[t("el-row",[t("div",{staticClass:"content content-item-label"},[e._v(e._s(e.$t("IDC.organization.topOrganizationName")))])]),t("el-row",[t("div",{staticClass:"content content-item"},[e._v(e._s(e.basicInfo.topOrganizationName||"-"))])])],1),t("el-col",e._b({},"el-col",e.colOptions,!1),[t("el-row",[t("div",{staticClass:"content content-item-label"},[e._v(" "+e._s(e.$t("IDC.organizationDetail.organizationName"))+" ")])]),t("el-row",[t("div",{staticClass:"content content-item"},[e._v(" "+e._s(e.basicInfo.organizationName||"-")+" "),e.isClosed||e.isDormant||e.isNew?e._e():t("el-link",{attrs:{underline:!1,icon:"el-icon-edit"},on:{click:e.editOrganizationName}})],1)])],1),t("el-col",e._b({},"el-col",e.colOptions,!1),[t("el-row",[t("div",{staticClass:"content content-item-label"},[e._v(" "+e._s(e.$t("IDC.organizationDetail.shortCode"))+" ")])]),t("el-row",[t("div",{staticClass:"content content-item"},[e._v(e._s(e.basicInfo.shortCode||"-"))])])],1),t("el-col",e._b({},"el-col",e.colOptions,!1),[t("el-row",[t("div",{staticClass:"content content-item-label"},[e._v(e._s(e.$t("IDC.organizationDetail.organizationCode")))])]),t("el-row",[t("div",{staticClass:"content content-item"},[e._v(" "+e._s(e.basicInfo.organizationCode||"-")+" ")])])],1),t("el-col",e._b({},"el-col",e.colOptions,!1),[t("el-row",[t("div",{staticClass:"content content-item-label"},[e._v(" "+e._s(e.$t("IDC.organizationDetail.segment"))+" ")])]),t("el-row",[t("div",{staticClass:"content content-item"},[e._v(e._s(e.basicInfo.segment||"-"))])])],1),t("el-col",e._b({},"el-col",e.colOptions,!1),[t("el-row",[t("div",{staticClass:"content content-item-label"},[e._v(" "+e._s(e.$t("IDC.organizationDetail.chargeProfile"))+" ")])]),t("el-row",[t("div",{staticClass:"content content-item"},[t("span",{class:{"content-item--has-underline":e.basicInfo.chargeProfileName},on:{click:function(t){return e.goToDetailPage(e.PROFILE_TYPES.CHARGE)}}},[e._v(e._s(e.basicInfo.chargeProfileName||"-"))]),e.isClosed?e._e():t("el-link",{attrs:{underline:!1,icon:"el-icon-edit"},on:{click:e.editChargeProfile}})],1)])],1),t("el-col",e._b({},"el-col",e.colOptions,!1),[t("el-row",[t("div",{staticClass:"content content-item-label"},[e._v(" "+e._s(e.$t("IDC.organizationDetail.ruleProfile"))+" ")])]),t("el-row",[t("div",{staticClass:"content content-item"},[t("span",{class:{"content-item--has-underline":e.basicInfo.ruleProfileName},on:{click:function(t){return e.goToDetailPage(e.PROFILE_TYPES.RULE)}}},[e._v(e._s(e.basicInfo.ruleProfileName||"-"))]),e._e()],1)])],1),t("el-col",e._b({},"el-col",e.colOptions,!1),[t("el-row",[t("div",{staticClass:"content content-item-label"},[e._v(e._s(e.$t("IDC.organizationDetail.trustLevel")))])]),t("el-row",[t("div",{staticClass:"content content-item"},[e._v(" "+e._s(e.basicInfo.trustLevelName||"-")+" ")])])],1),t("el-col",e._b({},"el-col",e.colOptions,!1),[t("el-row",[t("div",{staticClass:"content content-item-label"},[e._v(" "+e._s(e.$t("IDC.organizationDetail.registrationDate"))+" ")])]),t("el-row",[t("div",{staticClass:"content content-item"},[e._v(e._s(e._f("localTimeFormat")(e.basicInfo.createTime,"DD/MM/YYYY")))])])],1),t("el-col",e._b({},"el-col",e.colOptions,!1),[t("el-row",[t("div",{staticClass:"content content-item-label"},[e._v(" "+e._s(e.$t("IDC.organizationDetail.infrequencyUser"))+" ")])]),t("el-row",[t("div",{staticClass:"content content-item"},[e._v(e._s(e.basicInfo.infrequencyUser||"-"))])])],1),t("el-col",e._b({},"el-col",e.colOptions,!1),[t("el-row",[t("div",{staticClass:"content content-item-label"},[e._v(" "+e._s(e.$t("IDC.organizationDetail.registrationChannel"))+" ")])]),t("el-row",[t("div",{staticClass:"content content-item"},[e._v(e._s(e.basicInfo.registrationChannel||"-"))])])],1),t("el-col",e._b({},"el-col",e.colOptions,!1),[t("el-row",[t("div",{staticClass:"content content-item-label"},[e._v(" "+e._s(e.$t("IDC.organization.commissionAgreement"))+" ")])]),t("el-row",[t("div",{staticClass:"content content-item"},[t("span",[e._v(e._s(e.basicInfo.distributionModelName||"-"))]),!e.isClosed&&e.hasEditPermission&&e.isAggregator?t("el-link",{attrs:{underline:!1,icon:"el-icon-edit"},on:{click:e.editCommiAgreement}}):e._e()],1)])],1),t("el-col",{attrs:{span:10}},[t("el-row",[t("div",{staticClass:"content content-item-label"},[e._v(e._s(e.$t("IDC.organization.commissionTemplate")))])]),t("el-row",[t("div",{staticClass:"content content-item"},[e._v(" "+e._s(e.basicInfo.settleConfigTemplateName||"-")+" "),e.isClosed||!e.hasEditPermission||e.basicInfo.isTopOrganization?e._e():t("el-link",{attrs:{underline:!1,icon:"el-icon-edit"},on:{click:e.editSettlementTemplate}})],1)])],1)],1)],1)])]),t("content-item-edit-dialog",{attrs:{visible:e.showDialog,config:e.dialogConfig,submitLoading:e.submitLoading,"validation-rules":e.organizationRules,"close-on-click-modal":!1},on:{"update:visible":function(t){e.showDialog=t},"on-submit":e.onDialogSubmit}})],1)},o=[],l=a("dbea"),s=a("ac21"),c=a("cb9d"),u=a("e036"),d=a("7c5e"),g=a("689d");const h={CHARGE:"chargeProfile",RULE:"ruleProfile"},m={AGREEMENT:"1",CONFIG:"2"};var f={name:"BasicInfo",components:{ContentItemEditDialog:l["a"]},inject:["orgDetailView"],props:{header:{type:Object,default:()=>{}},basicInfo:{type:Object,default:()=>{}}},data(){return{PROFILE_TYPES:h,showDialog:!1,submitLoading:!1,dialogConfig:{},organizationRules:{},status:[],ruleProfiles:[],chargeProfiles:[],commiAgreements:[],settleConfigTemplates:[]}},computed:{isClosed(){return this.basicInfo.status===d["b"].CLOSED},isDormant(){return this.basicInfo.status===d["b"].DORMANT},isNew(){return this.basicInfo.status===d["b"].NEW},isAllowedEdit(){const e=this.basicInfo.status;return Object(d["e"])(e)},hasEditPermission(){const e=this.basicInfo.loginedAccoutIsTopOrg,t=this.basicInfo.loginedAccoutOrgId===this.basicInfo.topOrganizationId;return e&&t},isAggregator(){const e=this.basicInfo.identityModel===d["a"].AGGREGATOR;return e},isCentralOwned(){const e=this.basicInfo.identityModel===d["a"].CENTRAL_OWNED;return e}},created(){this.init()},methods:{init(){this.organizationRules=Object(s["a"])()},async loadOrganizationStatus(e){const t=await Object(c["v"])({statusCode:e});let a=t.statusList;a&&a.length&&(this.status.length=0,a=a.filter(t=>t.code!==e),this.status.push(...a.map(e=>({value:e.code,label:e.name}))))},async loadRuleProfiles(){const e={trustlevel:this.basicInfo.trustLevel,identityType:this.basicInfo.identityType,identitySubtype:this.basicInfo.identitySubType};let t=await Object(g["a"])(c["K"],"dics",e);this.ruleProfiles.length=0,t&&t.length&&(t=t.map(Object(g["f"])("code","name",!0)),t.forEach(e=>this.ruleProfiles.push(e)))},async loadChargeProfiles(){const e={trustlevel:this.basicInfo.trustLevel,identityType:this.basicInfo.identityType,identitySubtype:this.basicInfo.identitySubType};let t=await Object(g["a"])(c["D"],"dics",e);t=t||[],this.chargeProfiles.length=0;const a={name:this.$t("common.placeholder.select"),code:null};t.unshift(a),t=t.map(Object(g["f"])("code","name",!0)),t.forEach(e=>this.chargeProfiles.push(e))},async loadCommiAgreement(){const e={templateType:m.AGREEMENT,pageSize:null,pageNo:null};let t=await Object(g["a"])(u["b"],"commissionConfigs",e);this.commiAgreements.length=0,t&&t.length&&(t=t.map(Object(g["f"])("templateId","name")),this.commiAgreements.push(...t))},async loadSettleConfigTemplates(){const e={templateType:m.CONFIG,pageSize:null,pageNo:null};let t=await Object(g["a"])(u["b"],"commissionConfigs",e);this.settleConfigTemplates.length=0,t&&t.length&&(t=t.map(Object(g["f"])("templateId","name")),this.settleConfigTemplates.push(...t))},editCommiAgreement(){this.dialogConfig={title:"Edit Commission Distribution Agreement",label:"Current Commission Distribution Agreement",value:this.basicInfo.distributionModelName,prop:"distributionTemplate",properties:[{key:"distributionTemplate",default:this.basicInfo.distributionModelId,label:"New Commission Distribution Agreement",type:"select",options:this.commiAgreements},{key:"remark",default:"",label:"Remark",type:"textarea"}]},this.loadCommiAgreement().then(()=>{this.showDialog=!0})},editSettlementTemplate(){this.dialogConfig={title:"Edit Commission Settlement Configuration Template",label:"Current Commission Settlement Configuration Template",value:this.basicInfo.settleConfigTemplateName,prop:"settleConfigTemplate",properties:[{key:"settleConfigTemplate",default:this.basicInfo.settleConfigTemplateId,label:"New Commission Settlement Configuration Template",type:"select",options:this.settleConfigTemplates},{key:"remark",default:"",label:"Remark",type:"textarea"}]},this.loadSettleConfigTemplates().then(()=>{this.showDialog=!0})},editIdentityStatus(){const e={title:this.$t("IDC.orgOperator.editStatus"),label:this.$t("IDC.orgOperator.currentStatus"),value:this.getIdentityStatusName(this.basicInfo.status),prop:"identityStatus",properties:[{key:"identityStatus",default:this.basicInfo.status,useDefult:!0,label:this.$t("IDC.orgOperator.newStatus"),type:"select",options:this.status},{key:"remark",default:"",label:this.$t("common.label.remark"),type:"textarea"}]};this.loadOrganizationStatus(this.basicInfo.status).then(()=>{if(this.status&&this.status.length){const t=this.status[0];e.properties[0].default=t.value}this.dialogConfig=e,this.showDialog=!0})},editRuleProfile(){this.dialogConfig={title:this.$t("IDC.groupDetail.label.EditRuleProfile"),label:this.$t("IDC.groupDetail.label.currentRuleProfile"),value:this.basicInfo.ruleProfileName,prop:"ruleProfile",properties:[{key:"ruleProfile",default:this.basicInfo.ruleProfileId,label:this.$t("IDC.groupDetail.label.RuleProfile"),type:"select",options:this.ruleProfiles},{key:"remark",default:"",label:this.$t("common.label.remark"),type:"textarea"}]},this.loadRuleProfiles().then(()=>{this.showDialog=!0})},editChargeProfile(){this.dialogConfig={title:this.$t("IDC.organization.editChargeProfile"),label:"Current Charge Profile",value:this.basicInfo.chargeProfileName,prop:"chargeProfile",properties:[{key:"chargeProfile",default:this.basicInfo.chargeProfileId,label:this.$t("IDC.organization.table.chargeProfile"),type:"select",options:this.chargeProfiles},{key:"remark",default:"",label:this.$t("common.label.remark"),type:"textarea"}]},this.loadChargeProfiles().then(()=>{this.showDialog=!0})},editOrganizationName(){this.dialogConfig={title:this.$t("IDC.organization.editOrganizationName"),label:"Current Organization Name",value:this.basicInfo.organizationName,prop:"organizationName",newOrganizationName:"",properties:[{key:"newOrganizationName",default:"",label:this.$t("IDC.organization.newOrganizationName"),type:"input",validateStatus:"el-form-item-pending",itemClass:"el-form-item-no-error",eleClass:"success-icon",elementBind:{"suffix-icon":"el-icon-success"}},{key:"remark",default:"",label:this.$t("common.label.remark"),type:"textarea"}]},this.showDialog=!0},onDialogSubmit(e,t){switch(e){case"identityStatus":this.changeOrganizationStatus(t);break;case"ruleProfile":this.changeRuleProfile(t).then();break;case"chargeProfile":this.changeChargeProfile(t).then();break;case"organizationName":this.changeOrganizationName(t);break;case"distributionTemplate":this.changeDistributionTemplate(t);break;case"settleConfigTemplate":this.changeSettleConfigTemplate(t);break}},async changeSettleConfigTemplate(e){let t={};t.orgId=this.basicInfo.organizationId,t.oldSettleConfigTemplateId=this.basicInfo.settleConfigTemplateId,t.newSettleConfigTemplateId=e.settleConfigTemplate,t.topIdentityId=this.basicInfo.topOrganizationId,t.remark=e.remark;try{this.submitLoading=!0;let e=await Object(u["f"])(t);this.submitLoading=!1,e&&e.header&&e.header.success&&(this.$modal.msgSuccess("Edit Commission Settlement Configuration Template success."),this.showDialog=!1,this.refreshBasicInfo())}catch(a){}},async changeDistributionTemplate(e){let t={};t.orgId=this.basicInfo.organizationId,t.oldDistributionModelId=this.basicInfo.distributionModelId,t.newDistributionModelId=e.distributionTemplate,t.topIdentityId=this.basicInfo.topOrganizationId,t.remark=e.remark;try{this.submitLoading=!0;let e=await Object(u["f"])(t);this.submitLoading=!1,e&&e.header&&e.header.success&&(this.basicInfo.distributionModelId=t.newDistributionModelId,this.basicInfo.distributionModelName=Object(g["d"])(this.commiAgreements,t.newDistributionModelId),this.$modal.msgSuccess("Edit Commission Distribution Agreement success."),this.showDialog=!1)}catch(a){}},async changeOrganizationName(e){let t={};t.organizationName=e.newOrganizationName,t.receiverIdentityId=this.basicInfo.organizationId,t.remark=e.remark,this.showDialog=!1;try{this.submitLoading=!0;let e=await Object(c["d"])(t);this.submitLoading=!1,e&&e.header&&e.header.success&&(this.basicInfo.organizationName=t.organizationName,e.taskId?this.$message.success("The request must be approved by another operator."):this.$modal.msgSuccess("Organization Name changed success."),this.header.title=`${this.basicInfo.shortCode}-${this.basicInfo.organizationName}`,this.showDialog=!1)}catch(a){}},async changeOrganizationStatus(e){let t={};t.oldStatus=this.basicInfo.status,t.newStatus=e.identityStatus,t.receiverIdentityId=this.basicInfo.organizationId,t.remark=e.remark;try{this.submitLoading=!0;let a=await Object(c["x"])(t);this.submitLoading=!1,a&&a.header&&a.header.success&&(this.basicInfo.status=e.identityStatus,a.taskId?this.$message.success("The request must be approved by another operator."):this.$modal.msgSuccess("Identity status changed success."),this.showDialog=!1)}catch(a){}},async changeRuleProfile(e){let t={};t.receiverIdentityId=this.basicInfo.organizationId,t.ruleProfileId=e.ruleProfile,t.trustLevel=this.basicInfo.trustLevelName,t.remark=e.remark;try{this.submitLoading=!0;let a=await Object(c["O"])(t);this.submitLoading=!1,a&&a.header&&a.header.success&&(this.basicInfo.ruleProfileId=e.ruleProfile,this.basicInfo.ruleProfileName=Object(g["d"])(this.ruleProfiles,e.ruleProfile),this.$modal.msgSuccess("Rule Profile changed success."),this.showDialog=!1,this.ruleProfiles.length=0)}catch(a){}},async changeChargeProfile(e){let t={};t.receiverIdentityId=this.basicInfo.organizationId,t.chargeProfileId=e.chargeProfile,t.trustLevel=this.basicInfo.trustLevelName,t.remark=e.remark;try{this.submitLoading=!0;let a=await Object(c["N"])(t);this.submitLoading=!1,a&&a.header&&a.header.success&&(this.basicInfo.chargeProfileId=e.chargeProfile,this.basicInfo.chargeProfileName=Object(g["d"])(this.chargeProfiles,e.chargeProfile),this.$modal.msgSuccess("Charge Profile changed success."),this.showDialog=!1,this.chargeProfiles.length=0)}catch(a){}},goToDetailPage(e){let t={id:null},a="";h.CHARGE===e&&(a="chargeProfile",t.id=this.basicInfo.chargeProfileId),h.RULE===e&&(a="ruleProfile",t.id=this.basicInfo.ruleProfileId),t.id&&this.openNewWindow({path:a,query:{data:encodeURIComponent(JSON.stringify(t))}})},getIdentityStatusName(e){return Object(d["c"])(e)},getSubAgentModelName(e){return Object(d["d"])(e)},refreshBasicInfo(){this.orgDetailView&&this.orgDetailView.init()}}},p=f,b=(a("6133"),a("2877")),v=Object(b["a"])(p,r,o,!1,null,"56bead4a",null),C=v.exports,y=a("ad03"),w=a("6195"),I=a("1c45"),D=a("9563"),S=a("5b4e"),O={name:"OrganizationDetail",components:{OrgAccount:D["a"],OrganizationBasicInfo:C,ProductInfo:y["a"],RevenueSettlementInfo:w["a"],KycForm:S["a"]},props:{organizationId:{type:String,default:""}},provide(){return{orgDetailView:this}},data(){return{tabName:"first",id:"",identityId:"",header:{title:""},basicInfo:{},status:[],roles:[],pageType:"detail",isShowBtn:!0,revenueFormData:{profileId:"Please Select",profileName:"",periodicSwitch:!1,intervalValue:"",intervalTypeCode:"",startDate:"",endDate:"",orgId:"",manualWsSwitch:!1,autoWsSwitch:!1,settlementMinBalance:"",editableTabsValue:"0",isShowModel:!0},payBillCheckRule:{}}},created(){this.init()},methods:{async init(){let e="";if(this.organizationId)e=this.organizationId;else{const t=JSON.parse(decodeURIComponent(this.$route.query.data));e=t.identityId}e&&this.loadOrganizationInfo(e)},async loadOrganizationInfo(e){this.identityId=e;let t=await Object(c["t"])({identityId:e});this.payBillCheckRule=t.payBillCheckRule;const a=t.organizationInfo||{};if(a.organizationId){let e=await this.queryOrgCommiAgreement(a.organizationId);a.distributionModelName=e.distributionModelName,a.distributionModelId=e.distributionModelId,a.settleConfigTemplateId=e.settleConfigTemplateId,a.settleConfigTemplateName=e.settleConfigTemplateName;const t=await this.getLoginedAccoutOrgInfo();t&&(a.loginedAccoutIsTopOrg=t.isTopOrganization,a.loginedAccoutOrgId=t.organizationId)}this.basicInfo=a,this.header.title=`${this.basicInfo.shortCode}-${this.basicInfo.organizationName}`},queryOrgCommiAgreement(e){return Object(c["F"])({orgId:e}).then(e=>e.header&&e.header.success?e:{}).catch(()=>({}))},getLoginedAccoutOrgInfo(){return Object(I["b"])({identityId:""}).then(e=>{if(e.header&&e.header.success){let t=e.organizationInfo;return t||null}}).catch(e=>null)},resetFields(){}}},F=O,P=(a("68f5"),Object(b["a"])(F,i,n,!1,null,"29ea689e",null));t["default"]=P.exports},a857:function(e,t,a){},adbd:function(e,t,a){"use strict";a("2fa9")},b7e5:function(e,t,a){"use strict";a("7892")},c811:function(e,t,a){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"page-header",class:{"no-bottom-border":!e.showBottomLine,"no-desc-height":!e.projectObj.desc}},[t("div",{staticClass:"header-left"},[e.projectObj.title?t("div",{staticClass:"page-title"},[e._v(" "+e._s(e.projectObj.title)+" "),e._t("title-suffix")],2):e._e(),e.projectObj.desc?t("div",{staticClass:"page-desc"},[e._v(" "+e._s(e.projectObj.desc)+" ")]):e._e()]),t("div",{staticClass:"header-right"},[e._t("header-right")],2)])},n=[],r={name:"PortalHeader",components:{},props:{projectObj:{type:Object,default(){return{}}},showBottomLine:{type:Boolean,default:!0}}},o=r,l=(a("9488"),a("2877")),s=Object(l["a"])(o,i,n,!1,null,"73566ca8",null);t["a"]=s.exports},cb9d:function(e,t,a){"use strict";a.d(t,"u",(function(){return r})),a.d(t,"G",(function(){return o})),a.d(t,"j",(function(){return l})),a.d(t,"x",(function(){return s})),a.d(t,"d",(function(){return c})),a.d(t,"w",(function(){return u})),a.d(t,"i",(function(){return d})),a.d(t,"t",(function(){return g})),a.d(t,"s",(function(){return h})),a.d(t,"v",(function(){return m})),a.d(t,"O",(function(){return f})),a.d(t,"g",(function(){return p})),a.d(t,"h",(function(){return b})),a.d(t,"I",(function(){return v})),a.d(t,"A",(function(){return C})),a.d(t,"b",(function(){return y})),a.d(t,"F",(function(){return w})),a.d(t,"e",(function(){return I})),a.d(t,"o",(function(){return D})),a.d(t,"l",(function(){return S})),a.d(t,"r",(function(){return O})),a.d(t,"q",(function(){return F})),a.d(t,"K",(function(){return P})),a.d(t,"n",(function(){return k})),a.d(t,"D",(function(){return T})),a.d(t,"a",(function(){return _})),a.d(t,"J",(function(){return B})),a.d(t,"C",(function(){return N})),a.d(t,"N",(function(){return z})),a.d(t,"E",(function(){return A})),a.d(t,"m",(function(){return E})),a.d(t,"B",(function(){return j})),a.d(t,"p",(function(){return M})),a.d(t,"y",(function(){return $})),a.d(t,"L",(function(){return x})),a.d(t,"M",(function(){return L})),a.d(t,"z",(function(){return R})),a.d(t,"c",(function(){return q})),a.d(t,"f",(function(){return V})),a.d(t,"H",(function(){return W})),a.d(t,"k",(function(){return U}));var i=a("0bbd"),n=a("5f9a");function r(e){return Object(i["a"])({url:Object(n["a"])("/fintech/v1/organization/list",e),method:"get"})}function o(e){return e.pageNo&&(e.pageIndex=e.pageNo,delete e.pageNo),Object(i["a"])({url:"/fintech/v1/organization/queryOrgListByPage",method:"POST",data:e})}function l(e){return Object(i["a"])({url:"/fintech/v1/identity/verify/"+e,method:"post",data:{}})}function s(e){return Object(i["a"])({url:"fintech/v1/organization/changeStatus",method:"post",data:e})}function c(e){return Object(i["a"])({url:"/fintech/v1/organization/changeOrgName",method:"post",data:e})}function u(){return Object(i["a"])({url:"/fintech/v1/organization/languages",method:"get"})}function d(e){return Object(i["a"])({url:"/fintech/v1/orgOperator/checkRoles",method:"post",data:e})}function g(e){return Object(i["a"])({url:Object(n["a"])("/fintech/v1/organization/detail",e),method:"get"})}function h(e){return Object(i["a"])({url:"/fintech/v1/organization/getChildOrgDetail",method:"post",data:e})}function m(e){return Object(i["a"])({url:Object(n["a"])("/fintech/v1/organization/status",e),method:"get"})}function f(e){return Object(i["a"])({url:"/fintech/v1/organization/updateRuleProfile",method:"post",data:e})}function p(e){return Object(i["a"])({url:"/fintech/v1/identity/verify/merchantName",method:"post",data:e})}function b(e){return Object(i["a"])({url:"/fintech/v1/organization/checkOrganizationName",method:"post",data:e,ignoreError:!0})}function v(e){return Object(i["a"])({url:"/fintech/v1/organization/products",method:"post",data:e})}function C(e){return Object(i["a"])({url:"/fintech/v1/organization/assign/product",method:"post",data:e})}function y(e){return Object(i["a"])({url:"/fintech/v1/organization/create",method:"post",data:e})}function w(e){return Object(i["a"])({url:"/fintech/v1/settlement/queryOrgCommiAgreement",method:"post",data:e,ignoreError:!0})}function I(e){return Object(i["a"])({url:"/fintech/v1/identity/checkRule",method:"post",data:e})}function D(e){return Object(i["a"])({url:"/fintech/v1/identity/generateIdentifier",method:"post",data:e})}function S(e){return Object(i["a"])({url:"/fintech/v1/identity/deleteIdentifier",method:"post",data:e})}function O(){return Object(i["a"])({url:"/fintech/v1/organization/getIdentityTypeEnum",method:"get"})}function F(){return Object(i["a"])({url:"/fintech/v1/organization/getIdentitySubTypeEnum",method:"get"})}function P(e){return Object(i["a"])({url:"/fintech/v1/organization/queryRuleProfileList",method:"post",data:e})}function k(e){return Object(i["a"])({url:"/fintech/v1/organization/downloadChargeProfile",method:"post",data:e,responseType:"blob"})}function T(e){return Object(i["a"])({url:"/fintech/v1/organization/queryChargeProfileList",method:"post",data:e})}function _(e){return Object(i["a"])({url:"/fintech/v1/organization/ChargeProfileRuleList/"+e,method:"get"})}function B(e){return Object(i["a"])({url:"/fintech/v1/organization/queryRuleProfileDetail/"+e,method:"get"})}function N(e){return Object(i["a"])({url:"/fintech/v1/organization/queryChargeProfileDetail",method:"post",data:e})}function z(e){return Object(i["a"])({url:"/fintech/v1/organization/updateChargeProfile",method:"post",data:e})}function A(e){return Object(i["a"])({url:"/fintech/v1/organization/queryChildren",method:"post",data:e})}function E(e){return Object(i["a"])({url:"/fintech/v1/organization/downloadBalanceOverview",method:"post",data:e,responseType:"blob"})}function j(e){return Object(i["a"])({url:"/fintech/v1/organization/queryBalanceOverviewPage",method:"post",data:e})}function M(){return Object(i["a"])({url:"/fintech/v1/organization/queryAccountType",method:"get"})}function $(e){return Object(i["a"])({url:"/fintech/v1/organization/queryAccountType",method:"post",data:e})}function x(e){return Object(i["a"])({url:"/fintech/v1/organization/querySubscribeProducts",method:"post",data:e})}function L(e){return Object(i["a"])({url:"/fintech/v1/organization/trustLevelAndSegment",method:"post",data:e})}function R(e){return Object(i["a"])({url:"/fintech/v1/organization/queryAddProducts",method:"post",data:e})}function q(e){return Object(i["a"])({url:"/fintech/v1/changeOrgProduct",method:"post",data:e})}function V(e){return Object(i["a"])({url:"/fintech/v1/organization/checkInputKyc",method:"post",data:e})}function W(e){return Object(i["a"])({url:"/fintech/v1/organization/queryOrganizationKYC",method:"post",data:e})}function U(e){return Object(i["a"])({url:"/fintech/v1/organization/close",method:"post",data:e})}},d8d3:function(e,t,a){"use strict";a.d(t,"c",(function(){return i})),a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return r}));const i={"00":"New","02":"Pending Active","03":"Active","04":"Suspended","05":"Frozen","06":"Closed","07":"Capped","08":"Dormant"},n={1005:"Web",1007:"Handset",1010:"API"},r={1:"Porta",2:"AG",3:"ThirdParty",4:"System",5:"NC",6:"TransactionCenter",7:"IdentityBusiness",8:"BulkCenter"}},e036:function(e,t,a){"use strict";a.d(t,"c",(function(){return n})),a.d(t,"d",(function(){return r})),a.d(t,"e",(function(){return o})),a.d(t,"b",(function(){return l})),a.d(t,"a",(function(){return s})),a.d(t,"f",(function(){return c}));var i=a("0bbd");function n(e){return Object(i["a"])({url:"/fintech/v1/settlement/revenue/org/queryOrgRevenueProfile",method:"post",data:e})}function r(e){return Object(i["a"])({url:"/fintech/v1/settlement/revenue/org/queryOrgRevenueTemplateNames",method:"post",data:e})}function o(e){return Object(i["a"])({url:"/fintech/v1/settlement/revenue/org/saveOrgRevenueProfile",method:"post",data:e})}function l(e){return Object(i["a"])({url:"/fintech/v1/settlement/queryCommissionCfg",method:"post",data:e})}function s(e){return Object(i["a"])({url:"/fintech/v1/settlement/dict/query",method:"post",data:e})}function c(e){return Object(i["a"])({url:"/fintech/v1/settlement/updateOrgCommiAgreement",method:"post",data:e})}},ead9:function(e,t,a){"use strict";a("7335")},fe84:function(e,t,a){}}]);
//# sourceMappingURL=chunk-51b3960d.js.map