(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-166f7266","chunk-43eec914"],{"0e19":function(t,e,n){},"164f":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"review-transaction"},[e("div",[e("portal-header",{attrs:{projectObj:t.titleConfig}}),e("portal-form",{ref:"balanceForm",attrs:{"form-data":t.searchList,"form-config-list":t.formConfigList,needOperateBtn:!0,needBottomLine:!1,searchBtnLoading:t.searchLoading},on:{"reset-btn-click":t.reset,"search-btn-click":t.search}})],1),e("div",{staticClass:"table-list-container"},[e("div",{staticClass:"divider-line"}),e("div",{staticStyle:{margin:"20px 0"}},[e("el-dropdown",{on:{command:t.exportData}},[e("el-button",{attrs:{type:"primary",size:"small",disabled:t.isExportDisabled}},[t._v(" "+t._s(t.$t("common.button.export"))+" "),e("i",{staticClass:"el-icon-arrow-down el-icon--right",staticStyle:{"font-size":"12px"}})]),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e("el-dropdown-item",{attrs:{command:"CSV"}},[t._v("CSV")]),e("el-dropdown-item",{attrs:{command:"PDF"}},[t._v("PDF")])],1)],1)],1),e("table-page",{staticClass:"table-page",attrs:{size:"small","has-pagination":!0,columns:t.columns,pagination:t.paginationConfig,getTableData:t.getTableData,"is-search":t.refreshTableFlag},scopedSlots:t._u([{key:"organizationName",fn:function(n){return[e("el-link",{attrs:{underline:!0},on:{click:function(e){return t.viewDetail(n.data.row)}}},[t._v(t._s(n.data.row.organizationName))])]}},{key:"parentOrganizationName",fn:function(n){return[e("el-link",{attrs:{underline:!0},on:{click:function(e){return t.viewDetail(n.data.row,!0)}}},[t._v(t._s(n.data.row.parentOrgName))])]}}])})],1)])},r=[],o=n("4c09"),i=n("c811"),c=n("3186"),u=n("cb9d"),s=n("1caf"),l=n("689d"),d=n("c652"),f={name:"BalanceOverview",components:{TablePage:o["a"],PortalHeader:i["a"],PortalForm:c["a"]},props:{propShortCode:{type:String,requied:!0}},data(){return{searchLoading:!1,refreshTableFlag:!1,isExportDisabled:!0,paginationConfig:{total:0,pageIndex:1,pageSize:10},searchList:{shortCode:"",accountType:""},accountTypeList:[],columns:[{label:"Level",prop:"level",align:"left",width:100},{label:"Organization Name",prop:"organizationName",align:"left",__slotName:"organizationName",width:200},{label:"Parent Organization Name",prop:"parentOrgName",align:"left",__slotName:"parentOrganizationName",width:250},{label:"Account Type Alias",prop:"accountAlias",align:"left",width:200},{label:"Current Balance",prop:"currentBalanceSymbol",align:"right",width:200},{label:"Available Balance",prop:"availableBalanceSymbol",align:"right",width:200},{label:"Reserved Balance",prop:"reservedBalanceSymbol",align:"right",width:200},{label:"Unclear Balance",prop:"unclearBalanceSymbol",align:"right",width:200}],queryFormRules:{time:[{required:!0,message:"Please select time",trigger:"change"}]}}},created(){this.init()},computed:{titleConfig(){return{title:"Balance Overview",desc:"You can query and export account balance information about the current organization and its child organizations."}},formConfigList(){return[{label:"Organization Short Code",key:"shortCode",comp:"el-input",bind:{placeholder:this.$t("common.placeholder.enter")}},{label:"Account Type",key:"accountType",comp:"el-select",options:this.accountTypeList,bind:{placeholder:this.$t("common.placeholder.select")},hidden:!1}]}},methods:{async init(){await this.initAccountTypeList()},async initAccountTypeList(){let t=await Object(l["a"])(u["p"],"dics");t=t||[],t=t.map(Object(l["f"])("code","name")),this.accountTypeList=t},reset(){this.$refs.balanceForm.resetFields(),this.paginationConfig={total:0,pageIndex:1,pageSize:10},this.refreshTableFlag=!0,this.isExportDisabled=!0},search(){this.$refs["balanceForm"].validate(t=>{t&&(this.refreshTableFlag=!0,this.paginationConfig={total:0,pageIndex:1,pageSize:10})})},exportData(t){let e=this.searchList.shortCode,n=!1;e||(e=this.propShortCode,n=!0);let a={shortCode:e,queryChildren:n,accountTypeId:this.searchList.accountType,pageSize:this.paginationConfig.total,pageNo:1,fileType:t};Object(s["a"])(u["m"],a,{fileType:t})},getTableData(){let t=this.searchList.shortCode,e=!1;t||(t=this.propShortCode,e=!0);let n={shortCode:t,queryChildren:e,accountTypeId:this.searchList.accountType,pageSize:this.paginationConfig.pageSize,pageNo:this.paginationConfig.pageIndex};return Object(u["B"])(n).then(t=>(t.list=t.accounts.map(t=>({...t,...JSON.parse(sessionStorage.getItem(this.$route.params))}))||[],t.list.forEach(t=>{t.currentBalanceSymbol=this.formatBalance(t.accountBalance,"currentBalance"),t.availableBalanceSymbol=this.formatBalance(t.accountBalance,"availableBalance"),t.reservedBalanceSymbol=this.formatBalance(t.accountBalance,"reservedBalance"),t.unclearBalanceSymbol=this.formatBalance(t.accountBalance,"unclearBalance")}),t.list.length?this.isExportDisabled=!1:this.isExportDisabled=!0,t.header||(t.header={success:!1},t.total=0),t.totalRecords=t.total,t)).catch(()=>{this.isExportDisabled=!0;const t={header:{},list:[]};return t}).finally(()=>{this.refreshTableFlag=!1})},formatBalance(t,e){return t[e]?d["a"].format(t[e].amount/100,t[e].currencyCode):"-"},viewDetail(t,e){let n=t.identityId,a=t.shortCode;if(e&&(n=t.parentOrgId,a=t.parentShortCode),n&&a){const t={identityId:n,organizationId:n,propShortCode:a};this.openNewWindow({path:"detail",query:{data:encodeURIComponent(JSON.stringify(t))}})}},showBalanceWithUnit(t){return t.amount||(t.amount=0),"USD"===t.currencyCode?"$"+(+t.amount).toFixed(2).replace(/\d{1,3}(?=(\d{3})+(\.\d*)?$)/g,"$&,"):`${(+t.amount).toFixed(2).replace(/\d{1,3}(?=(\d{3})+(\.\d*)?$)/g,"$&,")} ${t.currencyCode}`}}},h=f,p=(n("1e94"),n("2877")),g=Object(p["a"])(h,a,r,!1,null,"521f9a9c",null);e["default"]=g.exports},"1caf":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var a=n("7dfc");async function r(t,e,n){const{fileType:r,blobType:o="application/ms-excel"}=n,i=await t(e);if("application/json"===i.type){const t=new FileReader;t.readAsText(i);const e=this;t.onload=function(){const n=JSON.parse(t.result);e.$modal.msgError(n.header.responseDesc)}}else{const t=new Date,e=Object(a["a"])(t,"YYYYMMDDHHmmss");let n="FINANCIAL_RECONCILIATION_"+e+"."+r.toLowerCase();i.headers&&(n=i.headers["content-disposition"].split(";")[1].split("filename=")[1]);const c=new Blob([i],{type:o}),u=document.createElement("a");u.download=n,u.style.display="none",u.href=URL.createObjectURL(c),document.body.appendChild(u),u.click(),URL.revokeObjectURL(u.href),document.body.removeChild(u)}}},"1e94":function(t,e,n){"use strict";n("9069")},"689d":function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"e",(function(){return r})),n.d(e,"f",(function(){return o})),n.d(e,"c",(function(){return i})),n.d(e,"d",(function(){return c})),n.d(e,"b",(function(){return u}));const a=(t,e,...n)=>t(...n).then(t=>t.header&&t.header.success?t[e]:null).catch(()=>null),r=t=>{const e=Object.keys(t),n=Object.values(t);return Promise.all(n).then(t=>{const n=e.map((e,n)=>[e,t[n]]);return Object.fromEntries(n)})},o=(t,e,n=!1)=>a=>{const r={label:a[e],value:a[t]};return n?r:{...a,...r}},i=(t,e,n)=>{const a=t.find(t=>t[n]===e);return a},c=(t,e)=>{const n=i(t,e,"value")||{};return n["label"]},u=(t,e)=>{if(e||(e=new Map),!(t instanceof Object))return t;if(e.get(t))return e.get(t);let n;n=t instanceof Function?t.prototype?function(){return t.apply(this,arguments)}:(...e)=>t.call(void 0,...e):t instanceof Array?[]:t instanceof Date?new Date(t-0):t instanceof RegExp?new RegExp(t.sourceData,t.flags):{},e.set(t,n);for(let a in t)Object.hasOwnProperty.call(t,a)&&(n[a]=u(t[a],e));return n}},9069:function(t,e,n){},9488:function(t,e,n){"use strict";n("0e19")},"9cfe":function(t,e,n){"use strict";n.d(e,"e",(function(){return r})),n.d(e,"d",(function(){return o})),n.d(e,"b",(function(){return i})),n.d(e,"h",(function(){return c})),n.d(e,"a",(function(){return u})),n.d(e,"f",(function(){return s})),n.d(e,"c",(function(){return l})),n.d(e,"g",(function(){return d}));var a=n("0bbd");function r(t){return Object(a["a"])({url:"/fintech/v1/settlement/revenue/org/queryOrgRevenuePlans",method:"post",data:t})}function o(t){return Object(a["a"])({url:"/fintech/v1/settlement/revenue/org/queryOrgRevenuePlanDetail",method:"post",data:t})}function i(t){return Object(a["a"])({url:"/fintech/v1/settlement/revenue/org/execOrgAutoSweep",method:"post",data:t})}function c(t){return Object(a["a"])({url:"/fintech/v1/workflow/process/details",method:"post",data:t})}function u(t){return Object(a["a"])({url:"/fintech/v1/workflow/mytask/task/batchProcess",method:"post",data:t})}function s(t){return Object(a["a"])({url:"/fintech/v1/settlement/dict/query",method:"post",data:t})}function l(){return Object(a["a"])({url:"/fintech/v1/trust/currencyDisplay/query",method:"get"})}function d(t){return Object(a["a"])({url:"/fintech/v1/settlement/revenue/org/queryOrgAndProfile",method:"post",data:t})}},c652:function(t,e,n){"use strict";var a=n("9cfe");class r{constructor(){this.amountUnitList="",this.initAmountUnit()}format(t,e){let n="",a=Number(t),r=parseFloat(a.toFixed(2)).toLocaleString(),o=r.lastIndexOf(".");if(""!==this.amountUnitList)for(let c in this.amountUnitList)c=="en;1005;"+e&&(n=this.amountUnitList[c].symbol);else n="";if(-1===o)return n+r+".00";let i=r.slice(o+1).length;return`${n+r}${1===i?"0":""}`}getCurrency(t){if(""!==this.amountUnitList){let e;for(let n in this.amountUnitList)if(n==="en;1005;"+t){e=this.amountUnitList[n];break}return e}}async initAmountUnit(){this.amountUnitList=await Object(a["c"])()}}e["a"]=new r},c811:function(t,e,n){"use strict";var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"page-header",class:{"no-bottom-border":!t.showBottomLine,"no-desc-height":!t.projectObj.desc}},[e("div",{staticClass:"header-left"},[t.projectObj.title?e("div",{staticClass:"page-title"},[t._v(" "+t._s(t.projectObj.title)+" "),t._t("title-suffix")],2):t._e(),t.projectObj.desc?e("div",{staticClass:"page-desc"},[t._v(" "+t._s(t.projectObj.desc)+" ")]):t._e()]),e("div",{staticClass:"header-right"},[t._t("header-right")],2)])},r=[],o={name:"PortalHeader",components:{},props:{projectObj:{type:Object,default(){return{}}},showBottomLine:{type:Boolean,default:!0}}},i=o,c=(n("9488"),n("2877")),u=Object(c["a"])(i,a,r,!1,null,"73566ca8",null);e["a"]=u.exports},cb9d:function(t,e,n){"use strict";n.d(e,"u",(function(){return o})),n.d(e,"G",(function(){return i})),n.d(e,"j",(function(){return c})),n.d(e,"x",(function(){return u})),n.d(e,"d",(function(){return s})),n.d(e,"w",(function(){return l})),n.d(e,"i",(function(){return d})),n.d(e,"t",(function(){return f})),n.d(e,"s",(function(){return h})),n.d(e,"v",(function(){return p})),n.d(e,"O",(function(){return g})),n.d(e,"g",(function(){return m})),n.d(e,"h",(function(){return b})),n.d(e,"I",(function(){return v})),n.d(e,"A",(function(){return O})),n.d(e,"b",(function(){return y})),n.d(e,"F",(function(){return j})),n.d(e,"e",(function(){return w})),n.d(e,"o",(function(){return C})),n.d(e,"l",(function(){return z})),n.d(e,"r",(function(){return L})),n.d(e,"q",(function(){return B})),n.d(e,"K",(function(){return S})),n.d(e,"n",(function(){return T})),n.d(e,"D",(function(){return x})),n.d(e,"a",(function(){return D})),n.d(e,"J",(function(){return N})),n.d(e,"C",(function(){return P})),n.d(e,"N",(function(){return k})),n.d(e,"E",(function(){return _})),n.d(e,"m",(function(){return q})),n.d(e,"B",(function(){return I})),n.d(e,"p",(function(){return A})),n.d(e,"y",(function(){return F})),n.d(e,"L",(function(){return R})),n.d(e,"M",(function(){return E})),n.d(e,"z",(function(){return U})),n.d(e,"c",(function(){return $})),n.d(e,"f",(function(){return J})),n.d(e,"H",(function(){return Y})),n.d(e,"k",(function(){return H}));var a=n("0bbd"),r=n("5f9a");function o(t){return Object(a["a"])({url:Object(r["a"])("/fintech/v1/organization/list",t),method:"get"})}function i(t){return t.pageNo&&(t.pageIndex=t.pageNo,delete t.pageNo),Object(a["a"])({url:"/fintech/v1/organization/queryOrgListByPage",method:"POST",data:t})}function c(t){return Object(a["a"])({url:"/fintech/v1/identity/verify/"+t,method:"post",data:{}})}function u(t){return Object(a["a"])({url:"fintech/v1/organization/changeStatus",method:"post",data:t})}function s(t){return Object(a["a"])({url:"/fintech/v1/organization/changeOrgName",method:"post",data:t})}function l(){return Object(a["a"])({url:"/fintech/v1/organization/languages",method:"get"})}function d(t){return Object(a["a"])({url:"/fintech/v1/orgOperator/checkRoles",method:"post",data:t})}function f(t){return Object(a["a"])({url:Object(r["a"])("/fintech/v1/organization/detail",t),method:"get"})}function h(t){return Object(a["a"])({url:"/fintech/v1/organization/getChildOrgDetail",method:"post",data:t})}function p(t){return Object(a["a"])({url:Object(r["a"])("/fintech/v1/organization/status",t),method:"get"})}function g(t){return Object(a["a"])({url:"/fintech/v1/organization/updateRuleProfile",method:"post",data:t})}function m(t){return Object(a["a"])({url:"/fintech/v1/identity/verify/merchantName",method:"post",data:t})}function b(t){return Object(a["a"])({url:"/fintech/v1/organization/checkOrganizationName",method:"post",data:t,ignoreError:!0})}function v(t){return Object(a["a"])({url:"/fintech/v1/organization/products",method:"post",data:t})}function O(t){return Object(a["a"])({url:"/fintech/v1/organization/assign/product",method:"post",data:t})}function y(t){return Object(a["a"])({url:"/fintech/v1/organization/create",method:"post",data:t})}function j(t){return Object(a["a"])({url:"/fintech/v1/settlement/queryOrgCommiAgreement",method:"post",data:t,ignoreError:!0})}function w(t){return Object(a["a"])({url:"/fintech/v1/identity/checkRule",method:"post",data:t})}function C(t){return Object(a["a"])({url:"/fintech/v1/identity/generateIdentifier",method:"post",data:t})}function z(t){return Object(a["a"])({url:"/fintech/v1/identity/deleteIdentifier",method:"post",data:t})}function L(){return Object(a["a"])({url:"/fintech/v1/organization/getIdentityTypeEnum",method:"get"})}function B(){return Object(a["a"])({url:"/fintech/v1/organization/getIdentitySubTypeEnum",method:"get"})}function S(t){return Object(a["a"])({url:"/fintech/v1/organization/queryRuleProfileList",method:"post",data:t})}function T(t){return Object(a["a"])({url:"/fintech/v1/organization/downloadChargeProfile",method:"post",data:t,responseType:"blob"})}function x(t){return Object(a["a"])({url:"/fintech/v1/organization/queryChargeProfileList",method:"post",data:t})}function D(t){return Object(a["a"])({url:"/fintech/v1/organization/ChargeProfileRuleList/"+t,method:"get"})}function N(t){return Object(a["a"])({url:"/fintech/v1/organization/queryRuleProfileDetail/"+t,method:"get"})}function P(t){return Object(a["a"])({url:"/fintech/v1/organization/queryChargeProfileDetail",method:"post",data:t})}function k(t){return Object(a["a"])({url:"/fintech/v1/organization/updateChargeProfile",method:"post",data:t})}function _(t){return Object(a["a"])({url:"/fintech/v1/organization/queryChildren",method:"post",data:t})}function q(t){return Object(a["a"])({url:"/fintech/v1/organization/downloadBalanceOverview",method:"post",data:t,responseType:"blob"})}function I(t){return Object(a["a"])({url:"/fintech/v1/organization/queryBalanceOverviewPage",method:"post",data:t})}function A(){return Object(a["a"])({url:"/fintech/v1/organization/queryAccountType",method:"get"})}function F(t){return Object(a["a"])({url:"/fintech/v1/organization/queryAccountType",method:"post",data:t})}function R(t){return Object(a["a"])({url:"/fintech/v1/organization/querySubscribeProducts",method:"post",data:t})}function E(t){return Object(a["a"])({url:"/fintech/v1/organization/trustLevelAndSegment",method:"post",data:t})}function U(t){return Object(a["a"])({url:"/fintech/v1/organization/queryAddProducts",method:"post",data:t})}function $(t){return Object(a["a"])({url:"/fintech/v1/changeOrgProduct",method:"post",data:t})}function J(t){return Object(a["a"])({url:"/fintech/v1/organization/checkInputKyc",method:"post",data:t})}function Y(t){return Object(a["a"])({url:"/fintech/v1/organization/queryOrganizationKYC",method:"post",data:t})}function H(t){return Object(a["a"])({url:"/fintech/v1/organization/close",method:"post",data:t})}}}]);
//# sourceMappingURL=chunk-166f7266.js.map