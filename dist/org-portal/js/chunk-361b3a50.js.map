{"version":3,"sources":["webpack:///./src/common/validator/common.js","webpack:///./src/components/kyc-common/kyc-form/kyc-api.js","webpack:///./src/components/portal-dialog/index.vue","webpack:///src/components/portal-dialog/index.vue","webpack:///./src/components/portal-dialog/index.vue?41ca","webpack:///./src/components/portal-dialog/index.vue?cac0","webpack:///./src/components/kyc-common/utils.js","webpack:///./src/components/portal-dialog/index.vue?9b69"],"names":["inputRequiredValidateObj","required","message","trigger","checkRequiredValidateObj","selectRequiredValidateObj","numberAndCharacterValidateObj","pattern","integerValidateObj","msisdnValidateObj","nonSpecialCharValidateObj","nonSpecialCharExceptPercentSignValidateObj","nonSpecialValidateObj","getStrLenValidateObj","minLen","maxLen","len0To18StrValidateObj","len6To16StrValidateObj","len4To12StrValidateObj","len6To12StrValidateObj","len19StrValidateObj","len24StrValidateObj","len64StrValidateObj","len256StrValidateObj","len512StrValidateObj","len1To18StrValidateObj","len0To32StrValidateObj","len0To30StrValidateObj","len9To18StrValidateObj","msg","min","max","len4to0trValidateObj","checkFuzzySearchInput","obj","arr","item","toString","startsWith","length","push","every","checkLengthExceptPercentSign","errorMsg","validator","rule","value","callback","Error","BASE_PATH","getLanguageList","request","url","method","getRegionData","checkTrustLevelChange","data","updateIdentityKYC","changeBasicProduct","getCustomerKYCConfig","getCustomerKYCDetail","getCustomerKYCEditInfo","getSpOperatorKYCConfig","getSpOperatorKYCDetail","getOrgOperatorKYCConfig","updateOrgOperatorKYCConfig","isSelfOrgOper","getOrgOperatorKYCDetail","getOrgOperatorKYCEditInfo","checkOrgOperatorTrustLevelChange","Promise","resolve","header","responseCode","referenceDatas","success","change","getGroupKYCConfig","getGroupKYCDetail","getGroupKYCConfigOnChangeBasicProduct","getGroupKYCEditInfo","checkGroupTrustLevelChange","updateGroupIdentityKYC","getOrgKYCConfig","changeOrgBasicProduct","getOrgKYCDetail","getOrgKYCEditInfo","updateOrgIdentityKYC","checkOrgTrustLevelChange","getBankKYCConfig","getBankKYCDetail","render","_vm","this","_c","_self","_g","_b","class","customFooter","subtitle","attrs","dialogVisible","title","width","closeOnClickModal","showClose","handleClose","on","$event","openedDialog","closedDialog","$attrs","$listeners","staticClass","_v","_s","_e","_t","slot","showCancel","cancelBtnDisable","handleCancelClick","cancelText","showSubmit","confirmBtnDisable","submitLoading","handleConfirmClick","confirmText","staticRenderFns","name","props","visible","type","default","watch","handler","immediate","methods","component","KYC_DISPLAYTYPE_MAP","INPUT","SELECT","DATE","TIME","RADIO","CHECKBOX","PICTURE","ALGORITHM_TYPE_MAP","FIXED_DATE","DAY","MONTH","YEAR","ANNIVERSARY","BIRTHDAY","KYC_RULE_EXT_KEY","SIMPLE_GROUP_KEY","REGION_FIELD_ID","NC_LANG_FIELD_ID","MULTI_GROUP_KEY_TO_ID_MAP","idDetailList","certificatelList","contactList","directorDetailList","bankCardList","MULTI_GROUP_KEY_ARRAY","Object","keys","MULTI_GROUP_ID_ARRAY","values","MULTI_GROUP_ID_TO_KEY_MAP","reduce","pre","cur","index","ADD_BUTTON_TEXT","100","200","300","500","1006","isMultiKYCGroupType","kycGroupKey","includes","dealFieldAdditionalData","field","mode","multiRelevancyMandatory","multiDisabled","fieldValue","sortDataDictItems","dataDictItems","sort","a","b","displayOrder","dealIdentityKYCConfig","responseData","configData","forEach","key","groupId","realDisplayName","filter","group","convertKYCConfig2FormData","config","formData","kycData","groupItem","kycFields","description","newkycFields","enable","fieldId","fieldName","fieldType","map","newField","propPath","Array","isArray","dataDictItemsMap","newGroupItem","fieldValues","cloneDeep","isArrayGroupField","addKYCEchoData","echoData","echoConfigData","simpleEchoData","kycGroupId","kycFieldId","inputValue","i","convertKYC2RequestParams","formKYCData","multiRecordIdMap","identityKYCData","groupIds","parseInt","multiResult","convertMultiGroupParams","concat","convertSimpleGroupParams","groupData","multiGroupParam","rowData","rowIndex","row","filterRowData","filterField","multiMap","recordId","res","getInputValue","sensitive","simpleGroupList","join","getMultiRecordIdMap","recordIdList","groupRecordId","equalSubmitAndInitEdit","initEdit","submit","equal","initEditSimple","submitSimple","initEditSimpleField","find","multiKeys","initEditMultiKeys","submitGroup","initEditGroup","j","initEditRow","initEditKYCFields","fieldDiff","k","initEditSameField","convertKYCDetail2FormData","kycFormData","cloneIdentityKYCData","result","convertMultiKYCGroupData","simpleKYCGroups","convertSimpleKYCGroupData","multiGroupDetailData","multiKYCGroup","enableFields","fieldIdx","rowIdx","kycGroupList","simpleKYCGroupsArr","convertKYCEditInfo2FormData","kycEditInfo","sortRegionTreeNode","treeData","curr","node","regionInfoTreeDatas","getRegionCode2FullNameMap","curNode","assign","getWorkflowDiff","getWorkflowDelete"],"mappings":"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","file":"js/chunk-361b3a50.js","sourcesContent":["let inputRequiredValidateObj = {\n  required: true,\n  message: 'Please enter content',\n  trigger: 'blur',\n};\n\nlet checkRequiredValidateObj = {\n  required: true,\n  message: 'Please check content',\n  trigger: 'blur',\n};\n\nlet selectRequiredValidateObj = {\n  required: true,\n  message: 'Please select content',\n  trigger: 'change',\n};\n\nlet zeroAndPositiveNumberValidateObj = {\n  pattern: /^\\+?[0-9]*(\\.[0-9]*)?$/,\n  message: 'enter a non-nagative integer',\n  trigger: 'blur',\n};\n\nlet numberAndCharacterValidateObj = {\n  pattern: /^[0-9a-zA-Z]*$/,\n  message: 'Must be number and letters.',\n  trigger: 'blur',\n};\n\nlet integerValidateObj = {\n  pattern: /^[+-]?[0-9]*$/,\n  message: 'Must be integer number.',\n  trigger: 'blur',\n};\nlet msisdnValidateObj = {\n  pattern: /[0-9]{4}/,\n  message: 'The MSISDN must contain at least 4 dligits',\n  trigger: 'blur',\n};\n\nlet phoneNumberRuleObj = {\n  pattern: /^((13[5-9])|(1[4-9][0-9]))[0-9]{8}$/,\n  message: 'The regular expression is ^((13[5-9])|(1[4-9][0-9]))[0-9]{8}$.',\n  trigger: 'blur',\n};\n\nlet emailRuleObj = {\n  pattern: /^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\\.[a-zA-Z0-9_-]+)+$/,\n  message: 'The regular expression is ^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\\\\.[a-zA-Z0-9_-]+)+$.',\n  trigger: 'blur',\n};\n\nlet emailValidateObj = {\n  type: 'email',\n  message: 'Invalid email address.',\n  trigger: 'blur',\n};\n\nlet nonSpecialCharValidateObj = {\n  pattern: /^[^@~`！!#$%^*（）()\\-+=|,/<>《》?？;':\\\"“\\[\\]{}\\\\&]*$/,\n  message: 'Cannot contain special characters (~`!#$%^*()-+=|,/<>?;\\':\"[]{}\\\\&)',\n  trigger: 'blur',\n};\n\nlet nonSpecialCharExceptPercentSignValidateObj = {\n  pattern: /^[^@~`！!#$^*（）()\\-+=|,/<>《》?？;':\\\"“\\[\\]{}\\\\&]*$/,\n  message: 'Cannot contain special characters (~`!#$^*()-+=|,/<>?;\\':\"[]{}\\\\&)',\n  trigger: 'blur',\n};\n\nlet nameValidateObj = {\n  pattern: /^[a-zA-Z][\\s\\w.-]*$/,\n  message: 'The regular expression is ^[a-zA-Z][\\\\s\\\\w.-]*$',\n  trigger: 'blur',\n};\nlet nonSpecialValidateObj = {\n  pattern: /^[\\w- ]+$/,\n  message: 'Please do not enter any special characters.',\n  trigger: 'blur',\n};\n\nexport {\n  inputRequiredValidateObj,\n  zeroAndPositiveNumberValidateObj,\n  checkRequiredValidateObj,\n  numberAndCharacterValidateObj,\n  selectRequiredValidateObj,\n  emailValidateObj,\n  nonSpecialCharValidateObj,\n  nameValidateObj,\n  phoneNumberRuleObj,\n  emailRuleObj,\n  integerValidateObj,\n  msisdnValidateObj,\n  nonSpecialCharExceptPercentSignValidateObj,\n  nonSpecialValidateObj,\n};\n\nexport const len0To11StrValidateObj = getStrLenValidateObj({\n  minLen: 0,\n  maxLen: 11,\n});\nexport const len0To18StrValidateObj = getStrLenValidateObj({\n  minLen: 0,\n  maxLen: 18,\n});\n\nexport const len3To3StrValidateObj = getStrLenValidateObj({\n  minLen: 3,\n  maxLen: 3,\n});\n\nexport const len6To16StrValidateObj = getStrLenValidateObj({\n  minLen: 6,\n  maxLen: 16,\n});\n\nexport const len8To10StrValidateObj = getStrLenValidateObj({\n  minLen: 8,\n  maxLen: 10,\n});\nexport const len8To11StrValidateObj = getStrLenValidateObj({\n  minLen: 8,\n  maxLen: 11,\n});\n\nexport const len4To12StrValidateObj = getStrLenValidateObj({\n  minLen: 4,\n  maxLen: 12,\n});\n\nexport const len6To12StrValidateObj = getStrLenValidateObj({\n  minLen: 6,\n  maxLen: 12,\n});\n\nexport const len19StrValidateObj = getStrLenValidateObj({\n  minLen: 0,\n  maxLen: 19,\n});\n\nexport const len24StrValidateObj = getStrLenValidateObj({\n  minLen: 0,\n  maxLen: 24,\n});\n\nexport const len64StrValidateObj = getStrLenValidateObj({\n  minLen: 0,\n  maxLen: 64,\n});\n\nexport const len100StrValidateObj = getStrLenValidateObj({\n  minLen: 0,\n  maxLen: 100,\n});\n\nexport const len256StrValidateObj = getStrLenValidateObj({\n  minLen: 0,\n  maxLen: 256,\n});\n\nexport const len512StrValidateObj = getStrLenValidateObj({\n  minLen: 0,\n  maxLen: 512,\n});\n\nexport const len8To50StrValidateObj = getStrLenValidateObj({\n  minLen: 8,\n  maxLen: 50,\n});\nexport const len1To18StrValidateObj = getStrLenValidateObj({\n  minLen: 1,\n  maxLen: 18,\n});\n\nexport const len0To32StrValidateObj = getStrLenValidateObj({\n  minLen: 0,\n  maxLen: 32,\n});\n\nexport const len0To30StrValidateObj = getStrLenValidateObj({\n  minLen: 0,\n  maxLen: 30,\n});\n\nexport const len9To18StrValidateObj = getStrLenValidateObj({\n  minLen: 9,\n  maxLen: 18,\n});\n\nexport const len256to2StrValidateObj = getStrLenValidateObj({\n  minLen: 2,\n  maxLen: 256,\n});\n\n/**\n * 获取字符串校验对象\n * @param {minLen, maxLen} 最小，最大长度\n */\nexport function getStrLenValidateObj({ minLen = 0, maxLen = 100 }) {\n  let msg = '';\n  if (minLen > 0) {\n    msg = `Must be between ${minLen} and ${maxLen} characters`;\n  } else {\n    msg = `Must be less than ${maxLen} characters`;\n  }\n  return {\n    min: minLen,\n    max: maxLen,\n    message: msg,\n    trigger: 'blur',\n  };\n}\n\nexport const len4to0trValidateObj = getStrLenValidateObj({\n  minLen: 0,\n  maxLen: 4,\n});\n\n// 将路径表达式转换取值方法\nexport function parsePath(path) {\n  const arr = path.split('.');\n  return function (data) {\n    for (const key of arr) {\n      if (!data) {\n        return;\n      }\n      data = data[key];\n    }\n    return data;\n  };\n}\n\n// 校验模糊查询是否输入了内容\nexport function checkFuzzySearchInput(obj) {\n  let arr = [];\n  for (let item in obj) {\n    if ((obj[item] && obj[item].toString().startsWith('%') && obj[item].length === 1) || !obj[item]) {\n      arr.push(false);\n    } else {\n      arr.push(true);\n    }\n  }\n  if (arr.every((item) => item === false)) {\n    return false;\n  }\n  return true;\n}\n\nexport function checkLengthExceptPercentSign(errorMsg) {\n  return {\n    validator: (rule, value, callback) => {\n      if (value && value.startsWith('%') && value.length === 1) {\n        callback(new Error(`${errorMsg}`));\n      } else {\n        callback();\n      }\n    },\n    trigger: 'blur',\n  };\n}\n\nexport function checkmsisdnLengthExceptPercentSign() {\n  return {\n    validator: (rule, value, callback) => {\n      if (value && value.startsWith('%') && value.length <= 4) {\n        callback(new Error('The MSISDN must contain at least 4 digits.'));\n      } else {\n        callback();\n      }\n    },\n    trigger: 'blur',\n  };\n}\n","import request from '@/common/utils/request';\n\nconst BASE_PATH = '/fintech/v1';\n\n// 加载Language列表\nexport function getLanguageList() {\n  return request({\n    url: `${BASE_PATH}/organization/languages`,\n    method: 'get',\n  });\n}\n\n// 获取 region 数据\nexport function getRegionData() {\n  return request({\n    url: `${BASE_PATH}/customer/region`,\n    method: 'get',\n  });\n}\n\n// 编辑保存时，检查trust level等级是否发生变化\nexport function checkTrustLevelChange(data) {\n  return request({\n    url: `${BASE_PATH}/customer/checkTrustLevelChange`,\n    method: 'post',\n    data,\n  });\n}\n\n// 更新实体的 KYC 信息\nexport function updateIdentityKYC(data) {\n  return request({\n    url: `${BASE_PATH}/customer/changeCustomerKYCInfo`,\n    method: 'post',\n    data,\n  });\n}\n\n// Basic Product 获取最新的 KYC 相关配置\nexport function changeBasicProduct(data) {\n  return request({\n    url: `${BASE_PATH}/customer/changeBasicProduct`,\n    method: 'post',\n    data,\n  });\n}\n\n// ----------------------------------- customer ----------------------------------- /\n// 获取 customer kyc 配置\nexport function getCustomerKYCConfig() {\n  return request({\n    url: `${BASE_PATH}/customer/queryCustomerKYC`,\n    method: 'get',\n  });\n}\n\n// 获取 customer 实体实例的 kyc详情 mock接口\nexport function getCustomerKYCDetail(data) {\n  return request({\n    url: `${BASE_PATH}/customerDetailsInfo/kycInfo`,\n    method: 'post',\n    data,\n  });\n}\n\n// 获取 customer 实体实例 当前有权限编辑的 KYC group\nexport function getCustomerKYCEditInfo(data) {\n  return request({\n    url: `${BASE_PATH}/customer/editCustomerKYC`,\n    method: 'post',\n    data,\n  });\n}\n\n// ----------------------------------- sp operator ----------------------------------- /\n// 获取sp operator kyc 配置\nexport function getSpOperatorKYCConfig() {\n  return request({\n    url: `${BASE_PATH}/SpOperator/querySpOperatorKYC`,\n    method: 'get',\n  });\n}\n\n// 获取sp operator kyc 详情数据\nexport function getSpOperatorKYCDetail(data) {\n  return request({\n    url: `${BASE_PATH}/spOperator/kycInfo/${data}`,\n    method: 'get',\n  });\n}\n\n// ----------------------------------- org operator ----------------------------------- /\n// 获取org operator kyc 配置\nexport function getOrgOperatorKYCConfig(data) {\n  return request({\n    url: `${BASE_PATH}/organization/queryOrgOperatorKYC`,\n    method: 'post',\n    data,\n  });\n}\n\n// 更新kyc\nexport function updateOrgOperatorKYCConfig(data) {\n  if (data.isSelfOrgOper) {\n    delete data.isSelfOrgOper;\n    return request({\n      url: `${BASE_PATH}/orgOperator/updateSelfKYC`,\n      method: 'post',\n      data,\n    });\n  } else {\n    return request({\n      url: `${BASE_PATH}/orgOperator/updateKYC`,\n      method: 'post',\n      data,\n    });\n  }\n}\n\n// 获取org operator kyc 详情数据\nexport function getOrgOperatorKYCDetail(data) {\n  return request({\n    url: `${BASE_PATH}/orgOperator/queryKYC`,\n    method: 'post',\n    data,\n  });\n}\n\n// 获取 org operator 实体实例 当前有权限编辑的 KYC group\nexport function getOrgOperatorKYCEditInfo(data) {\n  return request({\n    url: `${BASE_PATH}/orgOperator/queryKYCWhenEdit`,\n    method: 'post',\n    data,\n  });\n}\n\n// 编辑保存时，检查trust level等级是否发生变化\nexport function checkOrgOperatorTrustLevelChange() {\n  return new Promise((resolve) => {\n    resolve({\n      header: {\n        responseCode: 'SYS00000',\n        referenceDatas: {},\n        success: true,\n      },\n      change: false,\n    });\n  });\n}\n\n// ----------------------------------- group ----------------------------------- /\n// 获取group kyc 配置\nexport function getGroupKYCConfig() {\n  return request({\n    url: `${BASE_PATH}/group/queryCreateGroupKYC`,\n    method: 'get',\n  });\n}\n\n// 获取group kyc 详情数据\nexport function getGroupKYCDetail(data) {\n  return request({\n    url: `${BASE_PATH}/group/viewGroupKYC`,\n    method: 'post',\n    data,\n  });\n}\n\n// Basic Product 获取最新的 KYC 相关配置\nexport function getGroupKYCConfigOnChangeBasicProduct(data) {\n  return request({\n    url: `${BASE_PATH}/group/changeBasicProduct`,\n    method: 'post',\n    data,\n  });\n}\n// 获取 group 实体实例 当前有权限编辑的 KYC group\nexport function getGroupKYCEditInfo(data) {\n  return request({\n    url: `${BASE_PATH}/group/editGroupKYC`,\n    method: 'post',\n    data,\n  });\n}\n// 编辑保存时，检查trust level等级是否发生变化\nexport function checkGroupTrustLevelChange(data) {\n  return request({\n    url: `${BASE_PATH}/group/checkTrustLevelChange`,\n    method: 'post',\n    data,\n  });\n}\n// 更新实体的 KYC 信息\nexport function updateGroupIdentityKYC(data) {\n  return request({\n    url: `${BASE_PATH}/group/changeGroupKYC`,\n    method: 'post',\n    data,\n  });\n}\n\n// ----------------------------------- org----------------------------------- /\n// 获取org kyc 配置\nexport function getOrgKYCConfig(data = {}) {\n  return request({\n    url: `${BASE_PATH}/organization/queryOrganizationKYC`,\n    method: 'post',\n    data,\n  });\n}\n\nexport function changeOrgBasicProduct(data) {\n  return request({\n    url: `${BASE_PATH}/organization/changeBasicProduct`,\n    method: 'post',\n    data,\n  });\n}\n\n// 获取org kyc 详情数据\nexport function getOrgKYCDetail(data) {\n  return request({\n    url: `${BASE_PATH}/organization/KYCInfo`,\n    method: 'post',\n    data,\n  });\n}\n\n// 获取 org 实体实例 当前有权限编辑的 KYC group\nexport function getOrgKYCEditInfo(data) {\n  return request({\n    url: `${BASE_PATH}/organization/queryOrganizationKYCWhenEdit`,\n    method: 'post',\n    data,\n  });\n}\n\n// 更新实体的 KYC 信息\nexport function updateOrgIdentityKYC(data) {\n  return request({\n    url: `${BASE_PATH}/organization/changeOrganizationKYCInfo`,\n    method: 'post',\n    data,\n  });\n}\n\n// 编辑保存时，检查trust level等级是否发生变化\nexport function checkOrgTrustLevelChange(data) {\n  return request({\n    url: `${BASE_PATH}/organization/checkTrustLevelChange`,\n    method: 'post',\n    data,\n  });\n}\n\n// ----------------------------------- bank ----------------------------------- /\n// 获取bank kyc 配置\nexport function getBankKYCConfig() {\n  return request({\n    url: `${BASE_PATH}/bank/queryBankKYC`,\n    method: 'get',\n  });\n}\n\n// 获取bank kyc 详情数据\nexport function getBankKYCDetail(data) {\n  return request({\n    url: `${BASE_PATH}/bank/kycInfo/${data}`,\n    method: 'get',\n  });\n}\n\n// 这里导出一个默认对象，方便接口的引用，不然在kyc-form的index.vue中解构接口太多了\nexport default {\n  getRegionData,\n  checkTrustLevelChange,\n  updateIdentityKYC,\n  changeBasicProduct,\n  getCustomerKYCConfig,\n  getCustomerKYCDetail,\n  getCustomerKYCEditInfo,\n  getSpOperatorKYCConfig,\n  getSpOperatorKYCDetail,\n  getOrgOperatorKYCConfig,\n  getOrgOperatorKYCDetail,\n  getGroupKYCConfig,\n  getGroupKYCDetail,\n  getBankKYCConfig,\n  getBankKYCDetail,\n  getGroupKYCConfigOnChangeBasicProduct,\n  getOrgKYCConfig,\n  getOrgKYCDetail,\n  getOrgKYCEditInfo,\n  changeOrgBasicProduct,\n  updateOrgIdentityKYC,\n  checkOrgTrustLevelChange,\n  getOrgOperatorKYCEditInfo,\n  checkOrgOperatorTrustLevelChange,\n  updateOrgOperatorKYCConfig,\n  getGroupKYCEditInfo,\n  checkGroupTrustLevelChange,\n  updateGroupIdentityKYC,\n};\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('el-dialog',_vm._g(_vm._b({class:['portal-dialog', _vm.customFooter ? 'custom-footer' : '', _vm.subtitle ? 'has-subtitle' : ''],attrs:{\"visible\":_vm.dialogVisible,\"title\":_vm.title,\"width\":_vm.width,\"close-on-click-modal\":_vm.closeOnClickModal,\"show-close\":_vm.showClose,\"before-close\":_vm.handleClose},on:{\"update:visible\":function($event){_vm.dialogVisible=$event},\"opened\":_vm.openedDialog,\"closed\":_vm.closedDialog}},'el-dialog',_vm.$attrs,false),_vm.$listeners),[(_vm.subtitle)?_c('span',{staticClass:\"subtitle\"},[_vm._v(_vm._s(_vm.subtitle))]):_vm._e(),_vm._t(\"title\"),_vm._t(\"content\"),(_vm.customFooter)?_vm._t(\"footer\"):_c('div',{attrs:{\"slot\":\"footer\"},slot:\"footer\"},[(_vm.showCancel)?_c('button',{class:['cancel-button', _vm.cancelBtnDisable ? 'disabled' : ''],on:{\"click\":_vm.handleCancelClick}},[_vm._v(\" \"+_vm._s(_vm.cancelText)+\" \")]):_vm._e(),(_vm.showSubmit)?_c('el-button',{attrs:{\"type\":\"primary\",\"disabled\":_vm.confirmBtnDisable,\"loading\":_vm.submitLoading,\"size\":\"small\"},on:{\"click\":_vm.handleConfirmClick}},[_vm._v(_vm._s(_vm.confirmText))]):_vm._e()],1)],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <el-dialog\n    :class=\"['portal-dialog', customFooter ? 'custom-footer' : '', subtitle ? 'has-subtitle' : '']\"\n    :visible.sync=\"dialogVisible\"\n    :title=\"title\"\n    :width=\"width\"\n    v-bind=\"$attrs\"\n    v-on=\"$listeners\"\n    :close-on-click-modal=\"closeOnClickModal\"\n    :show-close=\"showClose\"\n    :before-close=\"handleClose\"\n    @opened=\"openedDialog\"\n    @closed=\"closedDialog\"\n  >\n    <span v-if=\"subtitle\" class=\"subtitle\">{{ subtitle }}</span>\n    <slot name=\"title\"></slot>\n    <slot name=\"content\"></slot>\n    <slot name=\"footer\" class=\"custom-fotter\" v-if=\"customFooter\"></slot>\n    <div slot=\"footer\" v-else>\n      <button\n        v-if=\"showCancel\"\n        :class=\"['cancel-button', cancelBtnDisable ? 'disabled' : '']\"\n        @click=\"handleCancelClick\"\n      >\n        {{ cancelText }}\n      </button>\n      <el-button\n        type=\"primary\"\n        v-if=\"showSubmit\"\n        :disabled=\"confirmBtnDisable\"\n        :loading=\"submitLoading\"\n        size=\"small\"\n        @click=\"handleConfirmClick\"\n        >{{ confirmText }}</el-button\n      >\n    </div>\n  </el-dialog>\n</template>\n\n<script>\nexport default {\n  name: 'PortalDialog',\n  props: {\n    visible: {\n      type: Boolean,\n      default: false,\n    },\n    title: {\n      type: String,\n      default: '',\n    },\n    width: {\n      type: String,\n      default: '448px',\n    },\n    customFooter: {\n      type: Boolean,\n      default: false,\n    },\n    cancelText: {\n      type: String,\n      default: 'Cancel',\n    },\n    confirmText: {\n      type: String,\n      default: 'Confirm',\n    },\n    closeOnClickModal: {\n      type: Boolean,\n      default: false,\n    },\n    showClose: {\n      type: Boolean,\n      default: true,\n    },\n    cancelBtnDisable: {\n      type: Boolean,\n      default: false,\n    },\n    confirmBtnDisable: {\n      type: Boolean,\n      default: false,\n    },\n    showSubmit: {\n      type: Boolean,\n      default: true,\n    },\n    subtitle: {\n      type: String,\n      default: '',\n    },\n    showCancel: {\n      type: Boolean,\n      default: true,\n    },\n    submitLoading: {\n      type: Boolean,\n      default: false,\n    },\n  },\n  data() {\n    return {\n      dialogVisible: false,\n    };\n  },\n  watch: {\n    visible: {\n      handler(value) {\n        this.dialogVisible = value;\n      },\n      immediate: true,\n    },\n    dialogVisible: {\n      handler(newVal) {\n        this.$emit('show-dialog', newVal);\n        this.$emit('update:visible', newVal);\n      },\n    },\n  },\n  methods: {\n    handleClose() {\n      this.dialogVisible = false;\n      this.$emit('handle-close');\n    },\n    handleCancelClick() {\n      this.$emit('cancel-btn-click');\n    },\n    handleConfirmClick() {\n      this.$emit('confirm-btn-click');\n    },\n    openedDialog() {\n      this.$emit('opened-dialog');\n    },\n    closedDialog() {\n      this.$emit('closed-dialog');\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.portal-dialog {\n  &.custom-footer {\n    /deep/ .el-dialog {\n      .el-dialog__body {\n        padding: 0 24px 24px 24px;\n      }\n    }\n  }\n  &.has-subtitle {\n    /deep/ .el-dialog {\n      .el-dialog__header {\n        padding: 24px 24px 8px 24px;\n      }\n      .el-dialog__body {\n        .subtitle {\n          font-size: 14px;\n          color: $--text_color--secondary;\n          word-wrap: break-word;\n        }\n      }\n    }\n  }\n  /deep/ .el-dialog {\n    border-radius: 8px;\n    button {\n      font-size: 14px;\n    }\n    .el-dialog__header {\n      padding: 24px 24px 20px 24px;\n      .el-dialog__title {\n        font-size: 20px;\n        line-height: 27px;\n        font-weight: bold;\n        font-family: HuaweiSans-Bold;\n        color: $--text_color--emphasis;\n      }\n      .el-dialog__headerbtn {\n        top: 16px;\n        right: 16px;\n\n        .el-dialog__close {\n          font-size: 16px;\n        }\n      }\n    }\n    .el-dialog__footer {\n      padding: 20px 24px 24px 24px;\n      margin: 0px;\n      .el-button--primary {\n        background-color: $--primary_color;\n        border-color: $--primary_color;\n      }\n      .el-button--primary.is-disabled {\n        background-color: #f7f8fa;\n        border-color: #f7f8fa;\n        color: #c9cdd4;\n      }\n    }\n    .el-dialog__body {\n      padding: 0px 24px;\n      margin: 0px;\n    }\n  }\n  /deep/ .el-button--small {\n    padding: 7px 15px;\n    height: 32px;\n  }\n  .cancel-button {\n    padding: 7px 15px;\n    height: 32px;\n    border-radius: 4px;\n    background-color: #ffffff;\n    border: 1px solid #e5e6eb;\n    font-size: 14px;\n    color: $--fill_color--emphasis;\n    box-sizing: border-box;\n    cursor: pointer;\n    margin-right: 8px;\n    &.disabled {\n      background-color: #f7f8fa;\n      border-color: #f7f8fa;\n      color: #c9cdd4;\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=081459b7&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=081459b7&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"081459b7\",\n  null\n  \n)\n\nexport default component.exports","import { cloneDeep } from 'lodash';\n\nexport const KYC_DISPLAYTYPE_MAP = {\n  INPUT: '00',\n  SELECT: '01',\n  DATE: '02',\n  TIME: '03',\n  RADIO: '04',\n  CHECKBOX: '05',\n  PICTURE: '06',\n};\n\nexport const KYC_DATATYPE_MAP = {\n  string: '01',\n  interger: '02',\n  long: '03',\n  'data dict': '06',\n};\n\nexport const ALGORITHM_TYPE_MAP = {\n  FIXED_DATE: '0',\n  DAY: '1',\n  MONTH: '2',\n  YEAR: '3',\n  ANNIVERSARY: '4',\n  BIRTHDAY: '5',\n};\n\n// field的额外校验字段\nexport const KYC_RULE_EXT_KEY = 'kycRuleExtList';\n\n// simple group key\nconst SIMPLE_GROUP_KEY = 'kycGroupList';\n\n// 特殊的 Region field id\nexport const REGION_FIELD_ID = 1017;\n\n// 特殊的 Preferred Notification Language field id\nexport const NC_LANG_FIELD_ID = 1016;\n\n// multi group { key: id } map\nconst MULTI_GROUP_KEY_TO_ID_MAP = {\n  idDetailList: 100, // ID Details\n  certificatelList: 200, // Certificate Details\n  contactList: 300, // Organization Contact Details\n  directorDetailList: 500, // Director Details\n  bankCardList: 1006, // Bank Detail\n};\n\n// 多值kyc group key array\nconst MULTI_GROUP_KEY_ARRAY = Object.keys(MULTI_GROUP_KEY_TO_ID_MAP);\n\n// 多值kyc group id array\nexport const MULTI_GROUP_ID_ARRAY = Object.values(MULTI_GROUP_KEY_TO_ID_MAP);\n\n// multi group { id: key } map\nconst MULTI_GROUP_ID_TO_KEY_MAP = MULTI_GROUP_ID_ARRAY.reduce((pre, cur, index) => {\n  pre[cur] = MULTI_GROUP_KEY_ARRAY[index];\n  return pre;\n}, {});\n\nexport const ADD_BUTTON_TEXT = {\n  100: 'ID',\n  200: 'Certificate',\n  300: 'Contact',\n  500: 'Director',\n  1006: 'Bank',\n};\n\n/**\n * 判断是否是多值kyc\n * @param {String} kycGroupKey kyc group id\n * @returns {Boolean}\n */\nexport function isMultiKYCGroupType(kycGroupKey) {\n  return MULTI_GROUP_ID_ARRAY.includes(kycGroupKey);\n}\n\n/**\n * 处理 KYC Field所需的额外字段\n * @param {Object} field 每个kyc字段\n * @param {Number} index 列序号\n * @param {String} mode kyc 组件当前模式\n */\nfunction dealFieldAdditionalData(field, index, mode) {\n  // 多值kyc特殊的关联必选逻辑\n  field.multiRelevancyMandatory = false;\n  // 多值kyc表格第一列的交互\n  field.multiDisabled = (mode === 'create' && index === 0) || mode === 'edit' ? false : true;\n  // 表单组件每个field双向绑定的值\n  // 兼容处理 Detail Info 和 Edit Info\n  field.fieldValue = (['edit', 'create'].includes(mode) ? field['value'] : field['displayValue']) || '';\n}\n\n/**\n * 给字典数据排序\n * @param {Object} field 每个字段的配置数据\n */\nfunction sortDataDictItems(field) {\n  let { dataDictItems } = field;\n  if (dataDictItems) {\n    dataDictItems.sort((a, b) => a.displayOrder - b.displayOrder);\n  }\n}\n\n// ------------------------------ 处理 create 的数据 -------------------------------------------- /\n/**\n * 处理实体 KYC 配置查询接口返回的原始配置\n * @param {Object} responseData 实体 KYC 配置查询接口返回的原始配置\n * @returns {{}}\n */\nexport function dealIdentityKYCConfig(responseData) {\n  let configData = {};\n  const keys = Object.keys(responseData);\n\n  keys.forEach((key) => {\n    let data = responseData[key];\n    if (MULTI_GROUP_KEY_ARRAY.includes(key)) {\n      // 处理多值kyc\n      // 过滤无效数据\n      data = data[0];\n      if (data && data.groupId && data.realDisplayName) {\n        configData[data.groupId] = data;\n      }\n    } else if (key === SIMPLE_GROUP_KEY) {\n      // 处理单值kyc\n      // 过滤无效数据\n      data = data\n        .filter((group) => !MULTI_GROUP_ID_ARRAY.includes(group.groupId))\n        .filter((group) => group.realDisplayName && group.groupId);\n      data.forEach((group) => {\n        configData[group.groupId] = group;\n      });\n    }\n  });\n\n  return configData;\n}\n\n/**\n * 将 kyc 配置数据 转化为 kyc表单组件渲染数据\n * @param {Object} config 实体 kyc 配置数据\n * @returns {{}}\n */\nexport function convertKYCConfig2FormData(config) {\n  let formData = {};\n  const kycData = Object.values(config);\n  kycData.forEach((groupItem) => {\n    const { groupId, kycFields, realDisplayName, description, displayOrder } = groupItem;\n    // 1、处理每一个field\n    // 1.1 给每个field进行排序\n    kycFields.sort((a, b) => a.displayOrder - b.displayOrder);\n    // 1.2 过滤出 enable === 'true' 的field\n    // 1.3 过滤掉无效的字段\n    // 1.4 添加配置\n    const newkycFields = kycFields\n      .filter((field) => field.enable === 'true' && field.fieldId && field.fieldName && field.fieldType)\n      .map((field, index) => {\n        let newField = {\n          ...field,\n          propPath: `${groupId}.kycFields.${index}.fieldValue`, // 表单校验需要的prop\n        };\n        // 1.4.2 添加field所需字段\n        dealFieldAdditionalData(newField, index, 'create');\n        // 1.4.3 给有数据字典的field添加map，用在review模式中的数据回显\n        if (newField.dataDictItems && Array.isArray(newField.dataDictItems)) {\n          newField.dataDictItemsMap = newField.dataDictItems.reduce((pre, cur) => {\n            pre[cur['value']] = cur['defaultName'];\n            return pre;\n          }, {});\n        }\n        // 1.4.4 给字典值排序\n        sortDataDictItems(newField);\n        return newField;\n      });\n    // 2、处理group\n    const newGroupItem = {\n      groupId,\n      realDisplayName,\n      description, // config 没有相关字段\n      displayOrder,\n      kycFields: newkycFields,\n    };\n    if (isMultiKYCGroupType(groupId)) {\n      // 表单组件双向绑定值的数组\n      // 多值kyc默认添加一行\n      newGroupItem.fieldValues = [cloneDeep(newkycFields)];\n      newGroupItem.isArrayGroupField = true;\n    }\n    formData[groupId] = newGroupItem;\n  });\n\n  return cloneDeep(formData);\n}\n\n/**\n * 获取kyc中所有的必填项字段\n * @param {Object} formData kyc-form的最终渲染数据\n * @returns 必填项的列表\n */\nexport function getMandatoryFieldId(formData) {\n  let mandatoryList = [];\n  const formDataValues = Object.values(formData);\n  formDataValues.forEach((group) => {\n    const { kycFields = [] } = group;\n    kycFields.forEach((field) => {\n      if (field['mandatory'] === 'true') {\n        mandatoryList.push(field.fieldId);\n      }\n    });\n  });\n  return mandatoryList;\n}\n\n/**\n * 创建时有kyc数据需要回显\n * @param {Object} configData\n * @param {Object} echoData\n */\nexport function addKYCEchoData(configData, echoData) {\n  let echoConfigData = cloneDeep(configData);\n\n  // 先回显单值kyc吧，多值的没数据\n  let simpleEchoData = echoData['kycGroupList'];\n  simpleEchoData.forEach((item) => {\n    const { kycGroupId, kycFieldId, inputValue = '' } = item;\n    let { kycFields = [] } = echoConfigData[kycGroupId] || {};\n    for (let i = 0; i < kycFields.length; i++) {\n      if (kycFields[i].fieldId === kycFieldId) {\n        kycFields[i]['value'] = inputValue;\n        break;\n      }\n    }\n  });\n\n  return echoConfigData;\n}\n\n// ------------------------------ 处理 request 的数据 -------------------------------------------- /\n/**\n * 将kyc组件的渲染数据 转化为 接口存储入参\n * @param {Object} formKYCData kyc表单组件的渲染数据\n * @param {String} type 用来区分编辑 updateKYC 时，多值kyc需要多传一个 recordId 字段\n * @param {Object} multiRecordIdMap 可编辑数据中的所有多值kyc的recordId map\n * @returns {{}}\n */\nexport function convertKYC2RequestParams(formKYCData = {}, type, multiRecordIdMap) {\n  let formData = cloneDeep(formKYCData);\n  let identityKYCData = {\n    [SIMPLE_GROUP_KEY]: [], // 预留给单值kyc的位置\n  };\n  const groupIds = Object.keys(formData);\n\n  groupIds.forEach((groupId) => {\n    if (MULTI_GROUP_ID_ARRAY.includes(parseInt(groupId))) {\n      let key = MULTI_GROUP_ID_TO_KEY_MAP[groupId];\n      // 生成多值 KYC 的接口请求参数\n      let multiResult = convertMultiGroupParams(formData[groupId], type, multiRecordIdMap);\n      if (multiResult.length && multiResult[0].kycFields.length) {\n        // 因为会给多值kyc一行默认数据，这里传参的时候要确认一下是否为空数据\n        identityKYCData[key] = multiResult;\n      }\n    } else {\n      identityKYCData[SIMPLE_GROUP_KEY] = identityKYCData[SIMPLE_GROUP_KEY].concat(\n        convertSimpleGroupParams(formData[groupId], type)\n      );\n    }\n  });\n\n  return identityKYCData;\n}\n\n/**\n * 将多值KYC转化为请求参数\n * @param {Object} groupData kyc group data\n * @param {String} type 用来区分更新时的逻辑\n * @param {Object} multiRecordIdMap 可编辑数据中的所有多值kyc的recordId map\n * @returns {[]}\n */\nfunction convertMultiGroupParams(groupData, type, multiRecordIdMap) {\n  const { fieldValues, groupId } = groupData;\n\n  // 给每一组值都加上 kyc group 信息\n  const multiGroupParam = fieldValues.map((rowData, rowIndex) => {\n    let row = {\n      kycGroupId: groupId,\n    };\n    // 还要过滤无用项\n    let filterRowData = rowData.filter((field) => filterField(field));\n    if (type === 'update') {\n      // 编辑时，多值kyc需要把每条数据的 recodeId传递给后端\n      let field = filterRowData[0] || {};\n      let multiMap = multiRecordIdMap[groupId];\n      if (field['groupRecordId']) {\n        // 当前记录中保存了 recodeId\n        row.recordId = field['groupRecordId'];\n      } else if (multiMap[rowIndex]) {\n        // 检查编辑接口返回的数据中，是否有这条数据的recodeId（删掉一行后重新添加一行）\n        row.recordId = multiMap[rowIndex];\n      }\n      // 编辑时，需要给后端传入全量field的值（没有值就传null），后端一一比对更新\n      // 所以不需要过滤\n      if (filterRowData.length !== 0) {\n        // 不是全空的一行\n        filterRowData = rowData;\n      }\n    }\n    row.kycFields = filterRowData.map((field) => {\n      let res = {\n        inputValue: getInputValue(field) || null,\n        kycFieldId: field.fieldId,\n      };\n      if (type === 'update' && field.sensitive === '1') {\n        // 敏感字段更新时，需要添加可识别的 敏感字段\n        res['sensitive'] = '1';\n      }\n      return res;\n    });\n    return row;\n  });\n\n  return multiGroupParam;\n}\n\n/**\n * 将单值KYC转化为请求参数\n * @param {Object} groupData kyc group data\n * @param {String} type 用来区分更新时的逻辑\n * @returns {[]}\n */\nfunction convertSimpleGroupParams(groupData, type) {\n  let { groupId, kycFields } = groupData;\n\n  if (type === 'update') {\n    // 编辑时，需要给后端传入全量field的值（没有值就传null），后端一一比对更新，所以不需要过滤\n  } else {\n    // 非更新场景下，还要过滤无用项\n    kycFields = kycFields.filter((field) => filterField(field));\n  }\n  const simpleGroupList = kycFields.map((field) => {\n    // 给每个field加上自己的分组信息\n    return {\n      inputValue: getInputValue(field) || null,\n      kycFieldId: field.fieldId,\n      kycGroupId: groupId,\n    };\n  });\n\n  return simpleGroupList;\n}\n\nfunction filterField(field) {\n  const res = field.fieldValue;\n  return Array.isArray(res) ? res.length : res;\n}\n\nfunction getInputValue(field) {\n  const res = field.fieldValue;\n  return Array.isArray(res) ? res.join(',') : res;\n}\n\n/**\n * 获取编辑数据中所有多值kyc的recordId-map\n * @param {Object} formData kyc-form的渲染数据\n * @returns 编辑数据中所有多值kyc的recordId-map\n */\nexport function getMultiRecordIdMap(formData = {}) {\n  let multiRecordIdMap = {};\n  let keys = Object.keys(formData).map((key) => parseInt(key));\n  keys.forEach((key) => {\n    if (isMultiKYCGroupType(key)) {\n      let fieldValues = formData[key].fieldValues;\n      let recordIdList = fieldValues.map((row) => row[0].groupRecordId);\n      multiRecordIdMap[key] = recordIdList;\n    }\n  });\n  return multiRecordIdMap;\n}\n\n/**\n * diff出此次KYC编辑的提交，是否有kyc字段的改动\n * @param {Object} initEdit 编辑初始化时，生成的请求参数\n * @param {Objtec} submit 编辑提交时，生成的请求参数\n * @returns equal 没有变动\n */\nexport function equalSubmitAndInitEdit(initEdit, submit) {\n  let equal = true;\n  let initEditSimple = initEdit[SIMPLE_GROUP_KEY];\n  let submitSimple = submit[SIMPLE_GROUP_KEY];\n  // 先对比单值kyc的数据\n  for (let i = 0; i < submitSimple.length; i++) {\n    const { kycFieldId, kycGroupId, inputValue } = submitSimple[i];\n    const initEditSimpleField = initEditSimple.find(\n      (field) => field['kycFieldId'] === kycFieldId && field['kycGroupId'] === kycGroupId\n    );\n    if (!initEditSimpleField || initEditSimpleField['inputValue'] !== inputValue) {\n      // 没找到相同的field 或者 字段值有变动\n      equal = false;\n      break;\n    }\n  }\n  if (equal === false) {\n    // 单值kyc里有修改，而导致不相同\n    return equal;\n  }\n\n  // 再对比对多值kyc的数据\n  delete submit[SIMPLE_GROUP_KEY];\n  delete initEdit[SIMPLE_GROUP_KEY];\n  const multiKeys = Object.keys(submit);\n  const initEditMultiKeys = Object.keys(initEdit);\n  if (multiKeys.length !== initEditMultiKeys.length) {\n    equal = false;\n    return equal;\n  }\n\n  for (let i = 0; i < multiKeys.length; i++) {\n    // 对比所有多值kyc\n    const key = multiKeys[i];\n    const submitGroup = submit[key];\n    const initEditGroup = initEdit[key];\n    // 增加/删掉了一行数据\n    if (submitGroup.length !== initEditGroup.length) {\n      equal = false;\n      break;\n    }\n\n    for (let j = 0; j < submitGroup.length; j++) {\n      // 对比多值kyc的每一行\n      const { recordId, kycFields } = submitGroup[j];\n      if (recordId) {\n        const initEditRow = initEditGroup.find((row) => row['recordId'] === recordId) || {};\n        const initEditKYCFields = initEditRow['kycFields'];\n        let fieldDiff = false;\n        for (let k = 0; k < kycFields.length; k++) {\n          // 对比相同行中的每个field\n          const { inputValue, kycFieldId } = kycFields[k];\n          const initEditSameField = initEditKYCFields.find((field) => field['kycFieldId'] === kycFieldId);\n          if (!initEditSameField || initEditSameField['inputValue'] !== inputValue) {\n            fieldDiff = true;\n            equal = false;\n            break;\n          }\n        }\n        if (fieldDiff === true) {\n          // 这一行中有一个field对不上\n          break;\n        }\n      } else {\n        // 提交时，多值kuc组中没有recordId，说明是新增的\n        equal = false;\n        break;\n      }\n    }\n  }\n\n  return equal;\n}\n\n// ------------------------------ 处理 detail 的数据 -------------------------------------------- /\n/**\n * 将 kyc detail data 转化为 组件渲染数据\n * @param {Object} identityKYCData 保存下来的kyc详情数据\n * @param {String} mode 用来区分处理 editInfo\n * @returns {{}} 可渲染的表单数据\n */\nexport function convertKYCDetail2FormData(identityKYCData = {}, mode) {\n  let kycFormData = {};\n  const keys = Object.keys(identityKYCData);\n  const cloneIdentityKYCData = cloneDeep(identityKYCData);\n  for (let i = 0; i < keys.length; i++) {\n    const key = keys[i];\n    const data = cloneIdentityKYCData[key];\n    if (!Array.isArray(data) || data.length === 0) {\n      // 无效值 bankCardList 会等于 null / 空数组 []\n      continue;\n    }\n    if (MULTI_GROUP_KEY_ARRAY.includes(key)) {\n      let result = convertMultiKYCGroupData(data, mode);\n      if (result) {\n        kycFormData[MULTI_GROUP_KEY_TO_ID_MAP[key]] = result;\n      }\n    } else if (key === SIMPLE_GROUP_KEY) {\n      let simpleKYCGroups = convertSimpleKYCGroupData(data, mode);\n      kycFormData = { ...kycFormData, ...simpleKYCGroups };\n    } else {\n    }\n  }\n  return kycFormData;\n}\n\n/**\n * 转换 detail 数据中的 多值kyc\n * @param {Array} multiGroupDetailData detail数据中的 多值kyc数据\n * @param {String} mode 用来区分处理 editInfo\n * @returns 可渲染的 多值kyc group\n */\nfunction convertMultiKYCGroupData(multiGroupDetailData = [], mode) {\n  // 1、获取 group 配置\n  let multiKYCGroup = cloneDeep(multiGroupDetailData)[0];\n  // 1.2、过滤掉无效的数据\n  if (!(multiKYCGroup.realDisplayName && multiKYCGroup.groupId)) {\n    return null;\n  }\n\n  // 2、过滤掉无效的 field 配置\n  multiKYCGroup.kycFields = multiKYCGroup.kycFields.filter(\n    (field) => field.enable === 'true' && field.fieldId && field.fieldName && field.fieldType\n  );\n  const enableFields = [];\n  // 3、重置 kycFields 配置\n  multiKYCGroup.kycFields.forEach((field, fieldIdx) => {\n    // 添加field所需字段\n    dealFieldAdditionalData(field, fieldIdx, mode);\n    // 给字典值排序\n    sortDataDictItems(field);\n    field['inputValue'] = null;\n    field['displayValue'] = null;\n    field['fieldValue'] = '';\n    // 收集 enable = 'true' 的field\n    enableFields.push(field.fieldId);\n  });\n  delete multiKYCGroup['recordId'];\n\n  // 4、kycFields 表头数据排序\n  multiKYCGroup.kycFields.sort((a, b) => a.displayOrder - b.displayOrder);\n\n  // 5、获取已配置 kycFields 的数据\n  multiKYCGroup.fieldValues = multiGroupDetailData.map((row) => {\n    let kycFields = cloneDeep(row.kycFields);\n    kycFields.forEach((field) => {\n      // 5.1、因为接口返回的多值kyc详情中，只有第一条数据包含了配置项，这里需要给其他行数据加上 enable 的配置\n      if (enableFields.includes(field.fieldId)) {\n        field['enable'] = 'true';\n      }\n      if (mode === 'edit') {\n        // 5.2、editInfo 需要额外处理多值kyc每组数据自带的 recodeId。\n        // 给每一行的field都加上group的recordId，防止编辑过程中丢失\n        field['groupRecordId'] = row.recordId;\n      }\n    });\n    // 5.3、 过滤无效的字段\n    kycFields = kycFields.filter((field) => field.enable === 'true' && field.fieldId && field.fieldType);\n    return kycFields;\n  });\n  // 避免空数据影响\n  multiKYCGroup.fieldValues = multiKYCGroup.fieldValues.filter((item) => item.length);\n  // 5.3、对field进行渲染排序\n  multiKYCGroup.fieldValues.forEach((row) => {\n    row.sort((a, b) => a.displayOrder - b.displayOrder);\n  });\n  // 5.4、加工field\n  multiKYCGroup.fieldValues.forEach((row, rowIdx) => {\n    row.forEach((field, fieldIdx) => {\n      field.propPath = `${multiKYCGroup.groupId}.fieldValues.${rowIdx}.${fieldIdx}.fieldValue`;\n      // 添加field所需字段\n      dealFieldAdditionalData(field, fieldIdx, mode);\n      // 给字典值排序\n      sortDataDictItems(field);\n    });\n  });\n\n  return cloneDeep(multiKYCGroup);\n}\n\n/**\n * 转换 detail 数据中的 单值kyc\n * @param {Array} kycGroupList detail数据中的 单值kyc数据\n * @param {String} mode 用来区分处理 editInfo\n * @returns 可渲染的 单值kyc group\n */\nfunction convertSimpleKYCGroupData(kycGroupList = [], mode) {\n  let simpleKYCGroups = {};\n\n  // 1、去掉当中的 多值kyc group\n  // 1.2、过滤掉无效的数据\n  let simpleKYCGroupsArr = kycGroupList\n    .filter((group) => !MULTI_GROUP_ID_ARRAY.includes(group.groupId))\n    .filter((group) => group.realDisplayName && group.groupId);\n\n  // 处理每组单值kyc的map\n  simpleKYCGroupsArr.forEach((group) => {\n    const groupId = group.groupId;\n    // 2、过滤掉无效的 field\n    group.kycFields = group.kycFields.filter(\n      (field) => field.enable === 'true' && field.fieldId && field.fieldName && field.fieldType\n    );\n    // 3、对每组的fields进行展示排序\n    group.kycFields.sort((a, b) => a.displayOrder - b.displayOrder);\n    // 4、加工每个field\n    group.kycFields.forEach((field, index) => {\n      // 表单校验需要的prop\n      field.propPath = `${groupId}.kycFields.${index}.fieldValue`;\n      // 添加field所需字段\n      dealFieldAdditionalData(field, index, mode);\n      // 给字典值排序\n      sortDataDictItems(field);\n    });\n    // 5、添加单值kyc组的映射\n    simpleKYCGroups[groupId] = group;\n  });\n\n  return cloneDeep(simpleKYCGroups);\n}\n\n// ------------------------------ 处理 edit 的数据 -------------------------------------------- /\n/**\n * 转化 实体实例的 editInfo\n * @param {Object} kycEditInfo 实体实例可编辑的KYC数据\n * @returns 渲染页面的formData\n */\nexport function convertKYCEditInfo2FormData(kycEditInfo = {}) {\n  return convertKYCDetail2FormData(kycEditInfo, 'edit');\n}\n\n// ------------------------------ 处理 region tree 的数据 -------------------------------------------- /\n/**\n * 将region tree的节点按照 displayOrder 进行排序\n * @param {Array} treeData region的数据\n */\nexport function sortRegionTreeNode(treeData = []) {\n  if (Array.isArray(treeData)) {\n    treeData.sort((pre, curr) => pre.displayOrder - curr.displayOrder);\n    treeData.forEach((node) => {\n      const { regionInfoTreeDatas } = node;\n      if (Array.isArray(regionInfoTreeDatas)) {\n        sortRegionTreeNode(regionInfoTreeDatas);\n      }\n    });\n  }\n}\n\n/**\n * 返回 region树 每个节点 code -> fullName 的映射\n * @param {Array} treeData region的数据\n * @returns 每个节点 code -> fullName 的映射\n */\nexport function getRegionCode2FullNameMap(treeData = []) {\n  let map = {};\n  map = treeData.reduce((pre, curNode) => {\n    pre[curNode['regionCode']] = curNode['fullName'];\n    return Array.isArray(curNode.regionInfoTreeDatas)\n      ? Object.assign(pre, getRegionCode2FullNameMap(curNode.regionInfoTreeDatas))\n      : pre;\n  }, {});\n  return map;\n}\n\n// ------------------------------ 处理 workflow 对比修改kyc前后 不同的需求 -------------------------------------------- /\nexport function getWorkflowDiff(field) {\n  return field['isModifyed'] || field['isNewlyIncreased'] || field['isDeleted'] || false;\n}\n\n// ------------------------------ 处理 workflow 对比删除kyc前后 不同的需求 -------------------------------------------- /\nexport function getWorkflowDelete(field) {\n  return field['isDeleted'] || false;\n}","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=081459b7&prod&lang=scss&scoped=true&\""],"sourceRoot":""}