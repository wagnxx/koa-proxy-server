(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ef3d286a"],{"0154":function(t,e,a){},"01ba":function(t,e,a){"use strict";a("c1bc")},"0913":function(t,e,a){},"13fb":function(t,e,a){"use strict";a("44f5")},"2d9d":function(t,e,a){"use strict";a("5dac")},"347e":function(t,e,a){"use strict";a("b180")},3604:function(t,e,a){"use strict";a("c789")},"3ddd":function(t,e,a){},"3def":function(t,e,a){},"3ed3":function(t,e,a){"use strict";a("3ddd")},4435:function(t,e,a){"use strict";a("d8ad")},"44f5":function(t,e,a){},4865:function(t,e,a){"use strict";a.d(e,"r",(function(){return o})),a.d(e,"s",(function(){return r})),a.d(e,"g",(function(){return n})),a.d(e,"u",(function(){return l})),a.d(e,"n",(function(){return c})),a.d(e,"l",(function(){return d})),a.d(e,"m",(function(){return u})),a.d(e,"a",(function(){return f})),a.d(e,"A",(function(){return p})),a.d(e,"v",(function(){return m})),a.d(e,"c",(function(){return h})),a.d(e,"w",(function(){return g})),a.d(e,"y",(function(){return b})),a.d(e,"x",(function(){return v})),a.d(e,"t",(function(){return C})),a.d(e,"o",(function(){return y})),a.d(e,"j",(function(){return k})),a.d(e,"d",(function(){return I})),a.d(e,"z",(function(){return D})),a.d(e,"k",(function(){return O})),a.d(e,"f",(function(){return T})),a.d(e,"q",(function(){return S})),a.d(e,"p",(function(){return F})),a.d(e,"B",(function(){return $})),a.d(e,"h",(function(){return _})),a.d(e,"b",(function(){return j})),a.d(e,"e",(function(){return z})),a.d(e,"i",(function(){return P}));var i=a("0bbd"),s=a("5f9a");function o(t){return Object(i["a"])({url:"/fintech/v1/orgOperator/queryOrgOperatorList",method:"post",data:t})}function r(t){return Object(i["a"])({url:Object(s["a"])("/fintech/v1/organization/list",t),method:"get"})}function n(t){return Object(i["a"])({url:Object(s["a"])("/fintech/v1/orgOperator/changeStatus"),method:"post",data:t})}function l(t){return Object(i["a"])({url:Object(s["a"])("/fintech/v1/orgOperator/status",t),method:"get"})}function c(t){return Object(i["a"])({url:Object(s["a"])("/fintech/v1/orgOperator/closeOrgOperator"),method:"post",data:t})}function d(t){return Object(i["a"])({url:"/fintech/v1/identity/verify/"+t,method:"post",data:{}})}function u(t){return Object(i["a"])({url:"/fintech/v1/identity/verify/userName",method:"post",data:t})}function f(t){return Object(i["a"])({url:"/fintech/v1/orgOperator/create",method:"post",data:t})}function p(t){return Object(i["a"])({url:"/fintech/v1/orgOperator/roles",method:"post",data:t})}function m(t){return Object(i["a"])({url:Object(s["a"])("/fintech/v1/orgOperator/detail",t),method:"get"})}function h(t){return Object(i["a"])({url:"/fintech/v1/orgOperator/changeIdentityLanguage",method:"post",data:t})}function g(t){return Object(i["a"])({url:"/fintech/v1/orgOperator/pin/reset",method:"post",data:t})}function b(t){return Object(i["a"])({url:"/fintech/v1/orgOperator/pin/unlock",method:"post",data:t})}function v(t){return Object(i["a"])({url:"/fintech/v1/orgOperator/pin/setPassword",method:"post",data:t})}function C(t){return Object(i["a"])({url:"/fintech/v1/orgOperator/getOrgOperatorRuleProfile",method:"post",data:t})}function y(t){return Object(i["a"])({url:"/fintech/v1/orgOperator/getRule",method:"get",data:t})}function k(t){return Object(i["a"])({url:"/fintech/v1/orgOperator/checkMsisdn",method:"post",data:t})}function I(t){return Object(i["a"])({url:"/fintech/v1/orgOperator/changeMsisdn",method:"post",data:t})}function D(t){return Object(i["a"])({url:"/fintech/v1/orgOperator/resetPassword",method:"post",data:t})}function O(t){return Object(i["a"])({url:"/fintech/v1/identity/verify/operatorId",method:"post",data:t})}function T(t){return Object(i["a"])({url:"/fintech/v1/orgOperator/changeOrgOperatorRuleProfile",method:"post",data:t})}const w="/fintech/v1/notification_type";function S(t){return Object(i["a"])({url:Object(s["a"])(w+"/list",t),method:"get"})}function F(t){return Object(i["a"])({url:`${w}/queryInfo?typeId=${t}`,method:"get"})}function $(t){return Object(i["a"])({url:"/fintech/v1/notification/send",method:"post",data:t})}function _(t){return Object(i["a"])({url:"fintech/v1/orgOperator/checkAPIPasswordFormat",method:"post",data:t})}function j(t){return Object(i["a"])({url:"fintech/v1/orgOperator/changeAuthentication",method:"post",data:t})}function z(t){return Object(i["a"])({url:Object(s["a"])("/fintech/v1/changeOrgOperatorRole"),method:"post",data:t})}function P(t){return Object(i["a"])({url:"/fintech/v1/orgOperator/checkInputKyc",method:"post",data:t})}},"4a99":function(t,e,a){},"4f21":function(t,e,a){"use strict";a("6bff")},"52eb":function(t,e,a){"use strict";a("0913")},5826:function(t,e,a){"use strict";a.d(e,"f",(function(){return s})),a.d(e,"n",(function(){return o})),a.d(e,"m",(function(){return r})),a.d(e,"l",(function(){return n})),a.d(e,"p",(function(){return l})),a.d(e,"q",(function(){return c})),a.d(e,"o",(function(){return d})),a.d(e,"j",(function(){return u})),a.d(e,"h",(function(){return f})),a.d(e,"d",(function(){return p})),a.d(e,"a",(function(){return m})),a.d(e,"k",(function(){return h})),a.d(e,"e",(function(){return g})),a.d(e,"g",(function(){return b})),a.d(e,"b",(function(){return v})),a.d(e,"c",(function(){return C})),a.d(e,"i",(function(){return y})),a.d(e,"r",(function(){return k}));var i=a("0bbd");function s(t){return Object(i["a"])({url:"/fintech/v1/customer/queryAccountType",method:"post",data:t})}function o(t){return Object(i["a"])({url:"/fintech/v1/customer/product",method:"post",data:t})}function r(t){return Object(i["a"])({url:"/fintech/v1/customer/loadRange",method:"get",data:t})}function n(t){return Object(i["a"])({url:"/fintech/v1/customer/languages",method:"get",data:t})}function l(t){return Object(i["a"])({url:"/fintech/v1/customer/checkRange",method:"post",data:t})}function c(t){return Object(i["a"])({url:"/fintech/v1/customer/trustLevelAndSegment",method:"post",data:t})}function d(t){return Object(i["a"])({url:"/fintech/v1/customer/addCustomer",method:"post",data:t})}function u(t){return Object(i["a"])({url:"/fintech/v1/queryCustomerIdentity/msisdn",method:"post",data:t})}function f(t){return Object(i["a"])({url:"/fintech/v1/queryBusinessCustomerList",method:"post",data:t})}function p(t){return Object(i["a"])({url:"/fintech/v1/customer/getStatusList",method:"post",data:t})}function m(t){return Object(i["a"])({url:"/fintech/v1/customer/changeStatus",method:"post",data:t})}function h(t){return Object(i["a"])({url:"/fintech/v1/queryCustomerInfo",method:"post",data:t})}function g(t){return Object(i["a"])({url:"/fintech/v1/beneficiaryMgt/lookUpBeneficiary/"+t,method:"get",data:t})}function b(t){return Object(i["a"])({url:"/fintech/v1/customer/assign/product",method:"post",data:t})}function v(t){return Object(i["a"])({url:"/fintech/v1/customer/checkInputKyc",method:"post",data:t})}function C(){return Object(i["a"])({url:"/fintech/v1/customer/getIdType",method:"get"})}function y(t){return Object(i["a"])({url:"/fintech/v1/groupMember/queryCustomerGroup",method:"post",data:t})}function k(t){return Object(i["a"])({url:"/fintech/v1/imtOrgTransaction/upgradeCustomer",method:"post",data:t})}},"5dac":function(t,e,a){},6069:function(t,e,a){},6157:function(t,e,a){"use strict";a("abd9")},"64e7":function(t,e,a){"use strict";var i=a("0360"),s=a("5c96");e["a"]={downLoadFile:function(t,e,a,o){let r=new XMLHttpRequest;r.open(a||"POST",t,!0),r.setRequestHeader("Content-type","application/json"),o&&r.setRequestHeader("X-XSRF-TOKEN",i["default"].get("O-XSRF-TOKEN")),r.setRequestHeader("o-token",i["default"].get("o-token")),r.setRequestHeader("Cache-Control","no-store, max-age=0, must-revalidate"),r.responseType="blob",r.onload=function(){if(200===this.status){let t=this.response,e=r.getResponseHeader("content-disposition").split(";")[1].split("filename=")[1],a=decodeURIComponent(e),i=URL.createObjectURL(t),s=document.createElement("a");s.href=i,s.download=a,s.click()}else s["MessageBox"].alert("Download failed.","Error",{type:"error",confirmButtonText:"Confirm"})},r.send(JSON.stringify(e))}}},"66fe":function(t,e,a){},"67bd":function(t,e,a){"use strict";a("f64c")},"6bff":function(t,e,a){},"6e1c":function(t,e,a){"use strict";a("0154")},"6e79":function(t,e,a){},"7b19":function(t,e,a){"use strict";a("c243")},"7f33":function(t,e,a){},"82c8":function(t,e,a){"use strict";a("66fe")},8550:function(t,e,a){"use strict";a("ff72")},"8e76":function(t,e,a){"use strict";a.d(e,"n",(function(){return o})),a.d(e,"j",(function(){return r})),a.d(e,"t",(function(){return n})),a.d(e,"w",(function(){return l})),a.d(e,"h",(function(){return c})),a.d(e,"o",(function(){return d})),a.d(e,"q",(function(){return u})),a.d(e,"a",(function(){return f})),a.d(e,"d",(function(){return p})),a.d(e,"k",(function(){return m})),a.d(e,"m",(function(){return h})),a.d(e,"v",(function(){return g})),a.d(e,"s",(function(){return b})),a.d(e,"x",(function(){return v})),a.d(e,"i",(function(){return C})),a.d(e,"p",(function(){return y})),a.d(e,"b",(function(){return k})),a.d(e,"g",(function(){return I})),a.d(e,"u",(function(){return D})),a.d(e,"c",(function(){return O})),a.d(e,"l",(function(){return T})),a.d(e,"f",(function(){return w})),a.d(e,"e",(function(){return S})),a.d(e,"r",(function(){return F}));var i=a("0bbd"),s=a("5f9a");a("64e7");function o(t){return Object(i["a"])({url:"/fintech/v1/workFlow/queryMyToDoTask",method:"post",data:t})}function r(t){return Object(i["a"])({url:"/fintech/v1/workFlow/queryGroupTask",method:"post",data:t})}function n(t){return Object(i["a"])({url:"/fintech/v1/workFlow/task-type/list",method:"post",data:t})}function l(t){return Object(i["a"])({url:"/fintech/v1/workFlow/workFlow-name/list",method:"post",data:t})}function c(t){return Object(i["a"])({url:"/fintech/v1/workFlow/spOperator/list",method:"post",data:t})}function d(t){return Object(i["a"])({url:"/fintech/v1/orgOperator/queryOrgOperatorList",method:"post",data:t})}function u(t){return Object(i["a"])({url:"/fintech/role/v1/list",method:"post",data:t})}function f(t){return Object(i["a"])({url:"/fintech/v1/workflow/mytask/task/batchProcess",method:"post",data:t})}function p(t){return Object(i["a"])({url:"/fintech/v1/workFlow/queryActiveTask",method:"post",data:t})}function m(t){return Object(i["a"])({url:"/fintech/v1/workFlow/queryHistoryTask",method:"post",data:t})}function h(t){return Object(i["a"])({url:"/fintech/v1/workFlow/queryInitiatedWorkflow",method:"post",data:t})}function g(t){return Object(i["a"])({url:"/fintech/v1/workFlow/data-dict/list",method:"post",data:t})}function b(t){return Object(i["a"])({url:"/fintech/v1/workflow/process/details",method:"post",data:t})}function v(t){return Object(i["a"])({url:"/fintech/v1/searchTransactionByOrderId",method:"post",data:t})}function C(t){return Object(i["a"])({url:"/fintech/v1/transaction/order/orderDetail",method:"post",data:t})}function y(t){return Object(i["a"])({url:"/fintech/v1/orgOperator/detail?receiverIdentityId="+t,method:"get"})}function k(t){return Object(i["a"])({url:"fintech/v1/workFlow/process/backToInitiator",method:"post",data:t})}function I(t){return Object(i["a"])({url:Object(s["a"])("/fintech/v1/bulk/task/plan/detail?planID="+t),method:"get"})}function D(t){return Object(i["a"])({url:"/fintech/v1/bulk/task/plan/validRecords",params:t})}function O(t){return Object(i["a"])({url:"/fintech/v1/workflow/process/kycDetails",method:"post",data:t})}function T(){return Object(i["a"])({url:"/fintech/v1/organization/languages",method:"get"})}const w=t=>Object(i["a"])({url:"/fintech/v1/workFlow/process/backToInitiator",method:"post",data:t});function S(t){return Object(i["a"])({url:"fintech/v1/workFlow/process/backKycToInitiator",method:"post",data:t})}const F=t=>Object(i["a"])({url:"/fintech/v1/organization/querySubscribeProductsForWorkFlow",method:"post",data:t})},9475:function(t,e,a){},"99ca":function(t,e,a){"use strict";a("f32b")},"99d1":function(t,e,a){"use strict";a("b6ba")},a7427:function(t,e,a){"use strict";a("d517")},a796:function(t,e,a){"use strict";a("6e79")},a873:function(t,e,a){"use strict";a("9475")},abd9:function(t,e,a){},b180:function(t,e,a){},b468:function(t,e,a){"use strict";a("4a99")},b4f8:function(t,e,a){},b6ba:function(t,e,a){},c1bc:function(t,e,a){},c243:function(t,e,a){},c789:function(t,e,a){},cb9d:function(t,e,a){"use strict";a.d(e,"u",(function(){return o})),a.d(e,"G",(function(){return r})),a.d(e,"j",(function(){return n})),a.d(e,"x",(function(){return l})),a.d(e,"d",(function(){return c})),a.d(e,"w",(function(){return d})),a.d(e,"i",(function(){return u})),a.d(e,"t",(function(){return f})),a.d(e,"s",(function(){return p})),a.d(e,"v",(function(){return m})),a.d(e,"O",(function(){return h})),a.d(e,"g",(function(){return g})),a.d(e,"h",(function(){return b})),a.d(e,"I",(function(){return v})),a.d(e,"A",(function(){return C})),a.d(e,"b",(function(){return y})),a.d(e,"F",(function(){return k})),a.d(e,"e",(function(){return I})),a.d(e,"o",(function(){return D})),a.d(e,"l",(function(){return O})),a.d(e,"r",(function(){return T})),a.d(e,"q",(function(){return w})),a.d(e,"K",(function(){return S})),a.d(e,"n",(function(){return F})),a.d(e,"D",(function(){return $})),a.d(e,"a",(function(){return _})),a.d(e,"J",(function(){return j})),a.d(e,"C",(function(){return z})),a.d(e,"N",(function(){return P})),a.d(e,"E",(function(){return L})),a.d(e,"m",(function(){return A})),a.d(e,"B",(function(){return N})),a.d(e,"p",(function(){return x})),a.d(e,"y",(function(){return B})),a.d(e,"L",(function(){return R})),a.d(e,"M",(function(){return K})),a.d(e,"z",(function(){return E})),a.d(e,"c",(function(){return V})),a.d(e,"f",(function(){return M})),a.d(e,"H",(function(){return Y})),a.d(e,"k",(function(){return H}));var i=a("0bbd"),s=a("5f9a");function o(t){return Object(i["a"])({url:Object(s["a"])("/fintech/v1/organization/list",t),method:"get"})}function r(t){return t.pageNo&&(t.pageIndex=t.pageNo,delete t.pageNo),Object(i["a"])({url:"/fintech/v1/organization/queryOrgListByPage",method:"POST",data:t})}function n(t){return Object(i["a"])({url:"/fintech/v1/identity/verify/"+t,method:"post",data:{}})}function l(t){return Object(i["a"])({url:"fintech/v1/organization/changeStatus",method:"post",data:t})}function c(t){return Object(i["a"])({url:"/fintech/v1/organization/changeOrgName",method:"post",data:t})}function d(){return Object(i["a"])({url:"/fintech/v1/organization/languages",method:"get"})}function u(t){return Object(i["a"])({url:"/fintech/v1/orgOperator/checkRoles",method:"post",data:t})}function f(t){return Object(i["a"])({url:Object(s["a"])("/fintech/v1/organization/detail",t),method:"get"})}function p(t){return Object(i["a"])({url:"/fintech/v1/organization/getChildOrgDetail",method:"post",data:t})}function m(t){return Object(i["a"])({url:Object(s["a"])("/fintech/v1/organization/status",t),method:"get"})}function h(t){return Object(i["a"])({url:"/fintech/v1/organization/updateRuleProfile",method:"post",data:t})}function g(t){return Object(i["a"])({url:"/fintech/v1/identity/verify/merchantName",method:"post",data:t})}function b(t){return Object(i["a"])({url:"/fintech/v1/organization/checkOrganizationName",method:"post",data:t,ignoreError:!0})}function v(t){return Object(i["a"])({url:"/fintech/v1/organization/products",method:"post",data:t})}function C(t){return Object(i["a"])({url:"/fintech/v1/organization/assign/product",method:"post",data:t})}function y(t){return Object(i["a"])({url:"/fintech/v1/organization/create",method:"post",data:t})}function k(t){return Object(i["a"])({url:"/fintech/v1/settlement/queryOrgCommiAgreement",method:"post",data:t,ignoreError:!0})}function I(t){return Object(i["a"])({url:"/fintech/v1/identity/checkRule",method:"post",data:t})}function D(t){return Object(i["a"])({url:"/fintech/v1/identity/generateIdentifier",method:"post",data:t})}function O(t){return Object(i["a"])({url:"/fintech/v1/identity/deleteIdentifier",method:"post",data:t})}function T(){return Object(i["a"])({url:"/fintech/v1/organization/getIdentityTypeEnum",method:"get"})}function w(){return Object(i["a"])({url:"/fintech/v1/organization/getIdentitySubTypeEnum",method:"get"})}function S(t){return Object(i["a"])({url:"/fintech/v1/organization/queryRuleProfileList",method:"post",data:t})}function F(t){return Object(i["a"])({url:"/fintech/v1/organization/downloadChargeProfile",method:"post",data:t,responseType:"blob"})}function $(t){return Object(i["a"])({url:"/fintech/v1/organization/queryChargeProfileList",method:"post",data:t})}function _(t){return Object(i["a"])({url:"/fintech/v1/organization/ChargeProfileRuleList/"+t,method:"get"})}function j(t){return Object(i["a"])({url:"/fintech/v1/organization/queryRuleProfileDetail/"+t,method:"get"})}function z(t){return Object(i["a"])({url:"/fintech/v1/organization/queryChargeProfileDetail",method:"post",data:t})}function P(t){return Object(i["a"])({url:"/fintech/v1/organization/updateChargeProfile",method:"post",data:t})}function L(t){return Object(i["a"])({url:"/fintech/v1/organization/queryChildren",method:"post",data:t})}function A(t){return Object(i["a"])({url:"/fintech/v1/organization/downloadBalanceOverview",method:"post",data:t,responseType:"blob"})}function N(t){return Object(i["a"])({url:"/fintech/v1/organization/queryBalanceOverviewPage",method:"post",data:t})}function x(){return Object(i["a"])({url:"/fintech/v1/organization/queryAccountType",method:"get"})}function B(t){return Object(i["a"])({url:"/fintech/v1/organization/queryAccountType",method:"post",data:t})}function R(t){return Object(i["a"])({url:"/fintech/v1/organization/querySubscribeProducts",method:"post",data:t})}function K(t){return Object(i["a"])({url:"/fintech/v1/organization/trustLevelAndSegment",method:"post",data:t})}function E(t){return Object(i["a"])({url:"/fintech/v1/organization/queryAddProducts",method:"post",data:t})}function V(t){return Object(i["a"])({url:"/fintech/v1/changeOrgProduct",method:"post",data:t})}function M(t){return Object(i["a"])({url:"/fintech/v1/organization/checkInputKyc",method:"post",data:t})}function Y(t){return Object(i["a"])({url:"/fintech/v1/organization/queryOrganizationKYC",method:"post",data:t})}function H(t){return Object(i["a"])({url:"/fintech/v1/organization/close",method:"post",data:t})}},d3f3:function(t,e,a){"use strict";a("6069")},d517:function(t,e,a){},d65a:function(t,e,a){"use strict";a("3def")},d8ad:function(t,e,a){},d8d3:function(t,e,a){"use strict";a.d(e,"c",(function(){return i})),a.d(e,"a",(function(){return s})),a.d(e,"b",(function(){return o}));const i={"00":"New","02":"Pending Active","03":"Active","04":"Suspended","05":"Frozen","06":"Closed","07":"Capped","08":"Dormant"},s={1005:"Web",1007:"Handset",1010:"API"},o={1:"Porta",2:"AG",3:"ThirdParty",4:"System",5:"NC",6:"TransactionCenter",7:"IdentityBusiness",8:"BulkCenter"}},d91c:function(t,e,a){"use strict";var i=function(){var t=this,e=t._self._c;return e("el-dialog",{staticClass:"dialog-portal",class:{"dialog-overflow":t.isOverflowHeight},attrs:{title:t.title,visible:t.visible,width:t.width,"close-on-click-modal":t.closeOnClickModal,"before-close":t.handleClose},on:{"update:visible":function(e){t.visible=e},opened:t.openedDialog,closed:t.closedDialog}},[t._t("operation"),e("div",{staticStyle:{padding:"0 20px"}},[e("el-divider",{staticClass:"dialog-top-divider"})],1),t.dialogSearchFormVisibility?e("portal-form",{ref:"dialogSearchForm",staticClass:"dialog-search-form",attrs:{needBottomLine:t.needSearchFormBottomLine,"form-config-list":t.searchForm.formConfigList,"form-data":t.searchForm.formData,"form-rules":t.formRules,needOperateBtn:t.needSearchOperateBtn,searchBtnLoading:t.searchLoading,smallAutoColumn:t.smallAutoColumn,bigAutoColumn:t.bigAutoColumn},on:{"common-enter-event":t.enterEvent,"reset-btn-click":t.reset,"search-btn-click":t.search}}):t._e(),t.dialogTableVisibility?e("div",{staticClass:"table-container"},[e("table-page",{ref:"dialogTable",attrs:{"is-check":t.dialogTable.isCheck||!0,"is-search":t.tableIsSearch,columns:t.dialogTable.columns||[],"has-pagination":t.dialogTable.hasPagination||!1,pagination:t.dialogTable.paginationConfig||{},getTableData:t.dialogTable.getTableData,"id-key":t.dialogTable.idKey||"id",isSingleCheck:t.isSingleCheck},on:{"selection-change":t.onSelectionChange,"single-selection-change":t.singleChange}})],1):t._e(),e("div",{staticStyle:{padding:"0 20px"}},[t.configFormBottomLine?e("el-divider",{staticClass:"config-form-bottomLine"}):t._e()],1),t.dialogConfigFormVisibility?e("portal-form",{ref:"dialogConfigForm",staticClass:"dialogConfigForm",attrs:{needBottomLine:!1,"form-config-list":t.configForm.formConfigList,"form-data":t.configForm.formData,"form-rules":t.configFormRules,needOperateBtn:t.needOperateBtn,smallAutoColumn:t.configForm.configSmall||1,bigAutoColumn:t.configForm.configBig||1}}):t._e(),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("button",{staticClass:"cancel-button",on:{click:function(e){return e.preventDefault(),t.handleCancelClick.apply(null,arguments)}}},[t._v(t._s(t.cancelText))]),e("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{type:"primary",size:"small"},on:{click:t.handleConfirmClick}},[t._v(t._s(t.confirmText))])],1)],2)},s=[],o=a("3186"),r=a("4c09"),n={name:"portalDialog",components:{PortalForm:o["a"],TablePage:r["a"]},props:{title:{type:String,default:""},closeOnClickModal:{type:Boolean,default:!1},dialogVisible:{type:Boolean,default:!1},isOverflowHeight:{type:Boolean,default:!1},width:{type:String,default:"800px"},cancelText:{type:String,default:"Cancel"},confirmText:{type:String,default:"Confirm"},searchForm:{type:Object,default:null},formRules:{type:Object,default:()=>({})},searchLoading:{type:Boolean,default:!1},smallAutoColumn:{type:Number,default:2,validate:t=>!(24%t)},bigAutoColumn:{type:Number,default:2,validate:t=>!(24%t)},enterEvent:{type:Function,default:()=>{}},dialogTable:{type:Object,default:()=>({})},configForm:{type:Object,default:()=>({})},configFormRules:{type:Object,default:()=>({})},needSearchFormBottomLine:{type:Boolean,default:!1},configFormBottomLine:{type:Boolean,default:!1}},data(){return{visible:!1}},computed:{dialogSearchFormVisibility(){return void 0!==this.searchForm.formConfigList&&this.searchForm.formConfigList.length>0},dialogConfigFormVisibility(){return void 0!==this.configForm.formConfigList&&this.configForm.formConfigList.length>0},dialogTableVisibility(){return!!(this.dialogTable&&this.dialogTable.columns.length>0)},needSearchOperateBtn(){return void 0===this.searchForm.needOperateBtn||!!this.searchForm.needOperateBtn},needOperateBtn(){return!!this.configForm.needOperateBtn&&this.configForm.needOperateBtn},tableIsSearch(){return!!this.dialogTable.isSearch},isSingleCheck(){return!!this.dialogTable.isSingleCheck},onSelectionChange(){return this.dialogTable.onSelectionChange?this.dialogTable.onSelectionChange:()=>{}},singleChange(){return this.dialogTable.singleChange?this.dialogTable.singleChange:()=>{}}},watch:{dialogVisible:{handler(t){this.visible=t},immediate:!0},visible:{handler(t){this.$emit("show-dialog",t),this.$emit("update:dialogVisible",t)}}},methods:{handleClose(){this.visible=!1},handleCancelClick(){this.$emit("cancel-btn-click")},handleConfirmClick(){this.$emit("confirm-btn-click")},closedDialog(){this.$emit("closed-dialog")},openedDialog(){this.$emit("opened-dialog")},reset(){this.$emit("search-reset")},search(){this.$refs.dialogSearchForm.validate(t=>{t&&(this.dialogTable.isSearch=!0,this.$emit("update:searchLoading",!0))})}}},l=n,c=(a("ef8d"),a("2877")),d=Object(c["a"])(l,i,s,!1,null,"090905a0",null);e["a"]=d.exports},ef8d:function(t,e,a){"use strict";a("7f33")},f32b:function(t,e,a){},f538:function(t,e,a){"use strict";a.d(e,"m",(function(){return c})),a.d(e,"p",(function(){return d})),a.d(e,"o",(function(){return u})),a.d(e,"u",(function(){return f})),a.d(e,"v",(function(){return p})),a.d(e,"a",(function(){return m})),a.d(e,"b",(function(){return h})),a.d(e,"z",(function(){return g})),a.d(e,"x",(function(){return b})),a.d(e,"f",(function(){return v})),a.d(e,"j",(function(){return C})),a.d(e,"w",(function(){return y})),a.d(e,"k",(function(){return k})),a.d(e,"n",(function(){return I})),a.d(e,"l",(function(){return D})),a.d(e,"q",(function(){return O})),a.d(e,"d",(function(){return T})),a.d(e,"e",(function(){return w})),a.d(e,"y",(function(){return S})),a.d(e,"c",(function(){return F})),a.d(e,"h",(function(){return $})),a.d(e,"g",(function(){return _})),a.d(e,"i",(function(){return j})),a.d(e,"r",(function(){return z})),a.d(e,"t",(function(){return P})),a.d(e,"s",(function(){return L}));var i=a("0bbd"),s=a("5f9a"),o=a("64e7");const r="/fintech/v1/bulk",n=r+"/task/template",l=r+"/task/plan";function c({dictCodes:t}){return Object(i["a"])({url:r+"/data-dict/list",method:"post",data:{dictCodes:t}})}function d(t){return Object(i["a"])({url:Object(s["a"])(r+"/type/list",t),method:"get"})}function u(t){return Object(i["a"])({url:Object(s["a"])(n+"/list",t),method:"get"})}function f(t){return Object(i["a"])({url:Object(s["a"])(l+"/list",t),method:"get"})}function p(t){return Object(i["a"])({url:Object(s["a"])("/fintech/v1/bulk/tps/timeslot",t),method:"get"})}function m(t){return Object(i["a"])({url:"/fintech/v1/bulk/task/plan/add",method:"POST",data:t})}function h(t){return Object(i["a"])({url:"/fintech/v1/bulk/task/plan/cancel",method:"POST",data:t})}function g(t){return Object(i["a"])({url:"/fintech/v1/bulk/task/plan/suspend",method:"POST",data:t})}function b(t){return Object(i["a"])({url:"/fintech/v1/bulk/task/plan/resume",method:"POST",data:t})}function v(t){return Object(i["a"])({url:"/fintech/v1/bulk/task/plan/failedRecords",params:t})}function C(t){return Object(i["a"])({url:"/fintech/v1/bulk/task/plan/successRecords",params:t})}function y(t){return Object(i["a"])({url:"/fintech/v1/bulk/task/plan/validRecords",params:t})}function k(t){return Object(i["a"])({url:Object(s["a"])("/fintech/v1/bulk/task/plan/detail",t),method:"get"})}function I(t){return Object(i["a"])({url:Object(s["a"])("/fintech/v1/bulk/task/plan/hisDetail",t),method:"get"})}function D(t){return Object(i["a"])({url:l+"/prevalidation",method:"post",contentType:"application/x-www-form-urlencoded",data:t})}function O(t){return Object(i["a"])({url:l+"/prevalidation/"+t,method:"get"})}function T(t,e){o["a"].downLoadFile("orgportal"+l+`/download/bulkFile?fileID=${t}&type=${e}`,{},"get")}function w(t){return Object(i["a"])({url:"/fintech/v1/queryCustomerList",method:"post",data:t,ignoreError:!0})}function S(t){return Object(i["a"])({url:"/fintech/v1/queryCustomerIdentity/msisdn",method:"post",data:t})}function F(t){return Object(i["a"])({url:"/fintech/v1/identity/verify/"+t,method:"post"})}function $(t){return Object(i["a"])({url:Object(s["a"])("/fintech/v1/organization/list",t),method:"get"})}function _(t){return Object(i["a"])({url:Object(s["a"])("/fintech/v1/spOperator/list",t),method:"get"})}function j(t){return Object(i["a"])({url:Object(s["a"])("/fintech/v1/bulk/type/service/mapping",t),method:"get"})}function z(t){return Object(i["a"])({url:"/fintech/v1/dcc/queryProduct",method:"post",data:t})}function P(t){return Object(i["a"])({url:"/fintech/v1/dcc/queryService",method:"post",data:t})}function L(t){return Object(i["a"])({url:"/fintech/v1/dcc/queryReasonType",method:"post",data:t})}},f64c:function(t,e,a){},f921:function(t,e,a){"use strict";a("b4f8")},f9ab:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"task-detail"},[e("div",{staticClass:"task-detail-content"},[e("div",{staticClass:"task-info"},[e("div",{staticClass:"basic-info"},[e("div",{staticClass:"basic-info-title"},[e("div",{staticClass:"title"},[e("span",[t._v(t._s(t.title)+" "+t._s(t.$t("TAC.taskDetail.detail")))]),"Processing"===t.status?e("div",{staticClass:"processing"},[t._v(t._s(t.$t("TAC.taskDetail.processing")))]):t._e(),"Paused"===t.status?e("div",{staticClass:"paused"},[t._v(t._s(t.$t("TAC.taskDetail.paused")))]):t._e(),"Completed"===t.status?e("div",{staticClass:"completed"},[t._v(t._s(t.$t("TAC.taskDetail.completed")))]):t._e()])]),e("el-divider",{staticClass:"table-divider"})],1),e("div",{staticClass:"scroll-content"},[e("div",{staticClass:"content"},[e("basic-info-item",{attrs:{basicInfo:t.basicInfoList}})],1),e(t.getSpecificComponent,{tag:"components",attrs:{receiverIdentityId:t.receiverIdentityId,orderId:t.orderId,isEdit:t.isEdit,isHistory:t.isHistory,bizContext:t.bizContext,taskDetail:t.basicInfoList,newKycFormData:t.newKycForm,BMEBusiness:t.BMEBusiness}}),e("div",{staticClass:"basic-info"},[e("div",{staticClass:"history-process-title"},[t._v(t._s(t.$t("TAC.workflowDetail.historyProcessRecord")))]),e("el-divider",{staticClass:"table-divider"}),e("div",[e("div",{staticClass:"history-process-record"},[e("el-collapse",{staticClass:"inner-text"},[e("el-collapse-item",{staticClass:"history-process-record-item"},[e("template",{slot:"title"},[e("span",{staticClass:"item-text"},[t._v(t._s(t.basicInfoList.taskId)+" - "+t._s(t.taskName))])]),t._l(t.recordCommonList,(function(a){return e("div",{key:a.commentId},[a.commentText?e("el-collapse",{staticClass:"inner-text"},[e("el-collapse-item",{staticClass:"history-process-record-item"},[e("template",{slot:"title"},[e("span",{staticClass:"item-text"},[t._v(t._s(a.creatorId)+" - "+t._s(a.creatorName))]),e("span",{staticClass:"content-time"},[t._v(t._s(a.action))]),e("span",{staticClass:"content-time"},[t._v(t._s(a.createTime))])]),e("div",{staticClass:"item-content"},[e("span",{staticClass:"content-detail"},[t._v(t._s(a.commentText))])])],2)],1):t._e()],1)}))],2)],1)],1)])],1)],1)]),t.showOperate?e("div",{staticClass:"task-operate"},[e("div",{staticClass:"operation-title"},[t._v(" "+t._s(t.$t("TAC.taskDetail.addComment"))+" "),e("el-divider",{staticClass:"operation-divider"})],1),e("div",{staticClass:"operate-concrete"},[e("el-form",{ref:"addComment",attrs:{model:t.addCommentForm,size:"small","label-position":"top"}},[e("el-form-item",{attrs:{label:t.$t("TAC.taskDetail.Comment"),prop:"comment"}},[e("el-input",{attrs:{type:"textarea",rows:5,resize:"none",placeholder:t.$t("common.placeholder.enter")},model:{value:t.addCommentForm.comment,callback:function(e){t.$set(t.addCommentForm,"comment",e)},expression:"addCommentForm.comment"}})],1),e("div",{staticStyle:{height:"40px"}},[e("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",size:"small",disabled:t.isAddComment,plain:""},on:{click:t.addComment}},[t._v(t._s(t.$t("common.button.add"))+" ")])],1)],1),t.showEscalate?e("el-form",{ref:"escalateForm",attrs:{model:t.escalateForm,size:"small","label-position":"top",rules:t.escalateFormRules}},[e("div",{staticClass:"operate-concrete-title"},[t._v(t._s(t.$t("TAC.taskDetail.escalate")))]),e("el-divider",{staticClass:"task-divider"}),e("el-form-item",{attrs:{label:t.$t("TAC.taskDetail.Comment"),prop:"commentText"}},[e("el-input",{attrs:{type:"textarea",rows:5,resize:"none",placeholder:t.$t("common.placeholder.enter")},model:{value:t.escalateForm.commentText,callback:function(e){t.$set(t.escalateForm,"commentText",e)},expression:"escalateForm.commentText"}})],1),e("div",{staticStyle:{height:"40px"}},[e("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",size:"small",plain:""},on:{click:t.handleConfirm}},[t._v(t._s(t.$t("common.button.confirm"))+" ")])],1)],1):t._e(),t.showSingleProcess(t.basicInfoList)?e("el-form",{ref:"taskProcessingForm",attrs:{model:t.taskProcessingForm,rules:t.taskProcessingRules,size:"small","label-position":"top"}},[e("div",{staticClass:"operate-concrete-title"},[t._v(" "+t._s(t.$t("TAC.taskDetail.taskProcessing"))+" "),e("el-divider",{staticClass:"task-process-divider"})],1),e("el-form-item",{attrs:{label:t.$t("TAC.taskDetail.Action"),prop:"action"}},[e("el-radio-group",{attrs:{size:"small"},model:{value:t.taskProcessingForm.action,callback:function(e){t.$set(t.taskProcessingForm,"action",e)},expression:"taskProcessingForm.action"}},t._l(t.labelAcctions,(function(a,i){return e("el-radio",{key:i,attrs:{label:a}},[t._v(" "+t._s(a)+" ")])})),1)],1),"Investigate"===t.taskProcessingForm.action||"Delegate"===t.taskProcessingForm.action?e("el-form-item",{staticClass:"processing-operation",attrs:{label:t.$t("TAC.taskDetail.Operator"),prop:"operator"}},["Investigate"===t.taskProcessingForm.action?e("el-radio-group",{staticClass:"processing-operator",attrs:{size:"small"},model:{value:t.taskProcessingForm.operator,callback:function(e){t.$set(t.taskProcessingForm,"operator",e)},expression:"taskProcessingForm.operator"}},t._l([t.$t("TAC.taskDetail.Initiator"),t.$t("TAC.taskDetail.Others")],(function(a,i){return e("el-radio",{key:i,attrs:{label:a}},[t._v(" "+t._s(a)+" ")])})),1):t._e()],1):t._e(),"Delegate"===t.taskProcessingForm.action?e("div",{staticStyle:{height:"52px"}},[e("div",{staticClass:"multi-select-container"},[e("div",{staticClass:"select-tags"},[e("div",{staticClass:"select-scroll"},t._l(t.selectDataList,(function(a,i){return e("el-tag",{key:i,attrs:{type:"info",closable:!0},on:{close:function(e){return t.removeSelected(a)}}},[t._v(" "+t._s(a.roleName||a.userName)+" ")])})),1)]),e("div",{staticClass:"icon-e"},[e("span",{staticClass:"el-icon-ellipsis",on:{click:function(e){t.dialogVisible=!0}}})])])]):t._e(),"Investigate"===t.taskProcessingForm.action&&"Others"===t.taskProcessingForm.operator?e("div",{staticStyle:{height:"52px"}},[e("div",{staticClass:"multi-select-container"},[e("div",{staticClass:"select-tags"},[e("div",{staticClass:"select-scroll"},t._l(t.selectDataList,(function(a,i){return e("el-tag",{key:i,attrs:{type:"info",closable:!0},on:{close:function(e){return t.removeSelected(a)}}},[t._v(" "+t._s(a.roleName||a.userName)+" ")])})),1)]),e("div",{staticClass:"icon-e"},[e("span",{staticClass:"el-icon-ellipsis",on:{click:t.openOperatorDialog}})])])]):t._e(),"Investigate"===t.taskProcessingForm.action?e("el-form-item",{attrs:{label:t.$t("TAC.taskDetail.ValidityPeriod"),prop:"validityPeriod"}},[e("el-radio-group",{attrs:{size:"small"},model:{value:t.taskProcessingForm.validityPeriod,callback:function(e){t.$set(t.taskProcessingForm,"validityPeriod",e)},expression:"taskProcessingForm.validityPeriod"}},t._l([t.$t("TAC.taskDetail.SameasOriginal"),t.$t("TAC.taskDetail.Customized")],(function(a,i){return e("el-radio",{key:i,attrs:{label:a}},[t._v(" "+t._s(a)+" ")])})),1)],1):t._e(),"Investigate"===t.taskProcessingForm.action&&"Customized"===t.taskProcessingForm.validityPeriod?e("el-row",{staticClass:"task-detail-col",attrs:{gutter:8}},[e("el-col",{attrs:{span:4}},[e("el-form-item",{attrs:{rules:t.invesCustomizedDay,prop:"customizedDay"}},[e("el-input",{attrs:{size:"small",placeholder:t.$t("TAC.taskDetail.Days")},on:{input:t.changeMemberId},model:{value:t.taskProcessingTimeForm.customizedDay,callback:function(e){t.$set(t.taskProcessingTimeForm,"customizedDay","string"===typeof e?e.trim():e)},expression:"taskProcessingTimeForm.customizedDay"}})],1)],1),e("el-col",{attrs:{span:3}},[t._v(t._s(t.$t("TAC.taskDetail.Days")))]),e("el-col",{attrs:{span:4}},[e("el-form-item",{attrs:{rules:t.invesCustomizedHours,prop:"customizedHours"}},[e("el-input",{attrs:{size:"small",placeholder:t.$t("TAC.taskDetail.Hours")},on:{input:t.changeHoures},model:{value:t.taskProcessingTimeForm.customizedHours,callback:function(e){t.$set(t.taskProcessingTimeForm,"customizedHours","string"===typeof e?e.trim():e)},expression:"taskProcessingTimeForm.customizedHours"}})],1)],1),e("el-col",{attrs:{span:3}},[t._v(t._s(t.$t("TAC.taskDetail.Hours")))]),e("el-col",{attrs:{span:4}},[e("el-form-item",{attrs:{rules:t.invesCustomizedMinutes,prop:"customizedMinutes"}},[e("el-input",{attrs:{size:"small",placeholder:t.$t("TAC.taskDetail.Minutes")},on:{input:t.changeMinutes},model:{value:t.taskProcessingTimeForm.customizedMinutes,callback:function(e){t.$set(t.taskProcessingTimeForm,"customizedMinutes","string"===typeof e?e.trim():e)},expression:"taskProcessingTimeForm.customizedMinutes"}})],1)],1),e("el-col",{attrs:{span:3}},[t._v(t._s(t.$t("TAC.taskDetail.Minutes")))])],1):t._e(),"Reject"===t.taskProcessingForm.action&&t.currentAction.includes("backinitiator")?e("el-form-item",{attrs:{label:t.$t("TAC.taskDetail.InitiatorModifyandResubmit"),prop:"modifyandResubmit"}},[e("el-switch",{attrs:{"active-text":t.switchword,"active-value":1,"inactive-value":0},on:{change:t.switchValue},model:{value:t.taskProcessingForm.modifyandResubmit,callback:function(e){t.$set(t.taskProcessingForm,"modifyandResubmit",e)},expression:"taskProcessingForm.modifyandResubmit"}})],1):t._e(),"Delegate"===t.taskProcessingForm.action?e("el-form-item",{attrs:{label:t.$t("TAC.taskDetail.resetDueTime"),prop:"resetDueTime"}},[e("el-switch",{attrs:{"active-text":t.switchword,"active-value":1,"inactive-value":0},on:{change:t.switchValue},model:{value:t.taskProcessingForm.resetDueTime,callback:function(e){t.$set(t.taskProcessingForm,"resetDueTime",e)},expression:"taskProcessingForm.resetDueTime"}})],1):t._e(),e("el-form-item",{attrs:{label:t.$t("TAC.workflowDetail.remark"),prop:"remark"}},[e("el-input",{attrs:{type:"textarea",rows:5,resize:"none",placeholder:t.$t("common.placeholder.enter")},model:{value:t.taskProcessingForm.remark,callback:function(e){t.$set(t.taskProcessingForm,"remark",e)},expression:"taskProcessingForm.remark"}})],1),e("div",{staticClass:"operator-foot-btn",staticStyle:{height:"40px","text-align":"right"}},[e("el-button",{staticClass:"btn-cancel",attrs:{size:"small"},on:{click:t.handleCancel}},[t._v(t._s(t.$t("common.button.cancel"))+" ")]),e("el-button",{attrs:{type:"primary",size:"small",disabled:!t.taskProcessingForm.action},on:{click:function(e){return t.handleSubmit()}}},[t._v(t._s(t.$t("common.button.submit"))+" ")])],1)],1):t._e()],1)]):t._e(),e("portal-dialog",{ref:"operatorDialogRef",attrs:{title:t.dialogTitle,dialogVisible:t.dialogVisible,searchForm:t.delegateSearchFrom,formRules:t.formRules,isOverflowHeight:!0,dialogTable:t.delegateDialogTable,searchLoading:t.delegateDialogTable.isSearch},on:{"update:dialogVisible":function(e){t.dialogVisible=e},"update:dialog-visible":function(e){t.dialogVisible=e},"update:searchLoading":function(e){return t.$set(t.delegateDialogTable,"isSearch",e)},"update:search-loading":function(e){return t.$set(t.delegateDialogTable,"isSearch",e)},"close-dialog":t.delegateCloseDialog,"search-reset":t.delegateDialogReset,"cancel-btn-click":t.delegateCloseDialog,"confirm-btn-click":t.comfirmDelegateHandler}},[e("template",{slot:"operation"},[e("div",{staticClass:"check-operator"},[e("div",{staticClass:"check-label"},[t._v("Select Type")]),e("el-radio-group",{on:{change:t.checkChange},model:{value:t.checkRadio,callback:function(e){t.checkRadio=e},expression:"checkRadio"}},[e("el-radio",{attrs:{label:"operator"}},[t._v("Operator")]),e("el-radio",{attrs:{label:"role"}},[t._v("Role")])],1)],1)])],2)],1)])},s=[],o=a("8e76"),r=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"basic-info-box"},[e("el-row",{attrs:{gutter:20}},t._l(t.configList,(function(a,i){return e("el-col",t._b({key:i},"el-col",t.colOptions,!1),[e("div",{staticClass:"basic-info-card"},[e("div",{staticClass:"basic-info-card__label bg-purple"},[t._v(t._s(a.label))]),e("div",{staticClass:"basic-info-card__value"},[t._v(t._s(a.value))])])])})),1)],1)])},n=[],l={name:"BasicInfoBox",props:{basicInfo:{type:Object,default:()=>({})}},data(){return{propsOrder:[{name:"taskId",label:this.$t("TAC.taskDetail.taskNo")},{name:"createTime",label:this.$t("TAC.taskDetail.creationTime")},{name:"initiatorNameConcat",label:this.$t("TAC.taskDetail.Initiator")},{name:"ownerIdConcat",label:this.$t("TAC.taskDetail.currentHandler")},{name:"processId",label:this.$t("TAC.taskDetail.workflowId")},{name:"createTime",label:this.$t("TAC.taskDetail.workflowStartTime")},{name:"procStatus",label:this.$t("TAC.taskDetail.workflowStatus")},{name:"initiationChannel",label:this.$t("TAC.taskDetail.workflowInitiationChannel")},{name:"eventSource",label:this.$t("TAC.taskDetail.eventSource")},{name:"eventSourceSystem",label:this.$t("TAC.taskDetail.eventSourceSystem")},{name:"workflowReceiver",label:this.$t("TAC.taskDetail.workflowReceiver")}]}},computed:{configList(){const t=this.basicInfo;return this.propsOrder.map(e=>{const a=e.name,i=e.label;return{label:i,value:t[a]||"-"}})}}},c=l,d=(a("01ba"),a("2877")),u=Object(d["a"])(c,r,n,!1,null,"74130484",null),f=u.exports,p=a("02e3"),m=a("d91c"),h=function(){var t=this,e=t._self._c;return e("div",{staticClass:"specific-info"},[e("div",{staticClass:"basic-info-title specific-title"},[e("span",[t._v(t._s(t.$t("TAC.workflowDetail.specificInfo")))])]),e("el-divider",{staticClass:"specific-table-divider"}),e("div",{staticClass:"specific-container"},[e("specific-info",{attrs:{title:t.operatorTitle,infoList:t.operatorSpecificInfoList}})],1),e("div",{staticClass:"task-bulk-detail"},[e("div",{staticClass:"task-bulk-detail-content"},[e("div",{staticClass:"basic-info"},[e("basic-info-items",{attrs:{infoList:t.specificDetailData},on:{"item-click":t.handleClick,"item-down-load":t.handleDownLoad}})],1)]),e("portal-dialog",{attrs:{visible:t.dialogVisible,title:t.dialogTitle,cancelText:t.$t("common.button.close"),width:"800px",height:"442px",top:"12vh","before-close":t.handleDialogCancel,showSubmit:!1},on:{"update:visible":function(e){t.dialogVisible=e},"cancel-btn-click":t.handleDialogCancel},scopedSlots:t._u([{key:"content",fn:function(){return[e("table-page",{attrs:{size:"small","has-pagination":!0,"is-search":t.isSearch,initializingLoading:!0,columns:t.dialogColumns,pagination:t.paginationConfig,getTableData:t.getTableData}})]},proxy:!0}])})],1)],1)},g=[],b=function(){var t=this,e=t._self._c;return e("div",{staticClass:"specific-info-container"},[t.title?e("div",{staticClass:"specific-title"},[t._v(t._s(t.title))]):t._e(),e("el-form",{attrs:{"label-position":"top"}},[e("el-row",{staticClass:"el-flex-wrap",attrs:{gutter:20,type:"flex"}},t._l(t.infoList,(function(a,i){return e("el-col",t._b({key:i},"el-col",a.col||t.colOptions,!1),[e("el-form-item",{attrs:{label:t.$t("TAC.specificInfo."+a.label)}},[a.slot?[t._t(a.slot,null,{data:a})]:[a.isClick?t._e():e("span",[t._v(t._s(a.value||"-"))]),a.isClick?e("span",{staticClass:"click-color",on:{click:function(e){return t.handleClick(a)}}},[t._v(t._s(a.value||"-"))]):t._e(),a.isDownLoad?e("span",{staticClass:"down-load",on:{click:function(e){return t.downLoad(a)}}},[t._v("Download")]):t._e()]],2)],1)})),1)],1)],1)},v=[],C={name:"specificInfoItem",props:{infoList:{type:Array,default:()=>[]},title:{type:String,default:""}},data(){return{}},methods:{downLoad(t){this.$emit("item-down-load",t)},handleClick(t){this.$emit("item-click",t)}}},y=C,k=(a("a796"),Object(d["a"])(y,b,v,!1,null,"6f693858",null)),I=k.exports,D=a("7dfc"),O=a("8ac9"),T=a("4c09"),w=a("f538"),S={name:"taskBulk",components:{BasicInfoItems:I,PortalDialog:O["a"],tablePage:T["a"]},props:{bizContext:{type:Object,default:()=>{}},routerType:{type:String,default:""}},data(){return{specificDetail:{},dialogVisible:!1,dialogTitle:this.$t("TAC.specificInfo.dialogVisible"),paginationConfig:{pageIndex:1,pageSize:10,layout:"total, prev, pager, next"},dialogColumns:[{label:"Number",prop:"lineNo",align:"left"},{label:"Summary",prop:"summary",align:"left"},{label:"Excution Time",prop:"excutionTime",align:"left"},{label:"Error Message",prop:"errorDesc",align:"left"},{label:"Cause",prop:"errorCause",align:"left"},{label:"Solution",prop:"errorSolution",align:"left"}],isSearch:!1}},watch:{bulkPlanID:{handler(t){""!=t&&this.getDetailData()}}},computed:{specificDetailData(){return[{label:"bulkType",value:this.specificDetail.bulkTypeName||"-"},{label:"bulkPlanID",value:this.specificDetail.planID||"-"},{label:"planName",value:this.specificDetail.planName||"-"},{label:"status",value:this.specificDetail.bulkStatus||"-"},{label:"createdBy",value:this.specificDetail.createdBy||"-"},{label:"creationTime",value:Object(D["e"])(this.specificDetail.createTime)||"-"},{label:"scheduleTime",value:Object(D["e"])(this.specificDetail.scheduleTime)||"-"},{label:"dataFile",value:this.specificDetail.dataFileName||"-",isDownLoad:!0},{label:"totalUploadedItems",value:this.specificDetail.numberOfTotal||"-"},{label:"validRecords",value:this.specificDetail.numberOfValidSuccess||"-"},{label:"validAmount",value:this.specificDetail.validAmount||"-"},{label:"failedInitialValidation",value:this.specificDetail.numberOfValidFailed||"-",isClick:!0}]},bulkPlanID(){return this.bizContext&&this.bizContext.variables.bulkPlanID?this.bizContext.variables.bulkPlanID:""}},methods:{async getTableData(){let t={offset:(this.paginationConfig.pageIndex-1)*this.paginationConfig.pageSize,limit:this.paginationConfig.pageSize,bulkFileID:this.specificDetail.fileID,validLevel:0,isHis:0};"process"===this.routerType&&(t.isHis="0",t.finishTime=this.specificDetail.finishTime);let e=await Object(o["u"])(t);return this.isSearch=!1,e.header&&e.header.success?{header:{success:"success"},list:e.data.bulkDataInfoList||[],totalRecords:Number(e.data.numberOfTotal)||0}:{header:{success:"success"},list:[],totalRecords:0}},async getDetailData(){let t=this.bulkPlanID,e=await Object(o["g"])(t);e&&(this.specificDetail=e.data.bulkPlanInfo.basicBulkPlanInfo,this.specificDetail={bulkTypeName:e.data.bulkPlanInfo.basicBulkPlanInfo.bulkTypeName,planID:e.data.bulkPlanInfo.basicBulkPlanInfo.planID,planName:e.data.bulkPlanInfo.basicBulkPlanInfo.planName,bulkStatus:e.data.bulkPlanInfo.basicBulkPlanInfo.bulkStatus,createdBy:e.data.bulkPlanInfo.basicBulkPlanInfo.createdBy,createTime:e.data.bulkPlanInfo.basicBulkPlanInfo.createTime,scheduleTime:e.data.bulkPlanInfo.basicBulkPlanInfo.scheduleTime,dataFileName:e.data.bulkPlanInfo.basicBulkPlanInfo.dataFileName,numberOfTotal:e.data.bulkPlanInfo.basicBulkPlanInfo.bulkTypeName,numberOfValidSuccess:e.data.bulkPlanInfo.bulkResultInfo.numberOfValidSuccess,validAmount:e.data.bulkPlanInfo.bulkResultInfo.validAmount,numberOfValidFailed:e.data.bulkPlanInfo.bulkResultInfo.numberOfValidFailed,fileID:e.data.bulkPlanInfo.bulkResultInfo.fileID})},handleDownLoad(){Object(w["d"])(this.specificDetail.fileID,1)},handleClick(){this.isSearch=!0,this.dialogVisible=!0},handleDialogCancel(){this.dialogVisible=!1}},mounted(){}},F=S,$=(a("8550"),Object(d["a"])(F,h,g,!1,null,"466e4ecb",null)),_=$.exports,j=function(){var t=this,e=t._self._c;return e("div",{staticClass:"specific-info"},[e("div",{staticClass:"basic-info-title specific-title"},[e("span",[t._v(t._s(t.$t("TAC.workflowDetail.specificInfo")))])]),e("el-divider",{staticClass:"specific-table-divider"}),e("div",{staticClass:"specific-container"},[e("specific-info",{attrs:{title:t.transactionTitle,infoList:t.transactionInfoList}}),e("table-item",{attrs:{tableTitle:t.accountEntriesTabelTitle,outSideTableData:t.accountEntriesTabelData,columns:t.accountEntriesColumn}}),e("table-item",{attrs:{tableTitle:t.auditLogTabelTitle,tableDesc:t.auditLogTabelDesc,columns:t.auditLogColumn,showDivider:!1}})],1)],1)},z=[],P=function(){var t=this,e=t._self._c;return e("div",{staticClass:"tableItemContainer"},[e("div",{staticClass:"table-item-title"},[t._v(t._s(t.tableTitle))]),t.tableDesc?e("div",{staticClass:"table-desc"},[t._v(t._s(t.tableDesc))]):t._e(),e("div",{staticClass:"table-item-content"},[e("table-page",{ref:"taskDetailTableItemRef",staticClass:"taskDetailTableItem",attrs:{columns:t.columns,sortArr:t.sortArr,getTableData:t.getTableData,initializingLoading:t.initializingLoading,"has-pagination":t.hasPagination,pagination:t.paginationConfig,outSideTableData:t.outSideTableData,"is-search":t.isSearch}})],1),t.showDivider?e("el-divider",{staticClass:"table-divider"}):t._e()],1)},L=[],A={name:"taskDetailTableItem",components:{TablePage:T["a"]},props:{columns:{type:Array,default:()=>[]},sortArr:{type:Array,default:()=>[]},outSideTableData:{type:Array,default:()=>[]},paginationConfig:{type:Object,default:()=>({})},tableTitle:{type:String,default:""},tableDesc:{type:String,default:""},hasPagination:{type:Boolean,default:!1},showDivider:{type:Boolean,default:!0},initializingLoading:{type:Boolean,default:!1},isSearch:{type:Boolean,default:!1},getTableData:{type:Function,default:()=>{}}}},N=A,x=(a("7b19"),Object(d["a"])(N,P,L,!1,null,"afe05cf4",null)),B=x.exports,R={name:"TransactionConfimation",props:{orderId:{type:String,default:""}},components:{SpecificInfo:I,TableItem:B},data(){return{transactionInfoList:[{label:"receiptNo",key:"tradeOrderId",value:""},{label:"status",key:"status",value:""},{label:"initiationTime",key:"createTime",value:""},{label:"lastUpdateTime",key:"lastUpdateTime",value:""},{label:"transactionType",key:"serviceCodeAlias",value:""},{label:"reasonType",key:"reasonTypeAlias",value:""},{label:"initiator",key:"initiatorIdentityName",value:""},{label:"initiatorType",key:"initiatorIdentityType",value:""},{label:"initiatorGroupCode",key:"initiatorGroupCode",value:""},{label:"initiatorGroupMemberRole",key:"initiatorGroupMemberRole",value:""},{label:"creditParty",key:"payeeIdentityName",value:""},{label:"debitParty",key:"payerIdentityName",value:""},{label:"requester",key:"initiatorIdentityName",value:""},{label:"requesterType",key:"initiatorIdentityType",value:""},{label:"channel",key:"channelName",value:""},{label:"entryId",key:"entryId",value:""},{label:"loyaltyPointAmount",key:"loyaltyPointAmount",value:""},{label:"amount",key:"totalStrAmount",value:""},{label:"discountAmount",key:"discountStrAmount",value:""},{label:"remark",key:"remark",value:""},{label:"commentToCustomer",key:"commentToCustomer",value:""},{label:"note",key:"note",value:""},{label:"disputedTransaction",key:"disputedTransaction",value:""}],accountEntriesColumn:[{label:this.$t("TAC.specificInfo.identityType"),prop:"identityType",align:"left"},{label:this.$t("TAC.specificInfo.identity"),prop:"identityName",align:"left"},{label:this.$t("TAC.specificInfo.account"),prop:"accountAlias",align:"left"},{label:this.$t("TAC.specificInfo.reasonType"),prop:"reasonTypeAlias",align:"left"},{label:this.$t("TAC.specificInfo.details"),prop:"details",align:"left"},{label:this.$t("TAC.specificInfo.transactionAmount"),prop:"transactionAmount",align:"left"}],auditLogColumn:[{label:this.$t("TAC.specificInfo.event"),prop:"event",align:"left"},{label:this.$t("TAC.specificInfo.initiatorType"),prop:"initiatorType",align:"left"},{label:this.$t("TAC.specificInfo.initiator"),prop:"initiator",align:"left"},{label:this.$t("TAC.specificInfo.time"),prop:"time",align:"left"},{label:this.$t("TAC.specificInfo.reason"),prop:"reason",align:"left"}],accountEntriesTabelData:[],transactionTitle:this.$t("TAC.specificInfo.transactionDetails"),accountEntriesTabelTitle:this.$t("TAC.specificInfo.accountEntries"),auditLogTabelTitle:this.$t("TAC.specificInfo.auditLog"),auditLogTabelDesc:this.$t("TAC.specificInfo.auditLogDesc")}},computed:{},watch:{orderId(t){t&&this.queryIdentityId()}},methods:{async queryIdentityId(){let t=await Object(o["x"])({tradeOrderId:this.orderId});if(t.header&&t.header.success){const e={identityId:t.identityId,identityType:t.identityType,tradeOrderId:t.tradeOrderId};this.queryTransactionDetail(e)}},async queryTransactionDetail(t){let e=await Object(o["i"])(t);if(e.header&&e.header.success){if(!e.basicDetail)return;if(this.transactionInfoList.forEach((t,a)=>{this.transactionInfoList[a].value=e.basicDetail[0][t.key]}),!e.entryList)return;e.entryList.length>0&&(this.accountEntriesTabelData.splice(0),this.accountEntriesTabelData=e.entryList.map(t=>({identityType:t.identityType,identityName:t.identityName,accountAlias:t.accountAlias,reasonTypeAlias:t.reasonTypeAlias,details:t.details,transactionAmount:t.transactionAmount})))}}}},K=R,E=(a("6157"),Object(d["a"])(K,j,z,!1,null,"7e76d8ea",null)),V=E.exports,M=function(){var t=this,e=t._self._c;return e("div",{staticClass:"specific-info"},[e("div",{staticClass:"basic-info-title specific-title"},[e("span",[t._v(t._s(t.$t("TAC.workflowDetail.specificInfo")))])]),e("el-divider",{staticClass:"specific-table-divider"}),e("div",{staticClass:"specific-container"},[e("specific-info",{attrs:{infoList:t.orgSpecificInfoList}})],1),e("div",{staticClass:"basic-info"},[e("div",{staticClass:"basic-info-title"},[t._v(t._s(t.$t("TAC.workflowDetail.changeInfo")))]),e("div",{staticClass:"specific-content"},[e("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[e("el-tab-pane",{attrs:{label:"New KYC",name:"first"}}),t.isHistory?t._e():e("el-tab-pane",{attrs:{label:"Old KYC",name:"second"}})],1),e("div",{staticClass:"kyc-container"},[e("kyc-form",{attrs:{mode:t.kycMode,incomingData:t.reviewKycData,identityId:t.receiverIdentityId,identityClassify:"org"},on:{"edit-submit-success":t.submitSuccess,"workflow-kyc-cancel":t.handleKYCCancel,"workflow-kyc-submit":t.handleKYCSubmit}})],1)],1)])],1)},Y=[],H=a("5b4e"),q=a("2ef0");const J={idDetailList:100,certificatelList:200,contactList:300,directorDetailList:500,bankCardList:1006},U=(t,e)=>{t=Object(q["cloneDeep"])(t);const a=Object.keys(J),i=Object.keys(e||{});for(let s of i)a.includes(s)?t=G(t,e,s):e&&e[s].forEach((e,a)=>{e&&e.kycFields&&e.kycFields.forEach((e,i)=>{if(t&&t[s]&&t[s][a]&&t[s][a].kycFields&&t[s][a].kycFields[i]&&t[s][a].kycFields[i].displayValue!==e.displayValue){const o=e.displayValue?"isModifyed":"isNewlyIncreased";t[s][a].kycFields[i][o]=!0}})});return t};function G(t,e,a){return t&&t[a]&&t[a].forEach(t=>{const i=e[a]&&e[a].find(e=>e.recordId===t.recordId);i?t&&t.kycFields&&t.kycFields.forEach((t,e)=>{if((t.displayValue||i.kycFields[e].displayValue)&&t.displayValue!==i.kycFields[e].displayValue){const a=i.kycFields&&i.kycFields[e]&&i.kycFields[e].displayValue?"isModifyed":"isNewlyIncreased";t[a]=!0}}):t&&t.kycFields.forEach(t=>{t.isNewlyIncreased=!0})}),t}const W=(t,e)=>{e=Object(q["cloneDeep"])(e);const a=Object.keys(J),i=Object.keys(e);for(let s of i)a.includes(s)?t[s]&&t[s].length?e[s]=X(e[s],t[s]):e[s]=[]:e[s].forEach(e=>{const a=t[s].find(t=>t.kycFieldId===e.kycFieldId);e.inputValue=a.inputValue});return e};function X(t,e){const a=Object(q["cloneDeep"])(t),i=Object(q["cloneDeep"])(a[0]);return a?(delete i.recordId,e.map((t,e)=>{t.kycFields=t.kycFields.map((t,e)=>Object.assign({},i.kycFields[e],{inputValue:t.inputValue}));const s=a.find(e=>e.recordId==t.recordId);return s&&s.recordId&&(s.recordId=t.recordId),Object.assign({},s||i,{kycFields:t.kycFields})})):e}var Q=a("3cf3"),Z=a("cb9d"),tt=a("5a0c"),et=a.n(tt),at={name:"OrganizationKyc",props:{receiverIdentityId:{type:String,default:""},newKycFormData:{type:Object,default:()=>{}},bizContext:{type:Object,default:()=>{}},taskDetail:{type:Object,default:()=>{}},isEdit:{type:Boolean,default:!1},isHistory:{type:Boolean,default:!1}},components:{SpecificInfo:I,KycForm:H["a"]},data(){return{activeName:"first",specificDetail:{},newKycForm:{},oldKycForm:{}}},computed:{orgSpecificInfoList(){return[{label:"organizationName",value:this.specificDetail.organizationName},{label:"shortCode",value:this.specificDetail.shortCode},{label:"organizationCode",value:this.specificDetail.organizationCode},{label:"identityStatus",value:this.specificDetail.status},{label:"segment",value:this.specificDetail.segment},{label:"chargeProfile",value:this.specificDetail.chargeProfile},{label:"ruleProfile",value:this.specificDetail.ruleProfileName},{label:"trustLevel",value:this.specificDetail.trustLevelName},{label:"registrationDate",value:et()(this.specificDetail.createTime).format("DD/MM/YYYY HH:mm:ss")}]},reviewKycData(){return{diffKYCData:"first"===this.activeName?this.newKycForm:this.oldKycForm}},kycMode(){return this.isEdit&&"first"===this.activeName?"workflowEdit":"workflowDiff"}},watch:{receiverIdentityId(t){t&&(this.getOrganizationInfo(),!this.isHistory&&this.getOldKYCDetail(t))},newKycFormData:{handler(t){this.newKycForm=t},deep:!0}},methods:{submitSuccess(){this.$store.dispatch("tagsView/delView",this.$route),this.$router.push("list")},async getOrganizationInfo(){let t=this.receiverIdentityId,e=await Object(Z["t"])({param:t});this.specificDetail={...e.organizationInfo}},getOldKYCDetail(t){Object(Q["d"])({identityId:t}).then(t=>{const{header:e,identityKYCDataBean:a}=t;e&&e.success&&(this.oldKycForm=a,this.newKycForm=U(this.newKycForm,this.oldKycForm))}).catch(()=>{})},handleKYCCancel(){const t=this.newKycForm;this.newKycForm={},this.$nextTick(()=>{this.newKycForm=t})},handleKYCSubmit(t,e){const a=Object(q["cloneDeep"])(this.bizContext);a.variables.changeInfo=JSON.parse(a.variables.changeInfo),a.variables.changeInfo.identityKYCData=W(t,a.variables.changeInfo.identityKYCData),a.variables.changeInfo=JSON.stringify(a.variables.changeInfo);const i={actionType:"Approve",initiatorId:this.taskDetail.initiatorId,processId:this.taskDetail.processId,taskId:this.taskDetail.taskId,comments:e,bizContext:a};queryBackKycToInitiator(i).then(t=>{t.header&&t.header.success?(this.$message.success("Submit "+this.$t("TAC.tips.taskSuccess")),this.$router.push("list")):this.$message.error("Submit "+this.$t("TAC.tips.taskFailed"))})}}},it=at,st=(a("67bd"),Object(d["a"])(it,M,Y,!1,null,"3676151e",null)),ot=st.exports,rt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"specific-info"},[e("div",{staticClass:"basic-info-title specific-title"},[e("span",[t._v(t._s(t.$t("TAC.workflowDetail.specificInfo")))])]),e("el-divider",{staticClass:"specific-table-divider"}),e("div",{staticClass:"specific-container"},[e("specific-info",{attrs:{infoList:t.specificInfoList}})],1),e(t.orgComponent,{ref:"orgComponentRef",tag:"components",attrs:{bizContext:t.orgBizContext,isEdit:t.isEdit,detailInfo:t.specificDetail},on:{"org-submit":t.handleOrgSubmit}})],1)},nt=[],lt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"org-product"},[e("div",{staticClass:"basic-info"},[e("div",{staticClass:"basic-info-title"},[t._v(t._s(t.$t("TAC.workflowDetail.changeInfo")))])]),e("el-divider",{staticClass:"specific-table-divider"}),e("div",{staticClass:"specific-product"},[e("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":t.handleTabClick}},[e("el-tab-pane",{attrs:{label:"New Product"}}),t.isHistory?t._e():e("el-tab-pane",{attrs:{label:"Old Product"}})],1),e("div",{staticClass:"specific-product-container"},[e("product-table",{staticClass:"workflow-product-table",attrs:{mode:t.productMode,showBillValid:!1,isReceiveData:!0,identityId:t.identityId,receiveProductData:t.productData},on:{"product-submit":t.handleProductSubmit,"product-cancel":t.handleProductCancel}})],1)],1),e("div",{staticClass:"specific-container"},[e("specific-info",{attrs:{size:"small",infoList:t.specificInfoList}})],1)],1)},ct=[],dt=a("ad03"),ut={name:"OrginazationProduct",props:{bizContext:{type:Object,default:()=>{}},isEdit:{type:Boolean,default:!1},isHistory:{type:Boolean,default:!1}},components:{SpecificInfo:I,ProductTable:dt["a"]},provide(){return{orgDetailView:{}}},data(){return{tabIndex:"0",oldProductData:[],newProductData:[],specificDetail:{}}},computed:{specificInfoList(){let t="";try{t=this.bizContext.variables.changeInfo.remark}catch{t=""}return[{label:"remark",value:t}]},productMode(){return this.isEdit&&"0"===this.tabIndex?"edit":"review"},initProductData(){let t=[];try{t=this.bizContext.variables.changeInfo.newOrganizationProducts}catch{t=[]}return t},identityId(){let t="";try{t=this.bizContext.variables.changeInfo.receiverIdentityId}catch{t=""}return t||""},productData(){return"0"===this.tabIndex?this.newProductData:this.oldProductData}},watch:{initProductData:{handler(t){t&&t.length&&this.getNewProductData(t)},deep:!0},identityId(t){t&&this.getOldProductData(t)}},methods:{handleTabClick(t){this.tabIndex=t.index},getNewProductData(t){Object(o["r"])({orgSubscribeProductDTOS:t}).then(t=>{t.header&&t.header.success&&(this.newProductData=t.list||[])})},getOldProductData(t){Object(Z["L"])({identityId:t}).then(t=>{t.header&&t.header.success&&(this.oldProductData=t.list||[])})},handleProductSubmit(t){const e={};try{e.variables=Object(q["cloneDeep"])(this.bizContext.variables)}catch{e.variables={}}e.variables.changeInfo.newOrganizationProducts=t.products.map(t=>(t.effectiveTime=t.effectiveTime.replace(/\s/,"T"),t.expireTime=t.expireTime.replace(/\s/,"T"),t)),e.variables.changeInfo=JSON.stringify(e.variables.changeInfo);const a={bizContext:e,remark:t.remark};this.$emit("org-submit",a)},handleProductCancel(){}}},ft=ut,pt=(a("99ca"),Object(d["a"])(ft,lt,ct,!1,null,"76e0fa0c",null)),mt=pt.exports,ht=function(){var t=this,e=t._self._c;return e("div",{staticClass:"org-name"},[e("div",{staticClass:"basic-info"},[e("div",{staticClass:"basic-info-title"},[t._v(t._s(t.$t("TAC.workflowDetail.changeInfo")))])]),e("el-divider",{staticClass:"specific-table-divider"}),e("div",{staticClass:"specific-container"},[e("specific-info",{attrs:{infoList:t.specificInfoList}},[e("template",{slot:"organization-name"},[t.isEdit?e("el-link",{attrs:{underline:!1,icon:"el-icon-edit"},on:{click:t.handleShowEdit}},[t._v(" "+t._s(t.specificDetail.organizationName||"-")+" ")]):e("span",[t._v(t._s(t.specificDetail.organizationName||"-"))])],1)],2)],1),e("content-item-edit-dialog",{attrs:{visible:t.editVisible,config:t.dialogConfig,submitLoading:t.submitLoading,"close-on-click-modal":!1},on:{"update:visible":function(e){t.editVisible=e},"on-submit":t.handleDialogSubmit}})],1)},gt=[],bt=a("dbea"),vt=a("ac21"),Ct={name:"OrganizationName",props:{bizContext:{type:Object,default:()=>{}},detailInfo:{type:Object,default:()=>{}},isEdit:{type:Boolean,default:!1}},components:{SpecificInfo:I,ContentItemEditDialog:bt["a"]},data(){return{editVisible:!1,submitLoading:!1,organizationRules:{}}},computed:{specificDetail(){let t;try{const{organizationName:e,remark:a}=this.bizContext.variables.changeInfo;t={organizationName:e,remark:a}}catch{t={}}return t},specificInfoList(){return[{label:"organizationName",value:this.specificDetail.organizationName,slot:"organization-name"},{label:"shortCode",value:this.detailInfo.shortCode},{label:"remark",value:this.specificDetail.remark}]},dialogConfig(){return{title:this.$t("IDC.organization.editOrganizationName"),label:"Current Organization Name",value:this.specificDetail.organizationName,prop:"organizationName",newOrganizationName:"",properties:[{key:"newOrganizationName",default:"",label:this.$t("IDC.organization.newOrganizationName"),type:"input",validateStatus:"el-form-item-pending",itemClass:"el-form-item-no-error",eleClass:"success-icon",elementBind:{"suffix-icon":"el-icon-success"}},{key:"remark",default:"",label:this.$t("common.label.remark"),type:"textarea"}]}}},watch:{},methods:{handleShowEdit(){this.editVisible=!0},handleDialogSubmit(t,e){console.log(t,e);const a={};a.variables=Object(q["cloneDeep"])(this.bizContext.variables),a.variables.changeInfo.organizationName=e.newOrganizationName,a.variables.changeInfo.remark=e.remark,a.variables.changeInfo=JSON.stringify(a.variables.changeInfo);const i={bizContext:a,remark:e.remark};this.$emit("org-submit",i)}},created(){this.organizationRules=Object(vt["a"])()}},yt=Ct,kt=(a("4435"),Object(d["a"])(yt,ht,gt,!1,null,"32545b34",null)),It=kt.exports,Dt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"org-status"},[e("div",{staticClass:"basic-info"},[e("div",{staticClass:"basic-info-title"},[t._v(t._s(t.$t("TAC.workflowDetail.changeInfo")))])]),e("el-divider",{staticClass:"specific-table-divider"}),e("div",{staticClass:"specific-container"},[e("specific-info",{attrs:{infoList:t.specificInfoList},scopedSlots:t._u([{key:"new-status",fn:function(a){return[t.isEdit?e("el-link",{attrs:{underline:!1,icon:"el-icon-edit"},on:{click:t.handleShowEdit}},[t._v(" "+t._s(a.data.value||"-")+" ")]):e("span",[t._v(t._s(a.data.value||"-"))])]}}])})],1),e("content-item-edit-dialog",{attrs:{visible:t.editVisible,config:t.dialogConfig,submitLoading:t.submitLoading,"close-on-click-modal":!1},on:{"update:visible":function(e){t.editVisible=e},"on-submit":t.handleDialogSubmit}})],1)},Ot=[],Tt=a("7c5e"),wt=a("d8d3"),St={name:"OrganizationStatus",props:{bizContext:{type:Object,default:()=>{}},isEdit:{type:Boolean,default:!1}},components:{SpecificInfo:I,ContentItemEditDialog:bt["a"]},data(){return{editVisible:!1,submitLoading:!1,statusOpts:[]}},computed:{specificDetail(){let t;try{const{oldStatus:e,newStatus:a,reaason:i,remark:s}=this.bizContext.variables.changeInfo;t={oldStatus:e,newStatus:a,reaason:i,remark:s}}catch{t={}}return t},specificInfoList(){return[{label:"oldStatus",value:wt["c"][this.specificDetail.oldStatus]},{label:"newStatus",value:wt["c"][this.specificDetail.newStatus],slot:"new-status"},{label:"reason",value:this.specificDetail.reason},{label:"remark",value:this.specificDetail.remark}]},dialogConfig(){return{title:this.$t("IDC.orgOperator.editStatus"),label:this.$t("IDC.orgOperator.currentStatus"),value:this.getIdentityStatusName(this.specificDetail.newStatus),prop:"identityStatus",properties:[{key:"identityStatus",default:this.specificDetail.status,label:this.$t("IDC.orgOperator.newStatus"),type:"select",options:this.statusOpts},{key:"remark",default:"",label:this.$t("common.label.remark"),type:"textarea"}]}}},watch:{},methods:{getIdentityStatusName(t){return Object(Tt["c"])(t)},async loadOrganizationStatus(t){const e=await Object(Z["v"])({statusCode:t});let a=e.statusList;a&&a.length&&(this.statusOpts=[],this.statusOpts.push(...a.map(t=>({value:t.code,label:t.name}))))},handleShowEdit(){this.loadOrganizationStatus(this.specificDetail.newStatus).then(()=>{this.editVisible=!0})},handleDialogSubmit(t,e){console.log(t,e);const a={};a.variables=Object(q["cloneDeep"])(this.bizContext.variables),a.variables.changeInfo.organizationName=e.newOrganizationName,a.variables.changeInfo.remark=e.remark,a.variables.changeInfo=JSON.stringify(a.variables.changeInfo);const i={bizContext:a,remark:e.remark};this.$emit("org-submit",i)}}},Ft=St,$t=(a("99d1"),Object(d["a"])(Ft,Dt,Ot,!1,null,"b4da1fc8",null)),_t=$t.exports;const jt={approvalChangeOrgProduct:"OrgProduct",approvalChangeOrgName:"OrgName",approvalChangeOrgStatus:"OrgStatus"};var zt={name:"OrganizationTemp",props:{receiverIdentityId:{type:String,default:""},bizContext:{type:Object,default:()=>{}},taskDetail:{type:Object,default:()=>{}},isEdit:{type:Boolean,default:!1},BMEBusiness:{type:String,default:""}},components:{SpecificInfo:I,OrgProduct:mt,OrgName:It,OrgStatus:_t},data(){return{specificDetail:{}}},computed:{orgComponent(){return jt[this.BMEBusiness]},specificInfoList(){return[{label:"organizationName",value:this.specificDetail.organizationName},{label:"shortCode",value:this.specificDetail.shortCode},{label:"organizationCode",value:this.specificDetail.organizationCode},{label:"identityStatus",value:wt["c"][this.specificDetail.status]},{label:"segment",value:this.specificDetail.segment},{label:"chargeProfile",value:this.specificDetail.chargeProfileName},{label:"ruleProfile",value:this.specificDetail.ruleProfileName},{label:"trustLevel",value:this.specificDetail.trustLevelName},{label:"registrationData",value:et()(this.specificDetail.createTime).format("DD/MM/YYYY HH:mm:ss")}]},orgBizContext(){let t=Object(q["cloneDeep"])(this.bizContext),e={};try{e=JSON.parse(this.bizContext.variables.changeInfo),t.variables.changeInfo=e}catch{e={}}return t}},watch:{receiverIdentityId(t){t&&this.queryOrganizationDetail(t)}},methods:{queryOrganizationDetail(t){Object(Z["t"])({identityId:t}).then(t=>{t.header&&t.header.success&&(this.specificDetail=t.organizationInfo)})},handleOrgSubmit(t){const e={actionType:"Approve",initiatorId:this.taskDetail.initiatorId,processId:this.taskDetail.processId,taskId:this.taskDetail.taskId,comments:t.remark,bizContext:t.bizContext};this.$refs.orgComponentRef.submitLoading=!0,Object(o["f"])(e).then(t=>{t.header&&t.header.success?(this.$message.success("Submit "+this.$t("TAC.tips.taskSuccess")),this.$router.push("list")):this.$message.error("Submit "+this.$t("TAC.tips.taskFailed"))}).finally(()=>{this.$refs.orgComponentRef.submitLoading=!1,this.$refs.orgComponentRef.editVisible=!1})}}},Pt=zt,Lt=(a("4f21"),Object(d["a"])(Pt,rt,nt,!1,null,"009d5812",null)),At=Lt.exports,Nt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"specific-info"},[e("div",{staticClass:"basic-info-title specific-title"},[e("span",[t._v(t._s(t.$t("TAC.workflowDetail.specificInfo")))])]),e("el-divider",{staticClass:"specific-table-divider"}),e("div",{staticClass:"specific-container"},[e("specific-info",{attrs:{title:t.operatorTitle,infoList:t.operatorSpecificInfoList}})],1),e("div",{staticClass:"line"}),e("div",{staticClass:"basic-info"},[e("div",{staticClass:"basic-info-title"},[t._v(t._s(t.$t("TAC.workflowDetail.changeInfo")))]),e("div",{staticClass:"specific-content"},[e("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[e("el-tab-pane",{attrs:{label:"New KYC",name:"first"}}),t.isHistory?t._e():e("el-tab-pane",{attrs:{label:"Old KYC",name:"second"}})],1),e("div",{staticClass:"kyc-container"},[e("kyc-form",{attrs:{mode:t.kycMode,incomingData:t.reviewKycData,identityId:t.receiverIdentityId,identityClassify:"orgOper"},on:{"edit-submit-success":t.submitSuccess,"workflow-kyc-cancel":t.handleKYCCancel,"workflow-kyc-submit":t.handleKYCSubmit}})],1)],1)])],1)},xt=[],Bt=a("4865"),Rt={name:"OrgOperatorKyc",props:{receiverIdentityId:{type:String,default:""},newKycFormData:{type:Object,default:()=>{}},bizContext:{type:Object,default:()=>{}},taskDetail:{type:Object,default:()=>{}},isEdit:{type:Boolean,default:!1},isHistory:{type:Boolean,default:!1}},components:{SpecificInfo:I,KycForm:H["a"]},data(){return{operatorTitle:this.$t("TAC.specificInfo.basicInfo"),operatorSpecificInfoList:[{label:"identityId",key:"orgOperatorId",value:""},{label:"identityStatus",key:"status",value:""},{label:"orgShortCode",key:"shortCode",value:""},{label:"userName",key:"operatorName",value:""},{label:"operatorId",key:"operatorId",value:""},{label:"accessChannel",key:"accessChannel",value:""},{label:"language",key:"language",value:""},{label:"ruleProfile",key:"ruleProfile",value:""},{label:"msisdn",key:"operatorMsisdn",value:""},{label:"individualLimit"},{label:"registrationChannel"}],activeName:"first",specificDetail:{},languageList:[],newKycForm:{},oldKycForm:{}}},computed:{reviewKycData(){return{diffKYCData:"first"===this.activeName?this.newKycForm:this.oldKycForm}},kycMode(){return this.isEdit&&"first"===this.activeName?"workflowEdit":"workflowDiff"}},watch:{receiverIdentityId(t){t&&(this.queryOperatorDetail(),!this.isHistory&&this.getOldKYCDetail(t))},newKycFormData:{handler(t){this.newKycForm=t},deep:!0}},methods:{submitSuccess(){this.$store.dispatch("tagsView/delView",this.$route),this.$router.push("list")},async queryOperatorDetail(){let t=await Object(Bt["v"])({receiverIdentityId:this.receiverIdentityId});t.header&&t.header.success&&this.operatorSpecificInfoList.forEach((e,a)=>{if("identityStatus"===e.label){let e=this.getConverseStatus(t.orgOperatorInfo.status);this.operatorSpecificInfoList[a].value=e}else if("language"===e.label){let e=a;Object(o["l"])().then(a=>{a.header&&a.header.success&&a.list.some(a=>{if(a.languageCode===t.orgOperatorInfo.language)return this.operatorSpecificInfoList[e].value=a.languageName,!0})})}else if("accessChannel"===e.label){let e="";[{value:"1005",label:"Web"},{value:"1007",label:"Handset"},{value:"1010",label:"API"}].forEach(a=>{t.orgOperatorInfo.accessChannel.forEach(t=>{a.value===t&&(e=e?e+","+a.label:a.label)})}),this.operatorSpecificInfoList[a].value=e}else this.operatorSpecificInfoList[a].value=t.orgOperatorInfo[e.key]})},getConverseStatus(t){switch(t){case"03":return"Active";case"06":return"Closed";case"07":return"Capped";case"00":return"New";case"02":return"Pending Active";case"04":return"Suspended";case"05":return"Frozen";case"08":return"Dormant";default:return}},getOldKYCDetail(t){Object(Q["e"])({identityId:t}).then(t=>{const{header:e,identityKYCDataBean:a}=t;e&&e.success&&(this.oldKycForm=a,this.newKycForm=U(this.newKycForm,this.oldKycForm))}).catch(()=>{})},handleKYCCancel(){const t=this.newKycForm;this.newKycForm={},this.$nextTick(()=>{this.newKycForm=t})},handleKYCSubmit(t,e){const a=Object(q["cloneDeep"])(this.bizContext);a.variables.changeInfo=JSON.parse(a.variables.changeInfo),a.variables.changeInfo.identityKYCData=W(t,a.variables.changeInfo.identityKYCData),a.variables.changeInfo=JSON.stringify(a.variables.changeInfo);const i={actionType:"Approve",initiatorId:this.taskDetail.initiatorId,processId:this.taskDetail.processId,taskId:this.taskDetail.taskId,comments:e,bizContext:a};Object(o["e"])(i).then(t=>{t.header&&t.header.success?(this.$message.success("Submit "+this.$t("TAC.tips.taskSuccess")),this.$router.push("list")):this.$message.error("Submit "+this.$t("TAC.tips.taskFailed"))})}}},Kt=Rt,Et=(a("d3f3"),Object(d["a"])(Kt,Nt,xt,!1,null,"61f4fc78",null)),Vt=Et.exports,Mt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"specific-info"},[e("div",{staticClass:"basic-info-title specific-title"},[e("span",[t._v(t._s(t.$t("TAC.workflowDetail.specificInfo")))])]),e("el-divider",{staticClass:"specific-table-divider"}),e("div",{staticClass:"specific-content"},[e("div",{staticClass:"specific-content-title"},[t._v(t._s(t.$t("TAC.workflowDetail.basicInfo")))]),e("basic-info-tow",{attrs:{basicInfoData:t.specificDetailData}}),e("basic-info-box",{attrs:{basicInfoItem:t.specificBasicInfoList}}),e("el-divider",{staticClass:"table-divider change-info-divider"}),e("div",{staticClass:"specific-content-title change-info-title"},[t._v(" "+t._s(t.$t("TAC.workflowDetail.changeInfo"))+" ")]),e("basic-info-item-box",{attrs:{datalist:t.taskDetail,basicInfoItemList:t.specificChangeInfoList},on:{"show-change-status":t.showDialog}})],1),e("org-edit-status",{attrs:{editStatusVisible:t.statusDialogVisible,curStatus:t.oldStatus,editForm:t.editForm,receiverIdentityId:t.receiverIdentityId,datalist:t.taskDetail,currentTasktype:t.currentTasktype,bizContext:t.bizContext},on:{"update:editStatusVisible":function(e){t.statusDialogVisible=e},"update:edit-status-visible":function(e){t.statusDialogVisible=e},"update:curStatus":function(e){t.oldStatus=e},"update:cur-status":function(e){t.oldStatus=e},"update:receiverIdentityId":function(e){t.receiverIdentityId=e},"update:receiver-identity-id":function(e){t.receiverIdentityId=e},closeDialog:t.closeDialog,"change-status-succeed":t.changeStatusSucceed}})],1)},Yt=[],Ht=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"basic-info"},[e("el-row",t._l(t.configList,(function(a,i){return e("el-col",t._b({key:i},"el-col",t.colOptions,!1),[e("div",{staticClass:"basic-info-card"},[e("div",{staticClass:"basic-info-card__label bg-purple"},[t._v(t._s(a.label))]),e("div",{staticClass:"basic-info-card__value"},[t._v(t._s(a.value))])])])})),1)],1)])},qt=[],Jt={name:"BasicInfoTow",props:{basicInfoData:{type:Object,default:()=>({})}},data(){return{propsOrder:[{name:"parentTaskId",label:this.$t("TAC.taskDetail.originalTask")},{name:"taskDesc",label:this.$t("TAC.taskDetail.taskDescription")}]}},computed:{pathQuery(){return"detail?taskId=8K1000063"},configList(){const t=this.basicInfoData;return this.propsOrder.map(e=>{const a=e.name,i=e.label;return{label:i,value:t[a]||"-"}})}}},Ut=Jt,Gt=(a("b468"),Object(d["a"])(Ut,Ht,qt,!1,null,"53a8a8d4",null)),Wt=Gt.exports,Xt=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"basic-info-box"},[e("el-row",t._l(t.configList,(function(a,i){return e("el-col",t._b({key:i},"el-col",t.colOptions,!1),[e("div",{staticClass:"basic-info-card"},[e("div",{staticClass:"basic-info-card__label bg-purple"},[t._v(t._s(a.label))]),e("div",{staticClass:"basic-info-card__value"},[t._v(t._s(a.value))])])])})),1)],1)])},Qt=[],Zt={name:"BasicInfoBox",props:{basicInfoItem:{type:Object,default:()=>({})}},data(){return{propsOrder:[{name:"orgOperatorId",label:this.$t("TAC.workflowDetail.id")},{name:"status",label:this.$t("TAC.workflowDetail.identityStatus")},{name:"shortCode",label:this.$t("TAC.workflowDetail.organizationShortCode")},{name:"operatorName",label:this.$t("TAC.workflowDetail.userName")},{name:"operatorId",label:this.$t("TAC.workflowDetail.operatorId")},{name:"accessChannel",label:this.$t("TAC.workflowDetail.accessChannel")},{name:"language",label:this.$t("TAC.workflowDetail.Language")},{name:"ruleProfile",label:this.$t("TAC.workflowDetail.ruleProfile")},{name:"createTime",label:this.$t("TAC.workflowDetail.registrationTime")}]}},computed:{configList(){const t=this.basicInfoItem;return this.propsOrder.map(e=>{const a=e.name,i=e.label;return{label:i,value:t[a]||"-"}})}}},te=Zt,ee=(a("347e"),Object(d["a"])(te,Xt,Qt,!1,null,"1a4e5621",null)),ae=ee.exports,ie=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"basic-info-box"},[e("el-row",t._l(t.configList,(function(a,i){return e("el-col",t._b({key:i},"el-col",t.colOptions,!1),[e("div",{staticClass:"basic-info-card"},[e("div",{staticClass:"basic-info-card__label bg-purple"},[t._v(" "+t._s(a.label)+" ")]),e("div",{staticClass:"basic-info-card__value"},[t._v(" "+t._s(a.value)+" "),[t.newStatusIsShow(a)?e("el-link",{attrs:{underline:!1,icon:"el-icon-edit"},on:{click:t.showEditDialog}}):t._e()]],2)])])})),1)],1)])},se=[],oe={name:"BasicInfoBox",props:{basicInfoItemList:{type:Object,default:()=>({})},datalist:{type:Object,default:()=>({})}},data(){return{aa:!0,propsOrder:[{name:"oldStatus",label:this.$t("TAC.workflowDetail.oldStatus")},{name:"newStatus",label:this.$t("TAC.workflowDetail.newStatus")},{name:"reason",label:this.$t("TAC.workflowDetail.reason")},{name:"remark",label:this.$t("TAC.workflowDetail.remark")}]}},computed:{configList(){const t=this.basicInfoItemList;return this.propsOrder.map(e=>{const a=e.name,i=e.label;return{label:i,value:t[a]||"-"}})}},methods:{showEditDialog(){this.$emit("show-change-status")},newStatusIsShow(t){if("New Status"===t.label&&"Modify"===this.datalist.taskType)return!0}}},re=oe,ne=(a("d65a"),a("52eb"),Object(d["a"])(re,ie,se,!1,null,"02f5e966",null)),le=ne.exports,ce=function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{title:t.$t("IDC.orgOperator.editStatus"),visible:t.editStatusVisible,width:"448px","before-close":t.closeEdit},on:{"update:visible":function(e){t.editStatusVisible=e}}},[e("el-form",{ref:"editForm",attrs:{"label-position":"top",model:t.editForm,rules:t.editFormRules}},[e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:24}},[e("el-form-item",{attrs:{label:t.$t("IDC.orgOperator.currentStatus")}},[e("div",{staticClass:"text"},[e("span",{staticClass:"text"},[t._v(t._s(t.activeType))])])])],1),e("el-col",{attrs:{span:24}},[e("el-form-item",{attrs:{label:t.$t("IDC.orgOperator.newStatus"),prop:"currentStatus"}},[e("el-select",{attrs:{size:"small",placeholder:t.$t("common.placeholder.select")},model:{value:t.editForm.currentStatus,callback:function(e){t.$set(t.editForm,"currentStatus",e)},expression:"editForm.currentStatus"}},[e("el-option",{attrs:{label:t.activeLabel,value:t.active}})],1)],1)],1),e("el-col",{staticClass:"new-status",attrs:{span:24}},[e("el-form-item",{attrs:{label:t.$t("IDC.orgOperator.reason"),prop:"reason"}},[e("el-select",{attrs:{size:"small",placeholder:t.$t("common.placeholder.select")},model:{value:t.editForm.reason,callback:function(e){t.$set(t.editForm,"reason",e)},expression:"editForm.reason"}},[e("el-option",{attrs:{label:"Not Use",value:"notUse"}}),e("el-option",{attrs:{label:"Id Expired",value:"idExpired"}})],1)],1)],1),e("el-col",{attrs:{span:24}},[e("el-form-item",{attrs:{label:t.$t("IDC.orgOperator.remark"),prop:"remark"}},[e("el-input",{attrs:{size:"small",type:"textarea",rows:"4"},model:{value:t.editForm.remark,callback:function(e){t.$set(t.editForm,"remark",e)},expression:"editForm.remark"}})],1)],1)],1)],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{size:"small"},on:{click:t.closeEdit}},[t._v(t._s(t.$t("common.button.cancel")))]),e("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{type:"primary",size:"small"},on:{click:t.editSubmit}},[t._v(t._s(t.$t("common.button.submit")))])],1)],1)},de=[],ue={name:"OrgEditStatus",props:{editStatusVisible:{type:Boolean,default:!1},editForm:{type:Object,default:()=>({})},bizContext:{type:Object,default:()=>({})},datalist:{type:Object,default:()=>({})}},data(){return{editFormRules:{currentStatus:[{required:!0,Message:"please select",trigger:"change"}],reason:[],remark:[{required:!0,Message:"please select",trigger:"blur"}]},currentTasktype:""}},computed:{activeType(){return"04"===this.currentTasktype?"Suspended":"Active"},active(){return"04"===this.currentTasktype?"03":"04"},activeLabel(){return"04"===this.currentTasktype?"Active":"Suspended"}},methods:{closeEdit(){this.$emit("closeDialog")},async editSubmit(){let t=JSON.parse(this.bizContext.variables.changeInfo);this.currentTasktype=t.oldStatus,t.oldStatus=this.currentTasktype,t.newStatus=this.active;let e={actionType:"Approve",comments:this.editForm.remark,taskId:this.datalist.taskId,processId:this.datalist.processId,bizContext:{variables:{changeInfo:JSON.stringify(t)}}};this.$refs.editForm.validate(t=>{t&&Object(o["b"])(e).then(t=>{t.header&&t.header.success&&(this.closeEdit(),this.$emit("change-status-succeed"))})})}}},fe=ue,pe=Object(d["a"])(fe,ce,de,!1,null,null,null),me=pe.exports,he={name:"OrgOperatorStatus",props:{specificDetailData:{type:Object,default:()=>{}},receiverIdentityId:{type:String,default:""},bizContext:{type:Object,default:()=>{}},taskDetail:{type:Object,default:()=>{}},isEdit:{type:Boolean,default:!1}},components:{BasicInfoTow:Wt,BasicInfoBox:ae,BasicInfoItemBox:le,OrgEditStatus:me},data(){return{statusDialogVisible:!1,specificBasicInfoList:{},specificChangeInfoList:{},oldStatus:"",editForm:{currentStatus:"",reason:"",remark:""},currentTasktype:""}},computed:{},watch:{receiverIdentityId(t){this.getOrgOperatorDetail(t)}},methods:{showStatus(t){switch(t){case"00":return"New";case"02":return"Pending Active";case"03":return"Active";case"04":return"Suspended";case"05":return"Frozen";case"06":return"Closed";case"07":return"Capped";case"08":return"Dormant";default:return}},async getOrgOperatorDetail(t){let e=await Object(o["p"])(t);e.orgOperatorInfo.accessChannel.forEach((t,a)=>{switch(t){case"1005":e.orgOperatorInfo.accessChannel[a]="Web";break;case"1007":e.orgOperatorInfo.accessChannel[a]="Handset";break;case"1010":e.orgOperatorInfo.accessChannel[a]="API";break;default:return}}),this.specificBasicInfoList=e.orgOperatorInfo,this.specificBasicInfoList.status=this.showStatus(e.orgOperatorInfo.status),this.specificBasicInfoList.accessChannel=e.orgOperatorInfo.accessChannel.join();let a=e.orgOperatorInfo.createTime.map(t=>t<10?"0"+t:t),i=a.join().replace(/,/g,"");this.specificBasicInfoList.createTime=Object(D["a"])(i,"DD/MM/YYYY HH:mm:ss","YYYYMMDDHHmmss");const s=JSON.parse(this.bizContext.variables.changeInfo);this.specificChangeInfoList={oldStatus:this.showStatus(s.oldStatus),newStatus:this.showStatus(s.newStatus),reason:s.remark,remark:s.remark,taskType:this.taskDetail.taskType}},showDialog(){this.statusDialogVisible=!0},closeDialog(){this.statusDialogVisible=!1},changeStatusSucceed(){this.$message.success("Submit "+this.$t("TAC.tips.successFully")),setTimeout(()=>{window.close()},500)}}},ge=he,be=(a("82c8"),Object(d["a"])(ge,Mt,Yt,!1,null,"62549686",null)),ve=be.exports,Ce=function(){var t=this,e=t._self._c;return e("div",{staticClass:"specific-info"},[e("div",{staticClass:"basic-info-title specific-title"},[e("span",[t._v(t._s(t.$t("TAC.workflowDetail.specificInfo")))])]),e("el-divider",{staticClass:"specific-table-divider"}),e("div",{staticClass:"specific-container"},[e("customer-info",{attrs:{identityID:t.receiverIdentityId,cpId:""}})],1),e("div",{staticClass:"basic-info"},[e("div",{staticClass:"basic-info-title"},[t._v(t._s(t.$t("TAC.workflowDetail.changeInfo")))]),e("div",{staticClass:"specific-content"},[e("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[e("el-tab-pane",{attrs:{label:"New KYC",name:"first"}}),t.isHistory?t._e():e("el-tab-pane",{attrs:{label:"Old KYC",name:"second"}})],1),e("div",{staticClass:"kyc-container"},[e("kyc-form",{attrs:{mode:t.kycMode,incomingData:t.reviewKycData,identityId:t.receiverIdentityId,identityClassify:"customer"},on:{"edit-submit-success":t.submitSuccess,"workflow-kyc-cancel":t.handleKYCCancel,"workflow-kyc-submit":t.handleKYCSubmit}})],1)],1)])],1)},ye=[],ke=function(){var t=this,e=t._self._c;return e("div",{staticClass:"customer-detail-info-page"},[e("el-form",{ref:"basicInfoForm",attrs:{model:t.basicInfoForm,"label-position":"top",size:"small"}},[e("div",{staticClass:"basic-info-container"},[e("div",{staticClass:"specific-content-title"},[t._v(t._s(t.$t("TAC.workflowDetail.basicInfo")))]),e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:8}},[e("el-form-item",{attrs:{label:t.$t("IDC.orgCustomer.customerType")}},[t._v(" "+t._s(t.showCustomerType(t.basicInfoForm.customerType)||"-")+" ")])],1),e("el-col",{attrs:{span:8}},[e("el-form-item",{attrs:{label:t.$t("IDC.orgCustomer.IdentityStatus")}},[t._v(" "+t._s(t.basicInfoForm.status||"-")+" ")])],1),e("el-col",{attrs:{span:8}},[e("el-form-item",{attrs:{label:t.$t("IDC.orgCustomer.registrationDate")}},[t._v(" "+t._s(t.basicInfoForm.registerTime||"-")+" ")])],1),e("el-col",{attrs:{span:8}},[e("el-form-item",{attrs:{label:t.$t("IDC.orgCustomer.registeredby")}},[e("div",{staticClass:"edit-button-container"},[e("div",{staticClass:"content-item"},[t._v(t._s(t.basicInfoForm.registeredBy||"-"))]),e("div",{staticClass:"content-icon"},[t._e()],1)])])],1),e("el-col",{attrs:{span:8}},[e("el-form-item",{attrs:{label:t.$t("IDC.orgCustomer.MSISDN")}},[t._v(" "+t._s(t.basicInfoForm.msisdn||"-")+" ")])],1),e("el-col",{attrs:{span:8}},[e("el-form-item",{attrs:{label:t.$t("IDC.orgCustomer.language")}},[e("div",{staticClass:"edit-button-container"},[e("div",{staticClass:"content-item"},[t._v(" "+t._s(t.languageName||"-")+" ")]),e("div",{staticClass:"content-icon"},[t._e()],1)])])],1),e("el-col",{attrs:{span:8}},[e("el-form-item",{attrs:{label:t.$t("IDC.orgCustomer.trustLevel")}},[t._v(" "+t._s(t.basicInfoForm.trustLevel||"-")+" ")])],1),e("el-col",{attrs:{span:8}},[e("el-form-item",{attrs:{label:t.$t("IDC.orgCustomer.segment")}},[t._v(" "+t._s(t.basicInfoForm.segment||"-")+" ")])],1),e("el-col",{attrs:{span:8}},[e("el-form-item",{attrs:{label:t.$t("IDC.orgCustomer.chargeProfile")}},[e("div",{staticClass:"edit-button-container"},[e("div",{staticClass:"content-item"},[t._v(t._s(t.basicInfoForm.chargeProfileName||"-"))])])])],1),e("el-col",{attrs:{span:8}},[e("el-form-item",{attrs:{label:t.$t("IDC.orgCustomer.ruleProfile")}},[e("div",{staticClass:"edit-button-container"},[e("div",{staticClass:"content-item"},[t._v(t._s(t.basicInfoForm.ruleProfileName||"-"))])])])],1)],1),t.isShowVerify?e("div",[e("el-divider"),e("div",{staticClass:"section-title"},[t._v(t._s(t.$t("IDC.orgCustomer.verifyInfo")))]),e("el-row",{attrs:{gutter:40}},[e("el-col",{attrs:{span:8}},[e("el-form-item",{attrs:{label:t.$t("IDC.orgCustomer.verifyStatus")}},[t._v(" "+t._s(t.basicInfoForm&&t.basicInfoForm.verifyInfoDTO&&t.basicInfoForm.verifyInfoDTO.verifyStatus||"-")+" ")])],1),e("el-col",{attrs:{span:8}},[e("el-form-item",{attrs:{label:t.$t("IDC.orgCustomer.startTime")}},[t._v(" "+t._s(t.basicInfoForm&&t.basicInfoForm.verifyInfoDTO&&t.basicInfoForm.verifyInfoDTO.startTime||"-")+" ")])],1),e("el-col",{attrs:{span:8}},[e("el-form-item",{attrs:{label:t.$t("IDC.orgCustomer.endTime")}},[t._v(" "+t._s(t.basicInfoForm&&t.basicInfoForm.verifyInfoDTO&&t.basicInfoForm.verifyInfoDTO.endTime||"-")+" ")])],1)],1)],1):t._e()],1)])],1)},Ie=[],De=a("5826"),Oe={name:"CustomerInfo",props:{isShowVerify:{type:Boolean,default:!1},languageName:{type:String,default:""},identityID:{type:String,default:""},cpId:{type:String,default:""}},data(){return{titleConfig:{title:"",desc:this.$t("IDC.groupDetail.pageDesc")},basicInfoForm:{},dialogType:""}},created(){},watch:{identityID(t){t&&this.getCustomerInfoFn()}},activated(){},deactivated(){this.basicInfoForm={}},computed:{},methods:{handleKYCCancel(){},handleKYCSubmit(){},showCustomerType(t){switch(t){case"1002":return this.$t("IDC.orgCustomer.registeredCustomer");case"1001":return this.$t("IDC.orgCustomer.liteCustomer");case"1000":return this.$t("IDC.orgCustomer.unregisteredCustomer");default:return}},showCustomerStatus(t){switch(t){case"1002":return this.$t("IDC.orgCustomer.registeredCustomer");case"1001":return this.$t("IDC.orgCustomer.liteCustomer");case"1000":return this.$t("IDC.orgCustomer.unregisteredCustomer");default:return}},getCustomerInfoFn(){return new Promise(t=>{let e={};e.cpId=this.cpId,e.customerId=this.identityID,Object(De["k"])(e).then(a=>{a.header&&a.header.success&&(a.totalRecords=a.total),this.basicInfoForm={...a},this.basicInfoForm.registerTime=et()(this.basicInfoForm.registerTime).format("DD/MM/YYYY"),this.datilStatus=this.showStatus(this.basicInfoForm.status),"05"===this.basicInfoForm.status&&(this.isShowVerify=!0),Object(De["l"])(e).then(e=>{if(e.header&&e.header.success){let t;t=e.locales;for(let e in t)t[e].id===this.basicInfoForm.customerBasicKyc.languageCode&&(this.languageName=t[e].name)}t(e)}).catch(()=>{}).finally(()=>{}),t(a)}).catch(()=>{}).finally(()=>{this.refreshTableFlag=!1,this.searchLoading=!1})})}}},Te=Oe,we=(a("6e1c"),Object(d["a"])(Te,ke,Ie,!1,null,"011d1728",null)),Se=we.exports,Fe={name:"OrganizationKyc",props:{receiverIdentityId:{type:String,default:""},newKycFormData:{type:Object,default:()=>{}},bizContext:{type:Object,default:()=>{}},taskDetail:{type:Object,default:()=>{}},isEdit:{type:Boolean,default:!1},isHistory:{type:Boolean,default:!1}},components:{CustomerInfo:Se,KycForm:H["a"]},data(){return{activeName:"first",specificDetail:{},newKycForm:{},oldKycForm:{}}},computed:{orgSpecificInfoList(){return[{label:"organizationName",value:this.specificDetail.organizationName},{label:"shortCode",value:this.specificDetail.shortCode},{label:"organizationCode",value:this.specificDetail.organizationCode},{label:"identityStatus",value:this.specificDetail.status},{label:"segment",value:this.specificDetail.segment},{label:"chargeProfile",value:this.specificDetail.chargeProfile},{label:"ruleProfile",value:this.specificDetail.ruleProfileName},{label:"trustLevel",value:this.specificDetail.trustLevelName},{label:"registrationDate",value:dayjs(this.specificDetail.createTime).format("DD/MM/YYYY HH:mm:ss")}]},reviewKycData(){return{diffKYCData:"first"===this.activeName?this.newKycForm:this.oldKycForm}},kycMode(){return this.isEdit&&"first"===this.activeName?"workflowEdit":"workflowDiff"}},watch:{receiverIdentityId(t){t&&!this.isHistory&&this.getOldKYCDetail(t)},newKycFormData:{handler(t){this.newKycForm=t},deep:!0}},methods:{submitSuccess(){this.$store.dispatch("tagsView/delView",this.$route),this.$router.push("list")},handleKYCCancel(){const t=this.newKycForm;this.newKycForm={},this.$nextTick(()=>{this.newKycForm=t})},getOldKYCDetail(t){Object(Q["b"])({identityId:t}).then(t=>{const{header:e,identityKYCDataBean:a}=t;e&&e.success&&(this.oldKycForm=a,this.newKycForm=U(this.newKycForm,this.oldKycForm))}).catch(()=>{})},handleKYCSubmit(t,e){const a=Object(q["cloneDeep"])(this.bizContext);a.variables.changeInfo=JSON.parse(a.variables.changeInfo),a.variables.changeInfo.identityKYCData=W(t,a.variables.changeInfo.identityKYCData),a.variables.changeInfo=JSON.stringify(a.variables.changeInfo);const i={actionType:"Approve",initiatorId:this.taskDetail.initiatorId,processId:this.taskDetail.processId,taskId:this.taskDetail.taskId,comments:e,bizContext:a};Object(o["e"])(i).then(t=>{t.header&&t.header.success?(this.$message.success("Submit "+this.$t("TAC.tips.taskSuccess")),this.$router.push("list")):this.$message.error("Submit "+this.$t("TAC.tips.taskFailed"))})}}},$e=Fe,_e=(a("a7427"),Object(d["a"])($e,Ce,ye,!1,null,"67c316be",null)),je=_e.exports,ze=function(){var t=this,e=t._self._c;return e("div",{staticClass:"specific-info"},[e("div",{staticClass:"basic-info-title specific-title"},[e("span",[t._v(t._s(t.$t("TAC.workflowDetail.specificInfo")))])]),e("el-divider",{staticClass:"specific-table-divider"}),e("div",{staticClass:"specific-container"},[e("div",{staticClass:"specific-content"},[e("div",{staticClass:"specific-content-title"},[e("span",[t._v(t._s(t.$t("TAC.workflowDetail.basicInfo")))])])])]),e("specific-info",{staticClass:"specific-content-custom",attrs:{infoList:t.investigateSpecificInfoList},on:{"item-click":t.toParrentDetail}})],1)},Pe=[],Le={name:"InvestigateTask",props:{taskDetail:{type:Object,default:()=>{}}},components:{SpecificInfo:I},data(){return{}},methods:{toParrentDetail(){const t={isInvestigate:!0,taskState:this.taskDetail.taskState,taskId:this.taskDetail.parentTaskId,formURL:this.taskDetail.parentFormURL};this.openNewWindow({path:"detail",query:t})}},computed:{investigateSpecificInfoList(){return[{label:"originalTask",value:this.taskDetail.parentTaskId,isClick:!0,col:1},{label:"taskDescription",value:this.taskDetail.taskDesc,col:1}]}}},Ae=Le,Ne=(a("3ed3"),Object(d["a"])(Ae,ze,Pe,!1,null,"6f6e498d",null)),xe=Ne.exports,Be=function(){var t=this,e=t._self._c;return e("div",{staticClass:"specific-info"},[e("div",{staticClass:"basic-info-title specific-title"},[e("span",[t._v(t._s(t.$t("TAC.workflowDetail.specificInfo")))])]),e("el-divider",{staticClass:"specific-table-divider"}),e("div",{staticClass:"specific-content"},[e("div",{staticClass:"specific-content-title"},[t._v(t._s(t.$t("TAC.workflowDetail.basicInfo")))]),e("basic-info-box",{attrs:{basicInfoItem:t.specificBasicInfoList}}),e("el-divider",{staticClass:"table-divider change-info-divider"})],1),e("div",{staticClass:"specific-info"},[e("specific-info",{attrs:{title:t.$t("TAC.workflowDetail.changeInfo"),infoList:t.specificChangeInfoList}},[e("template",{slot:"new-auth-type"},[t.isEdit?e("el-link",{attrs:{underline:!1,icon:"el-icon-edit"},on:{click:t.handleShowEdit}},[t._v(" "+t._s(t.specificChangeInfoList[3].value||"-")+" ")]):e("span",[t._v(t._s(t.specificChangeInfoList[3].value||"-"))])],1)],2)],1),e("edit-auth-type-dialog",{ref:"editAuthTypeDialog",attrs:{title:t.$t("IDC.organizationOperatorDetail.label.editAthType"),specificInfo:t.specificValMap},on:{submitInfo:t.submitTaskProgressInfo}})],1)},Re=[],Ke=function(){var t=this,e=t._self._c;return e("portal-dialog",{attrs:{visible:t.dialogVisible,width:"448px",title:t.title,submitLoading:t.submitLoading},on:{"update:visible":function(e){t.dialogVisible=e},closed:t.cancelFn,"cancel-btn-click":t.cancelFn,"confirm-btn-click":t.confirmFn},scopedSlots:t._u([{key:"content",fn:function(){return[e("el-form",{ref:"formRef",attrs:{"label-position":"top",model:t.formData,rules:t.formRules}},[e("el-form-item",{attrs:{prop:"currentAuthenticationType",label:t.$t("IDC.organizationOperatorDetail.label.currentAthType")}},[e("div",[t._v(t._s(t.specificInfo.changeAccessChannel))])]),e("el-form-item",{attrs:{prop:"authenticationType",label:t.$t("IDC.organizationOperatorDetail.label.authenticationType")}},[e("el-checkbox-group",{attrs:{min:1},model:{value:t.formData.authenticationType,callback:function(e){t.$set(t.formData,"authenticationType",e)},expression:"formData.authenticationType"}},[e("el-checkbox",{key:"1005",attrs:{label:"1005",id:"1005"}},[t._v(t._s(t.$t("IDC.organizationOperatorDetail.label.web")))]),e("el-checkbox",{key:"1007",attrs:{label:"1007",id:"1007"}},[t._v(" "+t._s(t.$t("IDC.organizationOperatorDetail.label.handset")))])],1)],1),t.formData.authenticationType&&t.formData.authenticationType.includes("1005")?e("el-form-item",{attrs:{prop:"operatorName",label:t.$t("IDC.organizationOperatorDetail.label.UserName")}},[e("el-input",{attrs:{disabled:!!t.specificInfo.operatorName,placeholder:t.$t("common.placeholder.enter")},model:{value:t.formData.operatorName,callback:function(e){t.$set(t.formData,"operatorName",e)},expression:"formData.operatorName"}})],1):t._e(),t.formData.authenticationType&&t.formData.authenticationType.includes("1007")?e("el-form-item",{attrs:{prop:"operatorId",label:t.$t("IDC.organizationOperatorDetail.label.OperatorID")}},[e("el-input",{attrs:{disabled:!!t.specificInfo.operatorId,placeholder:t.$t("common.placeholder.enter")},model:{value:t.formData.operatorId,callback:function(e){t.$set(t.formData,"operatorId",e)},expression:"formData.operatorId"}})],1):t._e(),e("el-form-item",{attrs:{label:t.$t("IDC.organizationOperatorDetail.label.Remark"),prop:"remark"}},[e("el-input",{attrs:{type:"textarea",maxlength:512},model:{value:t.formData.remark,callback:function(e){t.$set(t.formData,"remark",e)},expression:"formData.remark"}})],1)],1)]},proxy:!0}])})},Ee=[],Ve={components:{PortalDialog:O["a"]},props:{title:{type:String,default:null},specificInfo:{type:Object,default:()=>{}}},data(){return{dialogVisible:!1,formData:{authenticationType:[],operatorName:"",operatorId:"",remark:null},formRules:{authenticationType:[p["z"]],operatorName:[p["e"]],operatorId:[p["e"]],remark:[p["e"]]},submitLoading:!1}},methods:{showDialog(){this.formData.operatorName=this.specificInfo.operatorName?this.specificInfo.operatorName:this.specificInfo.changeOperatorName,this.formData.operatorId=this.specificInfo.operatorId?this.specificInfo.operatorId:this.specificInfo.changeOperatorId,this.specificInfo.newAccessChannelArr?this.formData.authenticationType=this.specificInfo.newAccessChannelArr:this.formData.authenticationType=[],this.dialogVisible=!0,this.$nextTick(()=>{this.$refs.formRef.resetFields()})},cancelFn(){this.dialogVisible=!1,this.submitLoading=!1},confirmFn(){this.$refs.formRef.validate(t=>{t&&(this.submitLoading=!0,this.$emit("submitInfo",this.formData))})}}},Me=Ve,Ye=Object(d["a"])(Me,Ke,Ee,!1,null,"2b50608c",null),He=Ye.exports,qe={name:"OrgOperatorStatus",components:{BasicInfoBox:ae,SpecificInfo:I,EditAuthTypeDialog:He},props:{specificDetailData:{type:Object,default:()=>{}},receiverIdentityId:{type:String,default:""},bizContext:{type:Object,default:()=>{}},taskDetail:{type:Object,default:()=>{}},isEdit:{type:Boolean,default:!1}},data(){return{specificValMap:{},specificBasicInfoList:{},specificChangeInfoList:[{label:"oldAuthType",value:null},{label:"userName",value:null},{label:"operatorId",value:null},{label:"newAuthType",value:null,slot:"new-auth-type"},{label:"userName",value:null},{label:"operatorId",value:null},{label:"remark",value:this.taskDetail.reason,col:24}]}},computed:{},watch:{receiverIdentityId(t){this.getOrgOperatorDetail(t)},bizContext(t){if(t){let e=JSON.parse(t.variables.changeInfo);this.specificChangeInfoList[3].value=this.getAccessChannelName(e.accessChannel),this.specificChangeInfoList[4].value=e.operatorName,this.specificChangeInfoList[5].value=e.operatorId,this.specificChangeInfoList[6].value=e.reason?e.reason:e.remark,this.specificValMap.changeAccessChannel=this.specificChangeInfoList[3].value,this.specificValMap.changeOperatorName=e.operatorName,this.specificValMap.changeOperatorId=e.operatorId,this.specificValMap.newAccessChannelArr=this.getAccessChannelArr(e.accessChannel)}}},methods:{showStatus(t){switch(t){case"00":return"New";case"02":return"Pending Active";case"03":return"Active";case"04":return"Suspended";case"05":return"Frozen";case"06":return"Closed";case"07":return"Capped";case"08":return"Dormant";default:return}},async getOrgOperatorDetail(t){let e=await Object(Bt["v"])({receiverIdentityId:t});this.specificBasicInfoList=e.orgOperatorInfo,this.specificBasicInfoList.status=this.showStatus(e.orgOperatorInfo.status),this.specificBasicInfoList.accessChannel=this.getAccessChannelName(e.orgOperatorInfo.accessChannel);let a=e.orgOperatorInfo.createTime.map(t=>t<10?"0"+t:t),i=a.join().replace(/,/g,"");this.specificBasicInfoList.createTime=Object(D["a"])(i,"DD/MM/YYYY HH:mm:ss","YYYYMMDDHHmmss"),this.specificChangeInfoList[0].value=this.specificBasicInfoList.accessChannel,this.specificChangeInfoList[1].value=this.specificBasicInfoList.accessChannel.includes("Web")?e.orgOperatorInfo.operatorName:"-",this.specificChangeInfoList[2].value=this.specificBasicInfoList.accessChannel.includes("Handset")?e.orgOperatorInfo.operatorId:"-",this.specificValMap.operatorId=e.orgOperatorInfo.operatorId,this.specificValMap.operatorName=e.orgOperatorInfo.operatorName},getAccessChannelName(t){if(Array.isArray(t))return t.map(t=>wt["a"][t]).join(",");if(t&&t.includes(",")){let e=t.split(",");return e.map(t=>wt["a"][t]).join(",")}return wt["a"][t]||"-"},getAccessChannelArr(t){return Array.isArray(t)?t:t?t.split(","):[]},handleShowEdit(){this.$refs.editAuthTypeDialog.showDialog()},submitTaskProgressInfo(t){const e=Object(q["cloneDeep"])(this.bizContext);e.variables.changeInfo=JSON.parse(e.variables.changeInfo),this.$refs.editAuthTypeDialog.submitLoading=!1,t.authenticationType.includes("1005")?e.variables.changeInfo.operatorName=t.operatorName:e.variables.changeInfo.operatorName="",e.variables.changeInfo.accessChannel=t.authenticationType.join(","),t.authenticationType.includes("1007")?e.variables.changeInfo.operatorId=t.operatorId:e.variables.changeInfo.operatorId="",e.variables.changeInfo=JSON.stringify(e.variables.changeInfo);const a={actionType:"Approve",initiatorId:this.taskDetail.initiatorId,processId:this.taskDetail.processId,taskId:this.taskDetail.taskId,comments:t.remark,bizContext:e};Object(o["f"])(a).then(t=>{t.header&&t.header.success?(this.$message.success("Submit "+this.$t("TAC.tips.taskSuccess")),this.$refs.editAuthTypeDialog.cancelFn(),this.$router.push("list")):this.$message.error("Submit "+this.$t("TAC.tips.taskFailed"))}).finally(()=>{this.$refs.editAuthTypeDialog.submitLoading=!1})}},mounted(){}},Je=qe,Ue=(a("f921"),Object(d["a"])(Je,Be,Re,!1,null,"76a413ff",null)),Ge=Ue.exports,We=function(){var t=this,e=t._self._c;return e("div",{staticClass:"specific-info"},[e("div",{staticClass:"basic-info-title specific-title"},[e("span",[t._v(t._s(t.taskDetail.taskDesc))])]),e("div",{staticClass:"specific-container"},[e("specific-info",{attrs:{infoList:t.investigateSpecificInfoList}})],1)])},Xe=[],Qe={name:"InvestigateTask",props:{taskDetail:{type:Object,default:()=>{}},bizContext:{type:Object,default:()=>{}}},components:{SpecificInfo:I},data(){return{investigateSpecificInfoList:[{label:"remark",value:null,col:24}]}},watch:{bizContext(t){t&&(this.investigateSpecificInfoList[0].value=JSON.parse(t.variables.changeInfo).remark)}},methods:{}},Ze=Qe,ta=(a("13fb"),Object(d["a"])(Ze,We,Xe,!1,null,"0fe7eb8b",null)),ea=ta.exports,aa=function(){var t=this,e=t._self._c;return e("div",{staticClass:"specific-info"},[e("div",{staticClass:"basic-info-title specific-title"},[e("span",[t._v(t._s(t.$t("TAC.workflowDetail.specificInfo")))])]),e("el-divider",{staticClass:"specific-table-divider"}),e("div",{staticClass:"specific-container"},[e("specific-info",{attrs:{infoList:t.investigateSpecificInfoList}})],1)],1)},ia=[],sa={name:"InvestigateTask",props:{taskDetail:{type:Object,default:()=>{}}},components:{SpecificInfo:I},data(){return{investigateSpecificInfoList:[]}},methods:{}},oa=sa,ra=(a("3604"),Object(d["a"])(oa,aa,ia,!1,null,"c72f57e2",null)),na=ra.exports;const la={investigateTask:"InvestigateTask",approvalBulkPayment:"TaskBulk",approvaBulkTransactionReversal:"TaskBulk",approvalChangeOrgOperatorStatus:"OrgOperatorStatus",approvalChangeOrgOperatorKYC:"OrgOperatorKyc",approvalChangeCustKYC:"CustomerKyc",approvalChangeOrgKYC:"OrgOperatorAuthType",approvalChangeOrgName:"OrganizationTemp",approvalChangeOrgStatus:"OrganizationTemp",approvalChangeOrgProduct:"OrganizationTemp",approvalChangeOrgAcctStatus:"OrganizationTemp",approvalTransactionConfirm:"TransactionConfimation",approvalChangeOrgOperatorChannel:"OrgOperatorAuthType",approvalResetOrgOperatorPIN:"CommonShowTitle",approvalResetOrgOperatorPassword:"CommonShowTitle",approvalCommonTask:"CommonShowSpecific"};var ca={name:"taskDetail",components:{PortalDialog:m["a"],BasicInfoItem:f,TaskBulk:_,TransactionConfimation:V,OrganizationKyc:ot,OrganizationTemp:At,OrgOperatorKyc:Vt,OrgOperatorStatus:ve,CustomerKyc:je,InvestigateTask:xe,CommonShowSpecific:na,CommonShowTitle:ea,OrgOperatorAuthType:Ge},data(){return{invesCustomizedDay:[{validator:this.customizedDayValidator,message:"Enter a value between 0 and 100.",trigger:"change"}],invesCustomizedHours:[{validator:this.customizedHoursValidator,message:"Enter a value between 0 and 23.",trigger:"change"}],invesCustomizedMinutes:[{validator:this.customizedMinutesValidator,message:"Enter a value between 0 and 59.",trigger:"change"}],currentAction:[],bizContext:{},newKycForm:{},orderId:"",identityId:"",variableIdentityId:"",showEscalate:!1,showProcess:!0,selectRoleType:"",labelAcctions:[],taskName:"",recordCommonList:[],receiverIdentityId:"",selectDataList:[],curNumber:"",title:"",dialogVisible:!1,switchword:"No",isResetExpireTime:!1,escalateForm:{},escalateFormRules:{commentText:[p["e"],p["p"]]},taskProcessingTimeForm:{customizedDay:"",customizedHours:"",customizedMinutes:""},delegateSearchFromData:{operatorType:"",shortCode:"",userName:"",firstName:"",middleName:"",lastName:""},formRules:{shortCode:[{required:!0,message:"please enter",trigger:"change"}]},shortCodeConfig:{label:this.$t("TAC.myTodo.orgShortCode"),formItemClass:"short-code",key:"shortCode",prop:"shortCode",comp:"el-input",bind:{clearable:!0,placeholder:this.$t("common.placeholder.enter")}},delegateDialogTable:{columns:[{label:this.$t("TAC.myTodo.userName"),prop:"userName",align:"left"},{label:this.$t("TAC.myTodo.firstName"),prop:"firstName",align:"left"},{label:this.$t("TAC.myTodo.middleName"),prop:"middleName",align:"left"},{label:this.$t("TAC.myTodo.lastName"),prop:"lastName",align:"left"}],isSearch:!1,isCheck:!0,hasPagination:!0,paginationConfig:{total:0,pageIndex:1,pageSize:5,layout:"total,prev, pager, next"},getTableData:this.getDelegateDialogData,onSelectionChange:this.delegateDialigSelectChange},delegateRoleSearchFormData:{roleName:"",roleCategory:""},tempSelectDataList:[],newSearchType:!1,checkRadio:"operator",delegateRoleSearchFormConfigList:[{label:this.$t("TAC.myTodo.roleName"),key:"roleName",prop:"roleName",comp:"el-input",bind:{clearable:!0,placeholder:this.$t("common.placeholder.enter")}},{label:this.$t("TAC.myTodo.roleCategory"),key:"roleCategory",prop:"roleCategory",comp:"el-select",options:[{value:"",label:"All"},{value:"3000",label:"Organization Operator"},{value:"5000",label:"Organization"},{value:"7000",label:"Group"},{value:"8000",label:"SP"}],bind:{clearable:!0,placeholder:this.$t("common.placeholder.enter")}}],tempDelegateTableCol:[],basicInfoList:{},switchText:"No",addCommentForm:{},taskProcessingForm:{},taskProcessingRules:{remark:[p["e"]],action:[p["z"]],validityPeriod:[p["z"]],operator:[p["z"]],modifyandResubmit:[p["z"]],resetDueTime:[p["z"]]},BMEBusiness:""}},computed:{getSpecificComponent(){let t=this.$route.query.formURL;return this.BMEBusiness=t.slice(t.indexOf("=")+1),la[this.BMEBusiness]},showOperate(){return/Processing|Paused/.test(this.basicInfoList.taskState)},taskId(){return this.$route.query.taskId||this.$route.query.taskNo},processId(){return this.basicInfoList.processId},status(){return this.basicInfoList.taskState},delegateSearchFrom(){return"operator"===this.checkRadio?{formConfigList:[{label:this.$t("TAC.myTodo.operatorType"),key:"operatorType",prop:"operatorType",comp:"el-select",options:[{value:"orgOperator",label:"Organization Operator"},{value:"spOperator",label:"SP Operator"}],bind:{clearable:!0,placeholder:this.$t("common.placeholder.enter")}},{label:this.$t("TAC.myTodo.userName"),key:"userName",prop:"userName",comp:"el-input",bind:{clearable:!0,placeholder:this.$t("common.placeholder.enter")}},{label:this.$t("TAC.myTodo.firstName"),key:"firstName",prop:"firstName",comp:"el-input",bind:{clearable:!0,placeholder:this.$t("common.placeholder.enter")}},{label:this.$t("TAC.myTodo.middleName"),key:"middleName",prop:"middleName",comp:"el-input",bind:{clearable:!0,placeholder:this.$t("common.placeholder.enter")}},{label:this.$t("TAC.myTodo.lastName"),key:"lastName",prop:"lastName",comp:"el-input",bind:{clearable:!0,placeholder:this.$t("common.placeholder.enter")}}],formData:this.delegateSearchFromData}:{formConfigList:this.delegateRoleSearchFormConfigList,formData:this.delegateRoleSearchFormData}},isAddComment(){return!this.addCommentForm||!this.addCommentForm.comment},isHistory(){return/Rejected|Expired|Completed/.test(this.basicInfoList.taskState)},isEdit(){return"Modify"===this.basicInfoList.taskType&&!this.isHistory},dialogTitle(){return this.taskProcessingForm.action&&this.taskProcessingForm.action.replace(/^[a-z]/,t=>t.toUpperCase())+" Task"}},created(){this.init()},watch:{delegateSearchFromData:{handler(t){"orgOperator"===t.operatorType?5===this.delegateSearchFrom.formConfigList.length&&(this.newSearchType=!0,this.delegateSearchFrom.formConfigList.splice(1,0,this.shortCodeConfig)):6===this.delegateSearchFrom.formConfigList.length&&(this.newSearchType=!1,this.delegateSearchFrom.formConfigList.splice(1,1)),""!==t.shortCode&&this.$refs.operatorDialogRef.$refs.dialogSearchForm.clearValidate("shortCode")},deep:!0},newSearchType(t){this.delegateDialogTable.getTableData=t?this.getOrgDelegateDialogData:this.getDelegateDialogData}},methods:{openOperatorDialog(){this.delegateSearchFrom.formData.operatorType="spOperator",this.dialogVisible=!0},customizedDayValidator(t,e,a){let i=1*this.taskProcessingTimeForm.customizedDay;i<=100&&i>=0?a():(this.$refs.taskProcessingForm.clearValidate("customizedMinutes"),this.$refs.taskProcessingForm.clearValidate("customizedHours"),a(new Error))},customizedHoursValidator(t,e,a){let i=1*this.taskProcessingTimeForm.customizedHours;i<=23&&i>=0?a():(this.$refs.taskProcessingForm.clearValidate("customizedMinutes"),this.$refs.taskProcessingForm.clearValidate("customizedDay"),a(new Error))},customizedMinutesValidator(t,e,a){let i=1*this.taskProcessingTimeForm.customizedMinutes;i<=59&&i>=0?a():(this.$refs.taskProcessingForm.clearValidate("customizedHours"),this.$refs.taskProcessingForm.clearValidate("customizedDay"),a(new Error))},async init(){await this.getDetailData()},showSingleProcess(t){return"Paused"!=t.taskState&&1==t.processFlag&&this.labelAcctions.length&&!this.isInvestigate},showSingleDelegate(t){return"Paused"!=t.taskState&&t.processFlag&&"Modify"!=t.taskType},changeMemberId(t){this.taskProcessingTimeForm.customizedDay=t.replace(/[^\d]/g,"")},changeHoures(t){this.taskProcessingTimeForm.customizedHours=t.replace(/[^\d]/g,"")},changeMinutes(t){this.taskProcessingTimeForm.customizedMinutes=t.replace(/[^\d]/g,"")},handle$t(t){return this.$t(t)},getFutureTime(){const t=this.taskProcessingTimeForm.customizedDay,e=this.taskProcessingTimeForm.customizedHours,a=this.taskProcessingTimeForm.customizedMinutes,i=t?Number(t):0,s=e?Number(e):0,o=a?Number(a):0,r=24*i*60+60*s+o,n=new Date,l=n.getMinutes();return n.setMinutes(l+r),n.toLocaleString().replace(/\//g,"-")},addComment(){const t={processList:[{processId:this.processId,taskId:this.taskId}],isBatch:!1,actionType:"addcomments",comments:this.addCommentForm.comment};Object(o["a"])(t).then(t=>{t.header&&t.header.success&&(this.$modal.msgSuccess({message:"Comment added successfully.",type:"success",duration:3e3}),this.addCommentForm.comment="",this.getDetailData())})},handleConfirm(){const t={processList:[{processId:this.processId,taskId:this.taskId}],isBatch:!1,actionType:"escalation",comments:this.escalateForm.commentText};this.$refs.escalateForm.validate(e=>{e&&Object(o["a"])(t).then(t=>{t.header&&t.header.success&&(this.$modal.msgSuccess({message:"Comment confirmed successfully.",type:"success",duration:3e3}),this.escalateForm.commentText="",this.getDetailData())})})},showChannel(t){switch(t){case"1005":return"Web";case"1007":return"Handset";case"1010":return"API";default:return}},showStatus(t){return wt["c"][t]||"-"},switchTextChange(t){this.switchText=t?"Yes":"No"},getDelegateDialogData(){return new Promise(t=>{let e={operatorType:20,userName:this.delegateSearchFromData.userName,firstName:this.delegateSearchFromData.firstName,middleName:this.delegateSearchFromData.middleName,lastName:this.delegateSearchFromData.lastName,pageNo:this.delegateDialogTable.paginationConfig.pageIndex,pageSize:this.delegateDialogTable.paginationConfig.pageSize};Object(o["h"])(e).then(e=>{if(this.selectProcessOptSearchLoading=!1,this.delegateDialogTable.isSearch=!1,e.list=e.list.map(t=>(t.id=t.identityId,t)),e.header&&e.header.success)return e.totalRecords=e.total,t(e)})})},async getOrgDelegateDialogData(){let t={shortCode:this.delegateSearchFromData.shortCode,operatorName:this.delegateSearchFromData.userName,selectType:"operator",operatorType:30,pageSize:this.delegateDialogTable.paginationConfig.pageSize,pageNo:this.delegateDialogTable.paginationConfig.pageIndex},e=await Object(o["o"])(t);if(this.selectProcessOptSearchLoading=!1,this.delegateDialogTable.isSearch=!1,e.header&&e.header.success){let t=e.list.map(t=>(t.id=t.operatorId,t));return{header:e.header,list:t,totalRecords:e.totalSize}}},delegateCloseDialog(){this.$refs.operatorDialogRef.$refs.dialogSearchForm.resetFields(),this.dialogVisible=!1,this.tempSelectDataList.splice(0),this.delegateDialogReset()},delegateDialogReset(){this.$refs.operatorDialogRef.$refs.dialogSearchForm.resetFields(),Object.keys(this.$refs.operatorDialogRef.$refs.dialogSearchForm.formData).forEach(t=>{this.$refs.operatorDialogRef.$refs.dialogSearchForm.formData[t]=""}),this.newSearchType=!1,this.delegateSearchFrom.formData.operatorType="spOperator",this.$nextTick(()=>{this.delegateRoleSearchFormData.roleName="",this.delegateDialogTable.isSearch=!0})},comfirmDelegateHandler(){this.selectDataList=this.tempSelectDataList,this.dialogVisible=!1,this.delegateDialogReset()},delegateDialigSelectChange(t){this.tempSelectDataList=t},checkChange(t){this.selectRoleType=t,"role"===t?(this.tempDelegateTableCol=JSON.parse(JSON.stringify(this.delegateDialogTable.columns)),this.delegateDialogTable.columns=[{label:this.$t("TAC.myTodo.role"),prop:"roleName",align:"left"},{label:this.$t("TAC.myTodo.description"),prop:"description",align:"left"},{label:this.$t("TAC.myTodo.roleCategory"),prop:"roleCategory",align:"left"}],this.delegateDialogTable.getTableData=this.queryRoleData,this.$nextTick(()=>{this.delegateDialogTable.isSearch=!0})):(this.delegateDialogTable.columns=this.tempDelegateTableCol,this.delegateDialogTable.getTableData=this.getDelegateDialogData,this.delegateDialogReset(),this.$nextTick(()=>{this.delegateDialogTable.isSearch=!0}))},queryRoleData(){let t={selectType:"role",roleName:this.delegateRoleSearchFormData.roleName,roleCategory:this.delegateRoleSearchFormData.roleCategory,pageNo:this.delegateDialogTable.paginationConfig.pageIndex,pageSize:this.delegateDialogTable.paginationConfig.pageSize};return new Promise(e=>{Object(o["q"])(t).then(t=>{if(this.selectProcessOptSearchLoading=!1,this.delegateSearchLoading=!1,this.delegateDialogTable.isSearch=!1,t.header&&t.header.success){let a=t.list.map(t=>{switch(t.id=t.roleId,t.roleType){case"2000":t.roleCategory="Sp Operator";break;case"3000":t.roleCategory="Organization Operator";break;case"5000":t.roleCategory="Organization";break;case"7000":t.roleCategory="GROUP";break;case"8000":t.roleCategory="SP";break;default:break}return t});this.delegateRoleSearchFormData.roleCategory&&(a=a.filter(t=>t.roleType.includes(this.delegateRoleSearchFormData.roleCategory))),e({header:t.header,list:a.slice((this.delegateDialogTable.paginationConfig.pageIndex-1)*this.delegateDialogTable.paginationConfig.pageSize,this.delegateDialogTable.paginationConfig.pageSize*this.delegateDialogTable.paginationConfig.pageIndex),totalRecords:a.length})}})})},async getDetailData(){let t={taskId:this.taskId},e=null;if(e=/Kyc/.test(this.getSpecificComponent)?await Object(o["c"])(t):await Object(o["s"])(t),!e)return void(this.basicInfoList={});this.title=e.taskDTO.taskId,this.showEscalate=e.manualEscalate,this.taskName=e.taskDTO.taskName,this.recordCommonList=e.comments?e.comments:[];const a=e.taskDTO&&e.taskDTO.actions,i=a.split(",");let s=["approve","complete","redo","delegate","investigate","reject"];this.currentAction=i,this.labelAcctions=i.filter(t=>s.includes(t)).map(t=>this.handle$t("TAC.taskDetail."+(t.charAt(0).toUpperCase()+t.slice(1)))),this.basicInfoList={...e.taskDTO,...e.processDTO},"Modify"==this.basicInfoList.taskType&&(this.labelAcctions=this.labelAcctions.filter(t=>"Delegate"!=t)),this.newKycForm=Object.assign({},e.identityKYCDataBean);const r=e.bizContext&&e.bizContext.variables&&e.bizContext.variables.changeInfo;if(e.bizContext&&e.bizContext.orderId&&(this.orderId=e.bizContext.orderId),this.basicInfoList.initiatorNameConcat=(this.basicInfoList.initiatorName||"")+"\\"+(this.basicInfoList.initiatorId||""),this.basicInfoList.ownerIdConcat=(this.basicInfoList.ownerName||"")+"\\"+(this.basicInfoList.ownerId||""),"0"==this.basicInfoList.ownerId&&(this.basicInfoList.ownerIdConcat=""),this.basicInfoList.eventSource=e.bizContext?wt["b"][e.bizContext.eventSource]:"",this.basicInfoList.createTime=Object(D["a"])(this.basicInfoList.createTime,"DD-MM-YYYY HH:mm:ss","YYYY-MM-DD HH:mm:ss"),this.basicInfoList.initiationChannel=this.showChannel(this.basicInfoList.channel),r){this.bizContext=e.bizContext;this.showChannel(e.bizContext.channel);let t=JSON.parse(r);this.variableIdentityId=t.identityId||t.receiverIdentityId,this.currentTasktype=t.oldStatus,this.receiverIdentityId=t.receiverIdentityId;let a=await Object(o["p"])(this.receiverIdentityId);a.orgOperatorInfo&&(this.basicInfoList={...this.basicInfoList,workflowReceiver:`${a.orgOperatorInfo.operatorName}/${a.orgOperatorInfo.shortCode}`,receiver:`${a.orgOperatorInfo.operatorName}/${a.orgOperatorInfo.shortCode}`})}},switchValue(t){this.curNumber=t,"1"==t?(this.switchword="Yes",this.isResetExpireTime=!0):(this.switchword="No",this.isResetExpireTime=!1)},handleSubmit(){let t={processList:[{processId:this.processId,taskId:this.taskId}],isBatch:!1,actionType:this.taskProcessingForm.action,comments:this.taskProcessingForm.remark};const e=1440*this.taskProcessingTimeForm.customizedDay+60*this.taskProcessingTimeForm.customizedHours+1*this.taskProcessingTimeForm.customizedMinutes;let a=this.selectDataList.map(t=>t.identityId?{operatorId:t.identityId,operatorType:"role"==this.selectRoleType?"3":"1"}:t.roleId?{roleId:t.roleId}:void 0);if(this.taskProcessingForm.action==this.$t("TAC.taskDetail.Reject")&&("1"==this.curNumber?(this.taskProcessingForm.action="backinitiator",t.actionType="backinitiator"):(this.taskProcessingForm.action="reject",t.actionType="reject")),this.taskProcessingForm.action==this.$t("TAC.taskDetail.Approve")&&(this.taskProcessingForm.action="approve",t.actionType="approve"),this.taskProcessingForm.action==this.$t("TAC.taskDetail.Delegate")&&(this.taskProcessingForm.action="delegate",t={comments:this.taskProcessingForm.remark,actionType:this.taskProcessingForm.action,assigneeType:"role"==this.selectRoleType?"3":"1",assignee:a,processList:[{processId:this.processId,taskId:this.taskId}],isBatch:!1,isResetExpireTime:this.isResetExpireTime}),this.taskProcessingForm.action==this.$t("TAC.taskDetail.Investigate")){const i="investigate";this.taskProcessingForm.operator==this.$t("TAC.taskDetail.Initiator")&&(this.taskProcessingForm.validityPeriod==this.$t("TAC.taskDetail.SameasOriginal")&&(t={processList:[{processId:this.processId,taskId:this.taskId}],isBatch:!1,actionType:i,comments:this.taskProcessingForm.remark,isResetExpireTime:!1}),this.taskProcessingForm.validityPeriod==this.$t("TAC.taskDetail.Customized")&&(t={processList:[{processId:this.processId,taskId:this.taskId}],isBatch:!1,actionType:i,comments:this.taskProcessingForm.remark,taskExpireTimeInterval:e,isResetExpireTime:!0})),this.taskProcessingForm.operator==this.$t("TAC.taskDetail.Others")&&(this.taskProcessingForm.validityPeriod==this.$t("TAC.taskDetail.SameasOriginal")&&(t={processList:[{processId:this.processId,taskId:this.taskId}],isBatch:!1,assigneeType:"role"==this.selectRoleType?"3":"1",actionType:i,comments:this.taskProcessingForm.remark,assignee:a,isResetExpireTime:!1}),this.taskProcessingForm.validityPeriod==this.$t("TAC.taskDetail.Customized")&&(t={processList:[{processId:this.processId,taskId:this.taskId}],isBatch:!1,assigneeType:"role"==this.selectRoleType?"3":"1",actionType:i,assignee:a,comments:this.taskProcessingForm.remark,taskExpireTimeInterval:e,isResetExpireTime:!0}))}this.taskProcessingForm.operator={},this.$refs["taskProcessingForm"].validate(e=>{e&&Object(o["a"])(t).then(t=>{t.header&&t.header.success&&(this.$modal.msgSuccess({message:"Task processed successfully",type:"success",duration:3e3}),this.getDetailData(),this.taskProcessingForm.remark="",this.$store.dispatch("tagsView/delView",this.$route),this.$router.push("list"))})})},removeSelected(t){this.selectDataList.splice(this.selectDataList.indexOf(t),1)},handleCancel(){this.taskProcessingForm.remark=""}}},da=ca,ua=(a("2d9d"),a("a873"),Object(d["a"])(da,i,s,!1,null,"3b09f12a",null));e["default"]=ua.exports},ff72:function(t,e,a){}}]);
//# sourceMappingURL=chunk-ef3d286a.js.map