(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8b3eab60","chunk-613927e6","chunk-3c9a1c4e","chunk-4553e00e","chunk-63c3d4b1"],{"034d":function(e,t,a){},"061d":function(e,t,a){},"06b1":function(e,t,a){"use strict";a("0a92")},"06bb":function(e,t,a){},"0798":function(e,t,a){},"0a20":function(e,t,a){"use strict";a("5890")},"0a92":function(e,t,a){},"0cbd":function(e,t,a){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",{class:["portal-add-popup",e.checkBoxClass]},[t("el-dialog",{staticClass:"search",attrs:{title:e.addForm.title,visible:e.searchVisible,width:"800px","close-on-click-modal":!1,"before-close":e.cancel},on:{"update:visible":function(t){e.searchVisible=t}}},[e.isShowSearch?t("portal-form",{ref:"searchList",attrs:{"form-data":e.formData,"form-config-list":e.formConfigList,needOperateBtn:!0,"form-rules":e.tempFormRules,searchBtnLoading:e.searchLoading,needBottomLine:!0,smallAutoColumn:e.smallAutoColumn,bigAutoColumn:e.bigAutoColumn},on:{"common-enter-event":e.search,"reset-btn-click":e.reset,"search-btn-click":e.search}}):e._e(),t("table-page",{ref:"data-table",attrs:{size:"small",isSingleCheck:e.isSingleCheck,"is-check":e.isCheck,"is-check-memory":!0,"is-search":e.refreshTableFlag,"has-pagination":e.hasPagination,columns:e.addForm.columns,pagination:e.paginationConfig,getTableData:e.getTableData,"init-checks":e.multipleChecks,"id-key":e.addForm.idKey},on:{fetchData:e.fetchData,"selection-change":e.onSelectionChange,"single-selection-change":e.singelSekectionChange},scopedSlots:e._u([e._l(e.addForm.columns.filter(e=>e.__slotName),(function(t){return{key:t.__slotName,fn:function(a){return[e._t(t.__slotName,null,{row:a.data.row})]}}}))],null,!0)}),t("div",{attrs:{slot:"footer"},slot:"footer"},[e.isShowCloseBtn?t("div",[t("el-button",{attrs:{id:"cancel",size:"small"},on:{click:e.cancel}},[e._v(e._s(e.$t("common.button.close"))+" ")])],1):t("div",[t("el-button",{attrs:{id:"cancel",size:"small"},on:{click:e.cancel}},[e._v(e._s(e.$t("common.button.cancel"))+" ")]),t("el-button",{attrs:{id:"confirm",size:"small",type:"primary"},on:{click:e.submit}},[e._v(" "+e._s(e.$t("common.button.confirm"))+" ")])],1)])],1)],1)},o=[],r=a("3186"),s=a("4c09"),n={name:"addPrompt",components:{TablePage:s["a"],PortalForm:r["a"]},props:{searchVisible:{type:Boolean,default:!1},hasCheckBox:{type:Boolean,default:!0},hasPagination:{type:Boolean,default:!1},isCheck:{type:Boolean,default:!1},isCheckMemory:{type:Boolean,default:!1},isShowCloseBtn:{type:Boolean,default:!1},tableData:{type:Array,default:()=>[]},initChecks:{type:Array,default:()=>[]},options:{type:Object,default:()=>({})},addForm:{type:Object,default:()=>{}},submitCallBack:{type:String,default:()=>""},childSearch:{type:Function,default:null},smallAutoColumn:{type:Number,default:2,validate:e=>!(24%e)},bigAutoColumn:{type:Number,default:2,validate:e=>!(24%e)},isShowSearch:{type:Boolean,default:!0},isSingleCheck:{type:Boolean,default:!1}},watch:{searchVisible(e){e&&(this.refreshTableFlag=!0,this.multipleSelection=this.getCheckedSelection()),this.firstLoadTableEnd=!1}},data(){return{tempFormRules:{propertyName:[{required:!1,message:"Please enter",trigger:"blur"}]},paginationConfig:{total:this.addForm.columns&&this.addForm.columns.length||0,pageIndex:1,pageSize:5,layout:"total,prev, pager, next"},multipleSelection:[],multipleSelectionCache:{},uncommitSelectionache:{},refreshTableFlag:!1,searchLoading:!1,param:{},multipleChecks:this.initChecks,initChecksCache:this.initChecks,firstLoadTableEnd:!1,singelSekectionChangeData:""}},computed:{formConfigList(){return this.addForm.searchForm&&this.addForm.searchForm.formConf||[{label:this.addForm["label"],key:"propertyName",prop:"name",comp:"el-input",bind:{clearable:!0,placeholder:this.$t("common.placeholder.enter")}}]},formData(){return this.addForm.searchForm&&this.addForm.searchForm.formData},checkBoxClass(){const e=this.hasCheckBox;return e?"checkbox-on":"checkbox-off"}},methods:{singelSekectionChange(e){this.singelSekectionChangeData=e},getCheckedSelection(){const e=this.addForm.idKey||"id",t=this.initChecks.map(t=>t[e]),a=this.getObjFlatValue(this.multipleSelectionCache,e);return a?a.filter(a=>t.includes(a[e])):[]},fetchData(e){this.paginationConfig.total=e.total,this.searchLoading=!1,this.$emit("data-fetcher",e)},filterListByField(e,t){return e.reduce((e,a)=>{if(!e.length)return[...e,a];const i=e.some(e=>e[t]===a[t]);return i?e:[...e,a]},[])},getObjFlatValue(e,t){let a=Object.values(e);return a=a.reduce((e,t)=>e.length?[...e,...t]:[...t],[]),a=this.filterListByField(a,t),a},onSelectionChange(e){const t=this.addForm.idKey||"id",a=this.paginationConfig.pageIndex;let i=this.initChecksCache,o=this.multipleSelectionCache[a]||[];const r=e.map(e=>e[t]),s=o.filter(e=>!r.includes(e[t])),n=s.map(e=>e[t]);i=i.filter(e=>!n.includes(e[t])),this.initChecksCache=[...i],this.multipleSelectionCache[a]=[...e],this.multipleSelection=this.getObjFlatValue(this.multipleSelectionCache,t),this.uncommitSelectionache={...this.multipleSelectionCache}},async getTableData(e){let t=null;const a=this.addForm.idKey||"id";this.tableData.length>0?t=this.tableData:(this.param.searchKey&&(e.searchKey=this.param.searchKey),t=await this.childSearch(e));const i=this.getObjFlatValue(this.uncommitSelectionache,a),o=this.firstLoadTableEnd?this.initChecksCache:this.initChecks;this.firstLoadTableEnd=!0;const r=[...o,...i],s=r.map(e=>e[a]),n=t.list||[],l=n.some(e=>s.includes(e[a]));let c=[];return l&&(c=r),window.requestIdleCallback(()=>{this.multipleChecks=c}),this.refreshTableFlag=!1,t},search(e){this.param.pageNo=1,this.param.pageSize=10,this.param.searchKey=e,this.searchLoading=!0,this.$emit("update:search",this.param);try{this.$refs["data-table"].queryData(!0)}finally{this.searchLoading=!1}},reset(){if(this.formData)for(let e in this.formData)this.formData[e]=null;this.refreshTableFlag=!0,this.firstLoadTableEnd=!1},submit(){const e=this.options;this.isSingleCheck&&(this.multipleSelection=this.singelSekectionChangeData),this.$emit("submit-call-back",this.multipleSelection,e),this.$emit("update:searchVisible",!1),this.multipleChecks=[]},cancel(){this.$emit("update:searchVisible",!1),this.multipleChecks=[]}},created(){},mounted(){},activated(){}},l=n,c=(a("7f3c"),a("2877")),d=Object(c["a"])(l,i,o,!1,null,"51661ae8",null);t["a"]=d.exports},"0cef":function(e,t,a){},"0dda":function(e,t,a){},"0fb1":function(e,t,a){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",{class:{"portal-add-popup":!0,[e.checkBoxClass]:!0,"portal-add-popup--no-pagination":!e.hasPagination}},[t("el-dialog",{staticClass:"search",attrs:{title:e.addForm.title,visible:e.productVisible,width:"800px","close-on-click-modal":!1,"before-close":e.cancel},on:{"update:visible":function(t){e.productVisible=t}}},[t("div",{staticClass:"topTitle"},[e._v(e._s(e.$t("IDC.orgCustomer.selectedProduct")))]),t("div",{staticClass:"selected-container"},[t("div",{staticClass:"show-selected-div"},e._l(e.getObjFlatValue(e.uncommitSelectionache,e.addForm.idKey),(function(a,i){return t("el-tag",{key:i,attrs:{type:"info",closable:!0},on:{close:function(t){return e.removeSelected(a)}}},[e._v(" "+e._s(a.productName)+" ")])})),1)]),t("table-page",{ref:"data-table",attrs:{size:"small",idKey:"productId","is-check":e.isCheck,"is-check-memory":!0,"is-search":e.refreshTableFlag,"has-pagination":e.hasPagination,columns:e.addForm.columns,pagination:e.paginationConfig,getTableData:e.getTableData,"init-checks":e.multipleChecks,"id-key":e.addForm.idKey,"expand-row-keys":e.expands,sortArr:["productName","productDesc"]},on:{fetchData:e.fetchData,"selection-change":e.onSelectionChange}}),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{id:"cancel",size:"small"},on:{click:e.cancel}},[e._v(e._s(e.$t("common.button.cancel"))+" ")]),t("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{id:"confirm",size:"small",type:"primary"},on:{click:e.submit}},[e._v(" "+e._s(e.$t("common.button.confirm"))+" ")])],1)],1)],1)},o=[],r=a("4c09"),s={name:"addPrompt",components:{TablePage:r["a"]},props:{productVisible:{type:Boolean,default:!1},hasCheckBox:{type:Boolean,default:!0},hasPagination:{type:Boolean,default:!1},isCheck:{type:Boolean,default:!1},isCheckMemory:{type:Boolean,default:!1},isShowCloseBtn:{type:Boolean,default:!1},tableData:{type:Array,default:()=>[]},initChecks:{type:Array,default:()=>[]},options:{type:Object,default:()=>({})},addForm:{type:Object,default:()=>{}},submitCallBack:{type:String,default:()=>""},childSearch:{type:Function,default:null},smallAutoColumn:{type:Number,default:3,validate:e=>!(24%e)},bigAutoColumn:{type:Number,default:4,validate:e=>!(24%e)}},watch:{productVisible(e){e&&(this.refreshTableFlag=!0,this.multipleSelection=this.getCheckedSelection()),this.firstLoadTableEnd=!1}},data(){return{expands:[],paginationConfig:{total:this.addForm&&this.addForm.columns&&this.addForm.columns.length||0,pageIndex:1,pageSize:5},multipleSelection:[],multipleSelectionCache:{},uncommitSelectionache:{},refreshTableFlag:!1,searchLoading:!1,param:{},multipleChecks:this.initChecks,initChecksCache:this.initChecks,firstLoadTableEnd:!1}},computed:{formConfigList(){return this.addForm&&this.addForm.searchForm&&this.addForm.searchForm.formConf},formData(){return this.addForm&&this.addForm.searchForm&&this.addForm.searchForm.formData},checkBoxClass(){const e=this.hasCheckBox;return e?"checkbox-on":"checkbox-off"}},methods:{getCheckedSelection(){const e=this.addForm.idKey||"id",t=this.initChecks.map(t=>t[e]),a=this.getObjFlatValue(this.multipleSelectionCache,e);return a?a.filter(a=>t.includes(a[e])):[]},fetchData(e){this.paginationConfig.total=e.total,this.searchLoading=!1,this.$emit("data-fetcher",e)},filterListByField(e,t){return e.reduce((e,a)=>{if(!e.length)return[...e,a];const i=e.some(e=>e[t]===a[t]);return i?e:[...e,a]},[])},getObjFlatValue(e,t){let a=Object.values(e);return a=a.reduce((e,t)=>e.length?[...e,...t]:[...t],[]),a=this.filterListByField(a,t),a},onSelectionChange(e){const t=this.addForm.idKey,a=this.paginationConfig.pageIndex;let i=this.initChecksCache,o=this.multipleSelectionCache[a]||[];const r=e.map(e=>e[t]),s=o.filter(e=>!r.includes(e[t])),n=s.map(e=>e[t]);i=i.filter(e=>!n.includes(e[t])),this.initChecksCache=[...i],this.multipleSelectionCache[a]=[...e],this.multipleSelection=this.getObjFlatValue(this.multipleSelectionCache,t),this.uncommitSelectionache={...this.multipleSelectionCache}},async getTableData(e){let t=null;const a=this.addForm.idKey;this.tableData.length>0?t=this.tableData:(this.param.searchKey&&(e.searchKey=this.param.searchKey),t=await this.childSearch(e));const i=this.getObjFlatValue(this.uncommitSelectionache,a),o=this.firstLoadTableEnd?this.initChecksCache:this.initChecks;this.firstLoadTableEnd=!0;const r=[...o,...i],s=r.map(e=>e[a]),n=t.list||[],l=n.some(e=>s.includes(e[a]));let c=[];return l&&(c=r),window.requestIdleCallback(()=>{this.multipleChecks=c}),this.refreshTableFlag=!1,t},submit(){const e=this.options;this.$emit("submit-call-back",this.multipleSelection,e),this.$emit("update:productVisible",!1),this.multipleChecks=[]},cancel(){this.$emit("update:productVisible",!1),this.multipleChecks=[]},handleSelect(e){let t=e.data.row.productId;-1===this.expands.indexOf(t)?this.expands.push(t):this.expands.splice(this.expands.indexOf(t),1)},removeSelected(e){this.$refs["data-table"].$refs.tableRef.toggleRowSelection(e)}},filters:{obj2str(e){const t=[];return t.push(Object.values(e)[1]),t.join(",")}},created(){},mounted(){},activated(){}},n=s,l=(a("953e"),a("2877")),c=Object(l["a"])(n,i,o,!1,null,"40730a68",null);t["a"]=c.exports},"0fc4":function(e,t,a){e.exports={activeMenuColor:"#366bfc",primaryColor:"#366bfc",menuColor:"#5c5c5c",fillEmphasisColor:"#5c5c5c",fillLightColor:"#fafafa",fillStrongColor:"#c7c7c7",fillRegularColor:"#f0f0f0",fillColorDark:"#e0e0e0",lineStrongColor:"#8f8f8f",textEmphasisColor:"#282828",backgroundColor:"#fff",statusErrorColor:"#ff4040",statusSuccessColor:"#27bf88",statusColorwarning:"#ff7420",statusColorSAecondaryWarning:"#faaf0c",statusNoticeColor:"#338bff",statusDark:"#c7c7c7",initialColor:"#E0E0E0",statusNoticeBackgroundColor:"#F0F9FF",statusErrorBackgroundColor:"#FFF2F0",statusSuccessBackgroundColor:"#F0FFF7",statusSecondaryWarningBackgroundColor:"#FFFBE6",statusWarningBackgroundColor:"#FFF6E6",statusDarkBackgroundColor:"#FAFAFA",lineColorBlue:"#ADD9FF",lineColorError:"#FFC1BA",lineColorGreen:"#A5E6C6",lineColorWarning:"#FFF7ed"}},"107c":function(e,t,a){"use strict";a("a857")},"138f":function(e,t,a){"use strict";a("99ce")},"15f0":function(e,t,a){"use strict";a("3b90")},"164f":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"review-transaction"},[t("div",[t("portal-header",{attrs:{projectObj:e.titleConfig}}),t("portal-form",{ref:"balanceForm",attrs:{"form-data":e.searchList,"form-config-list":e.formConfigList,needOperateBtn:!0,needBottomLine:!1,searchBtnLoading:e.searchLoading},on:{"reset-btn-click":e.reset,"search-btn-click":e.search}})],1),t("div",{staticClass:"table-list-container"},[t("div",{staticClass:"divider-line"}),t("div",{staticStyle:{margin:"20px 0"}},[t("el-dropdown",{on:{command:e.exportData}},[t("el-button",{attrs:{type:"primary",size:"small",disabled:e.isExportDisabled}},[e._v(" "+e._s(e.$t("common.button.export"))+" "),t("i",{staticClass:"el-icon-arrow-down el-icon--right",staticStyle:{"font-size":"12px"}})]),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",{attrs:{command:"CSV"}},[e._v("CSV")]),t("el-dropdown-item",{attrs:{command:"PDF"}},[e._v("PDF")])],1)],1)],1),t("table-page",{staticClass:"table-page",attrs:{size:"small","has-pagination":!0,columns:e.columns,pagination:e.paginationConfig,getTableData:e.getTableData,"is-search":e.refreshTableFlag},scopedSlots:e._u([{key:"organizationName",fn:function(a){return[t("el-link",{attrs:{underline:!0},on:{click:function(t){return e.viewDetail(a.data.row)}}},[e._v(e._s(a.data.row.organizationName))])]}},{key:"parentOrganizationName",fn:function(a){return[t("el-link",{attrs:{underline:!0},on:{click:function(t){return e.viewDetail(a.data.row,!0)}}},[e._v(e._s(a.data.row.parentOrgName))])]}}])})],1)])},o=[],r=a("4c09"),s=a("c811"),n=a("3186"),l=a("cb9d"),c=a("1caf"),d=a("689d"),u=a("c652"),h={name:"BalanceOverview",components:{TablePage:r["a"],PortalHeader:s["a"],PortalForm:n["a"]},props:{propShortCode:{type:String,requied:!0}},data(){return{searchLoading:!1,refreshTableFlag:!1,isExportDisabled:!0,paginationConfig:{total:0,pageIndex:1,pageSize:10},searchList:{shortCode:"",accountType:""},accountTypeList:[],columns:[{label:"Level",prop:"level",align:"left",width:100},{label:"Organization Name",prop:"organizationName",align:"left",__slotName:"organizationName",width:200},{label:"Parent Organization Name",prop:"parentOrgName",align:"left",__slotName:"parentOrganizationName",width:250},{label:"Account Type Alias",prop:"accountAlias",align:"left",width:200},{label:"Current Balance",prop:"currentBalanceSymbol",align:"right",width:200},{label:"Available Balance",prop:"availableBalanceSymbol",align:"right",width:200},{label:"Reserved Balance",prop:"reservedBalanceSymbol",align:"right",width:200},{label:"Unclear Balance",prop:"unclearBalanceSymbol",align:"right",width:200}],queryFormRules:{time:[{required:!0,message:"Please select time",trigger:"change"}]}}},created(){this.init()},computed:{titleConfig(){return{title:"Balance Overview",desc:"You can query and export account balance information about the current organization and its child organizations."}},formConfigList(){return[{label:"Organization Short Code",key:"shortCode",comp:"el-input",bind:{placeholder:this.$t("common.placeholder.enter")}},{label:"Account Type",key:"accountType",comp:"el-select",options:this.accountTypeList,bind:{placeholder:this.$t("common.placeholder.select")},hidden:!1}]}},methods:{async init(){await this.initAccountTypeList()},async initAccountTypeList(){let e=await Object(d["a"])(l["p"],"dics");e=e||[],e=e.map(Object(d["f"])("code","name")),this.accountTypeList=e},reset(){this.$refs.balanceForm.resetFields(),this.paginationConfig={total:0,pageIndex:1,pageSize:10},this.refreshTableFlag=!0,this.isExportDisabled=!0},search(){this.$refs["balanceForm"].validate(e=>{e&&(this.refreshTableFlag=!0,this.paginationConfig={total:0,pageIndex:1,pageSize:10})})},exportData(e){let t=this.searchList.shortCode,a=!1;t||(t=this.propShortCode,a=!0);let i={shortCode:t,queryChildren:a,accountTypeId:this.searchList.accountType,pageSize:this.paginationConfig.total,pageNo:1,fileType:e};Object(c["a"])(l["m"],i,{fileType:e})},getTableData(){let e=this.searchList.shortCode,t=!1;e||(e=this.propShortCode,t=!0);let a={shortCode:e,queryChildren:t,accountTypeId:this.searchList.accountType,pageSize:this.paginationConfig.pageSize,pageNo:this.paginationConfig.pageIndex};return Object(l["B"])(a).then(e=>(e.list=e.accounts.map(e=>({...e,...JSON.parse(sessionStorage.getItem(this.$route.params))}))||[],e.list.forEach(e=>{e.currentBalanceSymbol=this.formatBalance(e.accountBalance,"currentBalance"),e.availableBalanceSymbol=this.formatBalance(e.accountBalance,"availableBalance"),e.reservedBalanceSymbol=this.formatBalance(e.accountBalance,"reservedBalance"),e.unclearBalanceSymbol=this.formatBalance(e.accountBalance,"unclearBalance")}),e.list.length?this.isExportDisabled=!1:this.isExportDisabled=!0,e.header||(e.header={success:!1},e.total=0),e.totalRecords=e.total,e)).catch(()=>{this.isExportDisabled=!0;const e={header:{},list:[]};return e}).finally(()=>{this.refreshTableFlag=!1})},formatBalance(e,t){return e[t]?u["a"].format(e[t].amount/100,e[t].currencyCode):"-"},viewDetail(e,t){let a=e.identityId,i=e.shortCode;if(t&&(a=e.parentOrgId,i=e.parentShortCode),a&&i){const e={identityId:a,organizationId:a,propShortCode:i};this.openNewWindow({path:"detail",query:{data:encodeURIComponent(JSON.stringify(e))}})}},showBalanceWithUnit(e){return e.amount||(e.amount=0),"USD"===e.currencyCode?"$"+(+e.amount).toFixed(2).replace(/\d{1,3}(?=(\d{3})+(\.\d*)?$)/g,"$&,"):`${(+e.amount).toFixed(2).replace(/\d{1,3}(?=(\d{3})+(\.\d*)?$)/g,"$&,")} ${e.currencyCode}`}}},p=h,m=(a("1e94"),a("2877")),f=Object(m["a"])(p,i,o,!1,null,"521f9a9c",null);t["default"]=f.exports},"183d":function(e,t,a){},"1a78":function(e,t,a){"use strict";a("63ab")},"1b7a":function(e,t,a){},"1c03":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"business-portal-page"},[t("portal-header",{attrs:{projectObj:e.titleConfig}}),t("portal-form",{ref:"searchList",attrs:{"form-data":e.searchList,"form-config-list":e.formConfigList,searchBtnLoading:e.searchLoading,searchBtnDisabled:!e.hasPerm("TC_ORGTRANSACTION_REVIEW_REVERSE_REQUEST_BTN")},on:{"common-enter-event":e.search,"reset-btn-click":e.reset,"search-btn-click":e.search}}),t("div",{staticClass:"table-list-container"},[t("el-dropdown",{on:{command:e.handleExportClick}},[t("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],staticClass:"margin-bottom-16",attrs:{disabled:e.exportDisabled,type:"primary",size:"small"}},[e._v(" "+e._s(e.$t("common.button.export"))+" "),t("i",{staticClass:"el-icon-arrow-down el-icon--right",staticStyle:{"font-size":"12px"}})]),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",{attrs:{command:"Excel"}},[e._v("Excel")]),t("el-dropdown-item",{attrs:{command:"Excel2007"}},[e._v("Excel 2007")]),t("el-dropdown-item",{attrs:{command:"CSV"}},[e._v("CSV")]),t("el-dropdown-item",{attrs:{command:"PDF"}},[e._v("PDF")])],1)],1),t("table-page",{ref:"data-table",staticClass:"table-page",attrs:{size:"small","has-pagination":e.hasPagination,columns:e.columns,pagination:e.paginationConfig,getTableData:e.getTableData,"is-search":e.refreshTableFlag},scopedSlots:e._u([{key:"orderIdOperation",fn:function(a){return[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.showDetail(a.data.row)}}},[e._v(" "+e._s(a.data.row.tradeOrderID)+" ")])]}},{key:"status",fn:function(a){return[t("span",{staticClass:"status-circle",style:e.statusStyle(a.data.row.status)}),e._v(" "+e._s(e.showStatus(a.data.row.status))+" ")]}},{key:"operation",fn:function(a){return e.isShowReverse(a.data.row)?[t("el-button",{staticClass:"btn",staticStyle:{padding:"0"},attrs:{type:"text"},on:{click:function(t){return e.reverse(a.data.row)}}},[e._v(" "+e._s(e.$t("IDC.reviewTransaction.button.reverse"))+" ")])]:void 0}}],null,!0)})],1)],1)},o=[],r=a("c811"),s=a("5a0c"),n=a.n(s),l=a("4c09"),c=a("3186"),d=a("0bbd");function u(e){return Object(d["a"])({url:"/fintech/v1/transaction/reversalRequestList",method:"post",data:e})}var h=a("5e70"),p=a("0360"),m=a("7dfc"),f={name:"ReviewReversalRequest",components:{PortalHeader:r["a"],TablePage:l["a"],PortalForm:c["a"]},props:{activeName:{type:String,default:""},identityId:{type:String,default:""}},data(){return{identityType:"",entityIdentityId:this.identityId,searchLoading:!1,searchVisible:!1,refreshTableFlag:!1,hasPagination:!0,exportDisabled:!0,totalRecords:0,searchList:{timePeriod:"",queryMode:"both"},columns:[{label:this.$t("IDC.reviewReversalRequest.label.requestId"),prop:"tradeOrderID",align:"left",__slotName:"orderIdOperation","min-width":150},{label:this.$t("IDC.reviewReversalRequest.label.creationTime"),prop:"createTime",align:"left","min-width":200},{label:this.$t("IDC.reviewReversalRequest.label.completionTime"),prop:"completeTime",align:"left","min-width":133},{label:this.$t("IDC.reviewReversalRequest.label.status"),prop:"status",align:"left",__slotName:"status","min-width":123},{label:this.$t("IDC.reviewReversalRequest.label.initiator"),prop:"initiatorPublicName",align:"left","min-width":193},{label:this.$t("IDC.reviewReversalRequest.label.receiver"),prop:"receiverPublicName",align:"left","min-width":193},{label:this.$t("IDC.reviewReversalRequest.label.currency"),prop:"currency",align:"left","min-width":150},{label:this.$t("common.label.operation"),prop:"operation",align:"left",fixed:"right",__slotName:"operation","min-width":93}],categoryOptions:[{label:"All",value:"both"},{label:"Received",value:"receiver"},{label:"Sent",value:"requester"}],paginationConfig:{total:0,pageIndex:1,pageSize:10}}},computed:{titleConfig(){return{title:this.$t("IDC.reviewReversalRequest.pageTitle"),desc:this.$t("IDC.reviewReversalRequest.pageDesc")}},formConfigList(){return[{formItemClass:"form-special-date-box",sameGroup:!0,label:this.$t("IDC.reviewReversalRequest.label.timePeriod"),prop:"timePeriod",comp:[{key:"timePeriod",comp:"el-date-picker",bind:{id:"timePeriod",type:"datetimerange",format:"dd/MM/yyyy HH:mm:ss","range-separator":"~","default-time":["00:00:00","23:59:59"],"start-placeholder":"Start","end-placeholder":"End"}},{comp:"i",class:"el-icon-date data_icon"}]},{label:this.$t("IDC.reviewReversalRequest.label.category"),key:"queryMode",comp:"el-select",options:this.categoryOptions,bind:{placeholder:this.$t("common.placeholder.select"),id:"category"}}]},statusStyle(){return e=>{switch(e){case"00":return{"background-color":""+this.GlobalStyleVariables.statusNoticeColor};default:return{"background-color":""+this.GlobalStyleVariables.statusSuccessColor}}}}},watch:{},created(){this.identityType="5000",this.identityId?this.entityIdentityId=this.identityId:this.entityIdentityId=p["default"].get("organizationIdentityId")},activated(){},mounted(){},methods:{isShowReverse(e){return"00"===e.status},reset(){this.searchList={timePeriod:"",queryMode:"both"},this.search()},search(){this.$refs["searchList"].innerFormRef.validate(e=>{e?(this.paginationConfig={total:0,pageIndex:1,pageSize:10},this.refreshTableFlag=!0):this.searchLoading=!1})},showDetail(e){let t={tradeOrderId:e.tradeOrderID,identityId:this.entityIdentityId,identityType:this.identityType,type:"detail",from:"reversalRequest"};const a="/mainPage/identifierCenter/organizationInfo/organization/transactionDetail";this.openNewWindow({path:a,query:{params:encodeURIComponent(JSON.stringify(t))}})},reverse(e){let t={tradeOrderId:e.tradeOrderID,identityId:this.entityIdentityId,identityType:this.identityType,type:"reverse",from:"reversalRequest"};const a="/mainPage/identifierCenter/organizationInfo/organization/transactionDetail";this.openNewWindow({path:a,query:{params:encodeURIComponent(JSON.stringify(t))}})},getTableData(){let e={receiverID:this.entityIdentityId,queryMode:this.searchList.queryMode,createTimeBegin:this.searchList.timePeriod?n()(this.searchList.timePeriod[0]).format("YYYY-MM-DD HH:mm:ss"):"",createTimeEnd:this.searchList.timePeriod?n()(this.searchList.timePeriod[1]).format("YYYY-MM-DD HH:mm:ss"):"",startNumber:this.paginationConfig.pageIndex,pageSize:this.paginationConfig.pageSize};return this.searchLoading=!0,new Promise(t=>{u(e).then(e=>{e.header&&e.header.success?(e.totalRecords=e.totalSize||0,e.list=e.reversalRequestDTOs||[],e.list=e.list.map(e=>(e.createTime&&(e.createTime=n()(e.createTime).format("DD/MM/YYYY HH:mm:ss")),e.completeTime&&(e.completeTime=n()(e.completeTime).format("DD/MM/YYYY HH:mm:ss")),e))):(e.totalRecords=0,e.list=[]),this.exportDisabled=!(e.list.length>0),t(e)}).catch(()=>{t()}).finally(()=>{this.refreshTableFlag=!1,this.searchLoading=!1})})},handleExportClick(e){this.$refs["searchList"].validate(t=>{if(t){let t={receiverID:this.entityIdentityId,queryMode:this.searchList.queryMode,createTimeBegin:this.searchList.timePeriod?n()(this.searchList.timePeriod[0]).format("YYYY-MM-DD HH:mm:ss"):"",createTimeEnd:this.searchList.timePeriod?n()(this.searchList.timePeriod[1]).format("YYYY-MM-DD HH:mm:ss"):"",exportType:e};Object(h["d"])(t).then(t=>{if("Excel2007"===e?e="XLS":"Excel"===e&&(e="XLSX"),"application/json"===t.type){const e=new FileReader;e.readAsText(t);const a=this;e.onload=function(){const t=JSON.parse(e.result);a.$modal.msgError(t.header.responseDesc)}}else{const a=new Date,i=Object(m["a"])(a,"YYYYMMDDHHmmss"),o=new Blob([t],{type:"application/ms-excel"}),r=document.createElement("a");r.download="REVERSAL_REQUEST_"+i+"."+e.toLowerCase(),r.style.display="none",r.href=URL.createObjectURL(o),document.body.appendChild(r),r.click(),URL.revokeObjectURL(r.href),document.body.removeChild(r)}}).catch().finally()}})},showStatus(e){switch(e){case"00":return"New";default:return"Completed"}}}},b=f,g=(a("06b1"),a("2877")),y=Object(g["a"])(b,i,o,!1,null,"7ec38e54",null);t["default"]=y.exports},"1c45":function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"c",(function(){return s})),a.d(t,"a",(function(){return n}));var i=a("0bbd"),o=a("5f9a");function r(e){return Object(i["a"])({url:Object(o["a"])("/fintech/v1/organization/detail",e),method:"get"})}function s(e){return Object(i["a"])({url:Object(o["a"])("/fintech/v1/organization/status",e),method:"get"})}function n(e){return Object(i["a"])({url:"/fintech/v1/organization/changeStatus",data:e,method:"post"})}},"1c49":function(e,t,a){"use strict";a("58d1")},"1caf":function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var i=a("7dfc");async function o(e,t,a){const{fileType:o,blobType:r="application/ms-excel"}=a,s=await e(t);if("application/json"===s.type){const e=new FileReader;e.readAsText(s);const t=this;e.onload=function(){const a=JSON.parse(e.result);t.$modal.msgError(a.header.responseDesc)}}else{const e=new Date,t=Object(i["a"])(e,"YYYYMMDDHHmmss");let a="FINANCIAL_RECONCILIATION_"+t+"."+o.toLowerCase();s.headers&&(a=s.headers["content-disposition"].split(";")[1].split("filename=")[1]);const n=new Blob([s],{type:r}),l=document.createElement("a");l.download=a,l.style.display="none",l.href=URL.createObjectURL(n),document.body.appendChild(l),l.click(),URL.revokeObjectURL(l.href),document.body.removeChild(l)}}},"1d86":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"role-config business-portal-page"},[t("portal-header",{attrs:{projectObj:e.titleConfig,showBottomLine:!0}}),t("portal-form",{ref:"searchList",attrs:{"form-data":e.searchList,"form-config-list":e.formConfigList,searchBtnLoading:e.searchLoading,formRules:e.queryFormRules,searchBtnDisabled:!e.hasPerm("orgOperator"===e.activeName?"IC_OPERATOR_ORG_SEARCH_BTN":"IC_TACKCALL_ORG_SEARCH_BTN ")},on:{"common-enter-event":e.search,"reset-btn-click":e.reset,"search-btn-click":e.search}}),t("div",{staticClass:"table-list-container"},[t("div",{staticClass:"btn-region"},[t("div",{staticClass:"create-btn"},[t("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-plus",disabled:!e.hasPerm("IC_OPERATOR_ORG_ADD_BTN")},on:{click:e.addOrgOperator}},[e._v(" "+e._s(e.$t("common.button.create"))+" ")])],1),"organization"!==e.activeName&&"myOrganization"!==e.activeName?t("div",{staticClass:"right-btn"},[""!==e.sortCode?t("el-select",{staticClass:"selectSort",staticStyle:{width:"200px"},attrs:{placeholder:"Please Select",size:"small"},on:{change:e.handleCommandSort},model:{value:e.sortDataCode,callback:function(t){e.sortDataCode=t},expression:"sortDataCode"}},e._l(e.sort,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1):e._e(),t("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"Sort by...",size:"small"},on:{change:e.handleCommand},model:{value:e.sortCode,callback:function(t){e.sortCode=t},expression:"sortCode"}},e._l(e.todoInfoList.sortData,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1):e._e()]),t("table-page",{staticClass:"table-page",attrs:{size:"small","has-pagination":!0,columns:e.columns,initializingLoading:!1,pagination:e.paginationConfig,getTableData:e.getTableData,"is-search":e.refreshTableFlag,sortArr:"orgOperator"==e.activeName?e.sortArr:[]},scopedSlots:e._u([{key:"status",fn:function(a){return[t("div",{staticClass:"edit-button-container"},[""!==a.data.row.status?t("span",{staticClass:"status-circle",style:e.statusStyle(a.data.row.status)}):e._e(),t("span",{staticClass:"content-item"},[e._v(e._s(e.showStatus(a.data.row.status)))]),"03"!=a.data.row.status&&"04"!=a.data.row.status||e.initiatorIdentityId==a.data.row.orgOperatorId?e._e():t("el-link",{attrs:{underline:!1,disabled:!e.hasPerm("IC_CHANGEORGOPERATORSTATUS_BTN"),icon:"el-icon-edit"},on:{click:function(t){return e.showEditDialog(a.data.row)}}})],1)]}},{key:"roles",fn:function(a){return[t("span",[e._v(" "+e._s(a.data.row.role||"-")+" ")])]}},{key:"suspended",fn:function(t){return[e._v(" "+e._s(t.data.row.verifySuspend?"Yes":"No")+" ")]}},{key:"operation",fn:function(a){return[e.initiatorIdentityId!=a.data.row.orgOperatorId?t("el-button",{staticClass:"btn",attrs:{type:"text",size:"small"},on:{click:function(t){return e.handleDetail(a.data.row)}}},[e._v(" "+e._s(e.$t("common.label.detail"))+" ")]):e._e(),"06"!=a.data.row.status&&"00"!=a.data.row.status&&e.initiatorIdentityId!=a.data.row.orgOperatorId?t("span",{staticClass:"buttomBar"},[e._v("|")]):e._e(),"06"!=a.data.row.status&&"00"!=a.data.row.status&&e.initiatorIdentityId!=a.data.row.orgOperatorId?t("el-button",{staticClass:"btn",attrs:{type:"text",size:"small"},on:{click:function(t){return e.handleCloseDialog(a.data.row)}}},[e._v(" "+e._s(e.$t("common.button.close"))+" ")]):e._e()]}}])})],1),t("org-edit-status",{attrs:{editStatusVisible:e.statusDialogVisible,curStatus:e.oldStatus,receiverIdentityId:e.receiverIdentityId,newStatusList:e.newStatusList,isShowReason:"orgOperator"==e.activeName},on:{"update:editStatusVisible":function(t){e.statusDialogVisible=t},"update:edit-status-visible":function(t){e.statusDialogVisible=t},"update:curStatus":function(t){e.oldStatus=t},"update:cur-status":function(t){e.oldStatus=t},"update:receiverIdentityId":function(t){e.receiverIdentityId=t},"update:receiver-identity-id":function(t){e.receiverIdentityId=t},updateList:e.updateList}}),[t("el-dialog",{attrs:{title:e.$t("IDC.orgOperator.closeOperatorTitle"),visible:e.closeOperatorVisible,width:"448px","before-close":e.closeOperator},on:{"update:visible":function(t){e.closeOperatorVisible=t}}},[t("el-form",{ref:"closeOperatorForm",staticClass:"add-form",attrs:{"label-position":"top",model:e.closeOperatorForm,rules:e.closeOperatorFormRules}},[t("div",{staticClass:"close-note"},[e._v(e._s(e.closeNote))]),t("el-divider"),t("el-row",[t("p",{staticClass:"remark-reason"},[e._v(e._s(e.$t("IDC.orgOperator.remarkAndReason")))]),t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:e.$t("IDC.orgOperator.reason"),prop:"reason"}},[t("el-select",{attrs:{size:"small",placeholder:e.$t("common.placeholder.select")},model:{value:e.closeOperatorForm.reason,callback:function(t){e.$set(e.closeOperatorForm,"reason",t)},expression:"closeOperatorForm.reason"}},e._l(e.reasonList,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:e.$t("IDC.orgOperator.remark"),prop:"remark"}},[t("el-input",{attrs:{size:"small",type:"textarea",rows:"4",placeholder:e.$t("common.placeholder.enter")},model:{value:e.closeOperatorForm.remark,callback:function(t){e.$set(e.closeOperatorForm,"remark",t)},expression:"closeOperatorForm.remark"}})],1)],1)],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{size:"small"},on:{click:e.closeOperator}},[e._v(e._s(e.$t("common.button.cancel")))]),t("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{type:"primary",size:"small"},on:{click:e.closeOperatorSubmit}},[e._v(e._s(e.$t("common.button.submit")))])],1)],1)],t("portal-short-code",{attrs:{searchVisible:e.searchVisible,"short-code":e.searchList.shortCode,isSelect:!0},on:{"update:searchVisible":function(t){e.searchVisible=t},"update:search-visible":function(t){e.searchVisible=t},"update:shortCode":function(t){return e.$set(e.searchList,"shortCode",t)},"update:short-code":function(t){return e.$set(e.searchList,"shortCode",t)}}})],2)},o=[],r=a("c811"),s=a("4c09"),n=a("3186"),l=a("8f48"),c=a("4865"),d=a("02e3"),u=a("4e1a"),h=a("0360"),p=a("d8d3"),m={components:{PortalHeader:r["a"],TablePage:s["a"],PortalForm:n["a"],portalShortCode:l["a"],OrgEditStatus:u["a"]},name:"OrgOperator",props:{activeName:{type:String,default:"orgOperator"},propShortCode:{type:String,default:""}},data(){let e=(e,t,a)=>{if(!t)return a();Object(c["l"])(this.searchList.shortCode).then(e=>{if(e.header&&e.header.success)if("Exist"===e.check)a();else{if("NotExist"===e.check)return a(new Error("The Organization Short Code is not existed"));if("Invalid"===e.check)return a(new Error("The Organization Short Code is not invalid"))}}).catch(()=>a(new Error("The Organization Short Code Exception")))};return{sortDataCode:"",sortCode:"",checkNull:!1,todoInfoList:{sortData:[{label:"Sort by",value:""},{label:"Dare of Birth",value:"birthDay"},{label:"First Name",value:"firstName"},{label:"Last Name",value:"lastName"},{label:"Middle Name",value:"middleName"},{label:"Organization Short Code",value:"shortCode"},{label:"User Name",value:"userName"}]},sort:[{label:"Ascending",value:"true"},{label:"Descending",value:"false"}],sortBy:null,sortByMode:null,searchLoading:!1,refreshTableFlag:!1,searchVisible:!1,isReset:!1,paginationConfig:{total:0,pageIndex:1,pageSize:10},reasonList:[{label:"Not Use",value:"1"},{label:"Id Expired",value:"2"}],searchList:{identityId:"",shortCode:this.propShortCode,operatorId:"%",status:"",operatorName:"",roles:"",username:"%",firstName:"%",middleName:"%",lastName:"%",birthday:""},sortArr:["identityId","orgOperatorId","organizationCode","operatorId","status","operatorName","firstName","middleName","lastName","dateBirth","verifySuspend","shortCode","userName","birthday"],oldStatus:"",receiverIdentityId:"",statusDialogVisible:!1,queryFormRules:{identityId:[d["v"]],operatorId:[d["v"],d["g"]],operatorName:[d["v"],d["s"]],shortCode:[d["v"],{validator:e,trigger:"blur"},d["l"]],username:[d["v"],d["i"]],firstName:[d["v"],d["h"]],middleName:[d["v"],d["h"]],lastName:[d["v"],d["h"]]},availableRoleList:[],closeOperatorVisible:!1,closeNote:"",closeOperatorForm:{originalStatus:"",reason:"",remark:"",receiverIdentityId:""},closeOperatorFormRules:{reason:[d["z"]],remark:[{required:!0,message:"Please enter content",trigger:"blur"}]},orgOperatorId:"",initiatorIdentityId:"",newStatusList:[]}},computed:{statusStyle(){return e=>{switch(e){case"03":return{"background-color":"#658DF9"};case"06":return{"background-color":""+this.GlobalStyleVariables.fillStrongColor};case"07":return{"background-color":""+this.GlobalStyleVariables.statusSuccessColor};case"00":return{"background-color":""+this.GlobalStyleVariables.backgroundColor,border:"1px solid "+this.GlobalStyleVariables.initialColor};case"02":return{"background-color":""+this.GlobalStyleVariables.backgroundColor,border:"1px solid "+this.GlobalStyleVariables.initialColor};case"04":return{"background-color":""+this.GlobalStyleVariables.statusColorwarning};case"05":return{"background-color":""+this.GlobalStyleVariables.fillStrongColor};case"08":return{"background-color":""+this.GlobalStyleVariables.fillStrongColor};default:return}}},titleConfig(){return"organization"==this.activeName?{title:this.$t("IDC.orgOperator.oragationTitle"),desc:this.$t("IDC.orgOperator.myOragationDesc")}:"myOrganization"==this.activeName?{title:"",desc:this.$t("IDC.orgOperator.myOragationDesc")}:{title:this.$t("IDC.orgOperator.orgOperator"),desc:this.$t("IDC.orgOperator.myOragationDesc")}},formConfigList(){return"organization"==this.activeName||"myOrganization"==this.activeName?[{label:this.$t("IDC.orgOperator.identityID"),key:"identityId",comp:"el-input",bind:{clearable:!0,placeholder:this.$t("common.placeholder.enter")}},{label:this.$t("IDC.orgOperator.operatorID"),key:"operatorId",comp:"el-input",bind:{clearable:!0,placeholder:this.$t("common.placeholder.enter")}},{label:this.$t("IDC.organizationOperatorDetail.label.Role"),key:"roles",prop:"roles",comp:"el-select",options:this.availableRoleList,bind:{clearable:!1,placeholder:this.$t("common.placeholder.select")}},{label:this.$t("IDC.organizationOperatorDetail.label.IdentityStatus"),key:"status",comp:"el-select",bind:{placeholder:this.$t("common.placeholder.select"),id:"status"},options:[{label:"All",value:"All"},{value:"03",label:"Active"},{value:"00",label:"New"},{value:"02",label:"Pending Active"},{value:"04",label:"Suspended"},{value:"05",label:"Frozen"},{value:"06",label:"Closed"},{value:"07",label:"Capped"},{value:"08",label:"Dormant"}]},{label:this.$t("IDC.orgOperator.userName"),key:"username",comp:"el-input",bind:{clearable:!0,placeholder:this.$t("common.placeholder.enter")}}]:[{label:this.$t("IDC.orgOperator.identityID"),key:"identityId",comp:"el-input",bind:{clearable:!0,placeholder:this.$t("common.placeholder.enter")}},{formItemClass:"org-short-code",label:this.$t("IDC.orgOperator.orgShortCode"),key:"shortCode",comp:"el-input",bind:{placeholder:this.$t("common.placeholder.select"),clearable:!0},slots:[{name:"append",comp:"el-link",class:"short-code-icon",bind:{icon:"el-icon-more",underline:!1},event:{click:this.openVisible}}]},{label:this.$t("IDC.orgOperator.operatorID"),key:"operatorId",comp:"el-input",bind:{clearable:!0,placeholder:this.$t("common.placeholder.enter")}},{label:this.$t("IDC.organizationOperatorDetail.label.Role"),key:"roles",prop:"roles",comp:"el-select",options:this.availableRoleList,bind:{clearable:!1,placeholder:this.$t("common.placeholder.select")}},{label:this.$t("common.label.status"),key:"status",comp:"el-select",bind:{placeholder:this.$t("common.placeholder.select"),id:"status"},options:[{label:"All",value:"All"},{label:"Active",value:"03"},{label:"Closed",value:"06"},{label:"Dormant",value:"07"},{label:"New",value:"00"},{label:"Pending Active",value:"02"},{label:"Suspended",value:"04"}]},{label:this.$t("IDC.orgOperator.userName"),key:"username",comp:"el-input",bind:{clearable:!0,placeholder:this.$t("common.placeholder.enter")}},{label:"First Name",key:"firstName",comp:"el-input",bind:{id:"firstName",clearable:!0,placeholder:this.$t("common.placeholder.enter")}},{label:"Middle Name",key:"middleName",comp:"el-input",bind:{id:"middleName",clearable:!0,placeholder:this.$t("common.placeholder.enter")}},{label:"Last Name",key:"lastName",comp:"el-input",bind:{id:"lastName",clearable:!0,placeholder:this.$t("common.placeholder.enter")}},{label:"Date of Birth",key:"birthday",comp:"el-date-picker",bind:{id:"birthday",type:"date","value-format":"yyyyMMdd",placeholder:"Please select",format:"dd-MM-yyyy"}}]},columns(){return"organization"==this.activeName?[{label:this.$t("IDC.orgOperator.identityID"),prop:"orgOperatorId",align:"left","min-width":"185"},{label:this.$t("IDC.orgOperator.operatorID"),prop:"operatorId",align:"left","min-width":"165"},{label:this.$t("IDC.organizationOperatorDetail.label.Role"),prop:"role",align:"left","min-width":"200",__slotName:"roles"},{label:this.$t("IDC.organizationOperatorDetail.label.IdentityStatus"),prop:"status",align:"left","min-width":"165",__slotName:"status"},{label:this.$t("IDC.orgOperator.userName"),prop:"userName",align:"left","min-width":"135"},{label:this.$t("IDC.orgOperator.operation"),prop:"operation",align:"left",width:"165",__slotName:"operation",fixed:"right"}]:"myOrganization"==this.activeName?[{label:this.$t("IDC.orgOperator.identityID"),prop:"orgOperatorId",align:"left","min-width":"185"},{label:this.$t("IDC.orgOperator.operatorID"),prop:"operatorId",align:"left","min-width":"165"},{label:this.$t("IDC.organizationOperatorDetail.label.Role"),prop:"role",align:"left","min-width":"165",__slotName:"roles"},{label:this.$t("IDC.organizationOperatorDetail.label.IdentityStatus"),prop:"status",align:"left","min-width":"165",__slotName:"status"},{label:this.$t("IDC.orgOperator.operation"),prop:"operation",align:"left",width:"165",__slotName:"operation",fixed:"right"}]:[{label:this.$t("IDC.orgOperator.identityID"),prop:"identityId",align:"left","min-width":"185","sort-method":(e,t)=>e.identityId>t.identityId?1:-1},{label:this.$t("IDC.orgOperator.orgShortCode"),prop:"shortCode",align:"left","min-width":"250","sort-method":(e,t)=>e.shortCode>t.shortCode?1:-1},{label:this.$t("IDC.orgOperator.operatorID"),prop:"operatorId",align:"left","min-width":"165","sort-method":(e,t)=>e.operatorId>t.operatorId?1:-1},{label:this.$t("IDC.orgOperator.status"),prop:"status",align:"left","min-width":"165",__slotName:"status","sort-method":(e,t)=>e.status>t.status?1:-1},{label:this.$t("IDC.orgOperator.userName"),prop:"userName",align:"left","min-width":"135","sort-method":(e,t)=>e.userName>t.userName?1:-1},{label:this.$t("IDC.orgOperator.firstName"),prop:"firstName",align:"left","min-width":"135","sort-method":(e,t)=>e.firstName>t.firstName?1:-1},{label:this.$t("IDC.orgOperator.middleName"),prop:"middleName",align:"left","min-width":"155","sort-method":(e,t)=>e.middleName>t.middleName?1:-1},{label:this.$t("IDC.orgOperator.lastName"),prop:"lastName",align:"left","min-width":"135","sort-method":(e,t)=>e.lastName>t.lastName?1:-1},{label:this.$t("IDC.orgOperator.dateBirth"),prop:"birthday",align:"left","min-width":"155","sort-method":(e,t)=>e.birthday>t.birthday?1:-1},{label:this.$t("IDC.orgOperator.suspended"),prop:"verifySuspend",align:"left","min-width":"135","sort-method":(e,t)=>e.verifySuspend>t.verifySuspend?1:-1,__slotName:"suspended"},{label:this.$t("IDC.orgOperator.operation"),prop:"operation",align:"left",fixed:"right",width:"165",__slotName:"operation"}]}},watch:{propShortCode(e){this.searchList.shortCode=e}},methods:{showStatus(e){return p["c"][e]||"-"},updateList(){this.refreshTableFlag=!0},handleCommand(e){this.sortBy=e,this.sortByMode="",this.sortDataCode="",this.checkNullFn(),this.refreshTableFlag=!0,this.paginationConfig.pageIndex=1},handleCommandSort(e){this.sortByMode=e,this.checkNullFn(),this.refreshTableFlag=!0,this.paginationConfig.pageIndex=1},reset(){this.isReset=!0,this.searchList={identityId:"",shortCode:this.propShortCode,operatorId:"%",status:"All",operatorName:"",roles:"",username:"%",firstName:"%",middleName:"%",lastName:"%",birthday:""},this.$refs["searchList"].innerFormRef.resetFields(),this.sortBy="",this.sortByMode="",this.sortDataCode="",this.sortCode="",this.refreshTableFlag=!0,"organization"!==this.activeName&&"myOrganization"!==this.activeName||(this.refreshTableFlag=!0,this.searchList.shortCode=this.propShortCode)},checkNullFn(){""===this.searchList.operatorId&&""===this.searchList.firstName&&""===this.searchList.middleName&&""===this.searchList.lastName&&""===this.searchList.username&&""===this.searchList.roles?this.checkNull=!0:this.checkNull=!1},search(){this.checkNullFn(),this.searchLoading=!0,this.refreshTableFlag=!0,this.paginationConfig.pageIndex=1,this.$refs["searchList"].innerFormRef.validate(e=>{if(!e)return this.searchLoading=!1,!1;this.refreshTableFlag=!0,this.paginationConfig.pageIndex=1})},openVisible(){this.searchVisible=!0},addOrgOperator(){let e="";e="/mainPage/identifierCenter/organizationInfo/orgOperator/create",this.openNewWindow({path:e})},handleDetail(e){let t={orgOperatorId:e.identityId,identityId:e.organizationId},a="";a="/mainPage/identifierCenter/organizationInfo/orgOperator/detail",this.openNewWindow({path:a,query:{data:encodeURIComponent(JSON.stringify(t))}})},showEditDialog(e){this.getListNewStatus(e.status),this.statusDialogVisible=!0,this.receiverIdentityId=e.orgOperatorId,this.statusCode=e.status,this.oldStatus=e.status},getListNewStatus(e){"03"===e?this.newStatusList=[{label:"Suspended",value:"04"}]:"04"===e&&(this.newStatusList=[{label:"Active",value:"03"}])},handleCloseDialog(e){this.closeOperatorVisible=!0,this.closeNote=this.$t("IDC.orgOperator.closeNote",{obj:e.orgOperatorId}),this.orgOperatorId=e.orgOperatorId,this.closeOperatorForm.originalStatus=e.status,this.closeOperatorForm.receiverIdentityId=e.orgOperatorId},closeOperator(){this.closeOperatorVisible=!1,this.$refs["closeOperatorForm"].resetFields()},closeOperatorSubmit(){this.$refs["closeOperatorForm"].validate(e=>{if(e){let e=this.closeOperatorForm;Object(c["n"])(e).then(e=>{if(this.closeOperatorVisible=!1,e.header&&e.header.success){let e=this.$t("IDC.orgOperator.closeSuccessTip",{obj:this.orgOperatorId});this.$refs["closeOperatorForm"].resetFields(),this.$message.success(e),this.refreshTableFlag=!0}})}})},getTableData(){let e={pageNo:this.paginationConfig.pageIndex,pageSize:this.paginationConfig.pageSize,shortCode:this.searchList.shortCode,operatorIdentityId:this.searchList.identityId,operatorId:this.searchList.operatorId,status:this.searchList.status,roleId:this.searchList.roles,firstName:this.searchList.firstName,middleName:this.searchList.middleName,lastName:this.searchList.lastName,operatorName:this.searchList.username,birthday:this.searchList.birthday};(this.sortBy||this.sortByMode)&&(e.sortingQueryResultsBy=this.sortBy||"",e.sortAcs=this.sortByMode||null);let t={firstName:e.firstName,middleName:e.middleName,lastName:e.lastName,operatorName:e.operatorName,roleId:e.roleId,operatorId:e.operatorId};return Object(d["a"])(t)?new Promise(t=>{this.isReset?(t(),this.isReset=!1,this.refreshTableFlag=!1,this.searchLoading=!1):Object(c["r"])(e).then(e=>{e.header&&e.header.success?(e.list=e.list||[],e.totalRecords=Number(e.totalRecord)||0,e.list.map(e=>{e.orgOperatorId=e.identityId}),t(e)):(e.list=[],e.totalRecords=0,this.$message.error(e.header.responseDesc),t(e))}).finally(()=>{this.refreshTableFlag=!1,this.searchLoading=!1})}):(this.$modal.msgError("Specify at least one search condition of First Name, Middle Name, Last Name, Role, User Name, and Operator ID."),this.refreshTableFlag=!1,void(this.searchLoading=!1))},async getRoleSelect(){let e={};e.shortCode=this.searchList.shortCode,e.roleType="30";let t=await Object(c["A"])(e);if(t.header&&t.header.success){let e=t.grantRoleList||[];this.availableRoleList=e.map(e=>({value:e.roleCode,label:e.roleName})),this.availableRoleList.unshift({value:"",label:"All"})}},showRoleName(e){let t=this.availableRoleList.filter(t=>e.some(e=>t.value===e.roleId));return t.map(e=>e.label).join(",")||"-"}},created(){"organization"==this.activeName||"myOrganization"==this.activeName?this.getRoleSelect():(this.isReset=!0,this.getRoleSelect(),this.propShortCode=""),this.searchList.status="All",this.searchList.roles=""},mounted(){this.searchList.shortCode&&this.searchList.shortCode.startsWith("%")&&1===this.searchList.shortCode.length?(this.searchList={identityId:"",shortCode:this.propShortCode,operatorId:"",msisdn:"",status:"All",roles:"",username:""},this.refreshTableFlag=!0,this.isReset=!1):this.searchList.shortCode&&(this.searchList={identityId:"",shortCode:this.propShortCode,operatorId:"",msisdn:"",status:"All",roles:"",username:""},this.isReset=!1),this.initiatorIdentityId=h["default"].get("initiatorIdentityId")}},f=m,b=(a("4aa3"),a("2877")),g=Object(b["a"])(f,i,o,!1,null,"c11ba610",null);t["default"]=g.exports},"1e7b":function(e,t,a){},"1e94":function(e,t,a){"use strict";a("9069")},2069:function(e,t,a){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"entity-search-dialog"},[t("el-dialog",{attrs:{title:e.dialogTitle,"destroy-on-close":!0,visible:e.dialogVisible_,"close-on-click-modal":!1,width:"800px"},on:{"update:visible":function(t){e.dialogVisible_=t},close:e.isClosedDialog}},[t("div",{staticClass:"dialog-form-search"},[t("portal-form",{ref:"dialogFormRef",attrs:{id:"dialogForm","form-data":e.dialogForm,"form-rules":e.dialogFormRules,"form-config-list":e.formConfigList,searchBtnLoading:e.searchLoading,smallAutoColumn:e.smallAutoColumn,bigAutoColumn:e.bigAutoColumn},on:{"common-enter-event":e.searchEntity,"reset-btn-click":e.resetForm,"search-btn-click":e.searchEntity}})],1),t("div",{staticClass:"dialog-table-list margin-top-20"},[t("table-page",{attrs:{size:"small",isCheck:!0,isCheckMemory:!1,isSingleCheck:!0,isSearch:e.isSearchTable,columns:e.dialogTableColumns,getTableData:e.getDialogTableData,initializingLoading:!1,pagination:e.pagination},on:{"single-selection-change":e.handleTableSelection},scopedSlots:e._u([{key:"status",fn:function(a){return[t("div",{staticClass:"flex flex-align"},[""!==a.data.row.status?t("span",{staticClass:"status-circle",style:e.statusStyle(a.data.row.status)}):e._e(),t("span",[e._v(e._s(e.showStatus(a.data.row.status)))])])]}}])})],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("div",{staticClass:"option-buttons"},[t("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.isOk}},[e._v(e._s(e.$t("common.button.confirm"))+" ")]),t("el-button",{attrs:{plain:"",size:"small"},on:{click:e.isClosedDialog}},[e._v(e._s(e.$t("common.button.cancel")))])],1)])])],1)},o=[],r=a("5826"),s=a("cb9d"),n=a("35a4"),l=a("3186"),c=a("4c09"),d={name:"EntitySearchDialog",props:{smallAutoColumn:{type:Number,default:2,validate:e=>!(24%e)},bigAutoColumn:{type:Number,default:2,validate:e=>!(24%e)},dialogTitle:{type:String,default:""},fieldName:{type:String,default:""},dialogVisible:{type:Boolean,default:!1}},components:{PortalForm:l["a"],TablePage:c["a"]},data(){return{identityStatus:[{label:"All",value:""},{label:"Active",value:"03"},{label:"Dormant",value:"08"},{label:"Frozen",value:"05"},{label:"New",value:"00"},{label:"Suspended",value:"04"}],status:[{label:"All",value:""}],dialogForm:{shortCode:"",msisdn:"",bankName:"",bankShortCode:"",groupCode:"",groupName:""},dialogFormRules:{},searchLoading:!1,isSearchTable:!1,selectedData:{}}},computed:{formConfigList(){return this.computedForm()},dialogTableColumns(){return this.computedTableColumns()},dialogVisible_:{get(){return this.dialogVisible},set(){this.isClosedDialog()}},statusStyle(){return e=>{switch(e){case"03":return{"background-color":"#658DF9"};case"06":return{"background-color":""+this.GlobalStyleVariables.fillStrongColor};case"07":return{"background-color":""+this.GlobalStyleVariables.statusSuccessColor};case"00":return{"background-color":"#658DF9"};case"02":return{"background-color":""+this.GlobalStyleVariables.statusSuccessColor};case"04":return{"background-color":""+this.GlobalStyleVariables.statusSuccessColor};case"05":return{"background-color":""+this.GlobalStyleVariables.fillStrongColor};case"08":return{"background-color":""+this.GlobalStyleVariables.fillStrongColor};default:return}}},pagination(){return{pageIndex:1,pageSize:5,layout:"total, prev, pager, next"}}},methods:{computedForm(){let e;switch(this.fieldName){case"msisdn":e=[{label:"MSISDN",key:"msisdn",comp:"el-input",bind:{placeholder:"Please enter"}}];break;case"shortCode":e=[{label:"Short Code",key:"shortCode",comp:"el-input",bind:{id:"identityId",placeholder:"Please enter",maxlength:21}},{label:"Organization Name",key:"organizationName",comp:"el-input",bind:{placeholder:"Please enter"}},{label:"Identity Status",key:"status",comp:"el-select",options:this.identityStatus,bind:{id:"identityId",placeholder:"Please select",maxlength:21}}];break;case"groupCode":e=[{label:"Group Code",key:"groupCode",comp:"el-input",bind:{placeholder:"Please enter"}},{label:"Group Name",key:"groupName",comp:"el-input",bind:{placeholder:"Please enter"}},{label:"Status",key:"status",comp:"el-select",options:this.status,bind:{id:"identityId",placeholder:"Please enter",maxlength:21}}];break}return e},computedTableColumns(){let e;switch(this.fieldName){case"msisdn":e=[{label:"MSISDN",prop:"msisdn",align:"left"},{label:"Customer Type",prop:"customerType",align:"left",__slotName:"customerType"},{label:"Status",prop:"status",align:"left",__slotName:"status"}];break;case"shortCode":e=[{label:"Short Code",prop:"shortCode",align:"left"},{label:"Organization Name ",prop:"organizationName",align:"left"},{label:"Status",prop:"status",align:"left",__slotName:"status"}];break;case"groupCode":e=[{label:"Group Code",prop:"groupCode",align:"left"},{label:"Group Name",prop:"groupName",align:"left"},{label:"Status",prop:"status",align:"left",__slotName:"status"}];break}return e},isClosedDialog(){this.$refs["dialogFormRef"].innerFormRef.resetFields(),this.selectedData={},this.pagination.pageIndex=1,this.$emit("onCloseDialog",!1)},searchEntity(){this.$refs["dialogFormRef"].innerFormRef.validate(e=>{if(!e)return this.searchLoading=!1,!1;this.isSearchTable=!0,this.searchLoading=!0})},resetForm(){this.$refs["dialogFormRef"].innerFormRef.resetFields()},getDialogTableData(e){switch(this.fieldName){case"msisdn":return new Promise(e=>{this.getCustomerList(e)});case"shortCode":return new Promise(t=>{this.getOrgList(e,t)});case"groupCode":return new Promise(t=>{this.getGroupList(e,t)})}},getOrgList(e,t){e.shortCode=this.dialogForm.shortCode,e.status=this.dialogForm.status,e.organizationName=this.dialogForm.organizationName,e.pageSize=this.pagination.pageSize,Object(s["G"])(e).then(e=>{if(e.header&&e.header.success){let a={header:e.header,list:e.list||[],totalRecords:e.totalRecord};t(a)}else t()}).catch(()=>{t()}).finally(()=>{this.isSearchTable=!1,this.searchLoading=!1})},async getCustomerList(e){let t={},a={msisdn:this.dialogForm.msisdn,page:this.pagination.pageIndex,pageSize:this.pagination.pageSize};const i=await Object(r["j"])({msisdn:this.dialogForm.msisdn});i.header&&i.header.success?i.identityId?(t.customerId=i.identityId,t.cpId=i.cpId):(this.$modal.msgError("The MSISDN does not exist"),e()):e();let o=null;try{o=await Object(r["h"])(a)}catch(s){e()}finally{if(o.header&&o.header.success){let t={header:o.header,list:o.customerList||[],totalRecords:o.total};e(t)}else e(),this.$modal.msgError(o.header.responseDesc);this.isSearchTable=!1,this.searchLoading=!1}},getGroupList(e,t){let a={groupCode:this.dialogForm.groupCode,groupName:this.dialogForm.groupName,pageSize:this.pagination.pageSize,pageNo:this.pagination.pageIndex};Object(n["i"])(a).then(e=>{if(e.header&&e.header.success){let a={header:e.header,list:e.list||[],totalRecords:e.totalRecords};t(a)}else t()}).catch(()=>{t()}).finally(()=>{this.isSearchTable=!1,this.searchLoading=!1})},handleTableSelection(e){this.selectedData=e},isOk(){"{}"!==JSON.stringify(this.selectedData)&&(this.$emit("select",this.selectedData),this.isClosedDialog())},showStatus(e){switch(e){case"00":return"New";case"02":return"Pending Active";case"03":return"Active";case"04":return"Suspended";case"05":return"Frozen";case"06":return"Closed";case"07":return"Capped";case"08":return"Dormant";default:return}}}},u=d,h=(a("a0cc"),a("2877")),p=Object(h["a"])(u,i,o,!1,null,"3a57a3c1",null);t["a"]=p.exports},"28ba":function(e,t,a){"use strict";a("0fc4")},"2c86":function(e,t,a){"use strict";a("7b46")},"2fa9":function(e,t,a){},3213:function(e,t,a){"use strict";a.d(t,"e",(function(){return s})),a.d(t,"f",(function(){return n})),a.d(t,"a",(function(){return c})),a.d(t,"d",(function(){return u})),a.d(t,"c",(function(){return d})),a.d(t,"b",(function(){return h}));var i=a("02e3"),o=a("e863");let r=(e,t,a)=>{if(t){let e={msisdn:t};Object(o["a"])(e).then(e=>{e.flag?a():a(new Error(""+(e.description||"")))})}},s=()=>({msisdn:[i["k"]],tillNumber:[i["k"]],orgshortcode:[i["f"],i["l"]]}),n=()=>({msisdn:[i["e"],i["v"],i["k"],i["u"]],tillNumber:[i["v"],i["k"]],orgshortcode:[i["f"],i["l"]],status:[i["z"]],productName:[i["z"]],queryCondition:[i["z"]]});let l=(e,t,a)=>{if(t){let e={tillNumber:t};Object(o["b"])(e).then(e=>{if(e.flag)a();else{if(t.trim().length<4||t.trim().length>12)return a(new Error("The length ranges from 4 to 12."));if(!new RegExp(/^([0-9A-Za-z]{4,12})$/).test(t))return a(new Error("Special characters are not allowed. Please enter again."));a()}})}},c=()=>({msisdn:[i["e"],i["w"],i["k"],i["f"],{validator:r,trigger:"blur"}],tillNumber:[i["e"],i["w"],{validator:l,trigger:"blur"}],organizationShortCode:[i["z"],i["e"],i["w"]],languageCode:i["z"],productIdList:[i["z"]]}),d=()=>({newMsisdn:[i["f"],i["e"],i["w"],{validator:r,trigger:"blur"}],remark:[i["e"]]}),u=()=>({remark:[i["e"],i["w"]]}),h=async()=>{let e=await Object(o["e"])();return e.header&&e.header.success&&e.result?[i["z"]]:[]}},"34dd":function(e,t,a){e.exports={activeMenuColor:"#366bfc",primaryColor:"#366bfc",menuColor:"#5c5c5c",fillEmphasisColor:"#5c5c5c",fillLightColor:"#fafafa",fillStrongColor:"#c7c7c7",fillRegularColor:"#f0f0f0",fillColorDark:"#e0e0e0",lineStrongColor:"#8f8f8f",textEmphasisColor:"#282828",backgroundColor:"#fff",statusErrorColor:"#ff4040",statusSuccessColor:"#27bf88",statusColorwarning:"#ff7420",statusColorSAecondaryWarning:"#faaf0c",statusNoticeColor:"#338bff",statusDark:"#c7c7c7",initialColor:"#E0E0E0",statusNoticeBackgroundColor:"#F0F9FF",statusErrorBackgroundColor:"#FFF2F0",statusSuccessBackgroundColor:"#F0FFF7",statusSecondaryWarningBackgroundColor:"#FFFBE6",statusWarningBackgroundColor:"#FFF6E6",statusDarkBackgroundColor:"#FAFAFA",lineColorBlue:"#ADD9FF",lineColorError:"#FFC1BA",lineColorGreen:"#A5E6C6",lineColorWarning:"#FFF7ed"}},"35a4":function(e,t,a){"use strict";a.d(t,"n",(function(){return o})),a.d(t,"d",(function(){return r})),a.d(t,"p",(function(){return s})),a.d(t,"h",(function(){return n})),a.d(t,"g",(function(){return l})),a.d(t,"e",(function(){return c})),a.d(t,"o",(function(){return d})),a.d(t,"k",(function(){return u})),a.d(t,"c",(function(){return h})),a.d(t,"j",(function(){return p})),a.d(t,"i",(function(){return m})),a.d(t,"l",(function(){return f})),a.d(t,"m",(function(){return b})),a.d(t,"b",(function(){return g})),a.d(t,"a",(function(){return y})),a.d(t,"q",(function(){return v})),a.d(t,"f",(function(){return C}));var i=a("0bbd");function o(e){return Object(i["a"])({url:"/fintech/v1/group/product",method:"post",data:e})}function r(e){return Object(i["a"])({url:"/fintech/v1/group/checkInputKyc",method:"post",data:e})}function s(e){return Object(i["a"])({url:"/fintech/v1/group/trustLevelAndSegment",method:"post",data:e})}function n(e){return Object(i["a"])({url:"/fintech/v1/group/assign/product",method:"post",data:e})}function l(e){return Object(i["a"])({url:"/fintech/v1/group/queryAccountType",method:"post",data:e})}function c(e){return Object(i["a"])({url:"fintech/v1/identity/verify/activeMsisdn",method:"post",data:e})}function d(e){return Object(i["a"])({url:"/fintech/v1/group/create",method:"post",data:e})}function u(e){return Object(i["a"])({url:"/fintech/v1/identity/generateIdentifier",method:"post",data:e})}function h(e){return Object(i["a"])({url:"/fintech/v1/identity/verify/groupCode",method:"post",data:e})}function p(e){return Object(i["a"])({url:"/fintech/v1/group/dcc/queryProduct",method:"POST",data:e})}function m(e){return Object(i["a"])({url:"fintech/v1/group/queryBusinessGroupList",method:"post",data:e})}function f(e){return Object(i["a"])({url:"fintech/v1/groupMember/listGroupMembersByCustomer",method:"post",data:e})}function b(e){return Object(i["a"])({url:"fintech/v1/groupMember/queryGroupMemberRule",method:"post",data:e})}function g(e){return Object(i["a"])({url:"fintech/v1/groupMember/changeGroupMember/rule",method:"post",data:e})}function y(e){return Object(i["a"])({url:"fintech/v1/groupMember/addGroupMember",method:"post",data:e})}function v(e){return Object(i["a"])({url:"fintech/v1/groupMember/removeGroupMember",method:"post",data:e})}function C(e){return Object(i["a"])({url:"fintech/v1/group/info",method:"post",data:e})}},"3b28":function(e,t,a){"use strict";a("f4a3")},"3b90":function(e,t,a){},"3d79":function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"d",(function(){return h})),a.d(t,"b",(function(){return S})),a.d(t,"c",(function(){return k}));var i=a("02e3"),o=a("cb9d"),r=a("5a0c"),s=a.n(r);const n={COMP_DISPLAY:"dd/MM/yyyy HH:mm",DAYJS_DISPLAY:"DD/MM/YYYY HH:mm",COMP_VALUE:"yyyy-MM-dd HH:mm",DAYJS:"YYYY-MM-DD HH:mm"},l={pattern:/^((13[5-9])|(1[4-9][0-9]))[0-9]{8}$/,message:"Please Enter a correct IMSI.",trigger:"blur"},c={type:"email",message:"Please enter only letters(a-z),numbers(0-9),periods(.),and at(@).",trigger:"blur"},d=e=>e(new Error("Query short code exception."));let u=(e,t)=>({required:!0,trigger:["blur","change"],validator(t,a,i){let o="";if(!a)return o="Please select content",e.parentOrgName="",i(new Error(o));const r=a.length,s=4,n=12;if(r>=4&&r<=n)return i();o=`Must be between ${s} and ${n} characters`,e.parentOrgName="",i(new Error(o))}}),h=(e,t)=>({parentShortCode:[u(e,t),f(e,t),{trigger:"change"}],shortCode:[i["e"],i["n"],m()],merchName:[i["e"],y(e.orgNameRegex),g()],notificationChannel:[i["z"]],phoneNumber:[l,i["q"],v(e)],email:[c,i["q"],C(e)],language:[i["z"]],selectedProdList:[p(e)]});const p=e=>{const t=(t,a,i)=>{const o=e.selectedProdList;if(!o||!o.length)return i(new Error("Please select one product."));i()};return{validator:t}};let m=()=>{const e=(e,t,a)=>{Object(o["j"])(t).then(e=>{e.header&&e.header.success?"Invalid"===e.check?a(new Error("The Organization short code is invalid.")):"Exist"===e.check?a(new Error("The Organization Short Code Already Exsists.")):a():a(new Error("Query short code error."))}).catch(e=>d(a))};return{validator:e,trigger:"blur"}},f=(e,t)=>{const a=(a,i,r)=>{Object(o["j"])(i).then(a=>{if(!a.header||!a.header.success)return e.parentOrgName="",void r(new Error("Query short code error."));"Exist"===a.check?b(e,t,r):"Invalid"===a.check?(e.parentOrgName="",r(new Error("The short code is invalid."))):(e.parentOrgName="",r(new Error("The short code is not existed.")))}).catch(e=>d(r))};return{validator:a,trigger:"blur"}},b=(e,t,a)=>{t.identityModel="",t.subAgentExpansionModel="",Object(o["u"])({shortCode:e.parentShortCode}).then(i=>{if(i.header&&i.header.success&&i.organizationInfo){let o=i.organizationInfo;""===o.subAgentExpansionModel||"0003"===o.subAgentExpansionModel?(e.parentOrgName="",a(new Error("The short code does not allow sub-organizations."))):"0002"===o.subAgentExpansionModel?(e.parentId=o.organizationId,e.parentOrgName=o.organizationName,t.parentIdentityModel=o.subAgentExpansionModel,a()):o.subAgentExpansionModel!="000"+e.selectedProdList[0].productProperties.ORG_IDENTITY_MODEL?a(new Error("SelectedProduct not match subAgentExpansionModel.")):(e.parentId=o.organizationId,e.parentOrgName=o.organizationName,t.parentIdentityModel=o.subAgentExpansionModel,a())}}).catch(()=>{e.parentOrgName="",a(new Error("Query organization list exception."))})},g=()=>{const e=(e,t,a)=>{Object(o["g"])({merchantName:t}).then(e=>{e.header&&e.header.success?"Invalid"===e.check?a(new Error("The organization name is invalid.")):"Exist"===e.check?a(new Error("The organization name is existed.")):a():a(new Error("Query organization name error."))}).catch(()=>{a(new Error("Query organization name exception."))})};return{validator:e,trigger:"blur"}},y=e=>({validator:(t,a,i)=>{new RegExp(e).test(a)?i():i(new Error(e+"."))},trigger:"blur"}),v=e=>I(e,"1001"),C=e=>I(e,"1011"),I=(e,t)=>({validator:(a,i,o)=>{""===i&&e.notificationChannel===t?o(new Error("Please enter content")):o()},trigger:"blur"});const D={validationExpression:[i["e"],i["m"]],validationMode:[i["z"]],allowPartialPayement:[i["z"]]};let S=()=>({identityModel:[i["z"]],subAgentExpansionModel:[i["z"]],ruleProfile:[i["z"]],aggregatorModel:[i["z"]],centralOwnedModel:[i["z"]],...D});const k=(e,t,a)=>{let i=(e,i,o)=>{if("effectiveTime"===a?t.effectiveErrorMessage="":t.expireErrorMessage="",!t)return o();const r="The date must be later than  Effective Date.",l="The date must be earlier than  Expiry Date.",c=s()(t.effectiveTime,n.DAYJS),d=s()(t.expireTime,n.DAYJS),u=c<d;return u?o():"effectiveTime"===a?(t.effectiveErrorMessage=l,o(new Error(l))):"expireTime"===a?(t.expireErrorMessage=r,o(new Error(r))):void o(new Error("Invalid time."))};return[{required:!0,message:"Please enter context"},{validator:i,trigger:"change"}]}},"423d":function(e,t,a){e.exports={activeMenuColor:"#366bfc",primaryColor:"#366bfc",menuColor:"#5c5c5c",fillEmphasisColor:"#5c5c5c",fillLightColor:"#fafafa",fillStrongColor:"#c7c7c7",fillRegularColor:"#f0f0f0",fillColorDark:"#e0e0e0",lineStrongColor:"#8f8f8f",textEmphasisColor:"#282828",backgroundColor:"#fff",statusErrorColor:"#ff4040",statusSuccessColor:"#27bf88",statusColorwarning:"#ff7420",statusColorSAecondaryWarning:"#faaf0c",statusNoticeColor:"#338bff",statusDark:"#c7c7c7",initialColor:"#E0E0E0",statusNoticeBackgroundColor:"#F0F9FF",statusErrorBackgroundColor:"#FFF2F0",statusSuccessBackgroundColor:"#F0FFF7",statusSecondaryWarningBackgroundColor:"#FFFBE6",statusWarningBackgroundColor:"#FFF6E6",statusDarkBackgroundColor:"#FAFAFA",lineColorBlue:"#ADD9FF",lineColorError:"#FFC1BA",lineColorGreen:"#A5E6C6",lineColorWarning:"#FFF7ed"}},4456:function(e,t,a){"use strict";a("1b7a")},4608:function(e,t,a){"use strict";a.r(t);var i,o,r=a("9aca"),s=a("516e"),n=a("164f"),l=a("61d4"),c=a("4c1c"),d=a("1d86"),u=a("e867"),h=a("c32d"),p=a("1c03"),m=a("d7ca"),f=a("b84e"),b=a("65cf"),g=function(){var e=this,t=e._self._c;return t("div",[t("h2",[e._v("transform scale")]),t("iframe",{attrs:{width:"400",height:"400",src:"https://www.baidu.com/"}}),t("el-input",{staticStyle:{width:"300px"},model:{value:e.bodyText,callback:function(t){e.bodyText=t},expression:"bodyText"}}),t("div",{staticClass:"flex"},[t("div",{staticClass:"min"},[t("mobilePage",{attrs:{bodyText:e.bodyText}})],1),t("div",{staticClass:"orgin"},[t("mobilePage",{attrs:{bodyText:e.bodyText}})],1)])],1)},y=[],v=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"mobile-page"},[e._v(e._s(e.bodyText))])])},C=[],I={name:"CodesMobilePage",props:{bodyText:{type:String,default:""}},data(){return{}},mounted(){},methods:{}},D=I,S=(a("d1c7"),a("2877")),k=Object(S["a"])(D,v,C,!1,null,"61b6a490",null),T=k.exports,w={name:"MultItem",components:{mobilePage:T},data(){return{bodyText:""}},mounted(){},methods:{select(){},onDelete(){},search(){}}},O=w,F=(a("1c49"),Object(S["a"])(O,g,y,!1,null,"69e48272",null)),_=F.exports,N={name:"groupDetail",components:{OrgInfo:r["default"],AuditLog:s["default"],BalanceOverview:n["default"],BankAccount:l["default"],OrgChildren:c["default"],OrgOperator:d["default"],OrgTill:u["default"],ReviewTransaction:h["default"],ReviewReversalRequest:p["default"],AccountStatement:f["default"],TransactionInitiate:b["default"],multItem:_},provide(){return{detailRoot:this}},mixins:[m["a"]],data(){return{activeName:"multItem",curComponentName:"mult-item",menuList:[{name:"Overview",subMenu:[{name:"Organization Info",label:"organizationInfo",component:"org-info"},{name:"Audit Log",label:"auditLog",component:"audit-log"},{name:"Bank Account",label:"bankAccount",component:"bank-account"},{name:"Balance Overview",label:"balance",component:"balance-overview"}]},{name:"Identity",subMenu:[{name:"Children",label:"children",component:"org-children"},{name:"Operator",label:"operator",component:"org-operator"},{name:"Till",label:"till",component:"org-till"}]},{name:"Transaction",subMenu:[{name:"Initiate Transaction",label:"initiateTransaction",component:"transaction-initiate"},{name:"Account Statement",label:"accountStatement",component:"account-statement"},{name:"Review Transaction",label:"reviewTransaction",component:"review-transaction"},{name:"Review Reversal Request",label:"reviewReversalRequest",component:"review-reversal-request"}]}]}},methods:{findActiveMenu(e){const t=this.menuList.reduce((e,t)=>t.subMenu&&t.subMenu.length?e.concat(t.subMenu):e,[]);return t.find(t=>t.label===e)},setCurComponentName(e){const t=this.findActiveMenu(e);t&&this.handleChange(t)},handleChange(e){let{label:t,component:a}=e;if(this.activeMenu=e,this.curComponentName=a,t)switch(this.activeName=t,this.params||(this.params={}),t){case"operator":this.params.activeName="organization";break;case"till":this.params.activeName=!0;break;case"auditLog":this.params.initiatorType="Organization",this.params.hasSplitline=!0;break}},gotoOrgDetailPage({activeName:e,params:t={}}){e||(e="organizationInfo");const a=this.findActiveMenu(e);a&&(this.params=t,this.handleChange(a))}}},A=N,L=Object(S["a"])(A,i,o,!1,null,null,null);t["default"]=L.exports},4695:function(e,t,a){"use strict";a("871b")},4865:function(e,t,a){"use strict";a.d(t,"r",(function(){return r})),a.d(t,"s",(function(){return s})),a.d(t,"g",(function(){return n})),a.d(t,"u",(function(){return l})),a.d(t,"n",(function(){return c})),a.d(t,"l",(function(){return d})),a.d(t,"m",(function(){return u})),a.d(t,"a",(function(){return h})),a.d(t,"A",(function(){return p})),a.d(t,"v",(function(){return m})),a.d(t,"c",(function(){return f})),a.d(t,"w",(function(){return b})),a.d(t,"y",(function(){return g})),a.d(t,"x",(function(){return y})),a.d(t,"t",(function(){return v})),a.d(t,"o",(function(){return C})),a.d(t,"j",(function(){return I})),a.d(t,"d",(function(){return D})),a.d(t,"z",(function(){return S})),a.d(t,"k",(function(){return k})),a.d(t,"f",(function(){return T})),a.d(t,"q",(function(){return O})),a.d(t,"p",(function(){return F})),a.d(t,"B",(function(){return _})),a.d(t,"h",(function(){return N})),a.d(t,"b",(function(){return A})),a.d(t,"e",(function(){return L})),a.d(t,"i",(function(){return P}));var i=a("0bbd"),o=a("5f9a");function r(e){return Object(i["a"])({url:"/fintech/v1/orgOperator/queryOrgOperatorList",method:"post",data:e})}function s(e){return Object(i["a"])({url:Object(o["a"])("/fintech/v1/organization/list",e),method:"get"})}function n(e){return Object(i["a"])({url:Object(o["a"])("/fintech/v1/orgOperator/changeStatus"),method:"post",data:e})}function l(e){return Object(i["a"])({url:Object(o["a"])("/fintech/v1/orgOperator/status",e),method:"get"})}function c(e){return Object(i["a"])({url:Object(o["a"])("/fintech/v1/orgOperator/closeOrgOperator"),method:"post",data:e})}function d(e){return Object(i["a"])({url:"/fintech/v1/identity/verify/"+e,method:"post",data:{}})}function u(e){return Object(i["a"])({url:"/fintech/v1/identity/verify/userName",method:"post",data:e})}function h(e){return Object(i["a"])({url:"/fintech/v1/orgOperator/create",method:"post",data:e})}function p(e){return Object(i["a"])({url:"/fintech/v1/orgOperator/roles",method:"post",data:e})}function m(e){return Object(i["a"])({url:Object(o["a"])("/fintech/v1/orgOperator/detail",e),method:"get"})}function f(e){return Object(i["a"])({url:"/fintech/v1/orgOperator/changeIdentityLanguage",method:"post",data:e})}function b(e){return Object(i["a"])({url:"/fintech/v1/orgOperator/pin/reset",method:"post",data:e})}function g(e){return Object(i["a"])({url:"/fintech/v1/orgOperator/pin/unlock",method:"post",data:e})}function y(e){return Object(i["a"])({url:"/fintech/v1/orgOperator/pin/setPassword",method:"post",data:e})}function v(e){return Object(i["a"])({url:"/fintech/v1/orgOperator/getOrgOperatorRuleProfile",method:"post",data:e})}function C(e){return Object(i["a"])({url:"/fintech/v1/orgOperator/getRule",method:"get",data:e})}function I(e){return Object(i["a"])({url:"/fintech/v1/orgOperator/checkMsisdn",method:"post",data:e})}function D(e){return Object(i["a"])({url:"/fintech/v1/orgOperator/changeMsisdn",method:"post",data:e})}function S(e){return Object(i["a"])({url:"/fintech/v1/orgOperator/resetPassword",method:"post",data:e})}function k(e){return Object(i["a"])({url:"/fintech/v1/identity/verify/operatorId",method:"post",data:e})}function T(e){return Object(i["a"])({url:"/fintech/v1/orgOperator/changeOrgOperatorRuleProfile",method:"post",data:e})}const w="/fintech/v1/notification_type";function O(e){return Object(i["a"])({url:Object(o["a"])(w+"/list",e),method:"get"})}function F(e){return Object(i["a"])({url:`${w}/queryInfo?typeId=${e}`,method:"get"})}function _(e){return Object(i["a"])({url:"/fintech/v1/notification/send",method:"post",data:e})}function N(e){return Object(i["a"])({url:"fintech/v1/orgOperator/checkAPIPasswordFormat",method:"post",data:e})}function A(e){return Object(i["a"])({url:"fintech/v1/orgOperator/changeAuthentication",method:"post",data:e})}function L(e){return Object(i["a"])({url:Object(o["a"])("/fintech/v1/changeOrgOperatorRole"),method:"post",data:e})}function P(e){return Object(i["a"])({url:"/fintech/v1/orgOperator/checkInputKyc",method:"post",data:e})}},"4aa3":function(e,t,a){"use strict";a("8561")},"4b24":function(e,t,a){"use strict";a("06bb")},"4c1c":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",[t("portal-header",{attrs:{projectObj:e.titleConfig}}),t("div",{staticClass:"create-child-organization"},[t("div",{staticClass:"create-left"},[t("org-child-tree",{attrs:{organizationId:e.organizationId,activeTabName:e.activeTabName},on:{"update:activeTabName":function(t){e.activeTabName=t},"update:active-tab-name":function(t){e.activeTabName=t}}})],1),t("transition",{attrs:{name:"load-transform",mode:"out-in"}},[t("org-child-basic-info",{directives:[{name:"show",rawName:"v-show",value:e.activeTabName===e.IDENTITY_STATUS_TYPE.ACTIVE,expression:"activeTabName === IDENTITY_STATUS_TYPE.ACTIVE"},{name:"loading",rawName:"v-loading",value:e.activedLoading,expression:"activedLoading"}],attrs:{"basic-info":e.activedBasicInfo}})],1),t("transition",{attrs:{name:"load-transform",mode:"out-in"}},[t("org-child-basic-info",{directives:[{name:"show",rawName:"v-show",value:e.activeTabName===e.IDENTITY_STATUS_TYPE.CLOSED,expression:"activeTabName === IDENTITY_STATUS_TYPE.CLOSED"},{name:"loading",rawName:"v-loading",value:e.closedLoading,expression:"closedLoading"}],attrs:{"basic-info":e.closedBasicInfo}})],1)],1)],1)},o=[],r=a("c811"),s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"c-tree"},[t("div",{staticClass:"tree-operation"},[t("input-with-append",{attrs:{size:"small",defaultValue:e.filterText,showLine:!1,inputChange:e.changeFilterText,needListenInput:!0,placeholder:"Search for children..."}},[t("i",{staticClass:"el-icon-search",on:{click:e.searchCurrentTreeNodes}})]),t("svg-icon",{staticClass:"icon-btn--create",attrs:{"icon-class":"augment"},on:{click:e.addChildOrgHandle}})],1),t("el-tabs",{class:{"el-tabs-custom":!0,"el-tabs-custom--effective":e.tabName===e.IDENTITY_STATUS_TYPE.ACTIVE,"el-tabs-custom--closed":e.tabName===e.IDENTITY_STATUS_TYPE.CLOSED},attrs:{stretch:!0},on:{"tab-click":e.tabClickHandle},model:{value:e.tabName,callback:function(t){e.tabName=t},expression:"tabName"}},[t("el-tab-pane",{attrs:{label:"Effective Children",name:e.IDENTITY_STATUS_TYPE.ACTIVE}},[t("div",{staticClass:"tree-container"},[e.organizationId?t("el-tree",{ref:"activedTree",attrs:{"empty-text":"No records found.","filter-node-method":e.filterTreeNode,"highlight-current":!0,"expand-on-click-node":!1,"node-key":"organizationId",props:e.defaultProps,indent:24,load:e.loadNode,data:e.effectiveData,lazy:""},on:{"node-click":t=>e.handleNodeClick(t,e.IDENTITY_STATUS_TYPE.ACTIVE)}}):e._e()],1)]),t("el-tab-pane",{attrs:{label:"Closed Children",name:e.IDENTITY_STATUS_TYPE.CLOSED}},[t("div",{staticClass:"tree-container"},[t("el-tree",{ref:"closedTree",attrs:{"empty-text":"No records found.","default-expand-all":!0,"filter-node-method":e.filterTreeNode,"highlight-current":!0,"node-key":"organizationId",data:e.closedTreeData,props:e.defaultProps},on:{"node-click":t=>e.handleNodeClick(t,e.IDENTITY_STATUS_TYPE.CLOSED)}})],1)])],1)],1)},n=[],l=function(){var e=this,t=e._self._c;return t("div",{class:["input-rest",e.inputBindClass]},[t("el-input",e._b({on:{focus:e.focus,blur:e.blur,change:e.change,input:e.onInput},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},"el-input",e.$attrs,!1),[t("span",{directives:[{name:"show",rawName:"v-show",value:e.value,expression:"value"}],attrs:{slot:"suffix"},on:{click:e.btnClearable},slot:"suffix"},[t("i",{staticClass:"el-icon-close",staticStyle:{"margin-left":"5px",cursor:"pointer"}})]),t("div",{attrs:{slot:"append"},slot:"append"},[t("div",{staticClass:"append-wrapper"},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.showLine&&e.value,expression:"showLine && value"}],staticClass:"line"}),t("span",{on:{click:e.iconClick}},[e._t("default")],2)])])])],1)},c=[],d={name:"InputWithAppend",props:{defaultValue:{type:String,default:""},iconClick:{type:Function,default:()=>{}},inputChange:{type:Function,default:()=>{}},showLine:{type:Boolean,default:()=>!0},needListenInput:{Type:Boolean,default:()=>!1}},data(){return{value:this.defaultValue,inputBindClass:"blur"}},methods:{change(e){this.inputChange(e)},onInput(e){this.needListenInput&&this.inputChange(e)},focus(){this.inputBindClass="focus"},blur(){this.inputBindClass="blur"},btnClearable(){this.change("")}},watch:{defaultValue(e){this.value=e}}},u=d,h=(a("d964"),a("2877")),p=Object(h["a"])(u,l,c,!1,null,"3852a539",null),m=p.exports,f=a("cb9d"),b=a("7c5e"),g=a("689d"),y={name:"CreateInfo",components:{InputWithAppend:m},inject:["childrenRoot"],props:{organizationId:{type:String,required:!0},activeTabName:{type:String,required:!0},configLoading:{type:Boolean}},data(){return{IDENTITY_STATUS_TYPE:b["b"],tabName:this.activeTabName,closedTreeData:[],defaultProps:{children:"children",isLeaf:!0,label:function(e,t){return e.shortCode+"-"+e.organizationName}},filterText:"",closedfilterText:"",effectiveData:[],orgInfo:{}}},created(){this.init()},methods:{init(){this.setClosedTreeData(),this.loadOrganizationInfo()},async loadOrganizationInfo(){this.orgInfo=await Object(f["t"])({identityId:this.childrenRoot.organizationId})},tabClickHandle(){this.$emit("update:activeTabName",this.tabName),this.$nextTick(()=>{this.changeFilterText(this.filterText)})},async setClosedTreeData(){const e=this.organizationId;if(!e)return;const t={organizationId:e,isAllChildren:!0,status:b["b"].CLOSED},a=await this.queryTree(t);this.closedTreeData=a,a&&a.length&&this.$nextTick(()=>{const e=this.$refs.closedTree;e&&e.$nextTick(()=>{this.setCurrentNode(e,a[0],b["b"].CLOSED)})})},loadNode(e,t){if(!this.organizationId)return t([]);let a="",i=0;if(0===e.level&&(a=this.organizationId),e.level>=1&&(a=e.data.organizationId,i=e.level),!a)return t([]);this.getChildTreeAndDetail(a,i,t)},async handleNodeClick(e,t){const a=e.organizationId;a&&this.childrenRoot.setDetailConfig(a,t)},filterTreeNode(e,t){if(!e)return!0;const a=e.toLocaleLowerCase();let i="";const o=t["shortCode"],r=t["organizationName"];return o&&(i+=o.toLocaleLowerCase()),r&&(i+="-"+r.toLocaleLowerCase()),-1!==i.indexOf(a)},setCurrentNode(e,t,a){this.$nextTick(()=>{e.$nextTick(()=>{e.setCurrentNode(t),this.handleNodeClick(t,a)})})},async getChildTreeAndDetail(e,t,a){const i=this.childrenRoot;if(!e)return a([]),void(i.activedLoading=!1);0===t&&(i.activedLoading=!0);const o={organizationId:e,isAllChildren:!1,status:b["b"].ACTIVE},r=await this.queryTree(o);a(r||[]),r&&r.length&&0===t&&this.$nextTick(()=>{const e=this.$refs.activedTree;e&&e.$nextTick(()=>{this.setCurrentNode(e,r[0],b["b"].ACTIVE)})}),0===t&&(i.activedLoading=!1)},async queryTree(e){const t=await Object(g["a"])(f["E"],"list",e);return t||[]},addChildOrgHandle(){"0003"==this.orgInfo.organizationInfo.subAgentExpansionModel?this.$message.error("Invalid subAgentExpansionModel not allow sub-organizations."):this.openNewWindow({path:"create",query:{parentShortCode:this.childrenRoot.propShortCode,parentIdentityId:this.childrenRoot.organizationId}})},changeFilterText(e){this.filterText=e,b["b"].ACTIVE===this.tabName&&this.$refs.activedTree.filter(e),b["b"].CLOSED===this.tabName&&this.$refs.closedTree.filter(e)},async searchCurrentTreeNodes(){let e=this.tabName===b["b"].ACTIVE?"03":"06";const t={organizationId:this.childrenRoot.organizationId,allChildren:!0,status:e,shortCode:this.filterText},a=await this.queryTree(t);this.effectiveData=a,this.closedTreeData=a;let i=a[0];this.getChildTreeAndDetail(i.organizationId)}}},v=y,C=(a("4456"),Object(h["a"])(v,s,n,!1,null,"47065866",null)),I=C.exports,D=function(){var e=this,t=e._self._c;return t("div",{staticClass:"basic-info"},[t("div",{staticClass:"basic-info-header"},[t("div",{staticClass:"basic-info-header__avatar"},[t("svg-icon",{attrs:{"icon-class":"organization"}})],1),t("div",{staticClass:"basic-info-header__mid flex flex-col flex-jus-between"},[t("div",{staticClass:"title"},[e._v(e._s(e.basicInfo.shortCode)+" - "+e._s(e.basicInfo.organizationName))]),t("div",{staticClass:"desc"},[e._v(" Identity Status: "),t("span",{staticClass:"status"},[e._v(e._s(e.getIdentityStatusLabel(e.basicInfo.status)))])])]),t("div",{staticClass:"basic-info-header__operator"},[t("el-button",{attrs:{type:"text"},on:{click:e.gotoDetailPage}},[e._v("More "),t("i",{staticClass:"el-icon-arrow-right",staticStyle:{"vertical-align":"middle"}})])],1)]),t("el-divider"),t("basic-info-group",{attrs:{basicInfo:e.configMap,groups:e.groups}})],1)},S=[],k=a("ed02"),T={name:"OrgChildBasicInfo",components:{BasicInfoGroup:k["a"]},inject:["detailRoot"],props:{basicInfo:{type:Object,default:()=>({})}},data(){return{groups:[],configMap:{}}},watch:{basicInfo:{handler(){this.resetConfig()},deep:!0,immediate:!0}},methods:{resetConfig(){const e=[{label:"Basic Info",list:[{name:"parentShortCode",label:this.$t("IDC.organization.parentShortCode")},{name:"identityModel",label:this.$t("IDC.organization.identityModel")},{name:"hierarchyLevel",label:this.$t("IDC.organization.hierarchyLevel")},{name:"topOrganization",label:this.$t("IDC.organization.topOrganization")},{name:"organizationName",label:this.$t("IDC.organization.organizationName")},{name:"shortCode",label:this.$t("IDC.organization.shortCode")},{name:"identityStatus",label:this.$t("IDC.organization.IdentityStatus")},{name:"segment",label:"Segment"},{name:"chargeProfile",label:"Charge Profile"},{name:"ruleProfile",label:"Rule Profile"},{name:"trustLevel",label:"Trust Level "},{name:"registrationDate",label:this.$t("IDC.organization.registrationDate")}]}];this.groups=e,this.configMap=this.basicInfo},getIdentityStatusLabel(e){return Object(b["c"])(e)},gotoDetailPage(){const e=this.basicInfo.organizationId;if(!e)return;const t={identityId:e,organizationId:e,propShortCode:this.basicInfo.shortCode};this.openNewWindow({path:"detail",query:{data:encodeURIComponent(JSON.stringify(t))}})}}},w=T,O=(a("ada1"),Object(h["a"])(w,D,S,!1,null,"3129d868",null)),F=O.exports,_={name:"CreateOrganization",components:{OrgChildBasicInfo:F,OrgChildTree:I,PortalHeader:r["a"]},provide(){return{childrenRoot:this}},inject:["detailRoot"],data(){return{IDENTITY_STATUS_TYPE:b["b"],activeTabName:b["b"].ACTIVE,titleConfig:{title:this.$t("IDC.organization.children.title"),desc:this.$t("IDC.organization.children.desc")},activedLoading:!1,closedLoading:!1,activedBasicInfo:{},closedBasicInfo:{}}},computed:{organizationId(){const e=this.detailRoot;if(!e.routeParams&&!e.routeParams.organizationId)return;const t=e.routeParams.organizationId;return t},propShortCode(){const e=this.detailRoot;if(!e.routeParams&&!e.routeParams.propShortCode)return;const t=e.routeParams.propShortCode;return t}},mounted(){},methods:{async setDetailConfig(e,t){if(!e)return void(t===b["b"].ACTIVE?this.activedBasicInfo={}:this.closedBasicInfo={});t===b["b"].ACTIVE?this.activedLoading=!0:this.closedLoading=!0;const a=await this.getOrgDetailById(e);if(t===b["b"].ACTIVE?this.activedLoading=!1:this.closedLoading=!1,!a)return void(t===b["b"].ACTIVE?this.activedBasicInfo={}:this.closedBasicInfo={});const i={parentShortCode:a.parentShortCode,identityModel:Object(b["d"])(a.identityModel),hierarchyLevel:a.hierLevel,topOrganization:a.topOrganization,organizationName:a.organizationName,shortCode:a.shortCode,identityStatus:Object(b["c"])(a.status),chargeProfile:a.chargeProfileName,ruleProfile:a.ruleProfileName,registrationDate:this.$options.filters["localTimeFormat"](a.createTime,"DD-MM-YYYY"),organizationId:a.organizationId,status:a.status,segment:a.segment,trustLevel:a.trustLevelName};t===b["b"].ACTIVE?this.activedBasicInfo=i:this.closedBasicInfo=i},getOrgDetailById(e){return Object(g["a"])(f["s"],"organizationInfo",{organizationId:e})}}},N=_,A=(a("cbb5"),Object(h["a"])(N,i,o,!1,null,"e192cfcc",null));t["default"]=A.exports},"4c1d":function(e,t,a){"use strict";var i=function(){var e=this,t=e._self._c;return t("el-dialog",{staticClass:"dialog-container",attrs:{title:e.$t("IDC.till.editStatus"),visible:e.showEditStatusDialog,width:"448px","close-on-click-modal":!1},on:{close:function(t){return e.closeEditLanguageDialog()}}},[t("el-form",{ref:"editStatusFormRef",attrs:{model:e.editStatusForm,rules:e.editStatusFormRules,"label-position":"top","label-width":"200px"}},[t("el-form-item",{attrs:{prop:"currentStatus",label:e.$t("IDC.till.currentStatus")}},[t("div",{staticClass:"history-item"},[e._v(e._s(this.showStatus(e.editStatusForm.currentStatus)))])]),t("el-form-item",{staticClass:"from-item-title",attrs:{prop:"newStatus",label:e.$t("IDC.till.newStatus")}},[t("el-select",{attrs:{id:"newStatus",placeholder:e.$t("common.placeholder.select"),size:"small"},model:{value:e.editStatusForm.newStatus,callback:function(t){e.$set(e.editStatusForm,"newStatus",t)},expression:"editStatusForm.newStatus"}},e._l(e.newStatusOptions,(function(e){return t("el-option",{key:e.status,attrs:{label:e.value,value:e.status}})})),1)],1),t("el-form-item",{staticClass:"from-item-title",attrs:{prop:"remark",label:e.$t("IDC.till.remark")}},[t("el-input",{attrs:{clearable:"",type:"textarea",rows:4,resize:"none",placeholder:e.$t("common.placeholder.enter")},model:{value:e.editStatusForm.remark,callback:function(t){e.$set(e.editStatusForm,"remark","string"===typeof t?t.trim():t)},expression:"editStatusForm.remark"}})],1)],1),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{id:"cancel",size:"small"},on:{click:function(t){return e.closeEditLanguageDialog()}}},[e._v(e._s(e.$t("common.button.cancel")))]),t("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{loading:e.submitLoading,id:"confirm",type:"primary",size:"small"},on:{click:function(t){return e.submitDialogForm()}}},[e._v(e._s(e.$t("common.button.submit")))])],1)],1)},o=[],r=a("e863"),s=a("02e3"),n={name:"editStatus",data(){return{submitLoading:!1,showEditStatusDialog:!1,editStatusForm:{currentStatus:"",newStatus:"",remark:""},editStatusFormRules:{newStatus:[s["z"]],remark:[s["e"]]},labelData:{},newStatusOptions:[]}},computed:{},watch:{},mounted(){},methods:{submitDialogForm(){this.$refs["editStatusFormRef"].validate(e=>{if(e){this.submitLoading=!0;let e={receiverIdentityId:this.labelData.identityId,targetStatus:this.editStatusForm.newStatus,remark:this.editStatusForm.remark,originalStatus:this.editStatusForm.currentStatus};Object(r["g"])(e).then(e=>{e.header&&e.header.success?this.editSuccess():this.showEditStatusDialog=!1,this.submitLoading=!1})}})},editSuccess(){this.$emit("closeDialog",{type:"status",value:this.editStatusForm.newStatus}),this.showEditStatusDialog=!1,this.$modal.msgSuccess(this.$t("IDC.till.editStatusY")),this.$emit("closeStatusDialog"),this.$refs["editStatusFormRef"].resetFields()},showStatus(e){switch(e){case"03":return"Active";case"05":return"Frozen";default:return}},closeEditLanguageDialog(){this.showEditStatusDialog=!1,this.$refs["editStatusFormRef"].resetFields()},handleEditLanguage(){this.showEditStatusDialog=!0},showView(e){this.showEditStatusDialog=!0,this.labelData=e,this.editStatusForm.currentStatus=e.status,"05"==e.status?(this.newStatusOptions=[{status:"03",value:"Active"}],this.editStatusForm.newStatus="03"):(this.newStatusOptions=[{status:"05",value:"Frozen"}],this.editStatusForm.newStatus="05")}}},l=n,c=(a("6c82"),a("2877")),d=Object(c["a"])(l,i,o,!1,null,"1334304b",null);t["a"]=d.exports},"4d86":function(e,t,a){"use strict";a("c6ed")},"4e1a":function(e,t,a){"use strict";var i=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:e.$t("IDC.orgOperator.editStatus"),visible:e.editStatusVisible,width:"448px","before-close":e.closeEdit},on:{"update:visible":function(t){e.editStatusVisible=t}}},[t("el-form",{ref:"editForm",staticClass:"add-form",attrs:{"label-position":"top",model:e.editForm,rules:e.editFormRules}},[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:e.$t("IDC.orgOperator.currentStatus"),prop:"oldStatus"}},[t("div",{staticClass:"text"},[t("span",{staticClass:"text",domProps:{textContent:e._s(e.showStatus(e.editForm.oldStatus))}})])])],1),t("el-col",{staticClass:"new-status",attrs:{span:24}},[t("el-form-item",{attrs:{label:e.$t("IDC.orgOperator.newStatus"),prop:"newStatus"}},[t("el-select",{attrs:{size:"small",placeholder:e.$t("common.placeholder.select")},model:{value:e.editForm.newStatus,callback:function(t){e.$set(e.editForm,"newStatus",t)},expression:"editForm.newStatus"}},e._l(e.newStatusList,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),t("el-col",{attrs:{span:24}},[e.isShowReason?t("div",{staticClass:"remark-reason"},[e._v(e._s(e.$t("IDC.orgOperator.remarkAndReason")))]):e._e()]),e.isShowReason?t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:e.$t("IDC.orgOperator.reason"),prop:"reasonId"}},[t("el-select",{attrs:{size:"small",placeholder:e.$t("common.placeholder.select")},model:{value:e.editForm.reasonId,callback:function(t){e.$set(e.editForm,"reasonId",t)},expression:"editForm.reasonId"}},e._l(e.reasonList,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1):e._e(),t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:e.$t("IDC.orgOperator.remark"),prop:"remark"}},[t("el-input",{attrs:{size:"small",type:"textarea",rows:"4",placeholder:e.$t("common.placeholder.enter")},model:{value:e.editForm.remark,callback:function(t){e.$set(e.editForm,"remark",t)},expression:"editForm.remark"}})],1)],1)],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{size:"small"},on:{click:e.closeEdit}},[e._v(e._s(e.$t("common.button.cancel")))]),t("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{loading:e.submitLoading,type:"primary",size:"small"},on:{click:e.editSubmit}},[e._v(e._s(e.$t("common.button.submit")))])],1)],1)},o=[],r=a("4865"),s=a("d8d3"),n={name:"OrgEditStatus",props:{editStatusVisible:{type:Boolean,default:!1},curStatus:{type:String,default:()=>""},receiverIdentityId:{type:String,default:()=>""},currentPage:{type:String,default:()=>""},isShowReason:{type:Boolean,default:!0},newStatusList:{type:Array,default:()=>[]},submitLoading:{type:Boolean,default:!1}},data(){return{editForm:{oldStatus:"",newStatus:"",reasonId:"",remark:"",receiverIdentityId:""},reasonList:[{label:"Not Use",value:"1"},{label:"Id Expired",value:"2"}],editFormRules:{newStatus:[{required:!0,message:"Please select content",trigger:"change"}],remark:[{required:!0,message:"Please enter remark",trigger:"blur"}]},operatorId:""}},watch:{curStatus:{handler(e){this.editForm.oldStatus=e}},receiverIdentityId:{handler(e){this.editForm.receiverIdentityId=e}}},created(){},methods:{showStatus(e){return s["c"][e]||"-"},closeEdit(){this.$emit("update:editStatusVisible",!1),this.$refs["editForm"].resetFields()},editSubmit(){this.$refs["editForm"].validate(e=>{if(e){let e=this.editForm;Object(r["g"])(e).then(e=>{this.$emit("update:editStatusVisible",!1),e.header&&e.header.success&&("detail"!=this.currentPage||e.taskId||this.$emit("update:curStatus",this.editForm.newStatus),this.$emit("update:editStatusVisible",!1),this.$emit("updateList"),this.$refs["editForm"].resetFields(),e.taskId?this.$message.success("The request must be approved by another operator."):(this.$message.success("Submit change request success!"),this.refreshCurrentPage()))}).catch(()=>{this.$emit("update:editStatusVisible",!1)})}})}}},l=n,c=(a("8061"),a("2877")),d=Object(c["a"])(l,i,o,!1,null,"21a2dc66",null);t["a"]=d.exports},"4e20":function(e,t,a){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"active-account-content"},[t("div",[t("el-button",{staticStyle:{"margin-top":"8px"},attrs:{disabled:!e.hasPerm("IC_ORG_BANK_ACCOUNT_ADD_BTN"),id:"create-scenario-btn",type:"primary",size:"small",icon:"el-icon-plus"},on:{click:function(t){return e.createBtnClick()}}},[e._v(" "+e._s(e.$t("common.button.add"))+" ")]),t("table-page",{staticClass:"margin-top-16",attrs:{size:"small",isCheck:!1,isCheckMemory:!1,isSingleCheck:!1,"has-pagination":!0,isSearch:e.isSearchList,columns:e.listColumns,pagination:e.paginationConfig,getTableData:e.getTableData},scopedSlots:e._u([{key:"operation",fn:function(a){return[t("el-button",{staticClass:"table-operation-btn icon-cursor operation-button",attrs:{type:"text"},on:{click:function(t){return e.queryDetail(a.data.row)}}},[e._v(" "+e._s(e.$t("common.button.detail"))+" ")]),t("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],staticClass:"table-operation-btn icon-cursor operation-button",attrs:{disabled:!e.hasPerm("IC_ORG_BANK_ACCOUNT_DELETE_BTN"),type:"text"},on:{click:function(t){return e.removeAccount(a.data.row)}}},[e._v(" "+e._s(e.$t("common.button.remove"))+" ")]),"No"===a.data.row.default?t("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],staticClass:"table-operation-btn icon-cursor",attrs:{type:"text"},on:{click:function(t){return e.setDefault(a.data.row)}}},[e._v(" "+e._s(e.$t("IDC.bankAccount.button.setDefault"))+" ")]):e._e()]}}])})],1),e.dialogVisible?t("portal-dialog",{attrs:{visible:!0,title:e.$t("IDC.bankAccount.pageTitleCreate"),confirmText:e.$t("common.button.confirm"),width:"800px",height:"442px"},on:{"cancel-btn-click":e.closeDialog,"confirm-btn-click":e.submit,"handle-close":e.closeDialog},scopedSlots:e._u([{key:"content",fn:function(){return[t("bank-account-dialog",{ref:"bankAccountDialog",attrs:{createBankAccountForm:e.createBankAccountForm}})]},proxy:!0}],null,!1,414731466)}):e._e(),e.showDetail?t("portal-dialog",{attrs:{visible:!0,title:e.$t("IDC.bankAccount.pageTitleDetail"),customFooter:!0,width:"560px"},on:{"handle-close":e.closeDetailDialog},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",{staticClass:"detail-dialog-des"},[e._v(e._s(e.$t("IDC.bankAccount.pageDescDetail")))]),t("drawer-detail-content",{ref:"childDrawer",staticStyle:{"margin-left":"4px"}})]},proxy:!0}],null,!1,3717103232)}):e._e(),e.removeDialog?t("portal-dialog",{staticClass:"remove-dialog",attrs:{top:"29vh",height:"342",confirmText:e.$t("common.button.confirm"),visible:!0,title:e.$t("IDC.bankAccount.removeTitle"),width:"448px"},on:{"cancel-btn-click":e.closeRemoveDialog,"confirm-btn-click":e.submitRemoveDialog,"handle-close":e.closeRemoveDialog},scopedSlots:e._u([{key:"content",fn:function(){return[t("h1",{staticClass:"dialog-title subtitle-color"},[e._v(e._s(e.removeDialogTitle))]),t("el-divider"),t("el-form",{ref:"deleteRoleFormRef",attrs:{"label-position":"top",model:e.delForm,rules:e.deleteRoleFormRules}},[t("el-form-item",{attrs:{label:e.$t("IDC.bankAccount.label.reason"),prop:"reason"}},[t("el-input",{attrs:{type:"textarea",prop:"reason",rows:4,placeholder:e.$t("common.placeholder.enter")},model:{value:e.delForm.reason,callback:function(t){e.$set(e.delForm,"reason",t)},expression:"delForm.reason"}})],1)],1)]},proxy:!0}],null,!1,3090683206)}):e._e()],1)},o=[],r=a("f33d"),s=a("02e3"),n=a("4c09"),l=a("8ac9"),c=a("f2e3"),d=function(){var e=this,t=e._self._c;return t("div",{staticClass:"detail-box margin-left-20"},e._l(e.detailDatas,(function(a){return t("div",{key:a.label,staticClass:"container"},[t("div",{staticClass:"subtitle"},[e._v(e._s(a.label+":"))]),t("div",{staticClass:"detail-content"},[e._v(e._s(a.content?a.content:"-"))])])})),0)},u=[],h=a("5a0c"),p=a.n(h),m=a("2ef0"),f={name:"DrawerDetailContent",data(){return{currentRowData:"",detailDatas:"",activeDetailData:[{label:this.$t("IDC.bankAccount.label.assetType"),value:"assetType"},{label:this.$t("IDC.bankAccount.label.accountName"),value:"accountName"},{label:this.$t("IDC.bankAccount.label.accountNumber"),value:"accountNo"},{label:this.$t("IDC.bankAccount.label.bankHeadOffice"),value:"bankHeadOffice"},{label:this.$t("IDC.bankAccount.label.bank"),value:"bankName"},{label:this.$t("IDC.bankAccount.label.bankShortCode"),value:"bankShortCode"},{label:this.$t("IDC.bankAccount.label.currency"),value:"currency"},{label:this.$t("IDC.bankAccount.label.isDefault"),value:"default"},{label:this.$t("IDC.bankAccount.label.iban"),value:"iban"},{label:this.$t("IDC.bankAccount.label.transferMode"),value:"transferMode"},{label:this.$t("common.label.status"),value:"status"},{label:this.$t("IDC.bankAccount.label.createdBy"),value:"createOperatorName"},{label:this.$t("IDC.bankAccount.label.creationTime"),value:"createDate"}],removedDetailAdditionalData:[{label:this.$t("IDC.bankAccount.label.removedBy"),value:"removeOperatorName"},{label:this.$t("IDC.bankAccount.label.removalTime"),value:"removeDate"},{label:this.$t("IDC.bankAccount.label.remark"),value:"remark"}]}},computed:{},methods:{queryDetailContent(e){Promise.all([this.getTransferModeData(),this.queryAccountDetail(e)]).then(t=>{const a=t[0],i=t[1];if(i){for(const t in i)this.detailDatas.forEach(o=>{if(o.value===t)if("createDate"===t||"removeDate"===t){let e=i[t];o.content=p()(e).format("DD/MM/YYYY HH:mm")}else if("assetType"===t)o.content=e.assetType;else if("bankHeadOffice"===t)o.content=e.bankHeadOffice;else if("default"===t)o.content=i[t]?"Yes":"No";else if("transferMode"===t&&a){let e=a.filter(e=>e.value===i[t]);e.length&&(o.content=e[0].label)}else o.content=i[t]});this.detailDatas=JSON.parse(JSON.stringify(this.detailDatas))}}).catch(()=>{})},queryAccountDetail(e){this.currentRowData=e,this.getDetailDatas();let t={tenantId:"-1",assetId:e.assetId,identityId:e.identityId};return new Promise(e=>{Object(r["f"])(t).then(t=>{let a;t&&t.header.success&&(t.bankAccount["createOperatorName"]=t["createOperatorName"],t.bankAccount["removeOperatorName"]=t["removeOperatorName"],a=t.bankAccount),e(a)}).catch(()=>Promise.resolve({}))})},getTransferModeData(){return new Promise(e=>{Object(r["e"])().then(t=>{let a=[];if(t.header&&t.header.success){let e=JSON.parse(t.jsonDataStr);e.map(e=>{let t={value:e.code,label:e.value};a.push(t)})}e(a)}).catch(()=>Promise.resolve([]))})},getDetailDatas(){let e=this.currentRowData.status;this.detailDatas="Active"===e?Object(m["cloneDeep"])(this.activeDetailData):Object(m["cloneDeep"])(this.activeDetailData.concat(this.removedDetailAdditionalData))}},created(){},mounted(){}},b=f,g=(a("d537"),a("2877")),y=Object(g["a"])(b,d,u,!1,null,"0b3830ce",null),v=y.exports,C=a("0360"),I={name:"ActiveAccountContent",props:["searchForm","assetTypeOptions","bankHeadOfficeOptions","identityId"],components:{TablePage:n["a"],PortalDialog:l["a"],BankAccountDialog:c["a"],DrawerDetailContent:v},data(){return{paginationConfig:{total:0,pageIndex:1,pageSize:10},listColumns:[{label:this.$t("IDC.bankAccount.label.assetType"),prop:"assetType",align:"left","min-width":200},{label:this.$t("IDC.bankAccount.label.accountName"),prop:"accountName",align:"left","min-width":200},{label:this.$t("IDC.bankAccount.label.accountNumber"),prop:"accountNo",align:"left","min-width":200},{label:this.$t("IDC.bankAccount.label.currency"),prop:"currency",align:"left","min-width":160},{label:this.$t("IDC.bankAccount.label.isDefault"),prop:"default",align:"left","min-width":120},{label:this.$t("IDC.bankAccount.label.bankHeadOffice"),prop:"bankHeadOffice",align:"left","min-width":200},{label:this.$t("IDC.bankAccount.label.bank"),prop:"bankName",align:"left","min-width":187},{label:"Operation",prop:"operation",align:"left",fixed:"right",__slotName:"operation","min-width":245}],isSearchList:!1,dialogVisible:!1,showDetail:!1,removeDialog:!1,removeBankAccount:"",delForm:{reason:""},deleteRoleFormRules:{reason:[s["e"],s["p"]]},createBankAccountForm:{assetType:"",accountName:"",accountNo:"",bankHeadOffice:"",bankId:"",currency:"",transferMode:"",iban:"",validityPeriod:"",effectiveDate:"",expiryDate:""}}},computed:{removeDialogTitle(){return this.$t("IDC.bankAccount.removeConfirm",{obj:this.removeBankAccount.accountName}).toString()}},watch:{},created(){this.isSearchList=!0},activated(){},mounted(){},methods:{search(){this.resetPagination(),this.isSearchList=!0},resetPagination(){this.paginationConfig={total:0,pageIndex:1,pageSize:10}},getTableData(){let e={status:"Active",accountName:this.searchForm.accountName,assetType:this.searchForm.assetType,bankHeadOffice:this.searchForm.bankHeadOffice,bankName:this.searchForm.bankName,identityId:this.identityId,pageNo:this.paginationConfig.pageIndex,pageSize:this.paginationConfig.pageSize};return new Promise(t=>{Object(r["g"])(e).then(e=>{e.header&&e.header.success?(e.totalRecords=e.totalNum||0,e.list=e.bankAccounts||[],e.list.forEach(e=>{this.assetTypeOptions.forEach(t=>{t.value===e.assetType&&(e.assetType=t.label)}),this.bankHeadOfficeOptions.forEach(t=>{t.value===e.bankHeadOffice&&(e.bankHeadOffice=t.label)}),e.default=e.default?"Yes":"No"}),this.isSearchList=!1,t(e)):(e.totalRecords=0,e.list=[],this.isSearchList=!1,t(e))})})},queryDetail(e){this.showDetail=!0,setTimeout(()=>{let t={};Object.assign(t,e),t.identityId=C["default"].get("initiatorIdentityId")||this.identityId,this.$refs.childDrawer.queryDetailContent(e)})},closeDetailDialog(){this.showDetail=!1},removeAccount(e){this.removeBankAccount=e,this.removeDialog=!0},setDefault(e){this.$confirm(this.$t("IDC.bankAccount.setDefaultTitle"),this.$t("IDC.bankAccount.button.setDefault"),{confirmButtonText:this.$t("common.button.confirm"),cancelButtonText:this.$t("common.button.cancel"),closeOnClickModal:!1,type:"info",customClass:"messageBox"}).then(()=>{const t={assetId:e.assetId,identityId:this.identityId};Object(r["j"])(t).then(e=>{e&&e.header.success&&(this.isSearchList=!0,this.$modal.msgSuccess("Success to set default account."))})})},createBtnClick(){this.dialogVisible=!0},submit(){this.$refs.bankAccountDialog.$refs.createBankAccountForm.validate(e=>{if(e){let e={bankAccount:{createOperId:"-1",identityId:this.identityId,bankHeadOffice:this.createBankAccountForm.bankHeadOffice,bankId:this.createBankAccountForm.bankId,assetType:this.createBankAccountForm.assetType,accountName:this.createBankAccountForm.accountName,accountNo:this.createBankAccountForm.accountNo,currency:this.createBankAccountForm.currency,transferMode:this.createBankAccountForm.transferMode,iban:this.createBankAccountForm.iban,effectiveDate:this.createBankAccountForm.validityPeriod?this.createBankAccountForm.validityPeriod[0]:"",expiryDate:this.createBankAccountForm.validityPeriod?this.createBankAccountForm.validityPeriod[1]:""},receiverIdentityId:this.identityId};Object(r["a"])(e).then(e=>{e&&e.header.success&&(this.dialogVisibleFalse(),this.search())}).finally(()=>{})}})},closeDialog(){this.dialogVisibleFalse()},dialogVisibleFalse(){for(const e in this.createBankAccountForm)this.createBankAccountForm[e]="";this.dialogVisible=!1},closeRemoveDialog(){this.removeDialog=!1,this.delForm.reason="",this.removeBankAccount=""},submitRemoveDialog(){this.$refs["deleteRoleFormRef"].validate(e=>{if(e){let e={identityId:this.identityId,receiverIdentityId:this.identityId,assetIds:[this.removeBankAccount.assetId],reason:this.delForm.reason,remark:this.delForm.reason};Object(r["b"])(e).then(e=>{e&&e.header.success&&(this.search(),this.$emit("refreshRemovedAccount"),this.$modal.msgSuccess("Success to delete."))}).finally(()=>{this.closeRemoveDialog()})}})}}},D=I,S=(a("9191"),a("692a"),Object(g["a"])(D,i,o,!1,null,"14fdb7b6",null));t["a"]=S.exports},"516e":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"role-config business-portal-page",class:{"has-split-line":e.isShowLine}},[t("div",{staticStyle:{"margin-bottom":"20px"}},[t("portal-header",{attrs:{projectObj:e.titleConfig,showBottomLine:!1}}),t("portal-form",{ref:"searchList",attrs:{"form-data":e.searchList,"form-config-list":e.formConfigList,searchBtnLoading:e.searchLoading},on:{"common-enter-event":e.search,"reset-btn-click":e.reset,"search-btn-click":e.search}}),t("div",{staticClass:"table-list-container"},[t("div",{staticStyle:{"padding-bottom":"16px"}},[t("el-dropdown",{on:{command:e.exportData}},[t("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{type:"primary",size:"small",disabled:e.isExport||!e.hasPerm("IC_ORG_OPR_AUDITLOG_EXPORT_BTN")}},[e._v(" "+e._s(e.$t("common.button.export"))+" "),t("i",{staticClass:"el-icon-arrow-down el-icon--right",staticStyle:{"font-size":"12px"}})]),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",{attrs:{command:"XLS"}},[e._v("Excel")]),t("el-dropdown-item",{attrs:{command:"XLSX"}},[e._v("Excel 2007")]),t("el-dropdown-item",{attrs:{command:"CSV"}},[e._v("CSV")]),t("el-dropdown-item",{attrs:{command:"PDF"}},[e._v("PDF")]),t("el-dropdown-item",{attrs:{command:"TXT"}},[e._v("TXT")])],1)],1)],1),t("table-page",{staticClass:"table-page",attrs:{size:"small","has-pagination":e.hasPage,columns:e.columns,pagination:e.paginationConfig,getTableData:e.getTableData,"is-search":e.refreshTableFlag,sortArr:e.sortArr,initializingLoading:!1},scopedSlots:e._u([{key:"logTime",fn:function(t){return[e._v(" "+e._s(e._f("dateformat")(t.data.row.logTime,"DD-MM-YYYY HH:mm:ss"))+" ")]}},{key:"operation",fn:function(a){return[t("el-button",{staticClass:"btn",attrs:{type:"text",disabled:!e.hasPerm("IC_ORG_OPR_AUDITLOG_VIEW_BTN")},on:{click:function(t){return e.handleDetail(a.data.row)}}},[e._v(" "+e._s(e.$t("common.label.detail"))+" ")])]}}])}),t("DetailDialog",{ref:"viewDetail"})],1)],1)])},o=[],r=a("4c09"),s=a("3186"),n=a("c811"),l=a("fb94"),c=function(){var e=this,t=e._self._c;return t("el-dialog",{staticClass:"dialog-container",attrs:{title:e.$t("IDC.till.viewDetails"),visible:e.isShow,width:"560px","close-on-click-modal":!1,labelClassName:"till-view-detail"},on:{close:function(t){return e.closeDialog()}}},[t("div",e._l(e.detailsData,(function(a,i){return t("el-descriptions",{key:i,attrs:{column:1}},[a.hidden?e._e():t("el-descriptions-item",{attrs:{label:a.label}},[t("descriptions-tooltip",{attrs:{isJump:a.isJump||!1,value:e._f("formatEmpty")(a.value)}})],1)],1)})),1),t("div",{staticClass:"take-call-list"},[e.labelData.list?t("el-table",{attrs:{data:e.labelData.list,"header-cell-class-name":"table-header-class","cell-class-name":"table-cell-class"}},[t("el-table-column",{attrs:{property:"initiatorType",label:"initiatorType","show-overflow-tooltip":"",width:"90"}}),t("el-table-column",{attrs:{property:"initiatorId",label:"initiatorId","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{property:"time",label:"time","show-overflow-tooltip":"",width:"70"}}),t("el-table-column",{attrs:{property:"event",label:"event","show-overflow-tooltip":""}})],1):e._e()],1)])},d=[],u=function(){var e=this,t=e._self._c;return t("el-tooltip",{attrs:{content:e.value,disabled:e.tooltipShow,placement:"top-start","visible-arrow":!1}},[e.isJump?t("el-link",{ref:"content",attrs:{type:"primary"},on:{mouseover:e.isShowTooltip,click:function(t){return e.goDetails(e.value)}}},[e._v(" "+e._s(e.value)+" ")]):t("span",{ref:"content",on:{mouseover:e.isShowTooltip}},[e._v(e._s(e.value))])],1)},h=[],p={name:"DescriptionsTooltip",props:{value:{type:String,default:""},isJump:{type:Boolean,default:!1}},data(){return{tooltipShow:!1}},methods:{isShowTooltip(){const e=this.$refs.content.offsetWidth<this.$refs.content.parentNode.offsetWidth;this.tooltipShow=e},goDetails(e){let t={bulkPlanID:e,mode:"taskPlan",type:"details"};this.openNewWindow({path:"/mainPage/identifierCenter/organizationInfo/till/bulkDetails",query:{params:encodeURIComponent(JSON.stringify(t))}})}}},m=p,f=a("2877"),b=Object(f["a"])(m,u,h,!1,null,"1879110e",null),g=b.exports,y={name:"detailDialog",components:{DescriptionsTooltip:g},props:{},data(){return{isShow:!1,labelData:{},type:"",initiatorType:""}},computed:{detailsData(){return[{label:this.$t("IDC.till.masterType"),key:"masterType",value:""},{label:this.$t("IDC.till.masterID"),key:"masterId",value:""},{hidden:!1,label:this.$t("IDC.till.Initiator"),key:"initiatorInfo",value:""},{hidden:!1,label:this.$t("IDC.till.times"),key:"logTime",value:""},{hidden:!1,label:this.$t("IDC.till.event"),key:"event",value:""},{hidden:this.isShowTakItem("IDENTITY"),label:this.$t("IDC.till.beforeImage"),key:"beforeImage",value:""},{hidden:this.isShowTakItem("IDENTITY"),label:this.$t("IDC.till.afterImage"),key:"afterImage",value:""},{hidden:!1,label:this.$t("IDC.till.startTime"),key:"startTime",value:""},{hidden:!1,label:this.$t("IDC.till.endTime"),key:"endTime",value:""},{isJump:!0,hidden:this.isShowTakItem(),label:this.$t("IDC.till.taskID"),key:"taskId",value:""},{hidden:this.isShowTakItem(),label:this.$t("IDC.till.taskType"),key:"taskType",value:""},{hidden:this.isShowTakItem(),label:this.$t("IDC.till.taskCategory"),key:"taskCategory",value:""},{hidden:this.isShowTakItem(),label:this.$t("IDC.till.workflowID"),key:"relatedWorkflowId",value:""},{hidden:this.isTaskHidden(),label:this.$t("IDC.till.searchCriteria"),key:"searchCriteria",value:""},{hidden:this.isShowItem(),label:this.$t("IDC.till.hasBeenDownloaded"),key:"hasBeenDownloaded",value:""},{hidden:this.isShowItem(),label:this.$t("IDC.till.isSensitive"),key:"isSensitive",value:""},{hidden:this.isShowItem(),label:this.$t("IDC.till.infoType"),key:"infoType",value:""},{hidden:!1,label:this.$t("IDC.till.reason"),key:"reason",value:""},{hidden:this.isTaskHidden(),label:this.$t("IDC.till.errorCode"),key:"errorCode",value:""},{hidden:this.isTaskHidden(),label:this.$t("IDC.till.errorMessage"),key:"errorMsg",value:""},{hidden:!1,label:this.$t("IDC.till.clientIP"),key:"fromIp",value:""},{hidden:!1,label:this.$t("IDC.till.eventResult"),key:"eventResult",value:""}]}},methods:{isShowItem(){switch(this.type){case"QUERY":return!1;default:return!0}},isTaskHidden(){return"TASK"===this.type},isShowTakItem(e){return"TASK"!==this.type&&"IDENTITY"!==e},showDetail(e){this.labelData=e,this.initiatorType=e.initiatorType,this.type=e.type,this.isShow=!0,this.formatDta()},formatDta(){let e=this.labelData;for(var t in e)this.detailsData.forEach((a,i)=>{a.key===t&&(this.detailsData[i].value=e[t].toString())})},closeDialog(){this.isShow=!1;for(let e=0;e<this.detailsData.length;e++)this.detailsData[e].value=""},dataType(e){return"boolean"===typeof e?e.toString():"-"}}},v=y,C=(a("cf2e"),Object(f["a"])(v,c,d,!1,null,"1458f88b",null)),I=C.exports,D=a("5a0c"),S=a.n(D),k=a("7dfc"),T=a("1caf"),w={components:{TablePage:r["a"],PortalForm:s["a"],PortalHeader:n["a"],DetailDialog:I},name:"AuditLog",props:{identityId:{type:String,default:""},initiatorType:{type:String,default:"Organization Operator"},title:{type:Object,default:()=>{}},hasSplitline:{type:Boolean,default:!1}},data(){return{isShowLine:!1,isExport:!0,hasPage:!1,searchLoading:!1,refreshTableFlag:!1,paginationConfig:{total:0,pageIndex:1,pageSize:10},titleConfig:{title:this.$t("IDC.auditlog.AuditLogTitle"),desc:this.$t("IDC.auditlog.desc")},searchList:{type:"",event:"",eventGroup:"",identityId:"",initiatorId:"",initiatorType:"",startTime:"",endTime:"",time:[]},categoryList:[],eventList:[{label:"All",value:""}],eventGroupList:[{label:"All",value:""}],columns:[{label:this.$t("IDC.till.initiatorType")},{label:this.$t("IDC.till.initiator")},{label:this.$t("IDC.till.times")},{label:this.$t("IDC.till.event")},{label:this.$t("IDC.auditlog.operation"),prop:"operation",align:"left",__slotName:"operation",width:"100"}],direction:"rtl",choiceDate:"",limitDays:{},pickerOptions:{onPick:({maxDate:e,minDate:t})=>{t&&!e&&(this.choiceDate=t.getTime()),e&&(this.choiceDate="")},disabledDate:e=>{let t=new Date(Object(k["a"])((new Date).getTime(),"YYYY-MM-DD")+" 23:59:59").getTime();if(this.isNull(this.choiceDate))return e.getTime()>t;{const a=24*this.limitDays.maxDay*3600*1e3;let i=this.choiceDate+a-1;i=i>t?t:i;const o=this.choiceDate-a+1;return e.getTime()<o||e.getTime()>i}}},sortArr:[],isReset:!1,isHome:!1,initiatorId:""}},created(){this.getLimitDay(),this.getCategoryList();let e=["Organization","Customer","Till","Group"];if(e.includes(this.initiatorType))this.searchList.identityId=this.identityId;else{let e=JSON.parse(decodeURIComponent(this.$route.query.data));e.type?(this.initiatorId=e.initiatorId,this.searchList.initiatorId=e.initiatorId,this.isHome=!0):this.searchList.identityId=JSON.parse(decodeURIComponent(this.$route.query.data)).orgOperatorId,e.orgOperatorId&&(this.isShowLine=!0),e.title&&(this.titleConfig=e.title),e.hasSplitline&&(this.isShowLine=e.hasSplitline)}this.title&&(this.titleConfig=this.title),this.hasSplitline&&(this.isShowLine=this.hasSplitline)},watch:{initiatorId(){this.searchList.initiatorId=this.initiatorId},"searchList.type":{handler(e){""!=e?(this.getColumns(e),this.getGroupEventList(e)):(this.searchList.eventGroup="",this.searchList.event="",this.eventList=[{label:"All",value:""}])}},"searchList.eventGroup":{handler(e){""!=e?this.getEventList(e):(this.searchList.event="",this.eventList=[{label:"All",value:""}])}}},computed:{formConfigList(){return[{label:this.$t("IDC.auditlog.category"),key:"type",comp:"el-select",options:this.categoryList,bind:{placeholder:this.$t("common.placeholder.select")}},{label:this.$t("IDC.till.eventGroup"),key:"eventGroup",comp:"el-select",bind:{placeholder:this.$t("common.placeholder.select"),id:"eventGroup"},options:this.eventGroupList},{label:this.$t("IDC.auditlog.event"),key:"event",comp:"el-select",options:this.eventList,bind:{placeholder:this.$t("common.placeholder.select")},hidden:!1},{formItemClass:"form-special-date-box",sameGroup:!0,label:this.$t("IDC.auditlog.time"),description:this.$t("IDC.auditlog.timeDesc",{obj:this.limitDays.maxDay}),prop:"time",comp:[{key:"time",comp:"el-date-picker",bind:{align:"right",type:"datetimerange",format:"dd/MM/yyyy HH:mm:ss","range-separator":"-","value-format":"yyyy-MM-dd HH:mm:ss","default-time":["00:00:00","23:59:59"],"start-placeholder":"Please select","end-placeholder":"Please select","picker-options":this.pickerOptions}},{comp:"i",class:"el-icon-date data_icon"}]}]}},methods:{getColumns(e){this.hasPage=!0,this.columns=[],this.sortArr=[],this.categoryList.forEach(t=>{t.value===e&&t.tableHead.forEach(t=>{if("TASK"===e){let e=["taskType","taskId","relatedWorkflowId"];e.includes(t.prop)&&(t.prop="extraResult."+t.prop)}t["align"]="left","logTime"===t.prop&&(t["__slotName"]="logTime",t["sort-method"]=(e,t)=>{const a=S()(e.logTime),i=S()(t.logTime);return a-i}),t["sort-method"]=(e,a)=>e[t.prop]>a[t.prop]?1:-1,this.sortArr.push(t.prop),this.columns.push(t)})}),this.columns.push({label:this.$t("IDC.auditlog.operation"),prop:"operation",align:"left",__slotName:"operation",width:"100"})},isNull(e){return!e},async getCategoryList(){let e=await Object(l["b"])();e.header&&e.header.success&&(this.categoryList=e.list||[])},async getGroupEventList(e){let t={type:e};this.searchList.eventGroup="",this.searchList.event="";let a=await Object(l["g"])(t);a.header&&a.header.success&&(this.eventGroupList=a.list)},async getLimitDay(){let e=await Object(l["c"])();e&&(this.limitDays=e.map||{maxDay:30,defaultDay:7},this.getdefaultTime(this.limitDays.defaultDay))},getdefaultTime(e){this.searchList.startTime=Object(k["a"])((new Date).getTime()-864e5*e,"YYYY-MM-DD HH:mm:ss"),this.searchList.endTime=Object(k["a"])((new Date).getTime(),"YYYY-MM-DD HH:mm:ss"),this.searchList.time=[this.searchList.startTime,this.searchList.endTime]},async getEventList(e){let t={type:this.searchList.type,eventGroup:e};this.searchList.event="";let a=await Object(l["h"])(t);a.header&&a.header.success&&(this.eventList=a.list)},reset(){this.getLimitDay(),this.isExport=!0,this.searchList={type:"",event:"",eventGroup:"",identityId:this.searchList.identityId,initiatorId:this.searchList.initiatorId,initiatorType:"",startTime:"",endTime:"",time:[]},this.isReset=!0,this.refreshTableFlag=!0,this.paginationConfig={total:0,pageIndex:1,pageSize:10},this.eventGroupList=[{label:"All",value:""}],this.eventList=[{label:"All",value:""}],this.columns=[{label:this.$t("IDC.till.initiatorType")},{label:this.$t("IDC.till.initiator")},{label:this.$t("IDC.till.times")},{label:this.$t("IDC.till.event")},{label:this.$t("IDC.auditlog.operation"),prop:"operation",align:"left",__slotName:"operation",width:"100"}]},search(){let e=this.getEmpty();e&&(this.refreshTableFlag=!0,this.paginationConfig.pageIndex=1)},getEmpty(){return""===this.searchList.type?(this.$message({message:"The category cannot be empty.",type:"warning"}),!1):!(!this.searchList.time||this.searchList.time&&0==this.searchList.time.length)||(this.$message({message:"The time cannot be empty.",type:"warning"}),!1)},exportData(e){let t=this.getEmpty();if(t){let t=Object.assign(this.searchList,{type:this.searchList.type,initiatorType:this.initiatorType,event:this.searchList.event,eventGroup:this.searchList.eventGroup,startTime:S()(this.searchList.time[0]).format("YYYY-MM-DD HH:mm:ss")||"2022-11-01 00:00:00",endTime:S()(this.searchList.time[1]).format("YYYY-MM-DD HH:mm:ss")||"2022-11-30 23:59:59",fileType:e});this.isHome?t.initiatorId=this.searchList.initiatorId:t.identityId=this.searchList.identityId,delete t.initiatorType,Object(T["a"])(l["a"],t,{fileType:e})}},async handleDetail(e){let t={auditLogId:e.auditLogId,type:e.type,logTime:e.logTime},a=await Object(l["f"])(t),i={};if(a&&a.header.success){let t=Object.assign(a.commonDetail,a.extraDetail);"Take a Call"==e.event&&(i=await Object(l["e"])({startTime:this.searchList.startTime,endTime:this.searchList.endTime,type:e.type,referenceId:e.auditLogId}),i.list.map(e=>(e.time=e.logTime.slice(0,10).split("-").join(""),e)),t.list=i.list),t.initiatorType=this.initiatorType,t["eventResult"]=a.eventResult,this.$refs.viewDetail.showDetail(t)}},handleClose(e){e()},getTableData(){if(this.isReset)return this.isReset=!1,new Promise(e=>{e({list:[],totalRecords:0,header:{success:!1}}),this.refreshTableFlag=!1,this.searchLoading=!1});let e={type:this.searchList.type,event:this.searchList.event,eventGroup:this.searchList.eventGroup,startTime:this.searchList.time&&this.searchList.time[0],endTime:this.searchList.time&&this.searchList.time[1],pageNo:this.paginationConfig.pageIndex,pageSize:this.paginationConfig.pageSize};return this.isHome?e.initiatorId=this.searchList.initiatorId:e.identityId=this.searchList.identityId,new Promise(t=>{Object(l["d"])(e).then(e=>{e&&e.header.success?(e.list=e.resultList||[],e.list.length>0?this.isExport=!1:this.isExport=!0,e.totalRecords=Number(e.totalAmount)||0,this.refreshTableFlag=!1,this.searchLoading=!1,t(e)):(e.list=[],e.totalRecords=0,this.refreshTableFlag=!1,this.searchLoading=!1,t(e))}).catch(()=>{t()})})}}},O=w,F=(a("1a78"),Object(f["a"])(O,i,o,!1,null,"dc4e9ad8",null));t["default"]=F.exports},"563c":function(e,t,a){"use strict";a("061d")},5726:function(e,t,a){e.exports={activeMenuColor:"#366bfc",primaryColor:"#366bfc",menuColor:"#5c5c5c",fillEmphasisColor:"#5c5c5c",fillLightColor:"#fafafa",fillStrongColor:"#c7c7c7",fillRegularColor:"#f0f0f0",fillColorDark:"#e0e0e0",lineStrongColor:"#8f8f8f",textEmphasisColor:"#282828",backgroundColor:"#fff",statusErrorColor:"#ff4040",statusSuccessColor:"#27bf88",statusColorwarning:"#ff7420",statusColorSAecondaryWarning:"#faaf0c",statusNoticeColor:"#338bff",statusDark:"#c7c7c7",initialColor:"#E0E0E0",statusNoticeBackgroundColor:"#F0F9FF",statusErrorBackgroundColor:"#FFF2F0",statusSuccessBackgroundColor:"#F0FFF7",statusSecondaryWarningBackgroundColor:"#FFFBE6",statusWarningBackgroundColor:"#FFF6E6",statusDarkBackgroundColor:"#FAFAFA",lineColorBlue:"#ADD9FF",lineColorError:"#FFC1BA",lineColorGreen:"#A5E6C6",lineColorWarning:"#FFF7ed"}},5826:function(e,t,a){"use strict";a.d(t,"f",(function(){return o})),a.d(t,"n",(function(){return r})),a.d(t,"m",(function(){return s})),a.d(t,"l",(function(){return n})),a.d(t,"p",(function(){return l})),a.d(t,"q",(function(){return c})),a.d(t,"o",(function(){return d})),a.d(t,"j",(function(){return u})),a.d(t,"h",(function(){return h})),a.d(t,"d",(function(){return p})),a.d(t,"a",(function(){return m})),a.d(t,"k",(function(){return f})),a.d(t,"e",(function(){return b})),a.d(t,"g",(function(){return g})),a.d(t,"b",(function(){return y})),a.d(t,"c",(function(){return v})),a.d(t,"i",(function(){return C})),a.d(t,"r",(function(){return I}));var i=a("0bbd");function o(e){return Object(i["a"])({url:"/fintech/v1/customer/queryAccountType",method:"post",data:e})}function r(e){return Object(i["a"])({url:"/fintech/v1/customer/product",method:"post",data:e})}function s(e){return Object(i["a"])({url:"/fintech/v1/customer/loadRange",method:"get",data:e})}function n(e){return Object(i["a"])({url:"/fintech/v1/customer/languages",method:"get",data:e})}function l(e){return Object(i["a"])({url:"/fintech/v1/customer/checkRange",method:"post",data:e})}function c(e){return Object(i["a"])({url:"/fintech/v1/customer/trustLevelAndSegment",method:"post",data:e})}function d(e){return Object(i["a"])({url:"/fintech/v1/customer/addCustomer",method:"post",data:e})}function u(e){return Object(i["a"])({url:"/fintech/v1/queryCustomerIdentity/msisdn",method:"post",data:e})}function h(e){return Object(i["a"])({url:"/fintech/v1/queryBusinessCustomerList",method:"post",data:e})}function p(e){return Object(i["a"])({url:"/fintech/v1/customer/getStatusList",method:"post",data:e})}function m(e){return Object(i["a"])({url:"/fintech/v1/customer/changeStatus",method:"post",data:e})}function f(e){return Object(i["a"])({url:"/fintech/v1/queryCustomerInfo",method:"post",data:e})}function b(e){return Object(i["a"])({url:"/fintech/v1/beneficiaryMgt/lookUpBeneficiary/"+e,method:"get",data:e})}function g(e){return Object(i["a"])({url:"/fintech/v1/customer/assign/product",method:"post",data:e})}function y(e){return Object(i["a"])({url:"/fintech/v1/customer/checkInputKyc",method:"post",data:e})}function v(){return Object(i["a"])({url:"/fintech/v1/customer/getIdType",method:"get"})}function C(e){return Object(i["a"])({url:"/fintech/v1/groupMember/queryCustomerGroup",method:"post",data:e})}function I(e){return Object(i["a"])({url:"/fintech/v1/imtOrgTransaction/upgradeCustomer",method:"post",data:e})}},5890:function(e,t,a){e.exports={activeMenuColor:"#366bfc",primaryColor:"#366bfc",menuColor:"#5c5c5c",fillEmphasisColor:"#5c5c5c",fillLightColor:"#fafafa",fillStrongColor:"#c7c7c7",fillRegularColor:"#f0f0f0",fillColorDark:"#e0e0e0",lineStrongColor:"#8f8f8f",textEmphasisColor:"#282828",backgroundColor:"#fff",statusErrorColor:"#ff4040",statusSuccessColor:"#27bf88",statusColorwarning:"#ff7420",statusColorSAecondaryWarning:"#faaf0c",statusNoticeColor:"#338bff",statusDark:"#c7c7c7",initialColor:"#E0E0E0",statusNoticeBackgroundColor:"#F0F9FF",statusErrorBackgroundColor:"#FFF2F0",statusSuccessBackgroundColor:"#F0FFF7",statusSecondaryWarningBackgroundColor:"#FFFBE6",statusWarningBackgroundColor:"#FFF6E6",statusDarkBackgroundColor:"#FAFAFA",lineColorBlue:"#ADD9FF",lineColorError:"#FFC1BA",lineColorGreen:"#A5E6C6",lineColorWarning:"#FFF7ed"}},"58d1":function(e,t,a){},"5c44":function(e,t,a){},"5d2c":function(e,t,a){},"5e70":function(e,t,a){"use strict";a.d(t,"r",(function(){return o})),a.d(t,"p",(function(){return r})),a.d(t,"c",(function(){return s})),a.d(t,"d",(function(){return n})),a.d(t,"e",(function(){return l})),a.d(t,"s",(function(){return c})),a.d(t,"a",(function(){return d})),a.d(t,"b",(function(){return u})),a.d(t,"j",(function(){return h})),a.d(t,"h",(function(){return p})),a.d(t,"l",(function(){return m})),a.d(t,"k",(function(){return f})),a.d(t,"f",(function(){return b})),a.d(t,"t",(function(){return g})),a.d(t,"g",(function(){return y})),a.d(t,"q",(function(){return v})),a.d(t,"o",(function(){return C})),a.d(t,"i",(function(){return I})),a.d(t,"m",(function(){return D})),a.d(t,"n",(function(){return S}));var i=a("0bbd");a("5f9a");function o(e){return Object(i["a"])({url:"/fintech/v1/transaction/orderList",method:"post",data:e})}function r(e){return Object(i["a"])({url:"/fintech/v1/transaction/order/orderDetail",method:"post",data:e})}function s(e){return Object(i["a"])({url:"/fintech/v1/transaction/orderList/export",method:"post",data:e,responseType:"blob"})}function n(e){return Object(i["a"])({url:"fintech/v1/transaction/export/reversalRequest",method:"post",data:e,responseType:"blob"})}function l(e){return Object(i["a"])({url:"/fintech/v1/customer/account",method:"post",data:e})}function c(e){return Object(i["a"])({url:"/fintech/v1/transaction/reverseTransaction",method:"post",data:e})}function d(e){return Object(i["a"])({url:"/fintech/v1/transaction/batchApprovalTransaction",method:"post",data:e})}function u(e){return Object(i["a"])({url:"/fintech/v1/transaction/confirmTransaction",method:"post",data:e})}function h(e){return Object(i["a"])({url:"/fintech/v1/Account/queryAccount",method:"post",data:e})}function p(e){return Object(i["a"])({url:"/fintech/v1/transaction/initiateTransaction",method:"post",data:e})}function m(e){return Object(i["a"])({url:"/fintech/v1/transaction/queryAvailableService",method:"post",data:e})}function f(e){return Object(i["a"])({url:"/fintech/v1/transaction/queryAvailableReasonType",method:"post",data:e})}function b(e){return Object(i["a"])({url:"/fintech/v1/transaction/account/statementList",method:"post",data:e})}function g(e){return Object(i["a"])({url:"/fintech/v1/transaction/getTransactionIdentity",method:"post",data:e})}function y(e){return Object(i["a"])({url:"/fintech/v1/account/queryUnFinishHotEntry",method:"post",data:e})}function v(e){return Object(i["a"])({url:"/fintech/v1/transaction/queryServicePreValidation",method:"post",data:e})}function C(e){return Object(i["a"])({url:"/fintech/v1/transaction/queryBudget",method:"post",data:e})}function I(e){return Object(i["a"])({url:"/fintech/v1/transaction/initiateWithdrawTransaction",method:"post",data:e})}function D(e){return Object(i["a"])({url:"/fintech/v1/bankAccount/query",method:"post",data:e})}function S(e){return Object(i["a"])({url:"/fintech/v1/bank/queryBankInfo",method:"post",data:e})}},6133:function(e,t,a){"use strict";a("fe84")},6195:function(e,t,a){"use strict";var i,o,r=function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.initLoading,expression:"initLoading"}],staticClass:"panel"},["detail"===e.pageType?t("el-row",[t("el-col",[t("div",{staticClass:"prompt-title"},[e._v(e._s(e.$t("IDC.revenueSettlementInfo.promptTitle")))])])],1):e._e(),e.isEditModel||"detail"!==e.pageType?e._e():t("el-row",[t("el-col",[t("el-button",{staticClass:"portal-operation-button",staticStyle:{"margin-bottom":"20px"},attrs:{size:"small",plain:""},on:{click:function(t){return e.setEditModel(!0)}}},[t("i",{staticClass:"el-icon-edit el-icon--right"}),e._v(e._s(e.$t("common.button.edit"))+" ")])],1)],1),t("el-form",{ref:"revenueForm",staticClass:"settlement-form",class:{viewModel:!e.isEditModel},attrs:{"label-position":"top",model:e.revenueFormData,rules:e.revenueRules}},[t("div",{staticClass:"content-wrapper"},[t("div",{staticClass:"sub-block"},[t("el-row",{attrs:{gutter:20}},[t("el-col",e._b({},"el-col",e.colOptions,!1),[t("el-form-item",{attrs:{prop:"profileName",label:e.$t("IDC.revenueSettlementInfo.revenueSettlementProfile")}},[e.isEditModel?[t("el-select",{attrs:{placeholder:"Please select",size:"small",clearable:""},on:{change:e.getProfileChange},nativeOn:{click:function(t){return e.getProfileClick.apply(null,arguments)}},model:{value:e.revenueFormData.profileId,callback:function(t){e.$set(e.revenueFormData,"profileId",t)},expression:"revenueFormData.profileId"}},e._l(e.profileList,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)]:t("span",{domProps:{textContent:e._s(e.revenueFormData.profileName||"-")}})],2)],1),e.revenueFormData.isShowModel?[t("el-col",e._b({},"el-col",e.colOptions,!1),[t("el-form-item",{attrs:{prop:"periodicSwitch",label:e.$t("IDC.revenueSettlementInfo.periodicRevenueSettlement")}},[e.isEditModel?t("switch-with-text",{attrs:{value:e.revenueFormData.periodicSwitch,change:e.PeriodicHandleChange,bind:{size:"small"}},on:{"update:value":function(t){return e.$set(e.revenueFormData,"periodicSwitch",t)}}}):t("span",{domProps:{textContent:e._s(!0===e.revenueFormData.periodicSwitch?"ON":"OFF")}})],1)],1),e.revenueFormData.periodicSwitch?t("el-col",e._b({},"el-col",e.colOptions,!1),[t("el-form-item",{attrs:{prop:"intervalValue",label:e.$t("IDC.revenueSettlementInfo.settlementCycle")}},[e.isEditModel?t("div",{staticStyle:{display:"flex",gap:"4px"}},[t("el-input",{staticStyle:{width:"68%"},attrs:{size:"small"},model:{value:e.revenueFormData.intervalValue,callback:function(t){e.$set(e.revenueFormData,"intervalValue",t)},expression:"revenueFormData.intervalValue"}}),t("el-select",{staticStyle:{width:"32%"},attrs:{placeholder:"please select",size:"small"},on:{change:function(t){return e.onTimeUnitChange()}},model:{value:e.revenueFormData.intervalTypeCode,callback:function(t){e.$set(e.revenueFormData,"intervalTypeCode",t)},expression:"revenueFormData.intervalTypeCode"}},e._l(e.settlementCycleUnitList,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1):t("span",{domProps:{textContent:e._s(e.revenueFormData.intervalValue+" "+e.getLableToOptions(e.revenueFormData.intervalTypeCode,e.settlementCycleUnitList))}})])],1):e._e(),e.revenueFormData.periodicSwitch?t("el-col",e._b({},"el-col",e.colOptions,!1),[t("el-form-item",{attrs:{label:e.$t("IDC.revenueSettlementInfo.startDate"),prop:"startDate"}},[e.isEditModel?t("el-date-picker",{attrs:{type:"date",size:"small",format:"dd/MM/yyyy",placeholder:"Please select date","value-format":"yyyy-MM-dd","picker-options":e.startDatePicker,clearable:!1},on:{change:e.startDateChange},model:{value:e.revenueFormData.startDate,callback:function(t){e.$set(e.revenueFormData,"startDate",t)},expression:"revenueFormData.startDate"}}):t("span",{domProps:{textContent:e._s(e.getDateFormat(e.revenueFormData.startDate))}})],1)],1):e._e(),e.revenueFormData.periodicSwitch?t("el-col",e._b({},"el-col",e.colOptions,!1),[t("el-form-item",{attrs:{label:e.$t("IDC.revenueSettlementInfo.endDate"),prop:"endDate"}},[e.isEditModel?t("el-date-picker",{attrs:{type:"date",size:"small",format:"dd/MM/yyyy",placeholder:"Please select date","value-format":"yyyy-MM-dd","picker-options":e.endDatePicker,clearable:!1},on:{change:e.endDateChange},model:{value:e.revenueFormData.endDate,callback:function(t){e.$set(e.revenueFormData,"endDate",t)},expression:"revenueFormData.endDate"}}):t("span",{domProps:{textContent:e._s(e.getDateFormat(e.revenueFormData.endDate))}})],1)],1):e._e()]:e._e(),e.revenueFormData.isShowModel?t("el-col",e._b({},"el-col",e.colOptions,!1),[t("el-form-item",{attrs:{label:e.$t("IDC.revenueSettlementInfo.manualInitiation"),prop:"manualWsSwitch"}},[e.isEditModel?t("switch-with-text",{attrs:{value:e.revenueFormData.manualWsSwitch,bind:{disabled:!0,size:"small"}},on:{"update:value":function(t){return e.$set(e.revenueFormData,"manualWsSwitch",t)}}}):t("span",{domProps:{textContent:e._s(!0===e.revenueFormData.manualWsSwitch?"ON":"OFF")}})],1)],1):e._e(),e.revenueFormData.isShowModel?t("el-col",e._b({},"el-col",e.colOptions,!1),[t("el-form-item",{attrs:{label:e.$t("IDC.revenueSettlementInfo.scheduledInitiation"),prop:"scheduledInitiation"}},[e.isEditModel?t("switch-with-text",{attrs:{value:e.revenueFormData.autoWsSwitch,bind:{disabled:!0,size:"small"}},on:{"update:value":function(t){return e.$set(e.revenueFormData,"autoWsSwitch",t)}}}):t("span",{domProps:{textContent:e._s(!0===e.revenueFormData.autoWsSwitch?"ON":"OFF")}})],1)],1):e._e()],2)],1),e.revenueFormData.isShowModel?t("section",{staticClass:"tabs-container",class:{create:"create"===e.pageType}},[t("el-tabs",{staticStyle:{"margin-right":"20px"},attrs:{id:"tab-pane",type:"border-card"},on:{"tab-click":e.handleTabClick},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},e._l(e.revenueFormData.settlementProfileList,(function(a,i){return t("el-tab-pane",{key:a["fundingSourceCode"]+a["settlementAccountTypeId"]+a["currency"],attrs:{label:"Settlement "+(i+1),name:a["fundingSourceCode"]+a["settlementAccountTypeId"]+a["currency"]}},[t("div",{staticClass:"sub-block"},[t("el-row",{attrs:{gutter:20}},[t("el-col",e._b({},"el-col",e.colOptions,!1),[t("el-form-item",{attrs:{label:e.$t("IDC.revenueSettlementInfo.settAccountMinBalance")+e.showBalanceWithUnit(a.currency),prop:"settlementMinBalance"}},[e.isEditModel?t("el-input",{attrs:{clearable:"",size:"small"},on:{focus:function(t){return e.unInputMoney(t)},blur:function(t){return e.inputMoney(t)}},model:{value:a.settlementMinBalance,callback:function(t){e.$set(a,"settlementMinBalance",t)},expression:"item.settlementMinBalance"}}):t("span",{domProps:{textContent:e._s(a.settlementMinBalance)}})],1)],1)],1)],1),t("el-divider",{staticClass:"divider-margin-2"}),t("div",{staticClass:"sub-block"},[t("div",{staticClass:"sub-block__title sub-block__title--normal"},[e._v(" "+e._s(e.$t("IDC.revenueSettlementInfo.revenueSettlementConfiguration"))+" ")]),t("revenue-table-list",{attrs:{tableData:a.grossRevenueList,isEditModel:e.isEditModel,currency:a.currency}})],1),t("div",{staticClass:"sub-block margin-top-45"},[t("div",{staticClass:"sub-block__title sub-block__title--normal"},[e._v(" "+e._s(e.$t("IDC.revenueSettlementInfo.liabSettlementConfiguration"))+" ")]),t("liability-table-list",{attrs:{tableData:a.grossLiabilityList,isEditModel:e.isEditModel,currency:a.currency}})],1)],1)})),1)],1):e._e()])]),e.isEditModel&&e.isShowBtn?t("div",{staticClass:"page-bottom-wrap"},[t("div",[t("el-button",{staticClass:"cancel-button",attrs:{id:"cancel",size:"small"},on:{click:e.cancel}},[e._v("Cancel ")]),t("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{id:"submitProduct",type:"primary",size:"small",loading:e.submitLoading},on:{click:e.submitEvn}},[e._v(" Submit ")])],1)]):e._e()],1)},s=[],n={name:"SwitchWithText",props:{value:{type:Boolean,default:()=>!0},change:{Type:Function,default:()=>{}},bind:{type:Object,default:()=>({})},activeText:{type:String,default:()=>"ON"},inactiveText:{type:String,default:()=>"OFF"},position:{type:String,default:()=>"right",validator:function(e){return["left","right","leftRight"].includes(e)}}},data(){return{val:this.value}},watch:{value(e){this.val=e}},methods:{getStatusText(e){return e?this.activeText:this.inactiveText},changeHandle(e){this.$emit("update:value",e),this.change(e)}},render(e){const t={};"right"===this.position&&(t.activeText=this.getStatusText(this.val)),"left"===this.position&&(t.inactiveText=this.getStatusText(this.val)),"leftRight"===this.position&&(t.inactiveText=this.inactiveText,t.activeText=this.activeText);const a=[];let i={};this.bind&&this.bind.class&&a.push(this.bind.class),this.bind&&this.bind.style&&(i={...i,...this.bind.style});const o={class:a,style:i,props:{...this.bind,...t,value:this.val},on:{change:this.changeHandle}};return e("el-switch",o)}},l=n,c=a("2877"),d=Object(c["a"])(l,i,o,!1,null,null,null),u=d.exports,h=a("e036"),p=function(){var e=this,t=e._self._c;return t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"","row-style":{height:"56px"}}},[t("el-table-column",{attrs:{label:e.$t("IDC.revenueSettlementInfo.liabilityAccount"),prop:"accountTypeName","min-width":"168px"}}),t("el-table-column",{attrs:{label:e.$t("IDC.revenueSettlementInfo.targetBalance")+e.showBalanceWithUnit(e.currency),prop:"targetBalance",required:"","min-width":"158px","render-header":e.requiredStar},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{staticClass:"columns"},[t("el-tooltip",{attrs:{content:e.getContentTips(a.row,"target"),effect:"light",placement:"top-start","arrow-offset":16,"popper-class":"text-content-error-tooltip",disabled:a.row.targetDisabled}},[t("el-form-item",{attrs:{prop:"targetBalance",rules:e.checkRules(a.row,"target")}},[t("el-input",{staticStyle:{width:"100%"},attrs:{size:"small",type:"text",disabled:!e.isEditModel},on:{focus:function(t){return e.unInputMoney(t,a,"target")},blur:function(t){return e.inputMoney(t,a,"target")}},model:{value:a.row.targetBalance,callback:function(t){e.$set(a.row,"targetBalance",t)},expression:"scope.row.targetBalance"}})],1)],1)],1)]}}])}),t("el-table-column",{attrs:{label:e.$t("IDC.revenueSettlementInfo.settlementTriggerBalance")+e.showBalanceWithUnit(e.currency),prop:"triggerBalance","min-width":"208px","render-header":e.addRequiredStar},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{staticClass:"columns"},[t("el-tooltip",{attrs:{content:e.getContentTips(a.row,"trigger"),effect:"light",placement:"top-start","arrow-offset":16,"popper-class":"text-content-error-tooltip",disabled:a.row.triggerDisabled}},[t("el-form-item",{attrs:{prop:"triggerBalance",rules:e.checkRules(a.row,"trigger")}},[t("el-switch",{staticStyle:{"margin-right":"10px"},attrs:{"active-text":a.row.triggerSwitch?"ON":"OFF",disabled:!e.isEditModel},on:{change:function(t){return e.triggerHandleChange(a.row,a.$index)}},model:{value:a.row.triggerSwitch,callback:function(t){e.$set(a.row,"triggerSwitch",t)},expression:"scope.row.triggerSwitch"}}),a.row.triggerSwitch?t("el-input",{staticStyle:{width:"72%"},attrs:{size:"small",type:"text",disabled:!e.isEditModel},on:{focus:function(t){return e.unInputMoney(t,a,"trigger")},blur:function(t){return e.inputMoney(t,a,"trigger")}},model:{value:a.row.triggerBalance,callback:function(t){e.$set(a.row,"triggerBalance",t)},expression:"scope.row.triggerBalance"}}):e._e()],1)],1)],1)]}}])}),t("el-table-column",{attrs:{label:e.$t("IDC.revenueSettlementInfo.MinBalanceTrigger"),prop:"maxMinBalanceTrigger","min-width":"100px"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{staticClass:"columns"},[t("el-switch",{staticStyle:{width:"95px"},attrs:{"active-text":a.row.maxMinBalanceTrigger?"ON":"OFF",disabled:!e.isEditModel},model:{value:a.row.maxMinBalanceTrigger,callback:function(t){e.$set(a.row,"maxMinBalanceTrigger",t)},expression:"scope.row.maxMinBalanceTrigger"}})],1)]}}])})],1)},m=[],f=a("89b2"),b={name:"TblProductService",props:{tableData:{type:Array,default:()=>[]},isEditModel:{type:Boolean,default:!1},dateRange:{type:Object,default:()=>{}},currency:{type:String,default:""}},data(){return{services:[],amount:"",hasTriggerSwitch:!1}},computed:{},watch:{},methods:{deleteRow(e,t){t.splice(e,1)},inputMoney(e,t,a){let i=null;i="0"===e.target.value?Number(e.target.value):Number(e.target.value)||null,"trigger"===a?t.row.triggerBalance=Object(f["d"])(i):t.row.targetBalance=Object(f["d"])(i)},unInputMoney(e,t,a){e.target.value&&("trigger"===a?t.row.triggerBalance=Object(f["a"])(e.target.value):t.row.targetBalance=Object(f["a"])(e.target.value))},showBalanceWithUnit(e){return"USD"===e?"($)":`(${e})`},checkRules(e,t){return{trigger:"blur",validator:async(a,i,o)=>{let r=null!=e.triggerBalance&&0!=e.triggerBalance.length,s=null!=e.targetBalance&&0!=e.targetBalance.length,n=null==e.targetBalance;if(this.hasTriggerSwitch=e.triggerSwitch,r&&s){let a=Number(Object(f["a"])(e.triggerBalance)),i=Number(Object(f["a"])(e.targetBalance));switch(t){case"target":if(i<=a)return o(new Error("Please enter an amount less than "+e.triggerBalance));break;case"trigger":if(a>=i)return o(new Error("Please enter an amount greater than "+e.targetBalance));break}}else if(n){if("target"==t)return o(new Error("Please enter content"))}else if(s&&this.hasTriggerSwitch&&"trigger"==t)return o(new Error("Please enter content"));o()}}},getContentTips(e,t){let a=null!=e.triggerBalance&&0!=e.triggerBalance.length,i=null!=e.targetBalance&&0!=e.targetBalance.length,o=null==e.targetBalance,r=null==e.triggerBalance;this.hasTriggerSwitch=e.triggerSwitch;let s="";if(a&&i){let a=Number(Object(f["a"])(e.triggerBalance)),i=Number(Object(f["a"])(e.targetBalance));switch(t){case"target":if(i>a)return void(e.targetDisabled=!0);s="Please enter an amount greater than "+a,e.targetDisabled=!1;break;case"trigger":if(a<i)return void(e.triggerDisabled=!0);s="Please enter an amount less than "+i,e.triggerDisabled=!1;break}}else if(o&&a)s="Please enter content",e.targetDisabled=!1,e.triggerDisabled=!0;else if(i&&r&&this.hasTriggerSwitch)s="Please enter content",e.targetDisabled=!0,e.triggerDisabled=!1;else{if(i&&!this.hasTriggerSwitch)return e.targetDisabled=!0,void(e.triggerDisabled=!0);s="Please enter content",e.targetDisabled=!1,e.triggerDisabled=!1}return s},requiredStar(e,{column:t}){return[e("span",{class:"required-star",style:"margin-left: 8px"},t.label)]},addRequiredStar(e,{column:t}){return[e("span",{class:{"required-star":this.hasTriggerSwitch},style:"margin-left: 8px"},t.label)]},triggerHandleChange(e,t){if(this.hasTriggerSwitch=e.triggerSwitch,!e.triggerSwitch){let e=this.tableData;e[t].triggerBalance=null}}}},g=b,y=(a("b7e5"),a("631b"),Object(c["a"])(g,p,m,!1,null,"7f2ad130",null)),v=y.exports,C=function(){var e=this,t=e._self._c;return t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"","row-style":{height:"56px"}}},[t("el-table-column",{attrs:{label:e.$t("IDC.revenueSettlementInfo.revenueAccount"),prop:"accountTypeName","min-width":"168px"}}),t("el-table-column",{attrs:{label:e.$t("IDC.revenueSettlementInfo.targetBalance")+e.showBalanceWithUnit(e.currency),prop:"targetBalance",required:"","min-width":"158px","render-header":e.requiredStar},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{staticClass:"columns"},[t("el-tooltip",{attrs:{content:e.getContentTips(a.row,"target"),effect:"light",placement:"top-start","arrow-offset":16,"popper-class":"text-content-error-tooltip",disabled:a.row.targetDisabled}},[t("el-form-item",{attrs:{prop:"targetBalance",rules:e.isEditModel?e.checkRules(a.row,"target"):{}}},[t("el-input",{staticStyle:{width:"100%"},attrs:{size:"small",type:"text",disabled:!e.isEditModel},on:{focus:function(t){return e.unInputMoney(t,a,"target")},blur:function(t){return e.inputMoney(t,a,"target")}},model:{value:a.row.targetBalance,callback:function(t){e.$set(a.row,"targetBalance",t)},expression:"scope.row.targetBalance"}})],1)],1)],1)]}}])}),t("el-table-column",{attrs:{label:e.$t("IDC.revenueSettlementInfo.settlementTriggerBalance")+e.showBalanceWithUnit(e.currency),prop:"triggerBalance","min-width":"208px","render-header":e.addRequiredStar},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{staticClass:"columns"},[t("el-tooltip",{attrs:{content:e.getContentTips(a.row,"trigger"),effect:"light",placement:"top-start","arrow-offset":16,"popper-class":"text-content-error-tooltip",disabled:a.row.triggerDisabled}},[t("el-form-item",{attrs:{prop:"triggerBalance",rules:e.checkRules(a.row,"trigger")}},[t("el-switch",{staticStyle:{"margin-right":"10px"},attrs:{"active-text":a.row.triggerSwitch?"ON":"OFF",disabled:!e.isEditModel},on:{change:function(t){return e.triggerHandleChange(a.row,a.$index)}},model:{value:a.row.triggerSwitch,callback:function(t){e.$set(a.row,"triggerSwitch",t)},expression:"scope.row.triggerSwitch"}}),a.row.triggerSwitch?t("el-input",{staticStyle:{width:"72%"},attrs:{size:"small",type:"text",disabled:!e.isEditModel},on:{focus:function(t){return e.unInputMoney(t,a,"trigger")},blur:function(t){return e.inputMoney(t,a,"trigger")}},model:{value:a.row.triggerBalance,callback:function(t){e.$set(a.row,"triggerBalance",t)},expression:"scope.row.triggerBalance"}}):e._e()],1)],1)],1)]}}])}),t("el-table-column",{attrs:{label:e.$t("IDC.revenueSettlementInfo.maxBalanceTrigger"),prop:"maxMinBalanceTrigger","min-width":"100px"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{staticClass:"columns"},[t("el-switch",{staticStyle:{width:"95px"},attrs:{"active-text":a.row.maxMinBalanceTrigger?"ON":"OFF",disabled:!e.isEditModel},model:{value:a.row.maxMinBalanceTrigger,callback:function(t){e.$set(a.row,"maxMinBalanceTrigger",t)},expression:"scope.row.maxMinBalanceTrigger"}})],1)]}}])})],1)},I=[],D={name:"TblProductService",props:{tableData:{type:Array,default:()=>[]},isEditModel:{type:Boolean,default:!1},dateRange:{type:Object,default:()=>{}},currency:{type:String,default:""}},watch:{},data(){return{services:[],amount:"",hasTriggerSwitch:!1}},computed:{},methods:{deleteRow(e,t){t.splice(e,1)},inputMoney(e,t,a){let i=null;i="0"===e.target.value?Number(e.target.value):Number(e.target.value)||null,"trigger"===a?t.row.triggerBalance=Object(f["d"])(i):t.row.targetBalance=Object(f["d"])(i)},unInputMoney(e,t,a){e.target.value&&("trigger"===a?t.row.triggerBalance=Object(f["a"])(e.target.value):t.row.targetBalance=Object(f["a"])(e.target.value))},showBalanceWithUnit(e){return"USD"===e?"($)":`(${e})`},checkRules(e,t){return{trigger:"blur",validator:async(a,i,o)=>{let r=null!=e.triggerBalance&&0!=e.triggerBalance.length,s=null!=e.targetBalance&&0!=e.targetBalance.length,n=null==e.targetBalance;if(r&&s){let a=Number(Object(f["a"])(e.triggerBalance)),i=Number(Object(f["a"])(e.targetBalance));switch(t){case"target":if(i>=a)return o(new Error("Please enter an amount less than "+e.triggerBalance));break;case"trigger":if(a<=i)return o(new Error("Please enter an amount greater than "+e.targetBalance));break}}else if(n){if("target"==t)return o(new Error("Please enter content"))}else if(s&&this.hasTriggerSwitch&&"trigger"==t)return o(new Error("Please enter content"));o()}}},getContentTips(e,t){let a=null!=e.triggerBalance&&0!=e.triggerBalance.length,i=null!=e.targetBalance&&0!=e.targetBalance.length,o=null==e.targetBalance,r=null==e.triggerBalance;this.hasTriggerSwitch=e.triggerSwitch;let s="";if(a&&i){let a=Number(Object(f["a"])(e.triggerBalance)),i=Number(Object(f["a"])(e.targetBalance));switch(t){case"target":if(i<a)return void(e.targetDisabled=!0);s="Please enter an amount less than "+a,e.targetDisabled=!1;break;case"trigger":if(a>i)return void(e.triggerDisabled=!0);s="Please enter an amount greater than "+i,e.triggerDisabled=!1;break}}else if(o&&a)s="Please enter content",e.targetDisabled=!1,e.triggerDisabled=!0;else if(i&&r&&this.hasTriggerSwitch)s="Please enter content",e.targetDisabled=!0,e.triggerDisabled=!1;else{if(i&&!this.hasTriggerSwitch)return e.targetDisabled=!0,void(e.triggerDisabled=!0);s="Please enter content",e.targetDisabled=!1,e.triggerDisabled=!1}return s},requiredStar(e,{column:t}){return[e("span",{class:"required-star",style:"margin-left: 8px"},t.label)]},addRequiredStar(e,{column:t}){return[e("span",{class:{"required-star":this.hasTriggerSwitch},style:"margin-left: 8px"},t.label)]},triggerHandleChange(e,t){if(this.hasTriggerSwitch=e.triggerSwitch,!e.triggerSwitch){let e=this.tableData;e[t].triggerBalance=null}}}},S=D,k=(a("107c"),a("28ba"),Object(c["a"])(S,C,I,!1,null,"6a6e68d1",null)),T=k.exports,w=a("689d"),O=a("5a0c"),F=a.n(O),_={name:"RevenueSettlementInfo",components:{switchWithText:u,LiabilityTableList:v,RevenueTableList:T},props:{dataObj:{labels:Object,default(){return{}}},revenueFormData:{type:Object,default(){return{}}},panelActived:{type:Boolean,default:!1},isViewMode:{type:Boolean,default:!1},isShowBtn:{type:Boolean,default:!1},pageType:{type:String,default:""},identityId:{type:String,default:""},assignInfo:{type:Object,default:()=>{}}},data(){return{activeTab:"",tabName:"first",revenueRules:Object(f["c"])(this),submitLoading:!1,initLoading:!1,revenueSettlement:this.revenueFormData,isEditModel:!this.isViewMode,type:this.pageType,operationMode:"",profileList:[],distributionModelList:[],settlementTemplateList:[],settlementCycleUnitList:[],settlementConfigTemplate:[],settlementList:[],queryProfileInfo:{},remark:"",startDatePicker:{disabledDate:e=>{const t=this.revenueFormData.endDate;if(t)return e.getTime()>new Date(t).getTime()-864e5}},endDatePicker:{disabledDate:e=>{const t=this.revenueFormData.startDate;return t?e.getTime()<Date.now()||e.getTime()<new Date(t).getTime():e.getTime()<Date.now()}}}},watch:{panelActived:{handler(e){e&&this.initPanel()},immediate:!0},revenueSettlement:{handler(e){e&&this.$emit("update:revenueFormData",Object(w["b"])(e))},deep:!0},"revenueFormData.settlementProfileList":{handler(e){e&&e.length>0&&(this.activeTab=e[0]["fundingSourceCode"]+e[0]["settlementAccountTypeId"]+e[0]["currency"])},immediate:!0},isViewMode:{handler(e){this.isEditModel=!e},immediate:!0},pageType(e){this.type=e}},methods:{async initPanel(){this.initLoading=!0,this.revenueSettlement.isShowModel&&this.setEditModel(!1);const e=await this.getAllInitData();if(!e)return;if(!e.profileMap)return;const t=Object.entries(e.profileMap);this.profileList=t.map(([e,t])=>({label:t,value:e})),this.settlementCycleUnitList=e.settlementCycleUnitList&&e.settlementCycleUnitList.map(Object(w["f"])("key","value")),"detail"===this.type&&this.firstQueryOrgProfile(this.identityId),this.initLoading=!1},async getAllInitData(){try{const e=await Object(w["e"])({profileMap:Object(w["a"])(h["d"],"revenueTemplateNameMap",{}),settlementCycleUnitList:Object(w["a"])(h["a"],"dictList",{type:"SettlementPeriod"})});return e}catch(e){return null}},async firstQueryOrgProfile(e){this.initLoading=!0,this.setEditModel(!1);const t=await this.getOrgProfile({orgId:e});this.initLoading=!1,t?(this.revenueFormData.isShowModel=!0,this.operationMode="2",this.setProfileConfig(t)):(this.revenueSettlement.isShowModel=!1,this.profileList=[],this.operationMode="1",this.revenueSettlement.profileId="",this.initLoading=!1)},async getOrgProfile({orgId:e,profileId:t}){let a={};e?a.orgId=e:a.profileId=t;const i=await Object(w["a"])(h["c"],"profile",a);return i},getProfileClick(){Object(w["a"])(h["d"],"revenueTemplateNameMap",{}).then(e=>{if(!e)return;const t=Object.entries(e);this.profileList=t.map(([e,t])=>({label:t,value:e}))})},async getProfileChange(e){if("detail"===this.type){const t="Changing the revenue settlement profile of the organization will delete data of the original revenue settlement profile. Are you sure to continue?";this.$confirm(t,"Confirm",{confirmButtonText:"Confirm",cancelButtonText:"Cancel",closeOnClickModal:!1,type:"warning"}).then(async()=>{this.resetFields(),this.initLoading=!0,this.queryProfileData(e)})}else this.queryProfileData(e)},async queryProfileData(e){if(!e)return"detail"===this.type?(this.revenueFormData.isShowModel=!1,this.initLoading=!1,this.operationMode="3",this.profileList=[],void(this.revenueSettlement={template:!1,orgId:this.identityId})):void(this.revenueFormData.isShowModel=!1);this.revenueFormData.isShowModel=!0;const t=await this.getOrgProfile({profileId:e});this.initLoading=!1,t&&this.setProfileConfig(t)},setProfileConfig(e){const t=e.settlementProfileList.find(e=>e.settlementMinBalance)||{};this.revenueSettlement={...this.revenueFormData,...e,template:!1,settlementMinBalance:t.settlementMinBalance,orgId:this.identityId}},getLableToOptions(e,t){if(!e)return"-";if(!t||!t.length)return"";if("Please Select"===e)return"";const a=t.find(t=>t.value===e)||{};return a.label||"-"},PeriodicHandleChange(e){this.revenueFormData.periodicSwitch=e},startDateChange(e){this.revenueFormData.startDate=e},endDateChange(e){this.revenueFormData.endDate=e},handleTabClick(){},cancel(){this.$confirm("Are you sure to cancel the operation?","Cancel",{confirmButtonText:"Confirm",cancelButtonText:"Cancel",closeOnClickModal:!1,type:"warning"}).then(()=>{this.firstQueryOrgProfile(this.identityId)})},onTimeUnitChange(){this.revenueFormData.intervalValue&&this.$refs["revenueForm"].validateField("intervalValue")},setStatus(){this.revenueFormData.isShowModel||"1"!==this.operationMode||(this.operationMode="3",this.revenueSettlement={template:!1,orgId:this.identityId})},excuteRevenueData(e){e.settlementProfileList.forEach(e=>{e.settlementMinBalance=Object(f["a"])(e.settlementMinBalance),e.grossLiabilityList.forEach(e=>{e.targetBalance=Object(f["a"])(e.targetBalance),e.triggerBalance=Object(f["a"])(e.triggerBalance)}),e.grossRevenueList.forEach(e=>{e.targetBalance=Object(f["a"])(e.targetBalance),e.triggerBalance=Object(f["a"])(e.triggerBalance)}),e.liabilityList.forEach(e=>{e.targetBalance=Object(f["a"])(e.targetBalance),e.triggerBalance=Object(f["a"])(e.triggerBalance)}),e.revenueList.forEach(e=>{e.targetBalance=Object(f["a"])(e.targetBalance),e.triggerBalance=Object(f["a"])(e.triggerBalance)})})},submitEvn(){this.setStatus(),"3"!==this.operationMode?this.$refs["revenueForm"].validateField(["targetBalance","triggerBalance"],e=>{if(e)return!1;this.submitEvnData()}):this.submitEvnData()},submitEvnData(){this.$refs["revenueForm"].validate(e=>{if(!e)return;let t={};"3"!==this.operationMode?(t=JSON.parse(JSON.stringify(this.revenueFormData)),this.excuteRevenueData(t)):t={template:!1,orgId:this.identityId},this.submitLoading=!0,this.$confirm("Are you sure to submit it?","Tips",{confirmButtonText:"Confirm",cancelButtonText:"Cancel",closeOnClickModal:!1}).then(()=>{let e={operationMode:this.operationMode,profile:t};Object(h["e"])(e).then(e=>{e.header&&e.header.success&&(this.$modal.msgSuccess("orgRevenueSettlementProfile submitted successfully."),this.setEditModel(!1),this.firstQueryOrgProfile(this.identityId))}).finally(()=>{this.submitLoading=!1})})})},setEditModel(e){this.isEditModel=e,this.profileList=[],this.revenueSettlement.profileId?(this.revenueFormData.profileId="",this.revenueFormData.isShowModel=!0):this.revenueFormData.isShowModel=!1},resetFields(){this.$refs.revenueForm.resetFields()},inputMoney(e){let t=null;t="0"===e.target.value?Number(e.target.value):Number(e.target.value)||null,e.target.value=Object(f["d"])(t)},unInputMoney(e){e.target.value?this.revenueFormData.settlementMinBalance=Object(f["a"])(e.target.value):this.revenueFormData.settlementMinBalance=null},showBalanceWithUnit(e){return"USD"===e?"($)":`(${e})`},getDateFormat(e){return F()(e,"YYYY-MM-DD").format("DD/MM/YYYY")}},activated(){this.initPanel()}},N=_,A=(a("adbd"),a("ead9"),Object(c["a"])(N,r,s,!1,null,"33f68428",null));t["a"]=A.exports},6198:function(e,t,a){"use strict";a("bfbd")},"61d4":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"business-portal-page"},[t("portal-header",{attrs:{projectObj:e.titleConfig}}),t("portal-form",{ref:"bankAccountForm",attrs:{"form-data":e.searchForm,"form-rules":e.searchFormRules,"form-config-list":e.formConfigArray,searchBtnLoading:e.searchLoading},on:{"reset-btn-click":e.reset,"search-btn-click":e.search}}),t("div",{staticClass:"table-list-container"},[t("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[t("el-tab-pane",{attrs:{label:e.$t("IDC.bankAccount.label.activeAccount"),name:"first"}},[t("transition",{attrs:{name:"el-fade-in-linear"}},[t("active-account-content",{directives:[{name:"show",rawName:"v-show",value:"first"===e.activeName,expression:"activeName === 'first'"}],ref:"activeAccountContent",attrs:{"identity-id":e.identity,searchForm:e.searchForm,assetTypeOptions:e.assetTypeOptions,bankHeadOfficeOptions:e.bankHeadOfficeOptions},on:{refreshRemovedAccount:e.refreshRemovedAccountList}})],1)],1),t("el-tab-pane",{attrs:{label:e.$t("IDC.bankAccount.label.removedAccount"),name:"second"}},[t("transition",{attrs:{name:"el-fade-in-linear"}},[t("removed-account-content",{directives:[{name:"show",rawName:"v-show",value:"second"===e.activeName,expression:"activeName === 'second'"}],ref:"removedAccountContent",attrs:{"identity-id":e.identity,searchForm:e.searchForm,assetTypeOptions:e.assetTypeOptions,bankHeadOfficeOptions:e.bankHeadOfficeOptions}})],1)],1)],1)],1)],1)},o=[],r=a("f33d"),s=a("02e3"),n=a("c811"),l=a("3186"),c=a("4e20"),d=a("ea41"),u={name:"BankAccountList",components:{PortalHeader:n["a"],PortalForm:l["a"],ActiveAccountContent:c["a"],RemovedAccountContent:d["a"]},props:{identityId:{require:!0,type:String}},data(){return{identity:"",searchForm:{assetType:null,accountName:null,bankHeadOffice:null,bankName:null},searchFormRules:{accountName:[s["w"]],bankName:[s["w"]]},bankHeadOfficeOptions:[{value:null,label:"All"}],assetTypeOptions:[{value:null,label:"All"}],searchLoading:!1,activeName:"first"}},computed:{titleConfig(){return{title:this.$t("IDC.bankAccount.pageTitle"),desc:this.$t("IDC.bankAccount.pageDesc")}},formConfigArray(){return[{label:this.$t("IDC.bankAccount.label.assetType"),key:"assetType",comp:"el-select",options:this.assetTypeOptions,bind:{placeholder:this.$t("common.placeholder.select"),id:"assetType"}},{label:this.$t("IDC.bankAccount.label.accountName"),key:"accountName",comp:"el-input",bind:{placeholder:this.$t("common.placeholder.enter"),id:"accountName"}},{label:this.$t("IDC.bankAccount.label.bankHeadOffice"),key:"bankHeadOffice",comp:"el-select",options:this.bankHeadOfficeOptions,bind:{placeholder:this.$t("common.placeholder.select"),id:"bankHeadOffice"}},{label:this.$t("IDC.bankAccount.label.bank"),key:"bankName",comp:"el-input",bind:{placeholder:this.$t("common.placeholder.enter"),id:"bankName"}}]}},watch:{},created(){if(this.getAssetTypeList(),this.getBankHeadOfficeList(),this.identityId)this.identity=this.identityId;else{const{identityId:e}=JSON.parse(decodeURIComponent(this.$route.query.data));this.identity=e}},activated(){},mounted(){},methods:{reset(){this.searchForm={bankHeadOffice:null,assetType:null},this.$refs.activeAccountContent.search(),this.$refs.removedAccountContent.search()},search(){this.$refs.activeAccountContent.search(),this.$refs.removedAccountContent.search()},async getBankHeadOfficeList(){let e=await Object(r["c"])({});if(e.header&&e.header.success){let t=JSON.parse(e.jsonDataStr);t.map(e=>{let t={value:e.code,label:e.value};this.bankHeadOfficeOptions.push(t)})}},async getAssetTypeList(){let e=await Object(r["i"])({dictType:"AssetType"});if(e.header&&e.header.success){let t=JSON.parse(e.dataDictJson);t.map(e=>{let t={value:e.code,label:e.name};this.assetTypeOptions.push(t)})}},refreshRemovedAccountList(){this.$refs.removedAccountContent.search()}}},h=u,p=(a("e850"),a("2877")),m=Object(p["a"])(h,i,o,!1,null,"1e6c5aab",null);t["default"]=m.exports},6226:function(e,t,a){e.exports={activeMenuColor:"#366bfc",primaryColor:"#366bfc",menuColor:"#5c5c5c",fillEmphasisColor:"#5c5c5c",fillLightColor:"#fafafa",fillStrongColor:"#c7c7c7",fillRegularColor:"#f0f0f0",fillColorDark:"#e0e0e0",lineStrongColor:"#8f8f8f",textEmphasisColor:"#282828",backgroundColor:"#fff",statusErrorColor:"#ff4040",statusSuccessColor:"#27bf88",statusColorwarning:"#ff7420",statusColorSAecondaryWarning:"#faaf0c",statusNoticeColor:"#338bff",statusDark:"#c7c7c7",initialColor:"#E0E0E0",statusNoticeBackgroundColor:"#F0F9FF",statusErrorBackgroundColor:"#FFF2F0",statusSuccessBackgroundColor:"#F0FFF7",statusSecondaryWarningBackgroundColor:"#FFFBE6",statusWarningBackgroundColor:"#FFF6E6",statusDarkBackgroundColor:"#FAFAFA",lineColorBlue:"#ADD9FF",lineColorError:"#FFC1BA",lineColorGreen:"#A5E6C6",lineColorWarning:"#FFF7ed"}},"631b":function(e,t,a){"use strict";a("423d")},"63ab":function(e,t,a){},6586:function(e,t,a){},"65cf":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"transaction-initiate-box create-page-content"},[e.showInitiateOrSucceed?t("div",{staticStyle:{borderradius:"4px"}},[t("div",{staticClass:"transaction-initiate",staticStyle:{position:"relative"}},[t("div",[t("portal-header",{attrs:{projectObj:e.titleConfig}})],1),t("div",{staticStyle:{padding:"0 20px 20px 20px"}},[t("p",{staticClass:"table-title"},[e._v("Summary of Accounts")]),t("portal-table",{ref:"table-page",staticClass:"tableBox",attrs:{columns:e.orgColumns,height:300,isSearch:e.isSearch,getTableData:e.getTableData,initializingLoading:!1,sortArr:["accountNo","accountName","accountType","currency","alias","ruleProfile","status"]},scopedSlots:e._u([{key:"balance",fn:function(a){return[t("div",{staticClass:"align-right"},[e._v(e._s(a.data.row.balance))])]}},{key:"availableBalance",fn:function(a){return[t("div",{staticClass:"align-right"},[e._v(e._s(a.data.row.availableBalance))])]}},{key:"reservedBalance",fn:function(a){return[t("div",{staticClass:"align-right"},[e._v(e._s(a.data.row.reservedBalance))])]}},{key:"unclearBalance",fn:function(a){return[t("div",{staticClass:"align-right"},[e._v(e._s(a.data.row.unclearBalance))])]}},{key:"status",fn:function(a){return[t("div",{staticClass:"status-group"},[t("span",{staticClass:"status-circle",style:e.statusStyle(a.data.row.status)}),t("span",{staticClass:"status-name"},[e._v(e._s(a.data.row.status))])])]}}],null,!1,256528639)})],1)]),t("div",{staticStyle:{"margin-top":"20px"}},[t("el-form",{ref:"basicFormRef",attrs:{model:e.basicForm,rules:e.basicFormRules}},[t("div",{staticClass:"basic-info"},[t("div",{staticClass:"section-title"},[e._v("Basic Info")]),t("el-divider",{staticClass:"margin-top-0 margin-bottom-20"}),t("el-row",{staticClass:"el-row-box-top",attrs:{gutter:20}},[t("el-col",e._b({},"el-col",e.colOptions,!1),[t("el-form-item",{staticClass:"basic-label-item",attrs:{size:"small",label:"Transaction Services",prop:"serviceCode"}},[t("el-select",{attrs:{placeholder:"Please Select","popper-class":"org-select-dropdown-area"},on:{change:e.handleSelectedService,focus:e.reSearchData},model:{value:e.basicForm.serviceCode,callback:function(t){e.$set(e.basicForm,"serviceCode",t)},expression:"basicForm.serviceCode"}},[t("div",{staticClass:"select-top-area"},[t("el-input",{staticClass:"search-input",attrs:{placeholder:"Search for",clearable:""},model:{value:e.searchServiceData,callback:function(t){e.searchServiceData=t},expression:"searchServiceData"}},[t("i",{staticClass:"el-icon-search",attrs:{slot:"suffix"},on:{click:function(t){return e.searchData()}},slot:"suffix"})])],1),t("div",{staticClass:"select-buttom-area"},e._l(e.serviceNameList,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)])],1),t("div",{staticClass:"description-content"},[e.basicForm.serviceCode?t("div",{staticClass:"serviceDesc"},[t("span",[e._v("Services Description: "+e._s(e.description))])]):e._e()])],1)],1),e.showNoReasonTypeTips?t("el-row",[t("div",{staticClass:"reason-type-tips"},[e._v("No Available Reason Type")])]):e._e(),e.isAutomatic||e.showNoReasonTypeTips?e._e():t("el-row",{staticClass:"el-row-box-reasonType",attrs:{gutter:20}},[t("el-col",e._b({},"el-col",e.colOptions,!1),[t("el-form-item",{staticClass:"margin-bottom-0",attrs:{size:"small",label:"Reason Type",prop:"reasonType"}},[t("el-select",{attrs:{placeholder:"Please select"},on:{change:e.selectedReasonType},model:{value:e.basicForm.reasonType,callback:function(t){e.$set(e.basicForm,"reasonType",t)},expression:"basicForm.reasonType"}},e._l(e.reasonTypeList,(function(e){return t("el-option",{key:e.value,attrs:{value:e.value,label:e.label}})})),1)],1)],1)],1)],1),t("div",{staticClass:"basic-info"},[t("div",{staticClass:"section-title"},[e._v("Details")]),t("el-divider",{staticClass:"margin-top-0 margin-bottom-20"}),t("div",{staticClass:"detail-data-form"},[t("p",{staticClass:"third-level-title"},[e._v("Primary Identifier")]),t("el-row",{staticClass:"elRowShortCode",attrs:{gutter:20}},[t("el-col",e._b({},"el-col",e.colOptions,!1),[t("el-form-item",{attrs:{size:"small",label:"Short Code",prop:"payerShortCode",id:"shortCode"}},[t("el-input",{staticClass:"payerShortCodeInput",attrs:{disabled:e.sameIdentity},model:{value:e.basicForm.payerShortCode,callback:function(t){e.$set(e.basicForm,"payerShortCode",t)},expression:"basicForm.payerShortCode"}}),e.sameIdentity?e._e():t("div",{staticClass:"icon-e"},[t("span",{staticClass:"el-icon-ellipsis",on:{click:function(t){e.searchVisible=!0}}})])],1)],1),e.basicForm.serviceCode?t("el-col",e._b({},"el-col",e.colOptions,!1),[t("el-form-item",{attrs:{size:"small",label:"Account",prop:"payerAccountNo"}},[t("el-select",{attrs:{placeholder:"Please select"},model:{value:e.basicForm.payerAccountNo,callback:function(t){e.$set(e.basicForm,"payerAccountNo",t)},expression:"basicForm.payerAccountNo"}},e._l(e.primaryAccountList,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1):e._e()],1),t("portal-short-code",{attrs:{"invoking-flag":"transactionInitiate",searchVisible:e.searchVisible,"short-code":e.basicForm.payerShortCode,isSelect:!0},on:{"update:searchVisible":function(t){e.searchVisible=t},"update:search-visible":function(t){e.searchVisible=t},"update:shortCode":function(t){return e.$set(e.basicForm,"payerShortCode",t)},"update:short-code":function(t){return e.$set(e.basicForm,"payerShortCode",t)}}}),e.basicForm.serviceCode?t("div",{staticClass:"content-item"},[t("el-divider",{staticClass:"margin-top-4 margin-bottom-20"}),t("p",{staticClass:"third-level-title"},[e._v("Receiver Identifier")]),t("el-row",{attrs:{gutter:20}},[t("el-col",e._b({},"el-col",e.colOptions,!1),[t("el-form-item",{attrs:{size:"small",label:"Identifier Type",prop:"diffIdentifierType"}},[t("el-select",{attrs:{placeholder:"Please select",disabled:e.sameIdentity},on:{change:e.handleLabel},model:{value:e.basicForm.diffIdentifierType,callback:function(t){e.$set(e.basicForm,"diffIdentifierType",t)},expression:"basicForm.diffIdentifierType"}},e._l(e.identifierTypeList,(function(e){return t("el-option",{key:e.value,attrs:{value:e.value,label:e.label}})})),1)],1)],1),e.sameIdentity||"Short Code"==e.currentLabel?t("el-col",e._b({},"el-col",e.colOptions,!1),[t("el-form-item",{attrs:{size:"small",label:"Short Code",prop:e.payeeShortCodeProp}},[e.sameIdentity?e._e():t("span",{staticClass:"span-verify-type",on:{click:function(t){return e.verifyFun("payeeShortCode","shortCode")}}},[e._v(" Verify ")]),t("el-input",{attrs:{"validate-event":!1,disabled:e.sameIdentity,placeholder:"Please enter"},model:{value:e.basicForm.payeeShortCode,callback:function(t){e.$set(e.basicForm,"payeeShortCode",t)},expression:"basicForm.payeeShortCode"}},[e.sameIdentity?e._e():t("i",{staticClass:"el-icon-more icon-cursor",attrs:{slot:"suffix"},on:{click:function(t){e.searchPayeeVisible=!0}},slot:"suffix"})])],1)],1):e._e(),t("portal-short-code",{attrs:{searchVisible:e.searchPayeeVisible,"short-code":e.basicForm.payeeShortCode,isSelect:!0},on:{"update:searchVisible":function(t){e.searchPayeeVisible=t},"update:search-visible":function(t){e.searchPayeeVisible=t},"update:shortCode":function(t){return e.$set(e.basicForm,"payeeShortCode",t)},"update:short-code":function(t){return e.$set(e.basicForm,"payeeShortCode",t)}}}),e.sameIdentity||"Till MSISDN"!=e.currentLabel?e._e():t("el-col",e._b({staticStyle:{"padding-left":"10px"}},"el-col",e.colOptions,!1),[t("el-form-item",{attrs:{size:"small",label:"Till MSISDN",prop:"payeeTillMsisdn",id:"tillMsisdnItem"}},[t("span",{staticClass:"span-verify-type",on:{click:function(t){return e.verifyFun("payeeTillMsisdn","tillMsisdn")}}},[e._v("Verify")]),t("el-input",{attrs:{"validate-event":!1,placeholder:"Please enter"},model:{value:e.basicForm.payeeTillMsisdn,callback:function(t){e.$set(e.basicForm,"payeeTillMsisdn",t)},expression:"basicForm.payeeTillMsisdn"}}),e.validVerifySuccess?t("div",{staticClass:"payeeTillMsisdnAlert"},[t("p",[e._v("Organization Name:")]),t("p",[e._v("Org Organization Short Code: "+e._s(e.basicForm.payeeShortCode))])]):e._e()],1)],1),e.sameIdentity||"MSISDN"!=e.currentLabel?e._e():t("el-col",e._b({staticStyle:{"padding-left":"10px"}},"el-col",e.colOptions,!1),[t("el-form-item",{attrs:{size:"small",label:"MSISDN",prop:"payeeMsisdn"}},[t("span",{staticClass:"span-verify-type",on:{click:function(t){return e.verifyFun("payeeMsisdn","msisdn")}}},[e._v("Verify")]),t("el-input",{attrs:{"validate-event":!1,placeholder:"Please enter"},model:{value:e.basicForm.payeeMsisdn,callback:function(t){e.$set(e.basicForm,"payeeMsisdn",t)},expression:"basicForm.payeeMsisdn"}}),e.validVerifySuccess?t("div",{staticClass:"payeeTillMsisdnAlert"},[t("p",[e._v("Customer Name: "+e._s(e.customAccountName))])]):e._e()],1)],1),e.sameIdentity||"Voucher Code"!=e.currentLabel?e._e():t("el-col",e._b({},"el-col",e.colOptions,!1),[t("el-form-item",{attrs:{size:"small",label:"Voucher Code",prop:"payeeVoucherCode"}},[t("span",{staticClass:"span-verify-type",on:{click:function(t){return e.verifyFun("payeeVoucherCode","voucherCode")}}},[e._v("Verify")]),t("el-input",{attrs:{"validate-event":!1,placeholder:"Please enter"},model:{value:e.basicForm.payeeVoucherCode,callback:function(t){e.$set(e.basicForm,"payeeVoucherCode",t)},expression:"basicForm.payeeVoucherCode"}})],1)],1),e.sameIdentity||"Voucher Code"!=e.currentLabel?e._e():t("el-col",e._b({},"el-col",e.colOptions,!1),[t("el-form-item",{attrs:{size:"small",label:"Voucher Verification Code",prop:"validValue"}},[t("el-input",{attrs:{placeholder:"Please select"},model:{value:e.basicForm.validValue,callback:function(t){e.$set(e.basicForm,"validValue",t)},expression:"basicForm.validValue"}})],1)],1),e.sameIdentity||"Voucher Code"!=e.currentLabel?e._e():t("el-col",e._b({},"el-col",e.colOptions,!1),[t("el-form-item",{attrs:{size:"small",label:"Secret Code",prop:"secretCode"}},[t("el-input",{attrs:{placeholder:"Please select"},model:{value:e.basicForm.secretCode,callback:function(t){e.$set(e.basicForm,"secretCode",t)},expression:"basicForm.secretCode"}})],1)],1),e.sameIdentity||e.validVerifySuccess?t("el-col",e._b({},"el-col",e.colOptions,!1),[t("el-form-item",{attrs:{size:"small",label:"Account",prop:"payeeAccountNo"}},[t("el-select",{attrs:{placeholder:"Please select"},model:{value:e.basicForm.payeeAccountNo,callback:function(t){e.$set(e.basicForm,"payeeAccountNo",t)},expression:"basicForm.payeeAccountNo"}},e._l(e.receiverAccountList,(function(e){return t("el-option",{key:e.value,attrs:{value:e.value,label:e.label}})})),1)],1)],1):e._e()],1)],1):e._e(),e.basicForm.serviceCode&&!e.sameIdentity?t("el-divider",{staticClass:"margin-top-4 margin-bottom-20"}):e._e(),e.basicForm.serviceCode&&!e.sameIdentity?t("div",[t("p",{staticClass:"third-level-title"},[e._v("Requester")]),t("el-row",{attrs:{gutter:20}},[t("el-col",e._b({},"el-col",e.colOptions,!1),[t("el-form-item",{attrs:{size:"small",label:"Identifier Type",prop:"requesterIdentityType"}},[t("el-select",{attrs:{placeholder:"Please select"},model:{value:e.basicForm.requesterIdentityType,callback:function(t){e.$set(e.basicForm,"requesterIdentityType",t)},expression:"basicForm.requesterIdentityType"}},e._l(e.requesterIdentifierTypeOptions,(function(e){return t("el-option",{key:e.value,attrs:{value:e.value,label:e.label}})})),1)],1)],1)],1),e.basicForm.requesterIdentityType?t("el-row",{attrs:{gutter:20}},[t("el-col",e._b({},"el-col",e.colOptions,!1),[t("el-form-item",{attrs:{size:"small",label:"MSISDN",prop:"requesterMsisdn"}},[t("el-input",{attrs:{placeholder:"Please enter"},model:{value:e.basicForm.requesterMsisdn,callback:function(t){e.$set(e.basicForm,"requesterMsisdn",t)},expression:"basicForm.requesterMsisdn"}})],1)],1)],1):e._e(),t("el-divider",{staticClass:"margin-top-4 margin-bottom-20"})],1):e._e(),t("el-divider",{staticClass:"bankInfoDivider"}),t("p",{staticClass:"third-level-title"},[e._v("Amount")]),t("el-row",{attrs:{gutter:20}},[t("el-col",e._b({},"el-col",e.colOptions,!1),[t("el-form-item",{attrs:{size:"small",label:"Amount(M)",prop:"amount"}},[t("el-input",{on:{focus:function(t){return e.unInputMoney(t)},blur:function(t){return e.inputMoney(t)}},model:{value:e.basicForm.amount,callback:function(t){e.$set(e.basicForm,"amount",t)},expression:"basicForm.amount"}})],1)],1)],1),t("el-divider",{staticClass:"margin-top-4 margin-bottom-20"}),e._e(),e._e(),e.showBankAccount?t("el-divider"):e._e(),e.showBankAccount?[t("p",{staticClass:"third-level-title"},[e._v("Bank Account")]),t("el-row",{attrs:{gutter:20}},[t("el-col",e._b({},"el-col",e.colOptions,!1),[t("el-form-item",{attrs:{size:"small",label:"Receving Bank Account",prop:"bankAccountId",rules:[e.selectRequiredValidateObj]}},[t("el-select",{attrs:{placeholder:"Please select"},model:{value:e.basicForm.bankAccountId,callback:function(t){e.$set(e.basicForm,"bankAccountId",t)},expression:"basicForm.bankAccountId"}},e._l(e.bankList,(function(e){return t("el-option",{key:e.bankId,attrs:{value:e.bankId,label:`${e.accountName}/${e.accountNoMask}/(${e.bankName})`}})})),1)],1)],1),t("el-col",[e.basicForm.bankAccountId?t("div",{staticClass:"description-content"},[t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.bankInfoLoading,expression:"bankInfoLoading"}],class:["serviceDesc","bankInfo"]},e._l(e.bankInfos,(function(a){return t("div",{key:a.value},[e._v(" "+e._s(`${a.label}${a.content||"-"}`)+" ")])})),0)]):e._e()])],1),t("el-divider",{staticClass:"bankInfoDivider"})]:e._e(),t("p",{staticClass:"third-level-title"},[e._v("Remark&Reason")]),t("el-row",[t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{size:"small",label:"Remark",prop:"remark"}},[t("el-input",{attrs:{placeholder:"Remarks information for a transaction...",rows:4,type:"textarea"},model:{value:e.basicForm.remark,callback:function(t){e.$set(e.basicForm,"remark",t)},expression:"basicForm.remark"}})],1)],1)],1),t("el-row",{staticClass:"el-flex-wrap"},[t("el-col",[t("p",{staticClass:"initiateTitle"},[e._v("Initiate Scenario")]),t("p",{staticClass:"initiateContent"},[e._v(e._s(e.content))])])],1),t("el-row",{attrs:{gutter:20}},[t("el-col",e._b({staticClass:"reason-text"},"el-col",e.colOptions,!1),[t("el-form-item",{staticClass:"margin-bottom-08",attrs:{size:"small",label:"Reason",prop:"reasonMode"}},[t("el-select",{attrs:{id:"reasonMode",size:"small",placeholder:"please select",clearable:""},model:{value:e.basicForm.reasonMode,callback:function(t){e.$set(e.basicForm,"reasonMode",t)},expression:"basicForm.reasonMode"}},[t("el-option",{attrs:{label:"Input Manually ...",value:"manually"}})],1)],1)],1),t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{size:"small",prop:"reason"}},[t("el-input",{attrs:{placeholder:"Enter The Reason...",type:"textarea",rows:4},model:{value:e.basicForm.reason,callback:function(t){e.$set(e.basicForm,"reason",t)},expression:"basicForm.reason"}})],1)],1),t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"Comment to Customer",prop:"serviceEvaluation"}},[t("el-input",{attrs:{type:"textarea",rows:4},model:{value:e.basicForm.serviceEvaluation,callback:function(t){e.$set(e.basicForm,"serviceEvaluation",t)},expression:"basicForm.serviceEvaluation"}})],1)],1)],1)],2)],1)])],1),t("footer-tap",{attrs:{"submit-loading":e.submitLoading,hasSidebar:!0},on:{reset:e.reset,submit:e.submit}})],1):t("div",{staticClass:"initiateSucceed"},[t("portal-create-success",{attrs:{successText:e.succeedTitle,detailText:e.$t("IDC.till.viewDetail")+">>",addText:e.$t("common.button.continueAdd")+">>"},on:{"view-detail":e.handleViewDetail,"continue-add":e.handleContinueAddClick}})],1),t("portal-dialog",{attrs:{visible:e.budgetDialogVisible,title:"Transaction Budget Confirm",subtitle:"Please Confirm The Transaction Information Below .",width:"800px",top:"12vh","append-to-body":"","destroy-on-close":"",submitLoading:e.submitLoading},on:{"update:visible":function(t){e.budgetDialogVisible=t},opened:e.handleDialogOpened,"cancel-btn-click":e.handleDialogCancel,"confirm-btn-click":e.handleDialogConfirm},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",{staticClass:"charge-content"},[e.isNoCharge?t("div",{staticClass:"no-charge-tips"},[t("div",{staticClass:"descriptions-list-container"},e._l(e.noChargePropColumns,(function(a,i){return t("div",{key:i,staticClass:"descriptions-item-container"},[t("p",{staticClass:"descriptions-item__label"},[e._v(" "+e._s(a.label)+" ")]),t("p",{staticClass:"descriptions-item__content"},[e._v(" "+e._s(a.value)+" ")])])})),0)]):t("div",{staticClass:"charge-tips"},[t("div",{staticClass:"descriptions-list-container"},[e.primaryOrganizationName?t("div",{staticClass:"descriptions-item-container"},[t("p",{staticClass:"descriptions-item__label"},[e._v("Primary Identity")]),t("p",{staticClass:"descriptions-item__content"},[e._v(" "+e._s(e.primaryOrganizationName)+" ")])]):e._e(),e.receiverIdentityName?t("div",{staticClass:"descriptions-item-container"},[t("p",{staticClass:"descriptions-item__label"},[e._v("Receiver Identity")]),t("p",{staticClass:"descriptions-item__content"},[e._v(" "+e._s(e.receiverIdentityName)+" ")])]):e._e()]),t("div",{staticClass:"dialog-table-list margin-top-20"},[t("table-page",{attrs:{size:"small","has-pagination":!1,columns:e.budgetColumns,initializingLoading:!1,outSideTableData:e.budgetTableData}})],1)])])]},proxy:!0}])})],1)},o=[],r=a("0360"),s=a("02e3"),n=a("5e70");const l=(e,t)=>({validator:(a,i,o)=>{if(i){const a={"short code":{shortCode:e.basicForm.payeeShortCode},"voucher code":{voucherCode:e.basicForm.payeeVoucherCode},msisdn:{msisdn:e.basicForm.payeeMsisdn},"till msisdn":{tillMsisdn:e.basicForm.payeeTillMsisdn}};Object(n["t"])(a[t]).then(e=>{if(e.header&&e.header.success){if(!e.identityId)return o("msisdn"===t?new Error("The phone number does not meet the requirements."):new Error(`The ${t} is not exist.`));o()}}).catch(()=>o(new Error(`The ${t} Exception`)))}},trigger:"blur"});let c={required:!0,message:"Please select content",trigger:"submit"};const d=e=>({bankAccount:[s["z"]],serviceCode:[c],code:[s["z"]],payerShortCode:[s["e"]],payeeShortCode:[s["e"],l(e,"short code")],amount:[s["e"]],reasonMode:[s["z"]],reason:[s["e"]],reasonType:[s["z"]],currency:[s["e"]],diffIdentifierType:[s["z"]],payeeVoucherCode:[s["e"],l(e,"voucher code")],payeeMsisdn:[s["e"],l(e,"msisdn")],payeeTillMsisdn:[s["e"],l(e,"till msisdn")]});var u=a("9981"),h=a("4c09"),p=a("c811"),m=a("d3d3"),f=a("8ac9"),b=a("c652"),g=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"basic-info-box"},[t("el-row",{attrs:{gutter:20}},e._l(e.configList,(function(a,i){return t("el-col",e._b({key:i},"el-col",e.colOptions,!1),[t("div",{staticClass:"basic-info-card"},[t("span",{staticClass:"basic-info-card__label bg-purple"},[e._v(e._s(a.label)+" :")]),t("span",{staticClass:"basic-info-card__value"},[e._v(e._s(a.value))])])])})),1)],1)])},y=[],v={name:"BasicInfoItem",props:{basicInfo:{type:Object,default:()=>({})}},data(){return{propsOrder:[{name:"accountNo",label:this.$t("IDC.transactionInitiate.bankShortCode")},{name:"accountName",label:this.$t("IDC.transactionInitiate.branchAddress")},{name:"accountAlias",label:this.$t("IDC.transactionInitiate.bankType")},{name:"currency",label:this.$t("IDC.transactionInitiate.transferMode")},{name:"relationship",label:this.$t("IDC.transactionInitiate.controlBank")}]}},computed:{configList(){const e=this.basicInfo;return this.propsOrder.map(t=>{const a=t.name,i=t.label;return{label:i,value:e[a]||"-"}})}}},C=v,I=(a("3b28"),a("2877")),D=Object(I["a"])(C,g,y,!1,null,"4d5892e6",null),S=D.exports,k=a("1c45"),T=a("f33d"),w=a("8f48");function O(e,t,a){return void 0===a||null===a||""===a?"-":b["a"].format(a,e.currency)}var F={name:"transactionInitiate",components:{footerTap:m["a"],PortalHeader:p["a"],PortalTable:h["a"],portalShortCode:w["a"],PortalCreateSuccess:u["a"],PortalDialog:f["a"],TablePage:h["a"],BasicInfoItem:S},data(){return{isSearch:!1,bankAccountList:[{label:"Wangbin12345",value:"123"}],bankAccountInfo:{},isAutomatic:!0,submitLoading:!1,payerAccountTypeId:"",payeeAccountTypeId:"",submitInit:!0,showNoReasonTypeTips:!1,searchServiceData:"",tradeOrderId:"",succeedTitle:"The Transaction Has Been Processed.",showInitiateOrSucceed:!0,customAccountName:"",accountList:[],identifierTypeList:[{value:"04",label:"Short Code"},{value:"17",label:"Till MSISDN"},{value:"01",label:"MSISDN"},{value:"03",label:"Voucher Code"},{value:"10",label:"SP"}],currentLabel:"Short Code",selectedReasonTypeList:[],diffOrganization:"",sameIdentity:!1,validVerifySuccess:!1,serviceDescription:[],serviceNameList:[],serviceList:[],description:"",value:"",basicFormRules:d(this),reasonTypeList:[],primaryAccountList:[{label:"Automatically selected by system",value:""}],receiverAccountList:[{label:"Automatically selected by system",value:""}],inputReason:[{value:"1",label:"Input Manually..."}],requesterIdentifierTypeOptions:[{value:"msisdn",label:"MSISDN"}],title:"Select Organization",width:"800px",searchVisible:!1,searchPayeeVisible:!1,basicForm:{bankAccount:"",reasonMode:"manually",identifierType:"",reasonType:"",defaultIdentifierType:"Short Code",payeeShortCode:"",serviceCode:"",payerShortCode:"",payerAccountNo:"",payeeTillMsisdn:"",payeeMsisdn:"",payeeVoucherCode:"",validValue:"",secretCode:"",payeeAccountNo:"",amount:"",remark:"",reason:"",serviceEvaluation:"",requesterMsisdn:"",diffIdentifierType:"04",comment:"",bankAccountId:"",requesterIdentityType:""},primaryDefaultAccountIndex:"",receiverDefaultAccountIndex:"",organizationIdentityType:"",customerIdentityType:"",formConfigList:[],content:"Initiate transaction on Organization Portal",titleConfig:{title:"Initiate Transaction",desc:"You can initiate transactions for an organization, and view information about accounts of the organization."},paginationConfig:{total:0,pageNo:1,pageSize:10},orgColumns:[{label:"Account No.",prop:"accountNo",align:"left","min-width":"300","sort-method":(e,t)=>e.id>t.id?1:-1},{label:"Account Name",prop:"accountName","min-width":"173","sort-method":(e,t)=>e.code>t.code?1:-1},{label:"Account Type",prop:"accountAlias","min-width":"193","sort-method":(e,t)=>e.name>t.name?1:-1},{label:"Currency",prop:"currency","min-width":"150","sort-method":(e,t)=>e.status>t.status?1:-1},{label:"Alias",prop:"accountAlias","min-width":"190","sort-method":(e,t)=>e.status>t.status?1:-1},{label:"Rule Profile",prop:"ruleProfileName","min-width":"148","sort-method":(e,t)=>e.status>t.status?1:-1},{label:"Current Balance",prop:"balance",__slotName:"balance","min-width":"190",align:"right"},{label:"Available Balance",prop:"availableBalance",__slotName:"availableBalance","min-width":"190",align:"right"},{label:"Reserved Balance",prop:"reservedBalance",__slotName:"reservedBalance","min-width":"190",align:"right"},{label:"Unclear Balance",prop:"unclearBalance",__slotName:"unclearBalance","min-width":"190",align:"right"},{label:"Status",prop:"status",__slotName:"status","min-width":"140","sort-method":(e,t)=>e.status>t.status?1:-1}],budgetDialogVisible:!1,isNoCharge:!0,budgetTableData:[],primaryOrganizationName:"",receiverIdentityName:"",budgetColumns:[{label:"Charge Payer",prop:"chargePayerIdentityName",align:"left"},{label:"Charge Amount",prop:"chargeAmount",align:"left",formatter:O},{label:"Account Type",prop:"accountTypeAlias",align:"left"},{label:"Account Balance",prop:"availableAmount",align:"left",formatter:O}],noChargePropColumns:[{label:"Charge Amount",value:"No Charge",itemKey:"chargeAmount"},{label:"Initiator Identity",value:"-",itemKey:"primaryOrganizationName"},{label:"Receiver Identity",value:"-",itemKey:"receiverIdentityName"},{label:"Transaction Amount",value:"-",itemKey:"amount"}],bankList:[],selectedReasonTypeData:{},bankInfoLoading:!1,bankInfos:[{label:"Bank Short Code",value:"bankShortCode",content:""},{label:"Bank Address",value:"address",content:""},{label:"Finance Service",value:"financeService",content:""},{label:"Trust Bank",value:"trustBank",content:""},{label:"Transfer Mode",value:"transferMode",content:""}],transferModeOptions:[],selectRequiredValidateObj:s["z"],currentOrganizationIdentityId:""}},computed:{identityId(){if(this.$route.query.data){const e=decodeURIComponent(this.$route.query.data);return JSON.parse(e).identityId||""}return this.currentOrganizationIdentityId||""},propShortCode(){return this.basicForm.payerShortCode?this.basicForm.payerShortCode:r["default"].get("initiatorShortCode")||""},payeeShortCodeProp(){return this.sameIdentity?"noMustCheckShortCode":"payeeShortCode"},statusStyle(){return e=>{switch(e){case"Active":return{"background-color":""+this.GlobalStyleVariables.statusNoticeColor};case"Completed":return{"background-color":""+this.GlobalStyleVariables.statusSuccessColor};case"Pending Authorized":case"Authorized":case"Pending":return{"background-color":""+this.GlobalStyleVariables.statusColorwarning};case"Declined":case"Cancelled":case"Expired":return{"background-color":""+this.GlobalStyleVariables.statusDark};default:return{"background-color":""+this.GlobalStyleVariables.statusNoticeColor}}}},showBankAccount(){return!!this.basicForm.reasonType&&this.reasonTypeList.filter(e=>this.basicForm.reasonType===e.value)[0].transactionType.transactionTypeProperties.filter(e=>"Financial_Transactions"==e.propertyCode).length>0}},watch:{showBankAccount(e){e&&this.getBankList()},"basicForm.bankAccountId":{handler(e){e&&this.getBankInfo(e)}}},created(){this.getInitData()},methods:{getInitData(){Object(k["b"])({identityId:""}).then(e=>{if(e.header&&e.header.success){let t=e.organizationInfo;t&&(this.currentOrganizationIdentityId=t.organizationId,this.isSearch=!0,this.search(),this.basicForm.payerShortCode=this.propShortCode,this.getTransferMode())}})},async getTransferMode(){this.transferModeOptions=[];let e=await Object(T["e"])();if(e.header&&e.header.success){let t=JSON.parse(e.jsonDataStr);t.map(e=>{let t={value:e.code,label:e.value};this.transferModeOptions.push(t)})}},searchData(){this.search()},reSearchData(){this.searchServiceData="",this.search()},async search(){const e={serviceName:this.searchServiceData,identityId:this.identityId,identityType:"5000"},t=await Object(n["l"])(e);t&&(this.serviceList=t.serviceList,this.serviceNameList=this.serviceList.map(e=>({label:e.serviceName,value:e.alias,description:e.description})))},handleLabel(e){switch(this.basicForm.payeeVoucherCode="",this.basicForm.payeeShortCode="",this.basicForm.payeeTillMsisdn="",this.basicForm.payeeMsisdn="",this.basicForm.validValue="",this.basicForm.secretCode="",this.validVerifySuccess=!1,e){case"04":return this.currentLabel="Short Code";case"17":return this.currentLabel="Till MSISDN";case"01":return this.currentLabel="MSISDN";case"03":return this.currentLabel="Voucher Code";default:}},handleSelectedService(e){if(this.$refs.basicFormRef.validateField("serviceCode"),this.validVerifySuccess=!1,this.basicForm.diffIdentifierType="",this.basicForm.reasonType="",this.basicForm.payeeShortCode="",this.basicForm.payerAccountNo="",this.basicForm.payeeAccountNo="",this.basicForm.payeeVoucherCode="",this.basicForm.payeeMsisdn="",this.basicForm.payeeTillMsisdn="",this.basicForm.amount="",this.basicForm.reasonText="",this.basicForm.reason="",this.basicForm.remark="",this.basicForm.serviceEvaluation="",this.basicForm.requesterMsisdn="",this.basicForm.requesterIdentityType="",this.searchServiceData="",this.search(),this.basicForm.payeeShortCode="",this.$data.identifierTypeList=this.$options.data().identifierTypeList,e){let t=this.serviceList.filter(t=>e===t.alias)[0];this.description=t.description,this.isAutomatic="AUTOMATIC"==t.reasonSelectionMode,this.getReasonTypeList(e)}else this.description="",this.basicForm.reasonType=""},async getTableData(){const e={identityId:this.identityId},t=await Object(n["j"])(e).finally(()=>{this.isSearch=!1});if(t)return this.accountList=t.list,t},getReasonTypeList(e){let t={serviceCode:e,identityId:this.identityId,serviceName:e,identityType:"5000"};Object(n["k"])(t).then(e=>{e.header&&e.header.success&&(e.reasonTypeList===[]||0===e.reasonTypeList.length?this.showNoReasonTypeTips=!0:(this.showNoReasonTypeTips=!1,this.reasonTypeList=e.reasonTypeList&&e.reasonTypeList.map(e=>({label:e.reasonName,value:e.alias,sameIdentity:!!e.transactionType.allowSameIdentity&&e.transactionType.allowSameIdentity,transactionRoleInfo:e.transactionRoleInfo,flowTemplateMap:e.flowTemplateMap,transactionType:e.transactionType,reasonIndex:e.reasonIndex})),this.handlerSelectedReasonType(this.reasonTypeList[0]),this.basicForm.reasonType=this.reasonTypeList[0].value))})},selectedReasonType(e){let t=this.reasonTypeList.filter(t=>e===t.value);this.handlerSelectedReasonType(t[0])},handlerSelectedReasonType(e){this.$data.identifierTypeList=this.$options.data().identifierTypeList,this.selectedReasonTypeData=e||{},this.sameIdentity=this.selectedReasonTypeData.sameIdentity;const{sameIdentity:t,transactionRoleInfo:a,flowTemplateMap:i}=this.selectedReasonTypeData,{creditParty:o,debitParty:r}=a,{templateId:s}=i.WEB;let n=this.getPrimaryDefaultAccountIndex(o,r),{receiverDefaultAccountIndex:l,receiverIdentityType:c}=this.getReceiverDefaultAccountIndex(o,r);this.primaryDefaultAccountIndex=n,this.receiverDefaultAccountIndex=l,this.getPrimaryAccountOptions(n),t?(this.basicForm.diffIdentifierType="04",this.identifierTypeList=[{value:"04",label:"Short Code"}],this.basicForm.payeeShortCode=this.basicForm.payerShortCode,this.getReceiverAccountOptions(),"SP"==c&&(this.basicForm.diffIdentifierType="10",this.identifierTypeList=[{value:"10",label:"SP"}])):this.handelIdentityType(c,s)},handelIdentityType(e,t){"ORGANIZATION"===e?this.identifierTypeList=[{value:"04",label:"Short Code"},{value:"17",label:"Till MSISDN"}]:"CUSTOMER"===e?this.identifierTypeList=[{value:"01",label:"MSISDN"}]:"VoucherRedeeming"===t&&(this.identifierTypeList=[{value:"03",label:"Voucher Code"}])},getPrimaryDefaultAccountIndex(e,t){let a;return"PRIMARY_PARTY"===e.serviceRoleType?a=e.accountTypeIndex:"PRIMARY_PARTY"===t.serviceRoleType&&(a=t.accountTypeIndex),a},getReceiverDefaultAccountIndex(e,t){let a,i;return"RECEIVER"===e.serviceRoleType?(a=e.accountTypeIndex,i=e.identityType):"RECEIVER"===t.serviceRoleType&&(a=t.accountTypeIndex,i=t.identityType),{receiverDefaultAccountIndex:a,receiverIdentityType:i}},getPrimaryAccountOptions(e){let t=[{label:"Automatically selected by system",value:""}];this.accountList.forEach(a=>{a.accountTypeId==e&&(this.payerAccountTypeId=a.accountTypeId,t.push({label:`Default Account (${a.accountName})`,value:a.accountNo,accountTypeId:a.accountTypeId}))}),this.primaryAccountList=t},getReceiverAccountOptions(e,t){if(this.sameIdentity)this.handleReceiverAccountOptions(this.accountList);else switch(e){case"shortCode":this.getAccountByShortCodeOrTillMsisdn("shortCode",t);break;case"tillMsisdn":this.getAccountByShortCodeOrTillMsisdn("tillMsisdn",t);break;case"msisdn":this.getAccountByMsisdn(t);break;case"voucherCode":this.getAccountByVoucherCode(t);break;default:}},async getAccountByShortCodeOrTillMsisdn(e,t){let a="",i="shortCode"==e?{shortCode:t}:{tillMsisdn:t},o=await Object(n["t"])(i);o.header&&o.header.success&&(a=o.identityId);let r=await Object(n["j"])({identityId:a});r.header&&r.header.success&&this.handleReceiverAccountOptions(r.list)},async getAccountByMsisdn(){let e="",t=await Object(n["t"])({msisdn:this.basicForm.payeeMsisdn});t.header&&t.header.success&&(e=t.identityId);let a=await Object(n["e"])({identityId:e});a.header&&a.header.success&&(a.accounts.forEach(e=>{this.customAccountName=e.accountName}),this.handleReceiverAccountOptions(a.accounts))},getAccountByVoucherCode(){let e=[{label:"Automatically selected by system",value:""}];this.receiverAccountList=e},handleReceiverAccountOptions(e=[]){let t=[{label:"Automatically selected by system",value:""}];e.forEach(e=>{e.accountTypeId==this.receiverDefaultAccountIndex&&(this.payeeAccountTypeId=e.accountTypeId,t.push({label:`Default Account (${e.accountName})`,value:e.accountNo,accountTypeId:e.accountTypeId}))}),this.receiverAccountList=t},verifyFun(e,t){this.$refs["basicFormRef"].validateField(e,a=>{if(a)return this.validVerifySuccess=!1,!1;this.getReceiverAccountOptions(t,this.basicForm[e]),this.validVerifySuccess=!0})},reset(){this.$confirm("Are you sure to reset all data you have entered/selected in this page",{cancelButtonText:"Cancel",confirmButtonText:"Confirm",type:"warning"}).then(()=>{this.$refs.basicFormRef.resetFields()}).catch(()=>{})},transactionParams(){const e=this.basicForm.amount,t={payeeAccountTypeId:""==this.payeeAccountTypeId?null:this.payeeAccountTypeId,payerAccountTypeId:""==this.payerAccountTypeId?null:this.payerAccountTypeId,identifierType:this.basicForm.diffIdentifierType,reasonType:""==this.basicForm.reasonType?null:this.basicForm.reasonType,serviceCode:this.basicForm.serviceCode,payerAccountNo:""==this.basicForm.payerAccountNo?null:this.basicForm.payerAccountNo,payeeVoucherCode:this.basicForm.payeeVoucherCode,validValue:this.basicForm.validValue,secretCode:this.basicForm.secretCode,payeeAccountNo:""==this.basicForm.payeeAccountNo?null:this.basicForm.payeeAccountNo,amount:this.delcommafy(e),remark:this.basicForm.remark,reasonMode:this.basicForm.reasonMode,reason:this.basicForm.reason,serviceEvaluation:this.basicForm.serviceEvaluation,requesterMsisdn:this.basicForm.requesterMsisdn,primaryParty:{identifierType:"04",identifier:this.propShortCode},receiverParty:{identifierType:this.getDiffIdentifierType(),identifier:this.getReveiverIdentifier()}};return t},async initTransactionPrepare(){try{this.submitLoading=!0;const e=await Object(n["q"])({serviceCode:this.basicForm.serviceCode});if(e&&e.header.success)if(e.servicePreValidation){const e=this.transactionParams(),t=await Object(n["o"])(e);if(t&&t.header.success){if("{}"===JSON.stringify(t.payee)&&"{}"===JSON.stringify(t.payer)){this.isNoCharge=!0;let a={chargeAmount:"No Charge",primaryOrganizationName:t.primaryIdentityName,receiverIdentityName:t.receiverIdentityName,amount:b["a"].format(e.amount,t.currency)};this.noChargePropColumns.forEach(e=>{e.value=a[e.itemKey]})}else this.isNoCharge=!1,this.primaryOrganizationName=t.primaryIdentityName,this.receiverIdentityName=t.receiverIdentityName,this.budgetTableData=[t.payer,t.payee].filter(e=>0!==Object.keys(e).length);this.budgetDialogVisible=!0}}else this.initiateTransactionSubmit()}catch(e){}finally{this.submitLoading=!1}},initiateTransactionSubmit(){if(!this.submitInit)return;this.submitLoading=!0,this.submitInit=!1;const e=this.transactionParams();Object(n["h"])(e).then(e=>{this.submitLoading=!1,e.header&&e.header.success&&(this.$refs.basicFormRef.resetFields(),this.basicForm.serviceCode="",this.validVerifySuccess=!1,this.showInitiateOrSucceed=!1,this.tradeOrderId=e.tradeOrderId,this.payerAccountTypeId="",this.payeeAccountTypeId="")}).finally(()=>{this.submitInit=!0,this.submitLoading=!1,this.budgetDialogVisible=!1})},submitWithdrawTransaction(){this.submitLoading=!0,this.submitInit=!1;let e=this.reasonTypeList.filter(e=>this.basicForm.reasonType===e.value)[0];Object(n["i"])({accountNo:""==this.basicForm.payerAccountNo?null:this.basicForm.payerAccountNo,bankAccountId:this.bankList.filter(e=>e.bankId==this.basicForm.bankAccountId)[0].assetId||"",amount:this.delcommafy(this.basicForm.amount),payerId:this.identityId,transactionTypeId:e.transactionType.txnIndex,reasonTypeId:e.reasonIndex,remark:this.basicForm.remark,serviceCode:this.basicForm.serviceCode}).then(e=>{e.header&&e.header.success&&(this.$refs.basicFormRef.resetFields(),this.basicForm.serviceCode="",this.validVerifySuccess=!1,this.showInitiateOrSucceed=!1,this.tradeOrderId=e.tradeOrderId,this.payerAccountTypeId="",this.payeeAccountTypeId="")}).finally(()=>{this.submitInit=!0,this.submitLoading=!1,this.budgetDialogVisible=!1})},submit(){this.$refs.basicFormRef.validate(e=>{e&&(this.showBankAccount?this.submitWithdrawTransaction():this.initTransactionPrepare())})},handleViewDetail(){let e={tradeOrderId:this.tradeOrderId,identityId:this.identityId,identityType:"5000"};const t="/mainPage/identifierCenter/organizationInfo/organization/transactionDetail";this.openNewWindow({path:t,query:{params:encodeURIComponent(JSON.stringify(e))}})},handleContinueAddClick(){this.showInitiateOrSucceed=!0},getDiffIdentifierType(){return this.sameIdentity?"04":this.basicForm.diffIdentifierType},getReveiverIdentifier(){if(this.sameIdentity)return this.basicForm.payeeShortCode;switch(this.basicForm.diffIdentifierType){case"04":return this.basicForm.payeeShortCode;case"17":return this.basicForm.payeeTillMsisdn;case"01":return this.basicForm.payeeMsisdn;case"03":return this.basicForm.payeeVoucherCode;default:}},inputMoney(e){let t=Number(e.target.value)||null;this.basicForm.amount=this.priceFormat(t)},unInputMoney(e){e.target.value?this.basicForm.amount=this.delcommafy(e.target.value):this.basicForm.amount=null},priceFormat(e,t){t=t||2;let a=",";if(null===e)return e;if("number"!==typeof e)throw new TypeError("The num parameter should be of the number type.");if(t<0)throw new Error("Parameter n should not be less than 0.");let i=parseInt(e)!==e,o=void 0!==t&&null!=t?t:1;return e=0===o?e.toFixed(o)+".":i?t?e.toFixed(t):e:e.toFixed(o),a=a||",",e=e.toString().replace(/(\d)(?=(\d{3})+\.)/g,(function(e,t){return t+a})),0!==t&&(i||t)||(e=e.substring(0,e.indexOf("."))),e},delcommafy(e){return e?(e=e.toString(),e=e.replace(/,/gi,""),e.indexOf(".00")>0&&(e=parseInt(e)),e):e},handleDialogOpened(){},handleDialogCancel(){this.budgetDialogVisible=!1},handleDialogConfirm(){this.initiateTransactionSubmit()},getBankList(){Object(n["m"])({status:"Active",identityId:this.identityId}).then(e=>{e.header&&e.header.success?(this.bankList=e.bankAccounts,this.basicForm.bankAccountId=""):this.bankList=[]})},getBankInfo(e){this.bankInfoLoading=!0;let t=this.bankList.filter(t=>t.bankId===e);Object(n["n"])({bankId:e}).then(e=>{if(e.header&&e.header.success){let a=[];const i=e?e.bank:{};for(let o in i)"isDepositBank"===o&&!0===i[o]&&a.push("Deposit Bank"),"isTrustBank"===o&&!0===i[o]&&a.push("Trust Bank"),"isCardIssuingBank"===o&&!0===i[o]&&a.push("Card Issuing Bank"),this.bankInfos.forEach(r=>{if(r.value===o&&(r.content=i[o]),"financeService"===r.value&&(r.content=a.join(",")),"trustBank"===r.value){const t=i.isTrustBank;t?r.content=i.bankName:e.clearingBanks&&e.clearingBanks.length>0&&(r.content=e.clearingBanks[0].clearingBankName)}"transferMode"===r.value&&(r.content=this.transferModeOptions.find(e=>e.value===t[0].transferMode).label)})}else this.bankInfos=[{label:"Bank Short Code",value:"bankShortCode",content:""},{label:"Bank Address",value:"address",content:""},{label:"Finance Service",value:"financeService",content:""},{label:"Trust Bank",value:"trustBank",content:""},{label:"Transfer Mode",value:"transferMode",content:""}]}).finally(()=>{this.bankInfoLoading=!1})}}},_=F,N=(a("4b24"),a("0a20"),Object(I["a"])(_,i,o,!1,null,"1ba15916",null));t["default"]=N.exports},"67d5":function(e,t,a){"use strict";a("034d")},"689d":function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"e",(function(){return o})),a.d(t,"f",(function(){return r})),a.d(t,"c",(function(){return s})),a.d(t,"d",(function(){return n})),a.d(t,"b",(function(){return l}));const i=(e,t,...a)=>e(...a).then(e=>e.header&&e.header.success?e[t]:null).catch(()=>null),o=e=>{const t=Object.keys(e),a=Object.values(e);return Promise.all(a).then(e=>{const a=t.map((t,a)=>[t,e[a]]);return Object.fromEntries(a)})},r=(e,t,a=!1)=>i=>{const o={label:i[t],value:i[e]};return a?o:{...i,...o}},s=(e,t,a)=>{const i=e.find(e=>e[a]===t);return i},n=(e,t)=>{const a=s(e,t,"value")||{};return a["label"]},l=(e,t)=>{if(t||(t=new Map),!(e instanceof Object))return e;if(t.get(e))return t.get(e);let a;a=e instanceof Function?e.prototype?function(){return e.apply(this,arguments)}:(...t)=>e.call(void 0,...t):e instanceof Array?[]:e instanceof Date?new Date(e-0):e instanceof RegExp?new RegExp(e.sourceData,e.flags):{},t.set(e,a);for(let i in e)Object.hasOwnProperty.call(e,i)&&(a[i]=l(e[i],t));return a}},"68f5":function(e,t,a){"use strict";a("5c44")},"692a":function(e,t,a){"use strict";a("eba8")},"6c82":function(e,t,a){"use strict";a("6586")},"6fac":function(e,t,a){},7335:function(e,t,a){e.exports={activeMenuColor:"#366bfc",primaryColor:"#366bfc",menuColor:"#5c5c5c",fillEmphasisColor:"#5c5c5c",fillLightColor:"#fafafa",fillStrongColor:"#c7c7c7",fillRegularColor:"#f0f0f0",fillColorDark:"#e0e0e0",lineStrongColor:"#8f8f8f",textEmphasisColor:"#282828",backgroundColor:"#fff",statusErrorColor:"#ff4040",statusSuccessColor:"#27bf88",statusColorwarning:"#ff7420",statusColorSAecondaryWarning:"#faaf0c",statusNoticeColor:"#338bff",statusDark:"#c7c7c7",initialColor:"#E0E0E0",statusNoticeBackgroundColor:"#F0F9FF",statusErrorBackgroundColor:"#FFF2F0",statusSuccessBackgroundColor:"#F0FFF7",statusSecondaryWarningBackgroundColor:"#FFFBE6",statusWarningBackgroundColor:"#FFF6E6",statusDarkBackgroundColor:"#FAFAFA",lineColorBlue:"#ADD9FF",lineColorError:"#FFC1BA",lineColorGreen:"#A5E6C6",lineColorWarning:"#FFF7ed"}},7892:function(e,t,a){},"7ab9":function(e,t,a){},"7b46":function(e,t,a){},"7c5e":function(e,t,a){"use strict";a.d(t,"b",(function(){return o})),a.d(t,"c",(function(){return r})),a.d(t,"e",(function(){return s})),a.d(t,"a",(function(){return n})),a.d(t,"d",(function(){return l}));var i=a("d8d3");const o={NEW:"00",PENDING_ACTIVE:"02",ACTIVE:"03",SUSPENDED:"04",FROZEN:"05",CLOSED:"06",CAPPED:"07",DORMANT:"08"};function r(e){return i["c"][e]||"-"}function s(e){const t={[o.ACTIVE]:"ACTIVE",[o.SUSPENDED]:"SUSPENDED",[o.FROZEN]:"FROZEN"};return t[e]}const n={CAN_MAKE_AGGREGATOR:"0000",CAN_MAKE_OWNED:"0001",CAN_MAKE_ALLTYPE:"0002",NONEHIERARCHY:"0003",AGGREGATOR:"0100",CENTRAL_OWNED:"0101"},l=e=>{switch(e){case n.CAN_MAKE_AGGREGATOR:return"Can Make Aggregator";case n.CAN_MAKE_OWNED:return"Can Make Owned";case n.CAN_MAKE_ALLTYPE:return"Can Make AllType";case n.NONEHIERARCHY:return"NoneHierarchy";case n.AGGREGATOR:return"Aggregator";case n.CENTRAL_OWNED:return"Central Owned";default:return}}},"7e99":function(e,t,a){},"7f3c":function(e,t,a){"use strict";a("0798")},8061:function(e,t,a){"use strict";a("5d2c")},"80ee":function(e,t,a){},8561:function(e,t,a){},"871b":function(e,t,a){},"88cd":function(e,t,a){"use strict";a("7ab9")},"89b2":function(e,t,a){"use strict";a.d(t,"a",(function(){return o})),a.d(t,"d",(function(){return r})),a.d(t,"c",(function(){return u})),a.d(t,"b",(function(){return h}));var i=a("02e3");let o=e=>e?(e=e.toString(),e=e.replace(/,/gi,""),e.indexOf(".00")>0&&(e=parseInt(e)),e):e,r=(e,t)=>{t=t||2;let a=",";if(null===e)return null;if("number"!==typeof e)throw new TypeError("The num parameter should be of the number type.");if(t<0)throw new Error("Parameter n should not be less than 0.");let i=parseInt(e)!==e,o=void 0!==t&&null!=t?t:1;return e=0===o?e.toFixed(o)+".":i?t?e.toFixed(t):e:e.toFixed(o),a=a||",",e=e.toString().replace(/(\d)(?=(\d{3})+\.)/g,(function(e,t){return t+a})),0!==t&&(i||t)||(e=e.substring(0,e.indexOf("."))),e},s=e=>({trigger:["blur","change"],required:!0,validator:(t,a,i)=>{let o=e.revenueFormData.intervalValue,r=e.revenueFormData.intervalTypeCode;return o&&r?o&&r&&(o>=1e4||o<=0)?i(new Error("Please enter a number between 1 and 9999.")):i():i(new Error("Please enter content"))}}),n=e=>({required:!0,validator:(t,a,i)=>{let o=e.revenueFormData.startDate;o||i(new Error("Please select content.")),i()},trigger:"change"}),l=e=>({required:!0,validator:(t,a,i)=>{e.subAgentExpansionModel||i(new Error("Please select content.")),i()},trigger:"change"}),c=e=>({required:!0,validator:(t,a,i)=>{e.subSettlementConfigTemplate||i(new Error("Please select content.")),i()},trigger:"change"}),d=()=>({trigger:"blur",validator:(e,t,a)=>{const i=t;t=o(i),t<-1e9?a(new Error("Please enter an amount greater than -1,000,000,000.")):t>1e9?a(new Error("Please enter an amount less than 1,000,000,000.")):a()}}),u=e=>({intervalValue:[s(e)],startDate:[n(e)],settlementMinBalance:[i["e"],d()],targetBalance:[i["e"],d()],triggerBalance:[i["e"],d()]}),h=e=>({subAgentExpansionModel:[l(e)],subSettlementConfigTemplate:[c(e)]})},"8fd9":function(e,t,a){"use strict";a("f4a5")},9069:function(e,t,a){},9191:function(e,t,a){"use strict";a("0cef")},"953e":function(e,t,a){"use strict";a("1e7b")},9563:function(e,t,a){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"org-account-contianer"},[t("portal-header",{attrs:{projectObj:e.titleConfig,showBottomLine:!0}}),t("portal-form",{ref:"searchForm",attrs:{"form-data":e.searchFormData,"form-config-list":e.formConfigList,searchBtnLoading:e.searchLoading},on:{"common-enter-event":e.search,"reset-btn-click":e.reset,"search-btn-click":e.search}}),t("div",{staticClass:"table-list-container"},[t("div",{staticStyle:{"padding-bottom":"16px"}},[t("el-dropdown",{on:{command:e.exportFile}},[t("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{type:"primary",size:"small",disabled:e.disAbledExportBtn||!e.hasPerm("IC_ORG_ACCOUNTINFO_EXPORT_BTN")}},[e._v(" "+e._s(e.$t("common.button.export"))+" "),t("i",{staticClass:"el-icon-arrow-down el-icon--right",staticStyle:{"font-size":"12px"}})]),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",{attrs:{command:"XLS"}},[e._v("Excel")]),t("el-dropdown-item",{attrs:{command:"XLSX"}},[e._v("Excel 2007")]),t("el-dropdown-item",{attrs:{command:"CSV"}},[e._v("CSV")]),t("el-dropdown-item",{attrs:{command:"PDF"}},[e._v("PDF")])],1)],1)],1),t("table-page",{staticClass:"table-page",attrs:{size:"small","has-pagination":!0,columns:e.columns,initializingLoading:!1,pagination:e.paginationConfig,getTableData:e.getTableData,"is-search":e.isSearch},scopedSlots:e._u([{key:"status",fn:function(a){return[t("div",{staticClass:"flex flex-align"},[t("span",{staticClass:"status-circle",style:e.statusStyle(a.data.row)}),t("span",[e._v(e._s(a.data.row.status))]),t("el-link",{attrs:{underline:!1,disabled:!e.hasPerm("IC_CHANGEORGACCTSTATUS_BTN"),icon:"el-icon-edit"},on:{click:function(t){return e.showEditStatusDialog(a.data.row)}}})],1)]}},{key:"ruleProfile",fn:function(a){return[t("div",{staticClass:"edit-cell"},[t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",disabled:!a.data.row.ruleProfileName,content:a.data.row.ruleProfileName,placement:"top"}},[t("div",{staticClass:"cell el-tooltip"},[e._v(e._s(a.data.row.ruleProfileName||"-"))])]),t("el-link",{staticClass:"edit-text el-icon-edit",attrs:{underline:!1,disabled:!e.hasPerm("IC_CHANGEORGACCTRULEPROFILE_BTN")},on:{click:function(t){return e.showruleProfileDialog(a.data.row)}}})],1)]}}])})],1),t("el-dialog",{staticClass:"edit-status-dialog",attrs:{title:this.$t("IDC.orgAccount.editStatusDialogTitle"),width:"448px",visible:e.editStatusDialogVisible,"close-on-click-modal":!1,"before-close":e.handleEditCancelClick},on:{"update:visible":function(t){e.editStatusDialogVisible=t},closed:e.handleEditCancelClick}},[t("portal-form",{ref:"editStatusForm",staticClass:"edit-status-form",attrs:{needOperateBtn:!1,bigAutoColumn:1,smallAutoColumn:1,formRules:e.searchFormRules,"form-data":e.editStatusFormData,needBottomLine:!1,"form-config-list":e.editFormConfigList}},[t("template",{slot:"currentStatus"},[t("el-form-item",{attrs:{label:e.editFormConfigList[0].label}},[t("span",[e._v(e._s(e.currentStatus||"-"))])])],1)],2),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("button",{staticClass:"cancel-button",attrs:{size:"small"},on:{click:function(t){return t.preventDefault(),e.handleEditStatusCancelClick.apply(null,arguments)}}},[e._v(" "+e._s(this.$t("common.button.cancel"))+" ")]),t("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{type:"primary",size:"small",loading:e.editStatusSubmitLoading},on:{click:e.handleEditStatusConfirmClick}},[e._v(" "+e._s(this.$t("common.button.submit"))+" ")])],1)],1),t("el-dialog",{staticClass:"edit-status-dialog",attrs:{title:this.$t("IDC.orgAccount.editRuleProfileDialogTitle"),width:"448px",visible:e.editRuleProfileDialogVisible,"close-on-click-modal":!1,"before-close":e.handleRuleCancelClick},on:{"update:visible":function(t){e.editRuleProfileDialogVisible=t},closed:e.handleRuleCancelClick}},[t("portal-form",{ref:"ruleProfileForm",staticClass:"edit-status-form",attrs:{needOperateBtn:!1,needBottomLine:!1,bigAutoColumn:1,smallAutoColumn:1,formRules:e.ruleProfileFormRules,"form-data":e.ruleProfileFormData,"form-config-list":e.ruleProfileFormConfigList}},[t("template",{slot:"currentRuleProfile"},[t("el-form-item",{attrs:{label:e.ruleProfileFormConfigList[0].label}},[t("span",[e._v(e._s(e.currentRuleProfile||"-"))])])],1)],2),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("button",{staticClass:"cancel-button",attrs:{size:"small"},on:{click:function(t){return t.preventDefault(),e.handleRuleProfileCancelClick.apply(null,arguments)}}},[e._v(" "+e._s(this.$t("common.button.cancel"))+" ")]),t("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{type:"primary",size:"small",loading:e.ruleProfileSubmitLoading},on:{click:e.handleRuleProfileConfirmClick}},[e._v(" "+e._s(this.$t("common.button.submit"))+" ")])],1)],1)],1)},o=[],r=a("c811"),s=a("4c09"),n=a("3186"),l=a("1caf"),c=a("0bbd");function d(){return Object(c["a"])({url:"/fintech/v1/Account/getAccountTypeInfo",method:"get"})}function u(e){return Object(c["a"])({url:"/fintech/v1/Account/queryAccount",method:"post",data:e})}function h(e){return Object(c["a"])({url:"/fintech/v1/Account/modifyAccount",method:"post",data:e})}function p(e){return Object(c["a"])({url:"/fintech/v1/Account/getRuleProfile",method:"post",data:e})}function m(e){return Object(c["a"])({url:"/fintech/v1/Account/exportAccountInfo",method:"post",data:e,responseType:"blob"})}var f={name:"OrgAccount",components:{PortalHeader:r["a"],TablePage:s["a"],PortalForm:n["a"]},props:{identityId:{type:String,require:!0},isTopOrganization:{type:Boolean,require:!0}},data(){return{titleConfig:{title:"",desc:this.$t("IDC.orgAccount.pageDesc")},searchFormData:{accountNumber:"",accountName:"",accountType:"",status:""},tempOptAccountNo:"",accountTypeInfo:[],searchFormRules:{newStatus:[{required:!0,message:"Please select at least one.",trigger:"change"}],remark:[{required:!0,message:"This field is mandatory.",trigger:"change"}]},ruleProfileFormData:{currentRuleProfile:"",ruleProfile:"",remark:""},ruleProfile:[],ruleProfileFormRules:{ruleProfile:[{required:!0,message:"Please select at least one.",trigger:"change"}],remark:[{required:!0,message:"This field is mandatory.",trigger:"change"}]},searchLoading:!1,paginationConfig:{total:0,pageIndex:1,pageSize:10},isSearch:!1,editStatusDialogVisible:!1,editRuleProfileDialogVisible:!1,editStatusFormData:{currentStatus:"",newStatus:"",remark:""},currentStatus:"",currentRuleProfile:"",dialogNewStatus:[],editStatusSubmitLoading:!1,ruleProfileSubmitLoading:!1,statusList:[{label:"All",value:""},{label:"Active",value:"Active"},{label:"Closed",value:"Closed"},{label:"Frozen",value:"Frozen"},{label:"Suspended",value:"Suspended"}],disAbledExportBtn:!0}},computed:{formConfigList(){return[{label:this.$t("IDC.orgAccount.accountNumber"),key:"accountNumber",prop:"accountNumber",comp:"el-input",bind:{clearable:!0,placeholder:this.$t("common.placeholder.enter")}},{label:this.$t("IDC.orgAccount.accountName"),key:"accountName",prop:"accountName",comp:"el-input",bind:{clearable:!0,placeholder:this.$t("common.placeholder.enter")}},{label:this.$t("IDC.orgAccount.accountType"),key:"accountType",prop:"accountType",comp:"el-select",options:this.accountTypeInfo,bind:{placeholder:this.$t("common.placeholder.select")}},{label:this.$t("IDC.orgAccount.status"),key:"status",prop:"status",comp:"el-select",options:this.statusList,bind:{placeholder:this.$t("common.placeholder.select")}}]},editFormConfigList(){return[{label:this.$t("IDC.orgAccount.currentStatus"),key:"currentStatus",prop:"currentStatus",slotName:"currentStatus"},{label:this.$t("IDC.orgAccount.newStatus"),key:"newStatus",prop:"newStatus",comp:"el-select",options:this.dialogNewStatus,bind:{placeholder:this.$t("common.placeholder.select")}},{formItemClass:"dialog-remark",label:this.$t("IDC.orgAccount.remark"),key:"remark",prop:"remark",comp:"el-input",bind:{type:"textarea",clearable:!0,placeholder:this.$t("common.placeholder.enter")}}]},ruleProfileFormConfigList(){return[{label:this.$t("IDC.orgAccount.currentRuleProfile"),key:"currentRuleProfile",prop:"currentRuleProfile",slotName:"currentRuleProfile"},{label:this.$t("IDC.orgAccount.ruleProfile"),key:"ruleProfile",prop:"ruleProfile",comp:"el-select",options:this.ruleProfile,bind:{placeholder:this.$t("common.placeholder.select")}},{formItemClass:"dialog-remark",label:this.$t("IDC.orgAccount.remark"),key:"remark",prop:"remark",comp:"el-input",bind:{type:"textarea",clearable:!0,placeholder:this.$t("common.placeholder.enter")}}]},columns(){return[{label:this.$t("IDC.orgAccount.accountNo"),prop:"accountNo",align:"left","min-width":"150"},{label:this.$t("IDC.orgAccount.accountName"),prop:"accountName",align:"left","min-width":"150"},{label:this.$t("IDC.orgAccount.accountType"),prop:"accountTypeName",align:"left","min-width":"150"},{label:this.$t("IDC.orgAccount.status"),prop:"status",align:"left","min-width":"170",__slotName:"status"},{label:this.$t("IDC.orgAccount.currency"),prop:"currency",align:"left","min-width":"120"},{label:this.$t("IDC.orgAccount.alias"),prop:"accountAlias",align:"left","min-width":"150"},{label:this.$t("IDC.orgAccount.accountRelationship"),prop:"relationship",align:"left","min-width":"150"},{label:this.$t("IDC.orgAccount.ruleProfile"),prop:"ruleProfileName",align:"left","min-width":"120",showOverflowTooltip:!1,__slotName:"ruleProfile"},{label:this.$t("IDC.orgAccount.currentBalance"),prop:"balance",align:"right","min-width":"150"},{label:this.$t("IDC.orgAccount.availableBalance"),prop:"availableBalance",align:"right","min-width":"150"},{label:this.$t("IDC.orgAccount.reservedBalance"),prop:"reservedBalance",align:"right","min-width":"150"},{label:this.$t("IDC.orgAccount.unclearBalance"),prop:"unclearBalance",align:"right","min-width":"150"}]}},created(){this.getAccountTypeList()},watch:{identityId(){this.identityId&&(this.isSearch=!0)}},methods:{statusStyle(e){switch(e.status){case"Active":return{"background-color":""+this.GlobalStyleVariables.statusNoticeColor};case"Suspended":return{"background-color":""+this.GlobalStyleVariables.statusColorSAecondaryWarning};case"Frozen":return{"background-color":""+this.GlobalStyleVariables.statusColorSAecondaryWarning};case"Closed":return{"background-color":""+this.GlobalStyleVariables.fillStrongColor};default:break}},search(){this.searchLoading=!0,this.isSearch=!0},reset(){this.$refs.searchForm.resetFields(),this.isSearch=!0},async getTableData(){let e={dataScope:["ALL"],accountNo:this.searchFormData.accountNumber,accountName:this.searchFormData.accountName,accountTypeId:this.searchFormData.accountType,status:this.searchFormData.status,identityId:this.identityId},t=await u(e);if(this.isSearch=!1,this.searchLoading=!1,t.header&&t.header.success)return t.list.length>0?this.disAbledExportBtn=!1:this.disAbledExportBtn=!0,t},async getAccountTypeList(){let e=await d();e.header&&e.header.success&&(this.accountTypeInfo=e.list.map(e=>({label:e.accountTypeName,value:e.accountTypeId})))},exportFile(e){let t={identityId:this.identityId,accountNo:this.searchFormData.accountNumber,dataScope:["All"],accountName:this.searchFormData.accountName,accountTypeId:this.searchFormData.accountType,status:this.searchFormData.status,fileType:e},a="account_"+Date.parse(new Date);Object(l["a"])(m,t,{fileType:e,fileName:a})},handleEditCancelClick(){this.editStatusDialogVisible=!1},handleRuleCancelClick(){this.editRuleProfileDialogVisible=!1},showEditStatusDialog(e){this.tempOptAccountNo=e.accountNo,this.currentStatus=e.status,"Active"===e.status?this.dialogNewStatus=[{label:"Frozen",value:"Frozen"},{label:"Suspended",value:"Suspended"}]:"Frozen"===e.status?this.dialogNewStatus=[{label:"Active",value:"Active"},{label:"Suspended",value:"Suspended"}]:"Suspended"===e.status&&(this.dialogNewStatus=[{label:"Active",value:"Active"},{label:"Frozen",value:"Frozen"}]),this.editStatusDialogVisible=!0},async showruleProfileDialog(e){this.editRuleProfileDialogVisible=!0,this.currentRuleProfile=e.ruleProfileName;let t=await this.getRuleProfileList(e.accountTypeId);this.ruleProfile=t.filter(t=>t.label!==e.ruleProfileName),this.tempOptAccountNo=e.accountNo},async getRuleProfileList(e){let t=this.isTopOrganization?"5001":"5002",a={identityType:"5000",identitySubType:t,accountTypeId:e},i=await p(a);if(i.header&&i.header.success)return i.list.map(e=>({label:e.ruleProfileName,value:e.id}))},handleEditStatusCancelClick(){this.$refs.editStatusForm.clearValidate(),this.$refs.editStatusForm.resetFields(),this.editStatusDialogVisible=!1},handleRuleProfileCancelClick(){this.$refs.ruleProfileForm.clearValidate(),this.$refs.ruleProfileForm.resetFields(),this.editRuleProfileDialogVisible=!1},handleEditStatusConfirmClick(){this.$refs.editStatusForm.validate(e=>{if(e){this.editStatusSubmitLoading=!0;let e={modifyOpTypes:["MODIFY_STATUS"],account:{accountNo:this.tempOptAccountNo,status:this.editStatusFormData.newStatus,identityId:this.identityId},header:{remark:this.editStatusFormData.remark}};h(e).then(e=>{this.editStatusSubmitLoading=!1,e.header&&e.header.success?(this.$refs.editStatusForm.resetFields(),this.$modal.msgSuccess("Operation success."),this.isSearch=!0,this.editStatusDialogVisible=!1):this.$modal.msgError("Operation fail.")})}})},handleRuleProfileConfirmClick(){this.$refs.ruleProfileForm.validate(e=>{if(e){this.ruleProfileSubmitLoading=!0;let e={modifyOpTypes:["MODIFY_RULE_PROFILE"],account:{accountNo:this.tempOptAccountNo,ruleProfileId:this.ruleProfileFormData.ruleProfile,identityId:this.identityId},header:{remark:this.ruleProfileFormData.remark}};h(e).then(e=>{this.ruleProfileSubmitLoading=!1,e.header&&e.header.success?(this.$refs.ruleProfileForm.resetFields(),this.$modal.msgSuccess("Operation success."),this.editRuleProfileDialogVisible=!1,this.isSearch=!0):this.$modal.msgError("Operation fail.")})}})}}},b=f,g=(a("15f0"),a("2877")),y=Object(g["a"])(b,i,o,!1,null,"08db7ef8",null);t["a"]=y.exports},9981:function(e,t,a){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"create-success"},[e._m(0),e.iconText?t("div",{staticClass:"icon-text"},[e._v(e._s(e.iconText))]):e._e(),t("div",{staticClass:"success-info"},[e._v(e._s(e.successText))]),e.tip?t("div",{staticClass:"success-tip"},[e._v(e._s(e.tip))]):e._e(),t("div",{staticClass:"success-operate"},[t("span",{staticClass:"success-operate__pretext"},[e._v("You can:")]),e.detailText?t("span",{staticClass:"view-detail operate-btn",attrs:{id:"viewDetail"},on:{click:e.handleViewDetail}},[e._v(" "+e._s(e.detailText)+" ")]):e._e(),t("span",{staticClass:"operate-btn",attrs:{id:"continueAdd"},on:{click:e.handleContinueAddClick}},[e._v(e._s(e.addText))])])])},o=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"check-icon"},[t("i",{staticClass:"el-icon-a-create-successsmall success-icon"})])}],r={name:"PortalCreateSuccess",props:{iconText:{type:String,default:""},successText:{type:String,default:"created successfully."},detailText:{type:String,default:"View Detail >>"},addText:{type:String,default:"Continue to Add >>"}},data(){return{tip:""}},methods:{handleViewDetail(){this.$emit("view-detail")},handleContinueAddClick(){this.$emit("continue-add")}}},s=r,n=(a("6198"),a("2877")),l=Object(n["a"])(s,i,o,!1,null,"c62ed3d4",null);t["a"]=l.exports},"99ce":function(e,t,a){},"9aca":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"container"},[t("organization-basic-info",{attrs:{header:e.header,"basic-info":e.basicInfo}}),t("section",{staticClass:"tabs-container"},[t("el-tabs",{model:{value:e.tabName,callback:function(t){e.tabName=t},expression:"tabName"}},[t("el-tab-pane",{attrs:{label:e.$t("IDC.groupDetail.label.AccountInfo"),name:"first",lazy:!0}},[t("org-account",{attrs:{"identity-id":e.basicInfo.organizationId,"is-top-organization":e.basicInfo.isTopOrganization}})],1),t("el-tab-pane",{attrs:{label:e.$t("IDC.organization.product"),name:"second",lazy:!0}},[t("product-info",{attrs:{"identity-id":e.basicInfo.organizationId}})],1),t("el-tab-pane",{attrs:{label:e.$t("IDC.groupDetail.label.KYCInfo"),name:"third",lazy:!0}},[t("div",{staticClass:"org-kyc-info"},[t("div",{staticClass:"tips"},[e._v("KYC information of an organization. The field marked with * is mandatory.")]),t("kyc-form",{ref:"kycForm",attrs:{mode:"edit",identityId:e.identityId,identityClassify:"org"}})],1)]),t("el-tab-pane",{attrs:{label:e.$t("IDC.revenueSettlementInfo.revenueSettlementConfig"),name:"fourth",lazy:!0}},[t("revenue-settlement-info",{ref:"revenueForm",attrs:{panelActived:"fourth"===e.tabName,revenueFormData:e.revenueFormData,identityId:e.basicInfo.organizationId,pageType:e.pageType,isShowBtn:e.isShowBtn},on:{"update:revenueFormData":function(t){e.revenueFormData=t},"update:revenue-form-data":function(t){e.revenueFormData=t}}})],1)],1)],1)],1)},o=[],r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"container"},[t("section",[t("div",{staticClass:"content-container"},[t("section",{staticClass:"header p-l-r-20"},[t("div",{staticClass:"icon-organization"},[t("svg-icon",{staticClass:"org-icon",attrs:{"icon-class":"organization"}})],1),t("div",{staticClass:"content-container flex flex-col flex-jus-between"},[t("div",{staticClass:"content-title"},[e._v(e._s(e.header.title))]),t("div",{staticClass:"content-sub-title"},[e._v(" "+e._s(e.$t("IDC.organizationDetail.identityStatus"))+" "),t("span",{staticClass:"identity-status"},[e._v(e._s(e.getIdentityStatusName(e.basicInfo.status)||"-"))]),e.isAllowedEdit&&!e.isClosed?t("el-link",{attrs:{underline:!1,icon:"el-icon-edit"},on:{click:e.editIdentityStatus}}):e._e()],1)])]),t("section",{staticClass:"p-l-r-20"},[t("el-row",{attrs:{gutter:20}},[t("el-col",e._b({},"el-col",e.colOptions,!1),[t("el-row",[t("div",{staticClass:"content content-item-label"},[e._v(e._s(e.$t("IDC.organization.parentShortCode")))])]),t("el-row",[t("div",{staticClass:"content content-item"},[e._v(e._s(e.basicInfo.parentShortCode||"-"))])])],1),t("el-col",e._b({},"el-col",e.colOptions,!1),[t("el-row",[t("div",{staticClass:"content content-item-label"},[e._v(e._s(e.$t("IDC.organization.identityModel")))])]),t("el-row",[t("div",{staticClass:"content content-item"},[e._v(e._s(e.getSubAgentModelName(e.basicInfo.identityModel)||"-"))])])],1),t("el-col",e._b({},"el-col",e.colOptions,!1),[t("el-row",[t("div",{staticClass:"content content-item-label"},[e._v(e._s(e.$t("IDC.organization.hierarchyLevel")))])]),t("el-row",[t("div",{staticClass:"content content-item"},[e._v(e._s(e.basicInfo.hierLevel||"-"))])])],1),t("el-col",e._b({},"el-col",e.colOptions,!1),[t("el-row",[t("div",{staticClass:"content content-item-label"},[e._v(e._s(e.$t("IDC.organization.topOrganization")))])]),t("el-row",[t("div",{staticClass:"content content-item"},[e._v(e._s(e.basicInfo.topOrganizationShortCode||"-"))])])],1),t("el-col",e._b({},"el-col",e.colOptions,!1),[t("el-row",[t("div",{staticClass:"content content-item-label"},[e._v(e._s(e.$t("IDC.organization.topOrganizationName")))])]),t("el-row",[t("div",{staticClass:"content content-item"},[e._v(e._s(e.basicInfo.topOrganizationName||"-"))])])],1),t("el-col",e._b({},"el-col",e.colOptions,!1),[t("el-row",[t("div",{staticClass:"content content-item-label"},[e._v(" "+e._s(e.$t("IDC.organizationDetail.organizationName"))+" ")])]),t("el-row",[t("div",{staticClass:"content content-item"},[e._v(" "+e._s(e.basicInfo.organizationName||"-")+" "),e.isClosed||e.isDormant||e.isNew?e._e():t("el-link",{attrs:{underline:!1,icon:"el-icon-edit"},on:{click:e.editOrganizationName}})],1)])],1),t("el-col",e._b({},"el-col",e.colOptions,!1),[t("el-row",[t("div",{staticClass:"content content-item-label"},[e._v(" "+e._s(e.$t("IDC.organizationDetail.shortCode"))+" ")])]),t("el-row",[t("div",{staticClass:"content content-item"},[e._v(e._s(e.basicInfo.shortCode||"-"))])])],1),t("el-col",e._b({},"el-col",e.colOptions,!1),[t("el-row",[t("div",{staticClass:"content content-item-label"},[e._v(e._s(e.$t("IDC.organizationDetail.organizationCode")))])]),t("el-row",[t("div",{staticClass:"content content-item"},[e._v(" "+e._s(e.basicInfo.organizationCode||"-")+" ")])])],1),t("el-col",e._b({},"el-col",e.colOptions,!1),[t("el-row",[t("div",{staticClass:"content content-item-label"},[e._v(" "+e._s(e.$t("IDC.organizationDetail.segment"))+" ")])]),t("el-row",[t("div",{staticClass:"content content-item"},[e._v(e._s(e.basicInfo.segment||"-"))])])],1),t("el-col",e._b({},"el-col",e.colOptions,!1),[t("el-row",[t("div",{staticClass:"content content-item-label"},[e._v(" "+e._s(e.$t("IDC.organizationDetail.chargeProfile"))+" ")])]),t("el-row",[t("div",{staticClass:"content content-item"},[t("span",{class:{"content-item--has-underline":e.basicInfo.chargeProfileName},on:{click:function(t){return e.goToDetailPage(e.PROFILE_TYPES.CHARGE)}}},[e._v(e._s(e.basicInfo.chargeProfileName||"-"))]),e.isClosed?e._e():t("el-link",{attrs:{underline:!1,icon:"el-icon-edit"},on:{click:e.editChargeProfile}})],1)])],1),t("el-col",e._b({},"el-col",e.colOptions,!1),[t("el-row",[t("div",{staticClass:"content content-item-label"},[e._v(" "+e._s(e.$t("IDC.organizationDetail.ruleProfile"))+" ")])]),t("el-row",[t("div",{staticClass:"content content-item"},[t("span",{class:{"content-item--has-underline":e.basicInfo.ruleProfileName},on:{click:function(t){return e.goToDetailPage(e.PROFILE_TYPES.RULE)}}},[e._v(e._s(e.basicInfo.ruleProfileName||"-"))]),e._e()],1)])],1),t("el-col",e._b({},"el-col",e.colOptions,!1),[t("el-row",[t("div",{staticClass:"content content-item-label"},[e._v(e._s(e.$t("IDC.organizationDetail.trustLevel")))])]),t("el-row",[t("div",{staticClass:"content content-item"},[e._v(" "+e._s(e.basicInfo.trustLevelName||"-")+" ")])])],1),t("el-col",e._b({},"el-col",e.colOptions,!1),[t("el-row",[t("div",{staticClass:"content content-item-label"},[e._v(" "+e._s(e.$t("IDC.organizationDetail.registrationDate"))+" ")])]),t("el-row",[t("div",{staticClass:"content content-item"},[e._v(e._s(e._f("localTimeFormat")(e.basicInfo.createTime,"DD/MM/YYYY")))])])],1),t("el-col",e._b({},"el-col",e.colOptions,!1),[t("el-row",[t("div",{staticClass:"content content-item-label"},[e._v(" "+e._s(e.$t("IDC.organizationDetail.infrequencyUser"))+" ")])]),t("el-row",[t("div",{staticClass:"content content-item"},[e._v(e._s(e.basicInfo.infrequencyUser||"-"))])])],1),t("el-col",e._b({},"el-col",e.colOptions,!1),[t("el-row",[t("div",{staticClass:"content content-item-label"},[e._v(" "+e._s(e.$t("IDC.organizationDetail.registrationChannel"))+" ")])]),t("el-row",[t("div",{staticClass:"content content-item"},[e._v(e._s(e.basicInfo.registrationChannel||"-"))])])],1),t("el-col",e._b({},"el-col",e.colOptions,!1),[t("el-row",[t("div",{staticClass:"content content-item-label"},[e._v(" "+e._s(e.$t("IDC.organization.commissionAgreement"))+" ")])]),t("el-row",[t("div",{staticClass:"content content-item"},[t("span",[e._v(e._s(e.basicInfo.distributionModelName||"-"))]),!e.isClosed&&e.hasEditPermission&&e.isAggregator?t("el-link",{attrs:{underline:!1,icon:"el-icon-edit"},on:{click:e.editCommiAgreement}}):e._e()],1)])],1),t("el-col",{attrs:{span:10}},[t("el-row",[t("div",{staticClass:"content content-item-label"},[e._v(e._s(e.$t("IDC.organization.commissionTemplate")))])]),t("el-row",[t("div",{staticClass:"content content-item"},[e._v(" "+e._s(e.basicInfo.settleConfigTemplateName||"-")+" "),e.isClosed||!e.hasEditPermission||e.basicInfo.isTopOrganization?e._e():t("el-link",{attrs:{underline:!1,icon:"el-icon-edit"},on:{click:e.editSettlementTemplate}})],1)])],1)],1)],1)])]),t("content-item-edit-dialog",{attrs:{visible:e.showDialog,config:e.dialogConfig,submitLoading:e.submitLoading,"validation-rules":e.organizationRules,"close-on-click-modal":!1},on:{"update:visible":function(t){e.showDialog=t},"on-submit":e.onDialogSubmit}})],1)},s=[],n=a("dbea"),l=a("ac21"),c=a("cb9d"),d=a("e036"),u=a("7c5e"),h=a("689d");const p={CHARGE:"chargeProfile",RULE:"ruleProfile"},m={AGREEMENT:"1",CONFIG:"2"};var f={name:"BasicInfo",components:{ContentItemEditDialog:n["a"]},inject:["orgDetailView"],props:{header:{type:Object,default:()=>{}},basicInfo:{type:Object,default:()=>{}}},data(){return{PROFILE_TYPES:p,showDialog:!1,submitLoading:!1,dialogConfig:{},organizationRules:{},status:[],ruleProfiles:[],chargeProfiles:[],commiAgreements:[],settleConfigTemplates:[]}},computed:{isClosed(){return this.basicInfo.status===u["b"].CLOSED},isDormant(){return this.basicInfo.status===u["b"].DORMANT},isNew(){return this.basicInfo.status===u["b"].NEW},isAllowedEdit(){const e=this.basicInfo.status;return Object(u["e"])(e)},hasEditPermission(){const e=this.basicInfo.loginedAccoutIsTopOrg,t=this.basicInfo.loginedAccoutOrgId===this.basicInfo.topOrganizationId;return e&&t},isAggregator(){const e=this.basicInfo.identityModel===u["a"].AGGREGATOR;return e},isCentralOwned(){const e=this.basicInfo.identityModel===u["a"].CENTRAL_OWNED;return e}},created(){this.init()},methods:{init(){this.organizationRules=Object(l["a"])()},async loadOrganizationStatus(e){const t=await Object(c["v"])({statusCode:e});let a=t.statusList;a&&a.length&&(this.status.length=0,a=a.filter(t=>t.code!==e),this.status.push(...a.map(e=>({value:e.code,label:e.name}))))},async loadRuleProfiles(){const e={trustlevel:this.basicInfo.trustLevel,identityType:this.basicInfo.identityType,identitySubtype:this.basicInfo.identitySubType};let t=await Object(h["a"])(c["K"],"dics",e);this.ruleProfiles.length=0,t&&t.length&&(t=t.map(Object(h["f"])("code","name",!0)),t.forEach(e=>this.ruleProfiles.push(e)))},async loadChargeProfiles(){const e={trustlevel:this.basicInfo.trustLevel,identityType:this.basicInfo.identityType,identitySubtype:this.basicInfo.identitySubType};let t=await Object(h["a"])(c["D"],"dics",e);t=t||[],this.chargeProfiles.length=0;const a={name:this.$t("common.placeholder.select"),code:null};t.unshift(a),t=t.map(Object(h["f"])("code","name",!0)),t.forEach(e=>this.chargeProfiles.push(e))},async loadCommiAgreement(){const e={templateType:m.AGREEMENT,pageSize:null,pageNo:null};let t=await Object(h["a"])(d["b"],"commissionConfigs",e);this.commiAgreements.length=0,t&&t.length&&(t=t.map(Object(h["f"])("templateId","name")),this.commiAgreements.push(...t))},async loadSettleConfigTemplates(){const e={templateType:m.CONFIG,pageSize:null,pageNo:null};let t=await Object(h["a"])(d["b"],"commissionConfigs",e);this.settleConfigTemplates.length=0,t&&t.length&&(t=t.map(Object(h["f"])("templateId","name")),this.settleConfigTemplates.push(...t))},editCommiAgreement(){this.dialogConfig={title:"Edit Commission Distribution Agreement",label:"Current Commission Distribution Agreement",value:this.basicInfo.distributionModelName,prop:"distributionTemplate",properties:[{key:"distributionTemplate",default:this.basicInfo.distributionModelId,label:"New Commission Distribution Agreement",type:"select",options:this.commiAgreements},{key:"remark",default:"",label:"Remark",type:"textarea"}]},this.loadCommiAgreement().then(()=>{this.showDialog=!0})},editSettlementTemplate(){this.dialogConfig={title:"Edit Commission Settlement Configuration Template",label:"Current Commission Settlement Configuration Template",value:this.basicInfo.settleConfigTemplateName,prop:"settleConfigTemplate",properties:[{key:"settleConfigTemplate",default:this.basicInfo.settleConfigTemplateId,label:"New Commission Settlement Configuration Template",type:"select",options:this.settleConfigTemplates},{key:"remark",default:"",label:"Remark",type:"textarea"}]},this.loadSettleConfigTemplates().then(()=>{this.showDialog=!0})},editIdentityStatus(){const e={title:this.$t("IDC.orgOperator.editStatus"),label:this.$t("IDC.orgOperator.currentStatus"),value:this.getIdentityStatusName(this.basicInfo.status),prop:"identityStatus",properties:[{key:"identityStatus",default:this.basicInfo.status,useDefult:!0,label:this.$t("IDC.orgOperator.newStatus"),type:"select",options:this.status},{key:"remark",default:"",label:this.$t("common.label.remark"),type:"textarea"}]};this.loadOrganizationStatus(this.basicInfo.status).then(()=>{if(this.status&&this.status.length){const t=this.status[0];e.properties[0].default=t.value}this.dialogConfig=e,this.showDialog=!0})},editRuleProfile(){this.dialogConfig={title:this.$t("IDC.groupDetail.label.EditRuleProfile"),label:this.$t("IDC.groupDetail.label.currentRuleProfile"),value:this.basicInfo.ruleProfileName,prop:"ruleProfile",properties:[{key:"ruleProfile",default:this.basicInfo.ruleProfileId,label:this.$t("IDC.groupDetail.label.RuleProfile"),type:"select",options:this.ruleProfiles},{key:"remark",default:"",label:this.$t("common.label.remark"),type:"textarea"}]},this.loadRuleProfiles().then(()=>{this.showDialog=!0})},editChargeProfile(){this.dialogConfig={title:this.$t("IDC.organization.editChargeProfile"),label:"Current Charge Profile",value:this.basicInfo.chargeProfileName,prop:"chargeProfile",properties:[{key:"chargeProfile",default:this.basicInfo.chargeProfileId,label:this.$t("IDC.organization.table.chargeProfile"),type:"select",options:this.chargeProfiles},{key:"remark",default:"",label:this.$t("common.label.remark"),type:"textarea"}]},this.loadChargeProfiles().then(()=>{this.showDialog=!0})},editOrganizationName(){this.dialogConfig={title:this.$t("IDC.organization.editOrganizationName"),label:"Current Organization Name",value:this.basicInfo.organizationName,prop:"organizationName",newOrganizationName:"",properties:[{key:"newOrganizationName",default:"",label:this.$t("IDC.organization.newOrganizationName"),type:"input",validateStatus:"el-form-item-pending",itemClass:"el-form-item-no-error",eleClass:"success-icon",elementBind:{"suffix-icon":"el-icon-success"}},{key:"remark",default:"",label:this.$t("common.label.remark"),type:"textarea"}]},this.showDialog=!0},onDialogSubmit(e,t){switch(e){case"identityStatus":this.changeOrganizationStatus(t);break;case"ruleProfile":this.changeRuleProfile(t).then();break;case"chargeProfile":this.changeChargeProfile(t).then();break;case"organizationName":this.changeOrganizationName(t);break;case"distributionTemplate":this.changeDistributionTemplate(t);break;case"settleConfigTemplate":this.changeSettleConfigTemplate(t);break}},async changeSettleConfigTemplate(e){let t={};t.orgId=this.basicInfo.organizationId,t.oldSettleConfigTemplateId=this.basicInfo.settleConfigTemplateId,t.newSettleConfigTemplateId=e.settleConfigTemplate,t.topIdentityId=this.basicInfo.topOrganizationId,t.remark=e.remark;try{this.submitLoading=!0;let e=await Object(d["f"])(t);this.submitLoading=!1,e&&e.header&&e.header.success&&(this.$modal.msgSuccess("Edit Commission Settlement Configuration Template success."),this.showDialog=!1,this.refreshBasicInfo())}catch(a){}},async changeDistributionTemplate(e){let t={};t.orgId=this.basicInfo.organizationId,t.oldDistributionModelId=this.basicInfo.distributionModelId,t.newDistributionModelId=e.distributionTemplate,t.topIdentityId=this.basicInfo.topOrganizationId,t.remark=e.remark;try{this.submitLoading=!0;let e=await Object(d["f"])(t);this.submitLoading=!1,e&&e.header&&e.header.success&&(this.basicInfo.distributionModelId=t.newDistributionModelId,this.basicInfo.distributionModelName=Object(h["d"])(this.commiAgreements,t.newDistributionModelId),this.$modal.msgSuccess("Edit Commission Distribution Agreement success."),this.showDialog=!1)}catch(a){}},async changeOrganizationName(e){let t={};t.organizationName=e.newOrganizationName,t.receiverIdentityId=this.basicInfo.organizationId,t.remark=e.remark,this.showDialog=!1;try{this.submitLoading=!0;let e=await Object(c["d"])(t);this.submitLoading=!1,e&&e.header&&e.header.success&&(this.basicInfo.organizationName=t.organizationName,e.taskId?this.$message.success("The request must be approved by another operator."):this.$modal.msgSuccess("Organization Name changed success."),this.header.title=`${this.basicInfo.shortCode}-${this.basicInfo.organizationName}`,this.showDialog=!1)}catch(a){}},async changeOrganizationStatus(e){let t={};t.oldStatus=this.basicInfo.status,t.newStatus=e.identityStatus,t.receiverIdentityId=this.basicInfo.organizationId,t.remark=e.remark;try{this.submitLoading=!0;let a=await Object(c["x"])(t);this.submitLoading=!1,a&&a.header&&a.header.success&&(this.basicInfo.status=e.identityStatus,a.taskId?this.$message.success("The request must be approved by another operator."):this.$modal.msgSuccess("Identity status changed success."),this.showDialog=!1)}catch(a){}},async changeRuleProfile(e){let t={};t.receiverIdentityId=this.basicInfo.organizationId,t.ruleProfileId=e.ruleProfile,t.trustLevel=this.basicInfo.trustLevelName,t.remark=e.remark;try{this.submitLoading=!0;let a=await Object(c["O"])(t);this.submitLoading=!1,a&&a.header&&a.header.success&&(this.basicInfo.ruleProfileId=e.ruleProfile,this.basicInfo.ruleProfileName=Object(h["d"])(this.ruleProfiles,e.ruleProfile),this.$modal.msgSuccess("Rule Profile changed success."),this.showDialog=!1,this.ruleProfiles.length=0)}catch(a){}},async changeChargeProfile(e){let t={};t.receiverIdentityId=this.basicInfo.organizationId,t.chargeProfileId=e.chargeProfile,t.trustLevel=this.basicInfo.trustLevelName,t.remark=e.remark;try{this.submitLoading=!0;let a=await Object(c["N"])(t);this.submitLoading=!1,a&&a.header&&a.header.success&&(this.basicInfo.chargeProfileId=e.chargeProfile,this.basicInfo.chargeProfileName=Object(h["d"])(this.chargeProfiles,e.chargeProfile),this.$modal.msgSuccess("Charge Profile changed success."),this.showDialog=!1,this.chargeProfiles.length=0)}catch(a){}},goToDetailPage(e){let t={id:null},a="";p.CHARGE===e&&(a="chargeProfile",t.id=this.basicInfo.chargeProfileId),p.RULE===e&&(a="ruleProfile",t.id=this.basicInfo.ruleProfileId),t.id&&this.openNewWindow({path:a,query:{data:encodeURIComponent(JSON.stringify(t))}})},getIdentityStatusName(e){return Object(u["c"])(e)},getSubAgentModelName(e){return Object(u["d"])(e)},refreshBasicInfo(){this.orgDetailView&&this.orgDetailView.init()}}},b=f,g=(a("6133"),a("2877")),y=Object(g["a"])(b,r,s,!1,null,"56bead4a",null),v=y.exports,C=a("ad03"),I=a("6195"),D=a("1c45"),S=a("9563"),k=a("5b4e"),T={name:"OrganizationDetail",components:{OrgAccount:S["a"],OrganizationBasicInfo:v,ProductInfo:C["a"],RevenueSettlementInfo:I["a"],KycForm:k["a"]},props:{organizationId:{type:String,default:""}},provide(){return{orgDetailView:this}},data(){return{tabName:"first",id:"",identityId:"",header:{title:""},basicInfo:{},status:[],roles:[],pageType:"detail",isShowBtn:!0,revenueFormData:{profileId:"Please Select",profileName:"",periodicSwitch:!1,intervalValue:"",intervalTypeCode:"",startDate:"",endDate:"",orgId:"",manualWsSwitch:!1,autoWsSwitch:!1,settlementMinBalance:"",editableTabsValue:"0",isShowModel:!0},payBillCheckRule:{}}},created(){this.init()},methods:{async init(){let e="";if(this.organizationId)e=this.organizationId;else{const t=JSON.parse(decodeURIComponent(this.$route.query.data));e=t.identityId}e&&this.loadOrganizationInfo(e)},async loadOrganizationInfo(e){this.identityId=e;let t=await Object(c["t"])({identityId:e});this.payBillCheckRule=t.payBillCheckRule;const a=t.organizationInfo||{};if(a.organizationId){let e=await this.queryOrgCommiAgreement(a.organizationId);a.distributionModelName=e.distributionModelName,a.distributionModelId=e.distributionModelId,a.settleConfigTemplateId=e.settleConfigTemplateId,a.settleConfigTemplateName=e.settleConfigTemplateName;const t=await this.getLoginedAccoutOrgInfo();t&&(a.loginedAccoutIsTopOrg=t.isTopOrganization,a.loginedAccoutOrgId=t.organizationId)}this.basicInfo=a,this.header.title=`${this.basicInfo.shortCode}-${this.basicInfo.organizationName}`},queryOrgCommiAgreement(e){return Object(c["F"])({orgId:e}).then(e=>e.header&&e.header.success?e:{}).catch(()=>({}))},getLoginedAccoutOrgInfo(){return Object(D["b"])({identityId:""}).then(e=>{if(e.header&&e.header.success){let t=e.organizationInfo;return t||null}}).catch(e=>null)},resetFields(){}}},w=T,O=(a("68f5"),Object(g["a"])(w,i,o,!1,null,"29ea689e",null));t["default"]=O.exports},"9cd1":function(e,t,a){"use strict";a("6226")},"9cfe":function(e,t,a){"use strict";a.d(t,"e",(function(){return o})),a.d(t,"d",(function(){return r})),a.d(t,"b",(function(){return s})),a.d(t,"h",(function(){return n})),a.d(t,"a",(function(){return l})),a.d(t,"f",(function(){return c})),a.d(t,"c",(function(){return d})),a.d(t,"g",(function(){return u}));var i=a("0bbd");function o(e){return Object(i["a"])({url:"/fintech/v1/settlement/revenue/org/queryOrgRevenuePlans",method:"post",data:e})}function r(e){return Object(i["a"])({url:"/fintech/v1/settlement/revenue/org/queryOrgRevenuePlanDetail",method:"post",data:e})}function s(e){return Object(i["a"])({url:"/fintech/v1/settlement/revenue/org/execOrgAutoSweep",method:"post",data:e})}function n(e){return Object(i["a"])({url:"/fintech/v1/workflow/process/details",method:"post",data:e})}function l(e){return Object(i["a"])({url:"/fintech/v1/workflow/mytask/task/batchProcess",method:"post",data:e})}function c(e){return Object(i["a"])({url:"/fintech/v1/settlement/dict/query",method:"post",data:e})}function d(){return Object(i["a"])({url:"/fintech/v1/trust/currencyDisplay/query",method:"get"})}function u(e){return Object(i["a"])({url:"/fintech/v1/settlement/revenue/org/queryOrgAndProfile",method:"post",data:e})}},a0cc:function(e,t,a){"use strict";a("fcbf")},a857:function(e,t,a){},ac21:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var i=a("02e3"),o=a("cb9d");const r=async(e,t,a)=>{const i={SUCCUSS:"el-form-item--valiate-succuss",PENDING:"el-form-item--valiate-pending",ERROR:"el-form-item--valiate-error"},r=a[0],s="The organization name is invalid.",n=/^([0-9A-Za-z\\_\\^\\|\\/ ]{2,128})$/;if(r.validateStatus=i.PENDING,!n.test(e))return r.validateStatus=i.ERROR,void t(new Error(s));r.validateStatus=i.PENDING;try{const a=await Object(o["h"])({organizationName:e});if(a.header&&a.header.success&&!0===a.flag)return r.validateStatus=i.SUCCUSS,void t();if(!1===a.flag){let e=a.description;return r.validateStatus=i.ERROR,void t(new Error(e))}r.validateStatus=i.ERROR,t(new Error(s))}catch(l){r.validateStatus=i.ERROR,t(new Error("Check organization name exception."))}},s=e=>({trigger:"blur",validator(t,a,i){r(a,i,e)}}),n=e=>({identityStatus:[i["z"]],ruleProfile:[i["z"]],remark:[i["e"]],newOrganizationName:[i["e"],s(e)]})},acdd:function(e,t,a){},ad03:function(e,t,a){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"panel"},[e.showBillValid?t("div",{staticClass:"panel-header"},[e._v(e._s(e.$t("IDC.organizationDetail.productDesc")))]):e._e(),t("el-form",{ref:"productForm",attrs:{"label-width":"100px","label-position":"top",model:e.productObj,rules:e.productFormRules}},[t("div",{staticClass:"content-wrapper"},[t("div",{staticClass:"sub-block"},["edit"!==e.mode||e.isEditModel?e._e():t("el-row",{staticStyle:{margin:"20px 0"}},[t("el-col",[t("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:e.productBtnClickHandle}},[t("i",{staticClass:"el-icon-edit el-icon--right"}),e._v(" "+e._s(e.$t("common.button.edit"))+" ")])],1)],1),t("div",{staticClass:"sub-block__title sub-block__title--normal"},[e._v(e._s(e.$t("IDC.organization.product")))]),e.isEditModel?t("el-row",{staticStyle:{margin:"20px 0"}},[t("el-col",[t("el-button",{attrs:{size:"small",plain:"",type:"primary",icon:"el-icon-plus"},on:{click:e.productBtnClickHandle}},[e._v(e._s(e.$t("common.button.add")))])],1)],1):e._e(),t("div",{staticClass:"product-table-container"},[t("org-product-table",e._b({ref:"producuntRef",staticClass:"product-table",attrs:{columns:e.productColumnsConfig,"out-side-table-data":e.getAllProduct},scopedSlots:e._u([{key:"effectiveTime",fn:function(a){return[e.isEditModel&&(a.data.row.isEditModel||a.data.row.isNewItem)?t("el-form-item",{attrs:{prop:a.data.$index<e.productObj.productList.length?"productList."+a.data.$index+".effectiveTime":"selectedProduct."+(a.data.$index-e.productObj.productList.length)+".effectiveTime",rules:e.rules.dateRule(a.data.row,"effectiveTime")}},[t("el-tooltip",{attrs:{effect:"light",placement:"top-start","popper-class":"product-datepicker-tooltip","arrow-offset":40,content:a.data.row.effectiveErrorMessage,disabled:!a.data.row.effectiveErrorMessage}},[t("el-date-picker",{staticStyle:{width:"100%"},attrs:{"value-format":e.DATE_FORMAT.COMP_VALUE,format:e.DATE_FORMAT.COMP_DISPLAY,type:"datetime",size:"small",placeholder:e.$t("common.placeholder.enter"),"picker-options":e.pickerProdTimeStart(a.data.row),disabled:e.checkEffectived(a.data.row)},on:{change:function(t){return e.onDatePickerChange(a,"effectiveTime")}},model:{value:a.data.row.effectiveTime,callback:function(t){e.$set(a.data.row,"effectiveTime",t)},expression:"scope.data.row.effectiveTime"}})],1)],1):t("span",{domProps:{textContent:e._s(e.formatDisplayDate(a.data.row.effectiveTime))}})]}},{key:"expireTime",fn:function(a){return[e.isEditModel&&(a.data.row.isEditModel||a.data.row.isNewItem)?t("el-form-item",{attrs:{prop:a.data.$index<e.productObj.productList.length?"productList."+a.data.$index+".expireTime":"selectedProduct."+(a.data.$index-e.productObj.productList.length)+".expireTime",rules:e.rules.dateRule(a.data.row,"expireTime")}},[t("el-tooltip",{attrs:{effect:"light",placement:"top-start","popper-class":"product-datepicker-tooltip","arrow-offset":40,content:a.data.row.expireErrorMessage,disabled:!a.data.row.expireErrorMessage}},[t("el-date-picker",{staticStyle:{width:"100%"},attrs:{"value-format":e.DATE_FORMAT.COMP_VALUE,format:e.DATE_FORMAT.COMP_DISPLAY,type:"datetime",size:"small",placeholder:e.$t("common.placeholder.enter"),"picker-options":e.pickerProdTimeEnd(a.data.row)},on:{change:function(t){return e.onDatePickerChange(a,"expireTime")}},model:{value:a.data.row.expireTime,callback:function(t){e.$set(a.data.row,"expireTime",t)},expression:"scope.data.row.expireTime"}})],1)],1):t("span",{domProps:{textContent:e._s(e.formatDisplayDate(a.data.row.expireTime))}})]}},{key:"status",fn:function(a){return[e.isEditModel&&(a.data.row.isEditModel||a.data.row.isNewItem)?t("el-select",{attrs:{size:"small"},model:{value:a.data.row.productStatus,callback:function(t){e.$set(a.data.row,"productStatus",t)},expression:"scope.data.row.productStatus"}},e._l(e.productStatusList,(function(e,a){return t("el-option",{key:a,attrs:{label:e.name,value:e.code}})})),1):t("div",{staticClass:"col-status"},[a.data.row.productStatus===e.PRODUCT_STATUS.ACTIVE.code?t("svg-icon",{staticClass:"status status-active",attrs:{"icon-class":"circle"}}):a.data.row.productStatus===e.PRODUCT_STATUS.SUSPENDED.code?t("svg-icon",{staticClass:"status status-deaf",attrs:{"icon-class":"circle"}}):a.data.row.productStatus===e.PRODUCT_STATUS.CLOSED.code?t("svg-icon",{staticClass:"status status-inactive",attrs:{"icon-class":"circle"}}):e._e(),e._v(" "+e._s(e.showProductStatus(a.data.row.productStatus))+" ")],1)]}},{key:"chargeProfile",fn:function(a){return[e.isEditModel&&(a.data.row.isEditModel||a.data.row.isNewItem)?t("el-select",{attrs:{placeholder:e.$t("common.placeholder.select"),size:"small"},model:{value:a.data.row.chargeProfileId,callback:function(t){e.$set(a.data.row,"chargeProfileId",t)},expression:"scope.data.row.chargeProfileId"}},e._l(a.data.row.chargeProfiles,(function(e,a){return t("el-option",{key:a,attrs:{label:e.chargeProfileName,value:e.chargeProfileId}})})),1):t("span",{domProps:{textContent:e._s(e.getChargeProfileLabelById(a.data.row.chargeProfiles,a.data.row.chargeProfileId))}})]}},{key:"operation",fn:function(a){return[a.data.row.isNewItem?t("el-button",{attrs:{type:"text",size:"small"},on:{click:()=>e.deletNewProductFromSelected(a.data.row)}},[e._v("Delete")]):a.data.row.isEditModel?t("el-button",{attrs:{type:"text",size:"small"},on:{click:()=>e.cancelCurrentRowOperation(a.data.row)}},[e._v("Cancel")]):a.data.row.isEditModel?e._e():t("el-button",{attrs:{type:"text",size:"small"},on:{click:()=>e.setRowOperationModel(a.data.row,!0)}},[e._v("Edit")])]}},{key:"productName",fn:function(a){return[t("span",{domProps:{textContent:e._s(a.data.row.productName)}})]}}])},"org-product-table",e.getProductStyleOptions,!1))],1)],1),e.showBillReferenceNumberValidation?t("div",[t("div",{staticClass:"title"},[e._v("Bill Reference Number Validation")]),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"Validation Mode",prop:"payBillValidateForm.validationMode"}},[e.isViewMode?t("span",{domProps:{textContent:e._s(e.getValidationMode(e.productObj.payBillValidateForm.validationMode))}}):t("el-select",{attrs:{placeholder:e.$t("common.placeholder.select"),size:"small"},model:{value:e.productObj.payBillValidateForm.validationMode,callback:function(t){e.$set(e.productObj.payBillValidateForm,"validationMode",t)},expression:"productObj.payBillValidateForm.validationMode"}},e._l(e.validationModeOptions,(function(e,a){return t("el-option",{key:a,attrs:{value:e.value,label:e.label}})})),1)],1)],1),e.showRegularExpression?t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"Regular Expression",prop:"payBillValidateForm.validationExpression"}},[e.isViewMode?t("span",{domProps:{textContent:e._s(e.productObj.payBillValidateForm.validationExpression)}}):t("el-input",{attrs:{placeholder:e.$t("common.placeholder.enter"),size:"small"},model:{value:e.productObj.payBillValidateForm.validationExpression,callback:function(t){e.$set(e.productObj.payBillValidateForm,"validationExpression",t)},expression:"productObj.payBillValidateForm.validationExpression"}})],1)],1):e._e()],1),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"Allow Partial Bill Payment",prop:"payBillValidateForm.allowPartialPayement"}},[e.isViewMode?t("span",{domProps:{textContent:e._s("1"===e.productObj.payBillValidateForm.allowPartialPayement?"YES":"NO")}}):t("div",[t("el-radio",{attrs:{label:"1",size:"small"},model:{value:e.productObj.payBillValidateForm.allowPartialPayement,callback:function(t){e.$set(e.productObj.payBillValidateForm,"allowPartialPayement",t)},expression:"productObj.payBillValidateForm.allowPartialPayement"}},[e._v("YES")]),t("el-radio",{attrs:{label:"0",size:"small"},model:{value:e.productObj.payBillValidateForm.allowPartialPayement,callback:function(t){e.$set(e.productObj.payBillValidateForm,"allowPartialPayement",t)},expression:"productObj.payBillValidateForm.allowPartialPayement"}},[e._v("NO")])],1)])],1)],1)],1):e._e(),t("div",{staticStyle:{"margin-top":"20px"}},[e.isEditModel?t("el-form-item",{attrs:{label:e.$t("IDC.groupDetail.label.Remark"),prop:"remark"}},[t("el-input",{attrs:{rows:4,type:"textarea",placeholder:"Please enter"},model:{value:e.productObj.remark,callback:function(t){e.$set(e.productObj,"remark",t)},expression:"productObj.remark"}})],1):e._e()],1)])]),e.isEditModel?t("div",{staticClass:"flex flex-jus-end"},[t("el-button",{staticClass:"cancel-button",attrs:{id:"cancel",size:"small"},on:{click:e.resetEvn}},[e._v("Cancel ")]),t("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{id:"submitProduct",type:"primary",size:"small",loading:e.submitLoading},on:{click:e.submitEvn}},[e._v(" Submit ")])],1):e._e(),t("product-dialog",{attrs:{productVisible:e.showProductPopup,addForm:e.popupConf,isCheck:!0,isCheckMemory:!0,hasPagination:!1,childSearch:e.getProduct},on:{"update:productVisible":function(t){e.showProductPopup=t},"update:product-visible":function(t){e.showProductPopup=t},"submit-call-back":e.addProduct}})],1)},o=[],r=a("0fb1"),s=a("fc5e6"),n=a("cb9d"),l=a("689d"),c=a("7dfc"),d=a("3d79"),u=a("5a0c"),h=a.n(u),p=a("02e3");const m={ACTIVE:{code:"01",name:"Active"},SUSPENDED:{code:"02",name:"Suspended"},CLOSED:{code:"03",name:"Closed"}},f="YYYY-MM-DD HH:mm";var b={name:"ProductInfo",components:{OrgProductTable:s["a"],productDialog:r["a"]},props:{identityId:{type:String,required:!0},mode:{type:String,default:"edit",enum:["edit","review"]},showBillValid:{type:Boolean,default:!0},isReceiveData:{type:Boolean,default:!1},receiveProductData:{type:Array,default:()=>[]}},inject:["orgDetailView"],data(){return{DATE_FORMAT:d["a"],PRODUCT_STATUS:m,isEditModel:!1,submitLoading:!1,productObj:{remark:"",productList:[],selectedProduct:[],time:{unit:null,value:null},payBillValidateForm:{validationMode:"",allowPartialPayement:"",validationExpression:""}},validationModeOptions:[{label:"External Validation",value:"2"},{label:"Internal and External",value:"3"},{label:"Internal Validation",value:"1"},{label:"No Validation",value:"0"}],closedProducts:[],closedProductColumns:[{label:this.$t("IDC.organization.table.productName"),prop:"productName",align:"left"},{label:this.$t("IDC.organization.table.effectiveDate"),prop:"effectiveTime",align:"left"},{label:this.$t("IDC.organization.table.expiryDate"),prop:"expireTime",align:"left"},{label:this.$t("IDC.organization.table.chargeProfile"),prop:"chargeProfile",align:"left",__slotName:"chargeProfile"},{label:this.$t("common.label.description"),prop:"productDesc",align:"left"},{label:this.$t("common.label.status"),prop:"status",align:"left",__slotName:"status"}],showProductPopup:!1,popupConf:{idKey:"productId",title:"Add Product",label:"Product Name",columns:[{label:"Product Name",prop:"productName",align:"left"},{label:"Description",prop:"productDesc",align:"left"}],searchForm:{formData:{name:null},formConf:[{label:"Product Name",key:"name",prop:"name",comp:"el-input",bind:{clearable:!0,placeholder:this.$t("common.placeholder.enter")}}]}},rules:{dateRule:(e,t)=>Object(d["c"])(this,e,t)},payBillCheckRule:{}}},computed:{productColumnsConfig(){let e={label:this.$t("IDC.organization.table.productName"),prop:"productName",align:"left","min-width":200},t={label:this.$t("IDC.organization.table.productName"),prop:"productName",align:"left",width:200,fixed:"left",__slotName:"productName"};const a=[{label:this.$t("IDC.organization.businessOperationsGroup"),prop:"businessOperationsGroup",align:"left","min-width":250},{label:this.$t("IDC.organization.table.effectiveDate"),prop:"effectiveTime",align:"left",__slotName:"effectiveTime","min-width":220},{label:this.$t("IDC.organization.table.expiryDate"),prop:"expireTime",align:"left",__slotName:"expireTime","min-width":220},{label:this.$t("IDC.organization.chargeProfile"),prop:"chargeProfile",align:"left",__slotName:"chargeProfile","min-width":200},{label:this.$t("common.label.description"),prop:"productDesc",align:"left","min-width":200},{label:this.$t("common.label.status"),prop:"status",align:"left",__slotName:"status","min-width":150}];return this.isEditModel?(a.unshift(e),a.push({label:this.$t("common.label.operation"),"min-width":100,align:"left",__slotName:"operation",fixed:"right"}),a):(a.unshift(t),a)},getAllProduct(){return[].concat(this.productObj.productList,this.productObj.selectedProduct)},getProductStyleOptions(){return this.getAllProduct.length>=10?{height:"520"}:{}},productStatusList(){const e=Object.values(this.PRODUCT_STATUS);return e},showBillReferenceNumberValidation(){const e=this.getAllProduct||[];return e.some(e=>{if(e.productProperties)return void 0!=e.productProperties.BILL_REF_NUM_RULE})&&this.showBillValid},showRegularExpression(){const e=this.productObj.payBillValidateForm;return e.validationMode&&"0"!==e.validationMode&&"2"!==e.validationMode},isViewMode(){return!this.isEditModel},productFormRules(){return{payBillValidateForm:this.isViewMode?{}:{validationExpression:[p["e"]],validationMode:[p["z"]],allowPartialPayement:[p["z"]]},remark:[p["e"]]}}},created(){this.isReceiveData||this.init()},watch:{"orgDetailView.payBillCheckRule":{handler(e){this.payBillCheckRule={...e},this.productObj.payBillValidateForm={...e}},deep:!0,immediate:!0},receiveProductData:{handler(e){this.productObj.productList=Object(l["b"])(e).map(e=>{const t=e.effectiveDate.replace("T"," "),a=e.expireDate.replace("T"," "),i=Object(c["a"])(t,d["a"].DAYJS,f),o=Object(c["a"])(a,d["a"].DAYJS,f);return e.effectiveTime=i,e.expireTime=o,e.effectiveErrorMessage="",e.expireErrorMessage="",e.chargeProfiles=e.chargeProfiles||[],e.originRow=Object(l["b"])(e),e})},deep:!0,immediate:!0}},methods:{init(){this.initProduct()},async initProduct(){const e={identityId:this.identityId};let t=await Object(l["a"])(n["L"],"list",e);t=Object(l["b"])(t),this.productObj.productList.length=0,this.productObj.selectedProduct.length=0,t&&(t=t.map(e=>{const t=e.effectiveDate.replace("T"," "),a=e.expireDate.replace("T"," "),i=Object(c["a"])(t,d["a"].DAYJS,f),o=Object(c["a"])(a,d["a"].DAYJS,f);return e.effectiveTime=i,e.expireTime=o,e.effectiveErrorMessage="",e.expireErrorMessage="",e.originRow=Object(l["b"])(e),e}),this.productObj.productList.push(...t))},async initClosedProduct(){this.identityId;let e=[];e&&(e=e.map(e=>{const t=e.effectiveDate.replace("T"," "),a=e.expireDate.replace("T"," "),i=Object(c["a"])(t,d["a"].DAYJS,f),o=Object(c["a"])(a,d["a"].DAYJS,f);return e.effectiveTime=i,e.expireTime=o,e}),this.closedProducts=e)},refreshProuduct(){this.initProduct()},showProductStatus(e){const t=Object.values(m),a=Object(l["c"])(t,e,"code")||{};return a.name||"-"},getChargeProfileLabelById(e,t){const a=Object(l["c"])(e,t,"chargeProfileId")||{};return a.chargeProfileName||"-"},productBtnClickHandle(){this.isEditModel?this.showProductPopup=!0:this.changeEditModel(!0)},async getProduct(){let e={header:{success:!1},list:[]};this.prodLoading=!0;try{const t={identityId:this.identityId},a=await Object(l["a"])(n["z"],"list",t);e.list=a,e.header.success=!0}catch(t){}return this.prodLoading=!1,e.list=e.list.filter(e=>!this.getAllProduct.find(t=>t.productId===e.productId)),e},resetEvn(){this.$confirm("Are you sure to cancel the operation?",{confirmButtonText:"Confirm",cancelButtonText:"Cancel",closeOnClickModal:!1,type:"warning"}).then(()=>{this.refreshProuduct(),this.changeEditModel(!1),this.productObj.payBillValidateForm={...this.payBillCheckRule},this.$emit("product-cancel")})},submitEvn(){this.$refs.productForm.validate(e=>{if(!e)return;const t=this.getAllProduct.map(e=>({productId:e.productId,effectiveTime:e.effectiveTime,expireTime:e.expireTime,chargeProfileId:e.chargeProfileId,status:e.productStatus}));if(this.isReceiveData){const e={products:t,remark:this.productObj.remark};return void this.$emit("product-submit",e)}this.submitLoading=!0;const a=this.productObj.payBillValidateForm,i={newOrganizationProducts:t,receiverIdentityId:this.identityId};this.showBillReferenceNumberValidation&&(i.payBillCheckRule={validationMode:a.validationMode,validationExpression:a.validationExpression,allowPartialPayement:a.allowPartialPayement,notifyText:a.notifyText}),Object(n["c"])(i).then(e=>{e.header&&e.header.success&&(e.taskId?this.$message.success("The request must be approved by another operator."):this.$message.success("Submit Successful"),this.refreshProuduct(),this.changeEditModel(!1),this.showBillReferenceNumberValidation&&(this.payBillCheckRule={...a}))}).finally(()=>{this.submitLoading=!1})})},changeEditModel(e){this.isEditModel=e},setRowOperationModel(e,t){e&&"undefined"!==typeof t&&this.$set(e,"isEditModel",t)},cancelCurrentRowOperation(e){if(!e)return;const t=e.originRow;t&&(e.effectiveTime=t.effectiveTime,e.expireTime=t.expireTime,e.chargeProfile=t.chargeProfile,e.productStatus=t.productStatus),this.setRowOperationModel(e,!1)},deletNewProductFromSelected(e){e&&this.$modal.confirm("Are you sure to delete it?","Delete",{confirmButtonText:"Confirm",cancelButtonText:"Cancel",closeOnClickModal:!1,type:"warning"}).then(()=>{let t=this.productObj.selectedProduct.findIndex(t=>t===e);-1!=t&&this.productObj.selectedProduct.splice(t,1)})},addProduct(e){let t=Object(l["b"])(this.productObj.selectedProduct),a=Object(l["b"])(e);a=a.map(e=>{const a=t.find(t=>t.productId===e.productId);e.isEditModel=!!a&&a.isEditModel;const i=Object(c["a"])(e.effectiveDate,d["a"].DAYJS,f),o=Object(c["a"])(e.expireDate,d["a"].DAYJS,f);return e.effectiveTime=i,e.expireTime=o,e.isNewItem=!0,e.productStatus=m.ACTIVE.code,e.effectiveErrorMessage="",e.expireErrorMessage="",e.originRow=Object(l["b"])(e),e}),this.productObj.selectedProduct.push(...a)},getOptionsLabelByValue(e,t){const a=Object(l["d"])(e,t);return a||"-"},formatDisplayDate(e){const t=Object(c["a"])(e,d["a"].DAYJS_DISPLAY,f);return t},validationModeChange(e){e&&"No Validation"!==e||(this.regularExpression="")},pickerProdTimeStart(e={}){return{disabledDate(t){const a=t.getTime()<=Date.now(),i=h()(e.effectiveTime,d["a"].DAYJS),o=Date.now()>new Date(i);return!(!a&&!o)||t.getTime()<Date.now()}}},pickerProdTimeEnd(e={}){return{disabledDate(e){const t=e.getTime()<Date.now();return t}}},checkEffectived(e={}){if(e.effectiveTime){const t=h()(e.effectiveTime,d["a"].DAYJS);return Date.now()>new Date(t)}return!1},onDatePickerChange(e,t){let a;a="effectiveTime"===t?"expireTime":"effectiveTime";const i=e.data.$index<this.productObj.productList.length?"productList."+e.data.$index+"."+a:"selectedProduct."+(e.data.$index-this.productObj.productList.length)+"."+a;this.$nextTick(()=>{"effectiveTime"===a?e.data.row.effectiveErrorMessage="":e.data.row.expireErrorMessage="",this.$refs.productForm.clearValidate([i])})},getValidationMode(e){switch(e){case"0":return"No Validation";case"1":return"Internal Validation";case"2":return"External Validation";case"3":return"Internal and External"}}}},g=b,y=(a("f320"),a("2877")),v=Object(y["a"])(g,i,o,!1,null,"154f17b4",null);t["a"]=v.exports},ad21:function(e,t,a){"use strict";a("5726")},ada1:function(e,t,a){"use strict";a("183d")},adbd:function(e,t,a){"use strict";a("2fa9")},b6fc:function(e,t,a){"use strict";a("34dd")},b7e5:function(e,t,a){"use strict";a("7892")},b84e:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"account-statemnet"},[t("portal-header",{attrs:{projectObj:e.titleConfig}}),t("section",[t("div",{staticClass:"section-title margin-left-20 margin-right-20 none-padding-left none-padding-right"},[e._v(" "+e._s(e.$t("IDC.accountStatement.AccountInfo"))+" ")]),t("div",{staticClass:"account-type"},[t("el-form",{ref:"accountForm",attrs:{size:"small",rules:e.accountFormRules,model:e.accountForm}},[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{xs:e.colSmall,sm:e.colSmall,md:e.colSmall,lg:e.colSmall,xl:e.colXL}},[t("el-form-item",{staticClass:"none-margin-bottom",attrs:{label:e.$t("IDC.accountStatement.accountType"),prop:"accountType"}},[t("el-select",{attrs:{placeholder:e.$t("common.placeholder.select")},on:{change:e.selectAccountType},model:{value:e.accountForm.accountType,callback:function(t){e.$set(e.accountForm,"accountType",t)},expression:"accountForm.accountType"}},e._l(e.accountTypeForm,(function(e){return t("el-option",{key:e.value,attrs:{value:e.value,label:e.label}})})),1)],1)],1)],1)],1),e.accountForm.accountType?t("basic-info-item",{attrs:{basicInfo:e.currentAccount[0]}}):e._e(),e.isIdentityHotAccount?t("div",[t("div",{staticStyle:{"padding-bottom":"20px","padding-top":"20px"}},[e._v("Unaccounted Transactions")]),t("table-page",{attrs:{id:"table",size:"small",height:280,columns:e.AccountColumns,pagination:e.paginationConfig,outSideTableData:e.outSideTableData,initializingLoading:!1,"is-search":e.isSearchTableData},scopedSlots:e._u([{key:"transactionAmount",fn:function(a){return[t("div",{staticClass:"align-right"},[e._v(e._s(a.data.row.accountingAmount.amount))])]}}],null,!1,2039563685)})],1):e._e()],1)]),t("section",[t("div",{staticClass:"section-title margin-bottom-20"},[e._v(e._s(e.$t("IDC.accountStatement.AccountedTransaction")))]),t("div",{staticClass:"section-content"},[t("portal-form",{ref:"searchList",attrs:{"form-data":e.formData,"form-config-list":e.formConfigList,searchBtnLoading:e.searchLoading,"form-rules":e.tempFormRules,searchBtnDisabled:e.isSearchBtnDisabled},on:{"common-enter-event":e.search,"reset-btn-click":e.reset,"search-btn-click":e.search},scopedSlots:e._u([{key:"oppositeParty",fn:function(){return[t("el-row",{class:["grouped-input"],attrs:{gutter:4}},[t("el-col",{class:["grouped-input-type"],attrs:{span:e.handleSpanWidth}},[t("el-form-item",{attrs:{label:e.$t("IDC.accountStatement.oppositeParty"),prop:"oppositePartyType"}},[t("el-select",{attrs:{placeholder:e.$t("common.placeholder.select")},on:{change:e.handleSelect},model:{value:e.formData.oppositePartyType,callback:function(t){e.$set(e.formData,"oppositePartyType",t)},expression:"formData.oppositePartyType"}},e._l(e.partySelectOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),e.showRightCode?t("el-col",{class:["grouped-input-value"],attrs:{span:16}},[t("el-form-item",{class:["hidden-label"],attrs:{label:e.oppositeInputTitleLabel,prop:"oppositeParty",required:e.oppositePartyRequired}},[t("el-input",{staticClass:"input-with-select",attrs:{placeholder:e.oppositeInputTitleLabel,readonly:"readonly"},on:{blur:function(t){return e.debitPartyShortCodeBlur(t)}},model:{value:e.formData.oppositeParty,callback:function(t){e.$set(e.formData,"oppositeParty",t)},expression:"formData.oppositeParty"}},["all"!==e.formData.oppositePartyType||"8000"!==e.formData.oppositePartyType?t("i",{staticClass:"el-icon-more icon-cursor",attrs:{slot:"suffix"},on:{click:e.openDebitShortCodeDialog},slot:"suffix"}):e._e()])],1)],1):e._e()],1)]},proxy:!0}])})],1),t("div",{staticClass:"section-content padding-top-20"},[t("el-dropdown",{staticStyle:{"padding-bottom":"20px"},on:{command:e.handleExport}},[t("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{type:"primary",size:"small",disabled:!e.hasPerm("IC_DOWNLOAD_DAILY_ACCOUNT_STATEMENT_BTN")}},[e._v(" "+e._s(e.$t("common.button.export"))+" "),t("i",{staticClass:"el-icon-arrow-down el-icon--right",staticStyle:{"font-size":"12px"}})]),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",{attrs:{command:"Excel"}},[e._v("Excel")]),t("el-dropdown-item",{attrs:{command:"Excel2007"}},[e._v("Excel 2007")]),t("el-dropdown-item",{attrs:{command:"CSV"}},[e._v("CSV")]),t("el-dropdown-item",{attrs:{command:"PDF"}},[e._v("PDF")])],1)],1),t("table-page",{attrs:{size:"small",columns:e.Columns,"has-pagination":!0,pagination:e.paginationConfig,getTableData:e.getTableData,"is-search":e.refreshTableFlag,initializingLoading:!1},scopedSlots:e._u([{key:"orderIdOperation",fn:function(a){return[t("el-button",{staticStyle:{padding:"0"},attrs:{type:"text"},on:{click:function(t){return e.showDetail(a.data.row)}}},[e._v(" "+e._s(a.data.row.tradeOrderId)+" ")])]}},{key:"operation",fn:function(a){return[e.isShowReverse(a.data.row)?t("el-button",{staticClass:"btn",attrs:{type:"text",size:"small"},on:{click:function(t){return e.reverse(a.data.row)}}},[e._v(" "+e._s(e.$t("IDC.reviewTransaction.label.reverse"))+" ")]):e._e()]}}])})],1)]),t("entity-search-dialog",{attrs:{"dialog-title":e.entityDialogTitle,dialogVisible:e.dialogVisible,fieldName:e.inputField},on:{"update:dialogVisible":function(t){e.dialogVisible=t},"update:dialog-visible":function(t){e.dialogVisible=t},select:e.receiverSelected,onCloseDialog:e.closeCallBack}})],1)},o=[],r=a("c811"),s=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"basic-info-box"},[t("el-row",{attrs:{gutter:20}},e._l(e.configList,(function(a,i){return t("el-col",e._b({key:i},"el-col",e.colOptions,!1),[t("div",{staticClass:"basic-info-card"},[t("div",{staticClass:"basic-info-card__label bg-purple"},[e._v(e._s(a.label))]),t("div",{staticClass:"basic-info-card__value"},[e._v(e._s(a.value))])])])})),1)],1)])},n=[],l={name:"BasicInfoItem",props:{basicInfo:{type:Object,default:()=>({})}},data(){return{propsOrder:[{name:"accountNo",label:this.$t("IDC.accountStatement.accountNo")},{name:"accountName",label:this.$t("IDC.accountStatement.accountType")},{name:"accountAlias",label:this.$t("IDC.accountStatement.alias")},{name:"currency",label:this.$t("IDC.accountStatement.currency")},{name:"relationship",label:this.$t("IDC.accountStatement.accountRelationship")},{name:"balance",label:this.$t("IDC.accountStatement.currentBalance")},{name:"availableBalance",label:this.$t("IDC.accountStatement.availableBalance")},{name:"reservedBalance",label:this.$t("IDC.accountStatement.reservedBalance")},{name:"unclearBalance",label:this.$t("IDC.accountStatement.unclearBalance")},{name:"status",label:this.$t("IDC.accountStatement.status")}]}},computed:{configList(){const e=this.basicInfo;return this.propsOrder.map(t=>{const a=t.name,i=t.label;return{label:i,value:e[a]||"-"}})}}},c=l,d=(a("f147"),a("2877")),u=Object(d["a"])(c,s,n,!1,null,"1d6a3ae1",null),h=u.exports,p=a("3186"),m=a("4c09"),f=a("0360"),b=a("7dfc"),g=a("2069"),y=a("fb94"),v=a("5e70");const C={all:"all",customer:"1000",group:"7000",organization:"5000",sp:"8000"};var I={components:{PortalHeader:r["a"],BasicInfoItem:h,PortalForm:p["a"],tablePage:m["a"],EntitySearchDialog:g["a"]},data(){return{routeType:"",dialogVisible:!1,entityDialogTitle:"",inputField:"",handleSpanWidth:24,showRightCode:!1,partySelectOptions:[{label:"All",value:C.all},{label:"Organization",value:C.organization},{label:"Customer",value:C.customer},{label:"Group",value:C.group},{label:"SP",value:C.sp}],outSideTableData:[],oppositeInputTitleLabel:"",oppositePartyRequired:!0,isSearchTableData:!1,isIdentityHotAccount:!1,tablePageShow:!1,refreshTableFlag:!1,accountForm:{accountType:""},titleConfig:{title:this.$t("IDC.accountStatement.title")},accountFormRules:{accountType:[{required:!0}]},accountTypeForm:"",accountList:[],currentAccount:{},formData:{completionTime:"",action:"",oppositeParty:"",oppositePartyId:"",oppositePartyType:"all"},tempFormRules:{completionTime:[{required:!0}]},searchLoading:!1,paginationConfig:{pageIndex:1,pageSize:10},checkboxOptions:[{label:"Both",value:""},{label:"Debit",value:1},{label:"Credit",value:0}],oppositePartyOptions:[{label:"All",value:""},{label:"Customer",value:"1000"},{label:"Group",value:"7000"},{label:"Organization",value:"5000"},{label:"SP",value:"8000"}],AccountColumns:[{label:this.$t("IDC.accountStatement.accountNo"),prop:"accountNo","min-width":"150px",align:"left"},{label:this.$t("IDC.accountStatement.initiationTime"),prop:"createTime","min-width":"150px",align:"left"},{label:this.$t("IDC.accountStatement.TransactionAmount"),prop:"transactionAmount",__slotName:"transactionAmount","min-width":"150px",align:"left"}],Columns:[{label:"Receipt No.",prop:"tradeOrderId","min-width":"310px",align:"left",__slotName:"orderIdOperation"},{label:"Completion Time",prop:"createTime","min-width":"150px",align:"left"},{label:"Details",prop:"transactionDetails","min-width":"150px",align:"left"},{label:"Opposite Party",prop:"opposityPartyName","min-width":"150px",align:"left"},{label:"Transaction Status",prop:"transactionStatus","min-width":"150px",align:"left"},{label:"Currency",prop:"transactionCurrency","min-width":"150px",align:"left"},{label:"Transaction Amount",prop:"transactionAmount","min-width":"150px",align:"left"},{label:"Balance",prop:"balance","min-width":"150px",align:"left"},{label:"Operation",prop:"operation","min-width":"150px",align:"left",__slotName:"operation",fixed:"right"}],limitDays:{},choiceDate:"",pickerOptions:{onPick:({maxDate:e,minDate:t})=>{t&&!e&&(this.choiceDate=t.getTime()),e&&(this.choiceDate="")},disabledDate:e=>{let t=new Date(Object(b["a"])((new Date).getTime(),"YYYY-MM-DD")+" 23:59:59").getTime();if(this.isNull(this.choiceDate))return e.getTime()>t;{const a=24*this.limitDays.maxDay*3600*1e3;let i=this.choiceDate+a-1;i=i>t?t:i;const o=this.choiceDate-a+1;return e.getTime()<o||e.getTime()>i}}}}},computed:{isSearchBtnDisabled(){const e="transactionCenter.accountStatement"===this.routeType,t=this.hasPerm("IC_QUERY_DAILY_ACCOUNT_STATEMENT_BTN");return e&&!t},isExportBtnShow(){const e="transactionCenter.accountStatement"===this.routeType;return e},identityId(){if(this.$route.query.data){const e=decodeURIComponent(this.$route.query.data);return JSON.parse(e).identityId||""}return f["default"].get("organizationIdentityId")||""},formConfigList(){return[{label:"Completion Time",formItemClass:"form-special-date-box",sameGroup:!0,description:this.$t("",{obj:this.limitDays.maxDay}),prop:"completionTime",comp:[{key:"completionTime",comp:"el-date-picker",bind:{placeholder:this.$t("common.placeholder.enter"),align:"right",type:"datetimerange",format:"dd/MM/yyyy HH:mm:ss","picker-options":this.pickerOptions,"range-separator":"~","value-format":"yyyy-MM-dd HH:mm:ss","default-time":["00:00:00","23:59:59"],"start-placeholder":"Please select","end-placeholder":"Please select"}},{comp:"i",class:"el-icon-date data_icon"}]},{label:"Debit/Credit",key:"action",prop:"action",options:this.checkboxOptions,comp:"el-select",bind:{clearable:!0,placeholder:this.$t("common.placeholder.select")}},{slotName:"oppositeParty"}]}},watch:{"formData.oppositePartyType":{handler(e){this.formData.oppositeParty="",this.formData.oppositePartyId="",e===C.all&&(this.showRightCode=!1,this.handleSpanWidth=24),e===C.organization?(this.oppositeInputTitleLabel=this.$t("TRC.reviewTransaction.label.shortCode"),this.handleSpanWidth=8,this.showRightCode=!0):e===C.customer?(this.oppositeInputTitleLabel=this.$t("TRC.reviewTransaction.label.MSISDN"),this.handleSpanWidth=8,this.showRightCode=!0):e===C.group?(this.oppositeInputTitleLabel=this.$t("TRC.reviewTransaction.label.groupCode"),this.handleSpanWidth=8,this.showRightCode=!0):e===C.sp&&(this.handleSpanWidth=24,this.showRightCode=!1)},immediate:!0,deep:!0}},created(){this.getAccountData(),this.getLimitDay(),this.routeType=this.$route.meta.type},methods:{isNull(e){return!e},async getLimitDay(){let e=await Object(y["c"])();e&&(this.limitDays={maxDay:7,defaultDay:6},this.getdefaultTime(this.limitDays.defaultDay))},getdefaultTime(e){this.formData.startTime=Object(b["a"])((new Date).getTime()-864e5*e,"YYYY-MM-DD HH:mm:ss"),this.formData.endTime=Object(b["a"])((new Date).getTime(),"YYYY-MM-DD HH:mm:ss"),this.formData.completionTime=[this.formData.startTime,this.formData.endTime]},openDebitShortCodeDialog(){"1000"===this.formData.oppositePartyType||"5000"===this.formData.oppositePartyType||"7000"===this.formData.oppositePartyType?this.dialogVisible=!0:this.dialogVisible=!1},debitPartyShortCodeBlur(e){e.target.value},isShowReverse(e){return e.reverseMode&&("COMPLETED"===e.transactionStatus||"PAID"===e.transactionStatus)},selectAccountType(e){this.currentAccount=this.accountList.filter(t=>t.accountTypeId===e),this.isIdentityHotAccount=this.currentAccount[0].isIdentityHotAccount,this.isIdentityHotAccount&&(this.isSearchTableData=!0,this.getUnFinishHotEntryList())},async getAccountData(){const e={identityId:this.identityId,dataScope:["ALL"]},t=await Object(v["j"])(e);t&&(this.accountList=t.list,this.accountTypeForm=t.list.map(e=>({label:e.accountName+"/"+e.accountNo,value:e.accountTypeId})))},getUnFinishHotEntryList(){return new Promise(e=>{const{accountNo:t,accountTypeId:a}=this.currentAccount[0];let i={identityId:this.identityId,accountNo:t,accountTypeId:a,pageNo:this.paginationConfig.pageIndex,pageSize:this.paginationConfig.pageSize};Object(v["g"])(i).then(t=>{if(!t.header||!t.header.success)return!1;this.outSideTableData=t.accountEntryDTOList||[],this.outSideTableData.forEach(e=>{e.createTime=Object(b["b"])(e.createTime,"DD/MM/YYYY HH:mm:ss")}),e(t)}).catch(()=>{e()}).finally(()=>{this.isSearchTableData=!1})})},receiverSelected(e){const t={msisdn:"identityId",shortCode:"organizationId",groupCode:"identityId"};this.formData.oppositeParty=e[this.inputField],this.formData.oppositePartyId=e[t[this.inputField]]},closeCallBack(e){this.dialogVisible=e},handleSelect(e){switch(this.formData.oppositeParty="",this.formData.oppositePartyId="",e){case"1000":this.entityDialogTitle="Select Customer",this.inputField="msisdn";break;case"5000":this.entityDialogTitle="Select Organization",this.inputField="shortCode";break;case"7000":this.entityDialogTitle="Select Group Code",this.inputField="groupCode";break}},search(){this.$refs.accountForm.validate(e=>{e&&this.$refs.searchList.validate(e=>{e&&(this.paginationConfig.pageIndex=1,this.refreshTableFlag=!0,this.searchLoading=!0)})})},reset(){this.$refs.searchList.resetFields(),this.getLimitDay(),this.paginationConfig.pageIndex=1,this.refreshTableFlag=!0},showDetail(e){let t={tradeOrderId:e.tradeOrderId,identityId:this.identityId,identityType:"5000"};const a="/mainPage/identifierCenter/organizationInfo/organization/transactionDetail";this.openNewWindow({path:a,query:{params:encodeURIComponent(JSON.stringify(t))}})},reverse(e){let t={tradeOrderId:e.tradeOrderId,identityId:this.identityId,identityType:"5000"};const a="/mainPage/identifierCenter/organizationInfo/organization/transactionDetail";this.openNewWindow({path:a,query:{params:encodeURIComponent(JSON.stringify(t))}})},getTableData(){return new Promise(e=>{const{accountNo:t,accountTypeId:a}=this.currentAccount[0];let i={tradePartyId:this.identityId,identityType:"5000",accountNo:t,accountTypeId:a,oppositePartyId:this.formData.oppositePartyId,oppositePartyType:"8000"===this.formData.oppositePartyType?this.formData.oppositePartyType:"",completionTimeBegin:this.formData.completionTime[0],completionTimeEnd:this.formData.completionTime[1],transactionRole:this.formData.action.toString(),pageNo:this.paginationConfig.pageIndex,pageSize:this.paginationConfig.pageSize,startNumber:this.paginationConfig.pageIndex};Object(v["f"])(i).then(t=>{if(!t.header||!t.header.success)return!1;t.list=t.spOrderQueryDTOList||[],t.totalRecords=t.totalSize,e(t)}).catch(()=>{e()}).finally(()=>{this.refreshTableFlag=!1,this.searchLoading=!1})})},handleExport(e){let t={tradePartyId:this.identityId,identityType:"5000",accountType:this.currentAccount.length?this.currentAccount[0].accountTypeName:"",accountNo:this.currentAccount.length?this.currentAccount[0].accountNo:"",oppositePartyId:this.formData.oppositePartyId,oppositePartyType:"8000"==this.formData.oppositePartyType?this.formData.oppositePartyType:"",transactionRole:this.formData.action.toString(),initiatorIdentityId:"",serviceCodes:[],status:[],createTimeBegin:this.formData.completionTime[0],createTimeEnd:this.formData.completionTime[1],exportType:e,requestType:"accountTran",reasonType:"",currency:""};Object(v["c"])(t).then(t=>{if("Excel2007"===e?e="XLS":"Excel"===e&&(e="XLSX"),"application/json"===t.type){const e=new FileReader;e.readAsText(t);const a=this;e.onload=function(){const t=JSON.parse(e.result);a.$modal.msgError(t.header.responseDesc)}}else{const a=new Date,i=Object(b["a"])(a,"YYYYMMDDHHmmss"),o=new Blob([t],{type:"application/ms-excel"}),r=document.createElement("a");r.download="TRANSACTION_"+i+"."+e.toLowerCase(),r.style.display="none",r.href=URL.createObjectURL(o),document.body.appendChild(r),r.click(),URL.revokeObjectURL(r.href),document.body.removeChild(r)}}).catch().finally()}}},D=I,S=(a("4695"),Object(d["a"])(D,i,o,!1,null,"82493672",null));t["default"]=S.exports},bcaf:function(e,t,a){},bfbd:function(e,t,a){},c271:function(e,t,a){},c32d:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"business-portal-page"},[t("portal-header",{attrs:{projectObj:e.titleConfig}}),t("portal-form",{ref:"searchList",attrs:{"form-data":e.searchList,"form-rules":e.formRules,"form-config-list":e.formConfigList,searchBtnLoading:e.searchLoading},on:{"common-enter-event":e.search,"reset-btn-click":e.reset,"search-btn-click":e.search},scopedSlots:e._u([{key:"oppositeParty",fn:function(){return[t("el-row",{staticClass:"grouped-input",attrs:{gutter:4}},[t("el-col",{staticClass:"grouped-input-type",attrs:{span:e.handleSpanWidth}},[t("el-form-item",{attrs:{label:e.$t("IDC.accountStatement.oppositeParty"),prop:"oppositePartyType"}},[t("el-select",{attrs:{placeholder:e.$t("common.placeholder.select")},on:{change:e.handleSelect},model:{value:e.searchList.oppositePartyType,callback:function(t){e.$set(e.searchList,"oppositePartyType",t)},expression:"searchList.oppositePartyType"}},e._l(e.partySelectOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),e.showRightCode?t("el-col",{staticClass:"grouped-input-value",attrs:{span:16}},[t("el-form-item",{staticClass:"hidden-label",attrs:{label:e.oppositeInputTitleLabel,prop:"oppositeParty",required:e.oppositePartyRequired}},[t("el-input",{staticClass:"input-with-select",attrs:{placeholder:e.oppositeInputTitleLabel,readonly:"readonly"},on:{blur:function(t){return e.debitPartyShortCodeBlur(t)}},model:{value:e.searchList.oppositeParty,callback:function(t){e.$set(e.searchList,"oppositeParty",t)},expression:"searchList.oppositeParty"}},["all"!==e.searchList.oppositePartyType||"8000"!==e.searchList.oppositePartyType?t("i",{staticClass:"el-icon-more icon-cursor",attrs:{slot:"suffix"},on:{click:e.openDebitShortCodeDialog},slot:"suffix"}):e._e()])],1)],1):e._e()],1)]},proxy:!0}])}),t("entity-search-dialog",{attrs:{"dialog-title":e.entityDialogTitle,dialogVisible:e.dialogVisible,fieldName:e.inputField},on:{"update:dialogVisible":function(t){e.dialogVisible=t},"update:dialog-visible":function(t){e.dialogVisible=t},select:e.receiverSelected,onCloseDialog:e.closeCallBack}}),t("div",{staticClass:"table-list-container"},[t("el-dropdown",{on:{command:e.handleExportClick}},[t("el-button",{staticClass:"margin-bottom-16",attrs:{disabled:e.exportDisabled,type:"primary",size:"small"}},[e._v(" "+e._s(e.$t("common.button.export"))+" "),t("i",{staticClass:"el-icon-arrow-down el-icon--right",staticStyle:{"font-size":"12px"}})]),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",{attrs:{command:"Excel"}},[e._v("Excel")]),t("el-dropdown-item",{attrs:{command:"Excel2007"}},[e._v("Excel 2007")]),t("el-dropdown-item",{attrs:{command:"CSV"}},[e._v("CSV")]),t("el-dropdown-item",{attrs:{command:"PDF"}},[e._v("PDF")])],1)],1),t("table-page",{ref:"data-table",staticClass:"table-page",attrs:{size:"small","has-pagination":e.hasPagination,columns:e.columns,pagination:e.paginationConfig,getTableData:e.getTableData,"is-search":e.refreshTableFlag},scopedSlots:e._u([{key:"orderIdOperation",fn:function(a){return[t("el-button",{staticStyle:{padding:"0"},attrs:{type:"text"},on:{click:function(t){return e.showDetail(a.data.row)}}},[e._v(" "+e._s(a.data.row.tradeOrderId)+" ")])]}},{key:"operation",fn:function(a){return[e.isShowReverse(a.data.row)?t("el-button",{staticClass:"btn",staticStyle:{padding:"0"},attrs:{type:"text"},on:{click:function(t){return e.reverse(a.data.row)}}},[e._v(" "+e._s(e.$t("IDC.reviewTransaction.button.reverse"))+" ")]):e._e(),e.isShowProcess(a.data.row)?t("el-button",{staticClass:"btn",staticStyle:{padding:"0"},attrs:{type:"text"},on:{click:function(t){return e.goToProcessPage(a.data.row)}}},[e._v(" "+e._s(e.$t("common.button.process"))+" ")]):e._e()]}},{key:"transactionStatus",fn:function(a){return[t("span",{staticClass:"status-circle",style:e.statusStyle(a.data.row.transactionStatus)}),t("span",[e._v(e._s(a.data.row.transactionStatus))])]}}])})],1)],1)},o=[],r=a("c811"),s=a("4c09"),n=a("3186"),l=a("02e3"),c=a("2069"),d=a("5e70"),u=a("7dfc"),h=a("5a0c"),p=a.n(h);const m={all:"all",customer:"1000",group:"7000",organization:"5000",sp:"8000"};var f={name:"ReviewTrasaction",components:{PortalHeader:r["a"],TablePage:s["a"],PortalForm:n["a"],entitySearchDialog:c["a"]},props:{activeName:{type:String,default:""},identityId:{type:String,default:""}},data(){return{dialogVisible:!1,entityDialogTitle:"",inputField:"",handleSpanWidth:24,showRightCode:!1,partySelectOptions:[{label:"All",value:m.all},{label:"Organization",value:m.organization},{label:"Customer",value:m.customer},{label:"Group",value:m.group},{label:"SP",value:m.sp}],oppositeInputTitleLabel:"",oppositePartyRequired:!0,isSearchTableData:!1,identityType:"",searchLoading:!1,searchVisible:!1,refreshTableFlag:!1,hasPagination:!0,exportDisabled:!0,totalRecords:0,relatedAccountList:[],searchList:{queryMode:"1",initiationTime:this.getInitTime(),transactionStatus:"all",debit:"",relatedAccount:"",oppositeParty:"",oppositePartyId:"",oppositePartyType:"all",receiptNo:""},columns:[{label:this.$t("IDC.reviewTransaction.label.receiptNo"),prop:"tradeOrderId",align:"left",__slotName:"orderIdOperation","min-width":150},{label:this.$t("IDC.reviewTransaction.label.completionTime"),prop:"finishTime",align:"left","min-width":180},{label:this.$t("IDC.reviewTransaction.label.details"),prop:"details",align:"left","min-width":185},{label:this.$t("IDC.reviewTransaction.label.oppositeParty"),prop:"opposityPartyName",align:"left","min-width":185},{label:this.$t("IDC.reviewTransaction.label.transactionStatus"),prop:"transactionStatus",align:"left","min-width":150,__slotName:"transactionStatus"},{label:this.$t("IDC.reviewTransaction.label.currency"),prop:"transactionCurrency",align:"left","min-width":120},{label:this.$t("common.label.operation"),prop:"operation",align:"left",fixed:"right",__slotName:"operation","min-width":93}],modeOptions:[{label:"Transactions as Debit/Credit Party",value:"1"},{label:"Transactions as Receipt No.",value:"2"}],statusOptions:[{label:"All",value:"all"},{label:"Authorized",value:"Authorized"},{label:"Pending Authorized",value:"Pending Authorized"},{label:"Refund Pending Authorized",value:"Refund Pending Authorized"},{label:"Completed",value:"Completed"},{label:"Cancelled",value:"Cancelled"},{label:"Declined",value:"Declined"},{label:"Expired",value:"Expired"},{label:"Refunded",value:"Refunded"}],debitOptions:[{label:"Both",value:""},{label:"Debit",value:"1"},{label:"Credit",value:"0"}],relatedAccountOptions:[{label:"All",value:""}],oppositePartyOptions:[{label:"All",value:""},{label:"Customer",value:"10"},{label:"Group",value:"30"},{label:"Organization",value:"50"},{label:"SP",value:"00"}],paginationConfig:{total:0,pageIndex:1,pageSize:10},formRules:{queryMode:[l["z"]],initiationTime:[l["z"]],transactionStatus:[l["z"]],receiptNo:[l["w"]]},pickerOptions:{disabledDate:e=>{let t=p()().startOf("date").subtract(1,"month"),a=p()().endOf("date");return e.getTime()<t||e.getTime()>a}}}},computed:{titleConfig(){return{title:this.$t("IDC.reviewTransaction.pageTitle"),desc:this.$t("IDC.reviewTransaction.pageDesc")}},formConfigList(){return"2"===this.searchList.queryMode?this.receiptNoConfigList:this.debitPartyConfigList},receiptNoConfigList(){return[{label:this.$t("IDC.reviewTransaction.label.queryMode"),key:"queryMode",comp:"el-select",options:this.modeOptions,bind:{placeholder:this.$t("common.placeholder.select"),id:"queryMode"}},{label:this.$t("IDC.reviewTransaction.label.receiptNo"),key:"receiptNo",comp:"el-input",bind:{placeholder:this.$t("common.placeholder.enter"),id:"receiptNo"}}]},debitPartyConfigList(){return[{label:this.$t("IDC.reviewTransaction.label.queryMode"),key:"queryMode",comp:"el-select",options:this.modeOptions,bind:{placeholder:this.$t("common.placeholder.select"),id:"queryMode"}},{formItemClass:"form-special-date-box",sameGroup:!0,align:"left",label:this.$t("IDC.reviewTransaction.label.initiationTime"),description:this.$t("IDC.reviewTransaction.label.initiationTimeDesc"),prop:"initiationTime",comp:[{key:"initiationTime",comp:"el-date-picker",bind:{id:"initiationTime",type:"datetimerange",format:"dd/MM/yyyy HH:mm:ss","range-separator":"~","default-time":["00:00:00","23:59:59"],"start-placeholder":"Please select","end-placeholder":"Please select","picker-options":this.pickerOptions}},{comp:"i",class:"el-icon-date data_icon"}]},{label:this.$t("IDC.reviewTransaction.label.transactionStatus"),key:"transactionStatus",comp:"el-select",options:this.statusOptions,bind:{placeholder:this.$t("common.placeholder.select"),id:"transactionStatus"}},{label:this.$t("IDC.reviewTransaction.label.debit"),key:"debit",comp:"el-select",options:this.debitOptions,bind:{placeholder:this.$t("common.placeholder.select"),id:"debit"}},{label:this.$t("IDC.reviewTransaction.label.relatedAccount"),key:"relatedAccount",comp:"el-select",options:this.relatedAccountOptions,bind:{placeholder:this.$t("common.placeholder.select"),id:"relatedAccount"}},{slotName:"oppositeParty"}]},statusStyle(){return e=>{switch(e){case"Initiated":return{"background-color":""+this.GlobalStyleVariables.initialColor};case"Completed":return{"background-color":""+this.GlobalStyleVariables.statusSuccessColor};case"Pending":case"Authorized":case"Pending_Authorized":case"Refund":return{"background-color":""+this.GlobalStyleVariables.statusColorSAecondaryWarning};case"cancelled":case"Declined":case"Expired":return{"background-color":""+this.GlobalStyleVariables.statusDark};default:return{"background-color":""+this.GlobalStyleVariables.statusNoticeColor}}}}},watch:{"searchList.queryMode":{handler(){this.$refs["searchList"].clearValidate()},deep:!0},"searchList.oppositePartyType":{handler(e){this.searchList.oppositeParty="",e===m.all&&(this.showRightCode=!1,this.handleSpanWidth=24),e===m.organization?(this.oppositeInputTitleLabel=this.$t("TRC.reviewTransaction.label.shortCode"),this.handleSpanWidth=8,this.showRightCode=!0):e===m.customer?(this.oppositeInputTitleLabel=this.$t("TRC.reviewTransaction.label.MSISDN"),this.handleSpanWidth=8,this.showRightCode=!0):e===m.group?(this.oppositeInputTitleLabel=this.$t("TRC.reviewTransaction.label.groupCode"),this.handleSpanWidth=8,this.showRightCode=!0):e===m.sp&&(this.handleSpanWidth=24,this.showRightCode=!1)},immediate:!0,deep:!0}},created(){"orgOperator"===this.activeName?this.identityType="3000":this.identityType="5000"},activated(){},mounted(){this.getRelatedAccountOptions()},methods:{openDebitShortCodeDialog(){"1000"===this.searchList.oppositePartyType||"5000"===this.searchList.oppositePartyType||"7000"===this.searchList.oppositePartyType?this.dialogVisible=!0:this.dialogVisible=!1},receiverSelected(e){const t={msisdn:"identityId",shortCode:"organizationId",groupCode:"identityId"};this.searchList.oppositeParty=e[this.inputField],this.searchList.oppositePartyId=e[t[this.inputField]]},closeCallBack(e){this.dialogVisible=e},handleSelect(e){switch(this.searchList.oppositeParty="",this.searchList.oppositePartyId="",e){case"1000":this.entityDialogTitle="Select Customer",this.inputField="msisdn";break;case"5000":this.entityDialogTitle="Select Organization",this.inputField="shortCode";break;case"7000":this.entityDialogTitle="Select Group Code",this.inputField="groupCode";break}},debitPartyShortCodeBlur(e){e.target.value},getInitTime(){let e=new Date(p()().startOf("date").subtract(1,"month")),t=new Date(p()().endOf("date"));return[e,t]},isShowReverse(e){return!!e.reverseMode&&(("Paid"===e.transactionStatus||"Completed"===e.transactionStatus)&&"A"!==e.reverseMode)},isShowProcess(e){return"Authorized"===e.transactionStatus||"Pending Authorized"===e.transactionStatus},async getRelatedAccountOptions(){let e={identityId:this.identityId},t=await Object(d["j"])(e);t.list&&t.list.length>0&&(this.relatedAccountList=t.list,t.list.forEach(e=>{this.relatedAccountOptions.push({label:e.accountName,value:e.accountNo})}))},reset(){this.clearSearchListData(),this.search()},clearSearchListData(){this.searchList.initiationTime=this.getInitTime(),this.searchList.transactionStatus="all",this.searchList.debit="",this.searchList.relatedAccount="",this.searchList.oppositeParty="",this.searchList.receiptNo=""},search(){this.searchLoading=!0,this.$refs["searchList"].innerFormRef.validate(e=>{e?(this.paginationConfig={total:0,pageIndex:1,pageSize:10},this.refreshTableFlag=!0):this.searchLoading=!1})},showDetail(e){let t={tradeOrderId:e.tradeOrderId,identityId:this.identityId,identityType:this.identityType,status:e.transactionStatus,type:"detail",from:"transaction"};const a="/mainPage/identifierCenter/organizationInfo/organization/transactionDetail";this.openNewWindow({path:a,query:{params:encodeURIComponent(JSON.stringify(t))}})},reverse(e){let t={tradeOrderId:e.tradeOrderId,identityId:this.identityId,identityType:this.identityType,type:"reverse",from:"transaction"};const a="/mainPage/identifierCenter/organizationInfo/organization/transactionDetail";this.openNewWindow({path:a,query:{params:encodeURIComponent(JSON.stringify(t))}})},goToProcessPage(e){let t={tradeOrderId:e.tradeOrderId,identityId:this.identityId,identityType:this.identityType,type:"process",from:"transaction"};const a="/mainPage/identifierCenter/organizationInfo/organization/transactionDetail";this.openNewWindow({path:a,query:{params:encodeURIComponent(JSON.stringify(t))}})},getTableData(){let e={identityType:this.identityType,tradePartyId:this.identityId,createTimeBegin:this.searchList.initiationTime?p()(this.searchList.initiationTime[0]).format("YYYY-MM-DD HH:mm:ss"):"",createTimeEnd:this.searchList.initiationTime?p()(this.searchList.initiationTime[1]).format("YYYY-MM-DD HH:mm:ss"):"",accountNo:this.searchList.relatedAccount,oppositePartyId:this.searchList.oppositePartyId,oppositePartyType:"8000"===this.searchList.oppositePartyType?this.searchList.oppositePartyType:"",transactionRole:this.searchList.debit,status:"all"===this.searchList.transactionStatus?[]:[this.searchList.transactionStatus],startNumber:this.paginationConfig.pageIndex,pageSize:this.paginationConfig.pageSize};return"2"===this.searchList.queryMode&&(e={identityType:this.identityType,tradePartyId:this.identityId,startNumber:this.paginationConfig.pageIndex,pageSize:this.paginationConfig.pageSize,tradeOrderId:this.searchList.receiptNo}),this.searchLoading=!0,new Promise(t=>{Object(d["r"])(e).then(e=>{e.header&&e.header.success?(e.totalRecords=e.totalSize||0,e.list=e.spOrderQueryDTOList||[],e.list=e.list.map(e=>(e.finishTime&&(e.finishTime=p()(e.finishTime).format("DD/MM/YYYY HH:mm:ss")),e))):(e.totalRecords=0,e.list=[]),this.exportDisabled=!(e.list.length>0),t(e)}).catch(()=>{t()}).finally(()=>{this.refreshTableFlag=!1,this.searchLoading=!1})})},handleExportClick(e){this.$refs["searchList"].validate(t=>{if(t){let t=this.relatedAccountList.filter(e=>e.accountNo===this.searchList.relatedAccount),a={tradePartyId:this.identityId,identityType:this.identityType,accountType:t.length?t[0].accountTypeId:"",accountNo:t.length?t[0].accountNo:"",oppositePartyId:this.searchList.oppositePartyId,oppositePartyType:"8000"===this.searchList.oppositePartyType?this.searchList.oppositePartyType:"",transactionRole:"both"===this.searchList.debit?"":this.searchList.debit,initiatorIdentityId:"",serviceCodes:[],status:"all"==this.searchList.transactionStatus?[]:[this.searchList.transactionStatus],createTimeBegin:this.searchList.initiationTime?p()(this.searchList.initiationTime[0]).format("YYYY-MM-DD HH:mm:ss"):"",createTimeEnd:this.searchList.initiationTime?p()(this.searchList.initiationTime[1]).format("YYYY-MM-DD HH:mm:ss"):"",exportType:e,requestType:"allTran",reasonType:"",currency:""};"2"===this.searchList.queryMode&&(a={identityType:this.identityType,tradePartyId:this.identityId,tradeOrderId:this.searchList.receiptNo}),Object(d["c"])(a).then(t=>{if("Excel2007"===e?e="XLS":"Excel"===e&&(e="XLSX"),"application/json"===t.type){const e=new FileReader;e.readAsText(t);const a=this;e.onload=function(){const t=JSON.parse(e.result);a.$modal.msgError(t.header.responseDesc)}}else{const a=new Date,i=Object(u["a"])(a,"YYYYMMDDHHmmss"),o=new Blob([t],{type:"application/ms-excel"}),r=document.createElement("a");r.download="TRANSACTION_"+i+"."+e.toLowerCase(),r.style.display="none",r.href=URL.createObjectURL(o),document.body.appendChild(r),r.click(),URL.revokeObjectURL(r.href),document.body.removeChild(r)}}).catch().finally()}})}}},b=f,g=(a("88cd"),a("2877")),y=Object(g["a"])(b,i,o,!1,null,"1413b048",null);t["default"]=y.exports},c652:function(e,t,a){"use strict";var i=a("9cfe");class o{constructor(){this.amountUnitList="",this.initAmountUnit()}format(e,t){let a="",i=Number(e),o=parseFloat(i.toFixed(2)).toLocaleString(),r=o.lastIndexOf(".");if(""!==this.amountUnitList)for(let n in this.amountUnitList)n=="en;1005;"+t&&(a=this.amountUnitList[n].symbol);else a="";if(-1===r)return a+o+".00";let s=o.slice(r+1).length;return`${a+o}${1===s?"0":""}`}getCurrency(e){if(""!==this.amountUnitList){let t;for(let a in this.amountUnitList)if(a==="en;1005;"+e){t=this.amountUnitList[a];break}return t}}async initAmountUnit(){this.amountUnitList=await Object(i["c"])()}}t["a"]=new o},c6ed:function(e,t,a){},c796:function(e,t,a){},cbb5:function(e,t,a){"use strict";a("6fac")},cf2e:function(e,t,a){"use strict";a("bcaf")},d1c7:function(e,t,a){"use strict";a("f6e0")},d3d3:function(e,t,a){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"footer-tap-button"},[t("div",{staticClass:"footer-tap-content",class:{"has-sidebar":e.hasSidebar}},[e.showCancel?t("el-button",{attrs:{id:"reset",type:"primary",plain:"",size:"small"},on:{click:e.resetHndle}},[e._v(e._s(e.$t("common.button.cancel")))]):e._e(),e.showCancel||e.hasOnlySubmitBtn?e._e():t("el-button",{attrs:{id:"reset",type:"primary",plain:"",size:"small"},on:{click:e.resetHndle}},[e._v(e._s(e.$t("common.button.reset")))]),e.showPrevious?t("el-button",{attrs:{id:"previous",size:"small",type:"primary",plain:""},on:{click:e.previousHandle}},[e._v(e._s(e.$t("common.button.prevent"))+" ")]):e._e(),e.showNext?t("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{id:"next",size:"small",type:"primary",disabled:e.submitDisabled,loading:e.submitLoading},on:{click:e.nextHandle}},[e._v(e._s(e.$t("common.button.next")))]):t("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{id:"Submit",size:"small",type:"primary",disabled:e.submitDisabled,loading:e.submitLoading},on:{click:e.submitHanle}},[e._v(" "+e._s(e.$t("common.button.submit"))+" ")])],1)])},o=[],r={name:"footer-tap-button",props:{activeName:{type:String,default:""},steps:{type:Array,default:()=>[]},submitLoading:{type:Boolean,default:!1},submitDisabled:{type:Boolean,default:!1},showCancel:{type:Boolean,default:!1},hasSidebar:{type:Boolean,default:!1},hasOnlySubmitBtn:{type:Boolean,default:!1}},data(){return{inputeValue:"",showQuickLinks:!1}},computed:{showNext(){const{steps:e,activeName:t}=this;return e.length&&e[e.length-1].name!==t},showPrevious(){const{steps:e,activeName:t}=this;return e.length&&e[0].name!==t}},methods:{resetHndle(){this.$emit("reset")},nextHandle(){this.$emit("next")},previousHandle(){this.$emit("previous")},submitHanle(){this.$emit("submit")}}},s=r,n=(a("67d5"),a("9cd1"),a("2877")),l=Object(n["a"])(s,i,o,!1,null,"6b579326",null);t["a"]=l.exports},d537:function(e,t,a){"use strict";a("e6d1")},d654:function(e,t,a){},d7ca:function(e,t,a){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"group-detail-page"},[t("div",[t("div",{staticClass:"panel"},[t("div",{staticClass:"panel-left"},[t("menu-list",{attrs:{"data-list":e.menuList,"show-keys":["name"],activeIndex:e.activeName,useLink:!1},on:{"list-change":e.handleChange}}),t("div",{staticClass:"left-mask"})],1),t("div",{staticClass:"panel-middle"}),t("div",{staticClass:"panel-right"},[t("transition",{attrs:{name:"load-transform",mode:"out-in"}},[t(e.curComponentName,e._b({tag:"component"},"component",e.getOptions,!1))],1)],1)])])])},o=[],r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"menu-detail"},[t("el-scrollbar",{attrs:{"wrap-class":"scrollbar-wrapper"}},[t("el-menu",{staticClass:"el-menu",attrs:{"default-active":e.active,"default-openeds":e.openeds},on:{select:e.handleSelect}},e._l(e.dataList,(function(a,i){return t("el-submenu",{key:i+"",attrs:{index:i+""}},[t("template",{slot:"title"},[t("span",[e._v(e._s(a.name||a.label))])]),e._l(e.dataList[i].subMenu,(function(a,i){return t("el-menu-item",{key:i+"",attrs:{index:a.label}},[t("div",{attrs:{title:a[e.showKey1]}},[t("div",{staticClass:"item_name item_num_active"},[e._v(e._s(a[e.showKey1]||a.name))])])])}))],2)})),1)],1)],1)},s=[],n={name:"MenuList",props:{activeIndex:{type:String,default:""},dataList:{type:Array,default:()=>[]},showKeys:{type:Array,default:()=>[]},type:{type:String,default:"normal"}},data(){return{active:this.dataList[0][this.showKey1]}},computed:{showKey1(){return this.showKeys[0]||""},showKey2(){return this.showKeys[1]||""},showKey3(){return this.showKeys[2]||""},openeds(){return this.dataList.map((e,t)=>""+t)}},watch:{activeIndex:{handler(e){this.active=e+""},immediate:!0}},methods:{handleSelect(e,t){const{dataList:a}=this,{subMenu:i}=a[t[0]];let o=i.filter(t=>t.label===e)[0]||{};this.$emit("update:activeIndex",e),this.$emit("list-change",o)}}},l=n,c=(a("2c86"),a("ad21"),a("2877")),d=Object(c["a"])(l,r,s,!1,null,"30356d40",null),u=d.exports,h={name:"detailPage",components:{MenuList:u},provide(){return{detailRoot:this}},data(){return{activeName:"",curComponentName:"",params:{},routeParams:{},menuList:[]}},computed:{getOptions(){return Object.assign(this.routeParams,this.params)}},created(){},activated(){this.init()},methods:{init(){const e=this.getRouteParam()||{};this.params=e,this.routeParams=e,e.activeName&&(this.activeName=e.activeName,this.setCurComponentName(this.activeName))},setCurComponentName(){},getRouteParam(){let e=this.$route.query.data;return e?(e=decodeURIComponent(e),e?JSON.parse(e):null):null}}},p=h,m=(a("f8e6b"),a("b6fc"),Object(c["a"])(p,i,o,!1,null,"658c47b6",null));t["a"]=m.exports},d964:function(e,t,a){"use strict";a("c271")},dbea:function(e,t,a){"use strict";var i=function(){var e=this,t=e._self._c;return t("el-dialog",e._g(e._b({staticClass:"portal-dialog",attrs:{"destroy-on-close":!0,visible:e.showDialog,title:e.conf.title,width:e.width,"close-on-click-modal":e.closeOnClickModal,"show-close":e.showClose,"before-close":e.beforeClose},on:{"update:visible":function(t){e.showDialog=t},open:e.open,close:e.close,opened:e.opened,closed:e.closed}},"el-dialog",e.$attrs,!1),e.$listeners),[t("el-form",{ref:"dialog-form",attrs:{model:e.dialogForm,rules:e.validationRules}},[t("section",[t("div",{staticClass:"label"},[e._v(e._s(e.conf.label))]),t("div",{staticClass:"value"},[e._v(e._s(e.conf.value))]),e._l(e.props,(function(a){return t("el-form-item",e._b({key:a.key,class:[a.validateStatus,a.itemClass],attrs:{label:a.label,prop:a.key}},"el-form-item",a.itemBind,!1),["select"===a.type?t("el-select",{attrs:{size:"small",placeholder:"Please select"},model:{value:e.dialogForm[a.key],callback:function(t){e.$set(e.dialogForm,a.key,t)},expression:"dialogForm[prop.key]"}},e._l(a.options,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1):"input"===a.type?t("el-input",e._b({class:a.eleClass,attrs:{size:"small",placeholder:"Please enter the content"},model:{value:e.dialogForm[a.key],callback:function(t){e.$set(e.dialogForm,a.key,t)},expression:"dialogForm[prop.key]"}},"el-input",a.elementBind,!1)):"textarea"===a.type?t("el-input",{attrs:{type:"textarea",rows:3,placeholder:"Please enter"},model:{value:e.dialogForm[a.key],callback:function(t){e.$set(e.dialogForm,a.key,t)},expression:"dialogForm[prop.key]"}}):e._e()],1)}))],2),t("section",[t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{staticClass:"btn-option",attrs:{size:"small",plain:""},on:{click:e.cancel}},[e._v("Cancel")]),t("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.submitLoading,expression:"submitLoading"},{name:"preventReClick",rawName:"v-preventReClick"}],staticClass:"btn-option",attrs:{size:"small",type:"primary"},on:{click:function(t){return e.submit(e.conf.prop)}}},[e._v("Submit")])],1)])])],1)},o=[],r=a("ac21"),s={name:"ContentItemEditDialog",props:{visible:{type:Boolean,default:!0},submitLoading:{type:Boolean,default:!1},title:{type:String,default:""},width:{type:String,default:"448px"},closeOnClickModal:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},config:{type:Object,default:()=>{}},data:{type:Object,default:()=>{}}},data(){return{showDialog:!1,dialogForm:{},conf:{},props:[],text:"",validationRules:{}}},watch:{visible:{handler(e){this.showDialog=e},immediate:!0},config:{handler(e){if(e&&(this.conf=JSON.parse(JSON.stringify(e))||{},this.conf.properties&&this.conf.properties.length)){const e=this.conf.properties,t={};for(const a of e)a.useDefult&&(t[a.key]=a.default);this.dialogForm=t,this.props=e,this.validationRules=Object(r["a"])(this.props),this.$forceUpdate()}},immediate:!0,deep:!0},showDialog:{handler(e){this.$nextTick(()=>{this.$refs["dialog-form"]&&this.$refs["dialog-form"].clearValidate(),this.$emit("show-dialog",e),this.$emit("update:visible",e)})},immediate:!0}},created(){},activated(){},methods:{beforeClose(){this.close()},open(){},opened(){},close(){this.showDialog=!1,this.$refs["dialog-form"].resetFields()},closed(){},cancel(){this.close()},submit(e){this.$refs["dialog-form"].validate(t=>{t&&this.$emit("on-submit",e,this.dialogForm)})}}},n=s,l=(a("4d86"),a("2877")),c=Object(l["a"])(n,i,o,!1,null,"08488c31",null);t["a"]=c.exports},e036:function(e,t,a){"use strict";a.d(t,"c",(function(){return o})),a.d(t,"d",(function(){return r})),a.d(t,"e",(function(){return s})),a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return l})),a.d(t,"f",(function(){return c}));var i=a("0bbd");function o(e){return Object(i["a"])({url:"/fintech/v1/settlement/revenue/org/queryOrgRevenueProfile",method:"post",data:e})}function r(e){return Object(i["a"])({url:"/fintech/v1/settlement/revenue/org/queryOrgRevenueTemplateNames",method:"post",data:e})}function s(e){return Object(i["a"])({url:"/fintech/v1/settlement/revenue/org/saveOrgRevenueProfile",method:"post",data:e})}function n(e){return Object(i["a"])({url:"/fintech/v1/settlement/queryCommissionCfg",method:"post",data:e})}function l(e){return Object(i["a"])({url:"/fintech/v1/settlement/dict/query",method:"post",data:e})}function c(e){return Object(i["a"])({url:"/fintech/v1/settlement/updateOrgCommiAgreement",method:"post",data:e})}},e6d1:function(e,t,a){},e850:function(e,t,a){"use strict";a("acdd")},e863:function(e,t,a){"use strict";a.d(t,"r",(function(){return r})),a.d(t,"p",(function(){return s})),a.d(t,"d",(function(){return n})),a.d(t,"m",(function(){return l})),a.d(t,"f",(function(){return c})),a.d(t,"g",(function(){return d})),a.d(t,"h",(function(){return u})),a.d(t,"i",(function(){return h})),a.d(t,"c",(function(){return p})),a.d(t,"j",(function(){return m})),a.d(t,"k",(function(){return f})),a.d(t,"o",(function(){return b})),a.d(t,"l",(function(){return g})),a.d(t,"n",(function(){return y})),a.d(t,"q",(function(){return v})),a.d(t,"a",(function(){return C})),a.d(t,"b",(function(){return I})),a.d(t,"e",(function(){return D}));var i=a("0bbd"),o=a("5f9a");function r(e){return Object(i["a"])({url:"/fintech/v1/till/queryBusinessTillList",method:"post",data:e})}function s(e){return Object(i["a"])({url:"/fintech/v1/till/query",method:"post",data:e})}function n(e){return Object(i["a"])({url:"/fintech/v1/till/create",method:"post",data:e})}function l(e){return Object(i["a"])({url:"/fintech/v1/till/dcc/queryProduct",method:"post",data:e})}function c(e){return Object(i["a"])({url:"/fintech/v1/till/changeTillDeviceService",method:"post",data:e})}function d(e){return Object(i["a"])({url:"/fintech/v1/till/changeStatus",method:"post",data:e})}function u(e){return Object(i["a"])({url:"/fintech/v1/till/changeLanguage",method:"post",data:e})}function h(e){return Object(i["a"])({url:"/fintech/v1/till/changeTillOperatorId",method:"post",data:e})}function p(e){return Object(i["a"])({url:"/fintech/v1/till/close",method:"post",data:e})}function m(e){return Object(i["a"])({url:"/fintech/v1/till/changeTillProduct",method:"post",data:e})}function f(e){return Object(i["a"])({url:"/fintech/v1/till/getLanguages",method:"post",data:e})}function b(e){return Object(i["a"])({url:"/fintech/v1/till/queryOrgOperatorIdList",method:"post",data:e})}function g(e){return Object(i["a"])({url:Object(o["a"])("/fintech/v1/organization/list",e),method:"get"})}function y(e){return Object(i["a"])({url:"/fintech/v1/till/loadRangeDcc",method:"post",data:e})}function v(e){return Object(i["a"])({url:"/fintech/v1/till/queryTillProductList",data:e,method:"post"})}function C(e){return Object(i["a"])({url:"/fintech/v1/till/checkRangeDcc",method:"post",data:e})}function I(e){return Object(i["a"])({url:"/fintech/v1/till/checkTill",method:"post",data:e})}function D(e){return Object(i["a"])({url:"/fintech/v1/till/defaultOperatorIdRule",method:"get",data:e})}},e867:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",[t("portal-header",{class:e.isShowheaderTitle(),attrs:{projectObj:e.titleConfig}}),t("div",{staticClass:"table-search-container"},[!e.isOrganization||e.activeName?t("el-divider",{staticClass:"header-divider"}):e._e(),t("el-collapse-transition",[t("portal-form",{directives:[{name:"show",rawName:"v-show",value:e.collapseValue,expression:"collapseValue"}],ref:"tillForm",class:e.isOrganization&&!e.activeName?"till-portal-form":"",attrs:{needBottomLine:!1,"form-data":e.tillForm,"form-rules":e.tillFormRules,"form-config-list":e.formConfigArray,searchBtnLoading:e.searchLoading,searchBtnDisabled:!e.hasPerm("IC_TILL_MANAGE_SEARCH_BTN")},on:{"common-enter-event":e.searchTill,"reset-btn-click":e.reset,"search-btn-click":e.searchTill}})],1)],1),t("div",{staticClass:"till-table-list"},[t("el-divider"),t("el-button",{attrs:{disabled:!e.hasPerm("IC_TILL_ADDBASICINFO_NEXT_BTN"),icon:"el-icon-plus",size:"small",type:"primary"},on:{click:e.createTill}},[e._v(" "+e._s(e.$t("common.button.create"))+" ")]),t("table-page",{staticClass:"margin-top-16",attrs:{size:"small","has-pagination":!0,isSearch:e.isSearch,columns:e.isOrganization?e.isOrgCokumns:e.tillColumns,pagination:e.paginationConfig,getTableData:e.getTableData,"initializing-loading":e.fristSearchMap,sortArr:["status","shortCode","msisdn","tillNumber"]},scopedSlots:e._u([{key:"status",fn:function(a){return[t("div",{staticClass:"flex flex-align"},[""!==a.data.row.status?t("span",{staticClass:"status-circle",style:e.statusStyle(a.data.row.status)}):e._e(),t("span",[e._v(e._s(e.showStatus(a.data.row.status)))]),"03"==a.data.row.status||"05"==a.data.row.status?t("i",{staticClass:"el-icon-black-edit icon-cursor margin-left-12",attrs:{id:"language"},on:{click:function(t){return e.handleEditStatus(a.data.row)}}}):e._e()])]}},{key:"operation",fn:function(a){return[t("el-button",{staticClass:"table-operation-btn icon-cursor operation-button",attrs:{size:"mini",type:"text"},on:{click:function(t){return e.handleDetail(a.data.row)}}},[e._v(" "+e._s(e.$t("common.button.detail"))+" ")]),"03"==a.data.row.status||"05"==a.data.row.status?t("el-button",{staticClass:"table-operation-btn icon-cursor",attrs:{size:"mini",type:"text"},on:{click:function(t){return e.showColose(a.data.row)}}},[e._v(" "+e._s(e.$t("common.button.close"))+" ")]):e._e()]}}])})],1),t("close-dialog",{attrs:{closeData:e.closeData,closeDialog:e.closeDialog},on:{ishow:e.ishow,"update:closeDialog":function(t){e.closeDialog=t},"update:close-dialog":function(t){e.closeDialog=t},closeSubmit:e.closeSubmit}}),t("portal-short-code",{ref:"selectShortCode",attrs:{"invoking-flag":"createOrgOperator",searchVisible:e.searchVisible,"merchant-id":e.tillFormData.merchantId,"short-code":e.tillForm.orgshortcode,isSelect:!0},on:{"update:searchVisible":function(t){e.searchVisible=t},"update:search-visible":function(t){e.searchVisible=t},"update:merchantId":function(t){return e.$set(e.tillFormData,"merchantId",t)},"update:merchant-id":function(t){return e.$set(e.tillFormData,"merchantId",t)},"update:shortCode":function(t){return e.$set(e.tillForm,"orgshortcode",t)},"update:short-code":function(t){return e.$set(e.tillForm,"orgshortcode",t)}}}),t("edit-status",{ref:"editStatus",on:{closeStatusDialog:e.closeStatusDialog}}),t("portal-add-popup",{attrs:{id:"popup-product",isCheck:!0,isSingleCheck:!0,isCheckMemory:!0,hasCheckBox:!1,searchVisible:e.addProductVisible,addForm:e.addForm,childSearch:e.loadProduct,"init-checks":e.initCheckList,"has-pagination":!0},on:{"update:searchVisible":function(t){e.addProductVisible=t},"update:search-visible":function(t){e.addProductVisible=t},"submit-call-back":e.selectProductList}})],1)},o=[],r=a("3213"),s=a("c811"),n=a("0cbd"),l=a("4c09"),c=a("3186"),d=a("e863"),u=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{visible:e.isShow,title:e.$t("IDC.till.closeTillTitle"),width:"448px",top:"29vh",height:"342","close-on-click-modal":!1,"before-close":e.closeService},nativeOn:{submit:function(e){e.preventDefault()}}},[t("h1",{staticClass:"dialog-title"},[e._v(e._s(e.$t("IDC.till.closeTill")+" "+e.closeData.tillNumber+" ?"))]),t("el-divider"),t("el-form",{ref:"tillDialog",attrs:{rules:e.rules,"label-position":"top",model:e.submitData}},[t("el-form-item",{attrs:{label:"Remark",prop:"remark"}},[t("el-input",{attrs:{type:"textarea",rows:5,resize:"none",placeholder:"Please enter "},model:{value:e.submitData.remark,callback:function(t){e.$set(e.submitData,"remark",t)},expression:"submitData.remark"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{staticClass:"btn-cancel",on:{click:function(t){return e.closeService()}}},[e._v(e._s(e.$t("common.button.cancel")))]),t("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{type:"primary",loading:e.submitLoading,size:"small"},on:{click:function(t){return e.submitService()}}},[e._v(e._s(e.$t("common.button.confirm")))])],1)],1)},h=[],p=a("02e3"),m={name:"closeDialog",props:{closeDialog:{type:Boolean,default:!1},closeData:{type:Object}},data(){return{rules:{remark:[p["e"]]},submitLoading:!1,isShow:this.closeDialog,submitData:{remark:""}}},watch:{closeDialog(e){this.isShow=e}},computed:{},methods:{closeService(){this.$refs.tillDialog.resetFields(),this.isShow=!1,this.$emit("ishow",!1)},submitService(){this.$refs["tillDialog"].validate(e=>{if(e){let e={receiverIdentityId:this.closeData.identityId,remark:this.submitData.remark};this.submitLoading=!0,Object(d["c"])(e).then(e=>{e.header&&e.header.success?(this.$modal.msgSuccess(`Till "${this.closeData.tillNumber}" closed successfully.`),this.closeService(),this.$emit("closeSubmit")):this.closeService(),this.submitLoading=!1})}})}},mounted(){}},f=m,b=(a("f8bd"),a("2877")),g=Object(b["a"])(f,u,h,!1,null,"4ea12e7c",null),y=g.exports,v=a("8f48"),C=a("4c1d"),I=a("d8d3");const D=[{label:"MSISDN",value:"0"},{label:"Till Number + Organization Short Code",value:"1"},{label:"Product",value:"2"},{label:"Status",value:"3"}];var S={name:"TillList",components:{TablePage:l["a"],PortalHeader:s["a"],PortalForm:c["a"],closeDialog:y,portalShortCode:v["a"],EditStatus:C["a"],PortalAddPopup:n["a"]},props:{activeName:{type:Boolean,default:!1},isOrganization:{type:Boolean,default:!1}},data(){return{fristSearch:!1,isOrganizationPage:this.isOrganization,queryConditionSelectOptions:D,searchVisible:!1,tillFormData:{orgshortcode:"",merchantId:""},addProductVisible:!1,closeData:{identityId:"",tillNumber:""},closeDialog:!1,total:0,pageNo:1,pageSize:10,tillForm:{msisdn:"%",tillNumber:"%",orgshortcode:"",status:"All",productName:"",queryCondition:"0"},addForm:{title:this.$t("IDC.till.selectProduct"),label:"",idKey:"productIndex",key:"till",columns:[{label:this.$t("IDC.till.productName"),prop:"productName",align:"left"},{label:this.$t("IDC.till.description"),prop:"description",align:"left"}],searchForm:{formData:{producrName:""},formConf:[{label:this.$t("IDC.till.productName"),key:"producrName",prop:"producrName",comp:"el-input",bind:{clearable:!0,placeholder:this.$t("common.placeholder.enter")}}]}},searchLoading:!1,tills:[],paginationConfig:{total:0,pageIndex:1,pageSize:10},initCheckList:[],productIndex:"",isOrgCokumns:[{"sort-method":(e,t)=>e.tillNumber>t.tillNumber?1:-1,label:this.$t("IDC.till.tillNumber"),prop:"tillNumber",align:"left"},{"sort-method":(e,t)=>e.msisdn>t.msisdn?1:-1,label:this.$t("IDC.till.msisdn"),prop:"msisdn",align:"left"},{label:this.$t("common.label.status"),prop:"status","sort-method":(e,t)=>e.status>t.status?1:-1,align:"left",__slotName:"status"},{label:this.$t("common.label.operation"),prop:"operation",align:"left",__slotName:"operation",width:200}],tillColumns:[{"sort-method":(e,t)=>e.shortCode>t.shortCode?1:-1,label:this.$t("IDC.till.organizationShortCode"),prop:"shortCode",align:"left"},{"sort-method":(e,t)=>e.tillNumber>t.tillNumber?1:-1,label:this.$t("IDC.till.tillNumber"),prop:"tillNumber",align:"left"},{"sort-method":(e,t)=>e.organizationName>t.organizationName?1:-1,label:this.$t("IDC.till.organizationName"),prop:"organizationName",align:"left"},{"sort-method":(e,t)=>e.msisdn>t.msisdn?1:-1,label:this.$t("IDC.till.msisdn"),prop:"msisdn",align:"left"},{label:this.$t("common.label.status"),prop:"status","sort-method":(e,t)=>e.status>t.status?1:-1,align:"left",__slotName:"status"},{label:this.$t("common.label.operation"),prop:"operation",align:"left",fixed:"right",__slotName:"operation",width:"160"}],isSearch:!1,collapseValue:!0,hasPagination:!0,titleConfig:{title:this.$t("IDC.till.pageTitle"),desc:this.$t("IDC.till.createTitle")}}},watch:{"tillForm.orgshortcode":{handler(e){e||(this.tillFormData={orgshortcode:"",merchantId:""})}},"tillForm.productName":{handler(e){e||(this.productIndex="")}},isOrganization(e){this.isOrganizationPage=e}},computed:{statusOptions(){let e=[{label:"Active",value:"03"},{label:"Closed",value:"06"},{label:"Frozen",value:"05"},{label:"New",value:"00"},{label:"Pending Active",value:"02"}];return this.isOrganizationPage&&e.unshift({label:"All",value:"All"}),e},tillFormRules(){return this.isOrganizationPage?Object(r["e"])():Object(r["f"])()},fristSearchMap(){return!(!this.isOrganizationPage||!this.activeName)},formConfigArray(){let e=[{hidden:this.isOrganizationPage,label:"Query Condition",key:"queryCondition",comp:"el-select",required:!0,options:this.queryConditionSelectOptions,bind:{placeholder:this.$t("common.placeholder.select")},event:{change:e=>{this.tillForm={msisdn:"%",tillNumber:"%",orgshortcode:"",status:"3"===e?"03":"All",productName:"",queryCondition:e}}}},{hidden:this.isShowItem("1"),label:this.$t("IDC.till.tillNumber"),key:"tillNumber",comp:"el-input",bind:{placeholder:this.$t("common.placeholder.enter"),id:"tillNumber"}},{hidden:this.isShowItem("0"),label:this.$t("IDC.till.msisdn"),key:"msisdn",comp:"el-input",bind:{placeholder:this.$t("common.placeholder.enter"),id:"msisdn"}},{hidden:this.isShowItem("2"),formItemClass:"org-short-code",label:this.$t("IDC.till.product"),key:"productName",comp:"el-input",bind:{placeholder:this.$t("common.placeholder.select"),clearable:!0},slots:[{name:"append",comp:"el-link",class:"short-code-icon",bind:{icon:"el-icon-more",underline:!1},event:{click:()=>{this.addProduct()}}}],event:{focus:this.addProduct}},{hidden:this.isShowItem("3"),label:this.isOrganizationPage?this.$t("common.label.status"):"Identity Status",key:"status",comp:"el-select",options:this.statusOptions,bind:{placeholder:this.$t("common.placeholder.select")}},{hidden:this.isShowItem("1",!1),formItemClass:"org-short-code",label:this.$t("IDC.till.organizationShortCode"),key:"orgshortcode",comp:"el-input",bind:{placeholder:this.$t("common.placeholder.select"),clearable:!0},slots:[{name:"append",comp:"el-link",class:"short-code-icon",bind:{icon:"el-icon-more",underline:!1},event:{click:()=>{this.searchVisible=!0}}}]}];return e},statusStyle(){return e=>{switch(e){case"03":return{"background-color":this.GlobalStyleVariables.statusNoticeColor};case"06":return{"background-color":""+this.GlobalStyleVariables.fillStrongColor};case"05":return{"background-color":this.GlobalStyleVariables.statusColorwarning};case"04":return{"background-color":""+this.GlobalStyleVariables.statusColorwarning};case"07":return{"background-color":""+this.GlobalStyleVariables.statusSuccessColor};case"00":case"02":return`background-color:${this.GlobalStyleVariables.backgroundColor};border:1px solid ${this.GlobalStyleVariables.initialColor};`;default:return}}}},methods:{isShowItem(e,t=!0){let a=["1","2"];return this.isOrganizationPage?!(!e.includes(a)&&t):this.tillForm.queryCondition!==e},isShowheaderTitle(){this.fristSearch=this.isOrganizationPage;let e="";return this.isOrganizationPage&&(e="till-page-header",this.$set(this.titleConfig,"desc",this.$t("IDC.till.detailTile"))),this.activeName&&(this.isOrganizationPage=!0,this.$set(this.titleConfig,"title",this.$t("IDC.till.tillList")),this.$set(this.titleConfig,"desc",this.$t("IDC.till.detailTile")),e=""),e},selectProductList(e){this.productIndex=e.productIndex,this.tillForm.productName=e.productName},async loadProduct(e){let t={pageSize:e.pageSize||10,pageNo:e.pageNo||1,pageQuery:!0};e.searchKey&&(t.productName=e.searchKey.producrName);let a=await Object(d["m"])(t);return a},addProduct(){this.addProductVisible=!0},closeStatusDialog(){this.getList()},getList(){this.isSearch=!0},handleEditStatus(e){let t=e;t.identityId=e.tillId,this.$refs["editStatus"].showView(t)},showColose(e){this.closeData={identityId:e.tillId,tillNumber:e.tillNumber},this.closeDialog=!0},ishow(){this.closeDialog=!1},closeSubmit(){this.isSearch=!0},showStatus(e){return I["c"][e]||"-"},reset(){this.$refs["tillForm"].innerFormRef.resetFields(),this.isSearch=!0},searchTill(){let{queryCondition:e,tillNumber:t,orgshortcode:a}=this.tillForm,i={tillNumber:t,orgshortcode:a};"1"!==e||Object(p["a"])(i)?(this.searchLoading=!0,this.$refs["tillForm"].innerFormRef.validate(e=>{if(!e)return this.searchLoading=!1,!1;this.isSearch=!0})):this.$message({message:this.$t("IDC.till.listTips"),type:"warning"})},handleDetail(e){let t={title:e.tillNumber,tillId:e.tillId};this.openNewWindow({path:"../../organizationInfo/till/view",query:{data:encodeURIComponent(JSON.stringify(t))}})},async createTill(){this.openNewWindow({path:"../../organizationInfo/till/create"})},getTableData(){if(this.hasPerm("IC_TILL_MANAGE_SEARCH_BTN"))return new Promise(e=>{let{queryCondition:t,status:a}=this.tillForm;"3"===t||this.isOrganizationPage||(a="");let i={pageIndex:this.paginationConfig.pageIndex,pageSize:this.paginationConfig.pageSize,msisdn:"%"===this.tillForm.msisdn?"":this.tillForm.msisdn,tillNumber:"%"===this.tillForm.tillNumber?"":this.tillForm.tillNumber,status:a,productId:this.productIndex,shortCode:this.tillForm.orgshortcode||""};Object(d["r"])(i).then(t=>{t.header&&t.header.success&&(t.list?t.totalRecords=t.totalRecord:(t.totalRecords=0,t.list=[]),e(t))}).catch(()=>{}).finally(()=>{this.searchLoading=!1,this.isSearch=!1})})}}},k=S,T=(a("563c"),Object(b["a"])(k,i,o,!1,null,"f95268e0",null));t["default"]=T.exports},ea41:function(e,t,a){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"business-portal-page"},[t("table-page",{staticClass:"margin-top-16",attrs:{size:"small",isCheck:!1,isCheckMemory:!1,isSingleCheck:!1,"has-pagination":!0,isSearch:e.isSearchRemovedList,columns:e.removedListColumns,pagination:e.removedPaginationConfig,getTableData:e.getRemovedTableData},scopedSlots:e._u([{key:"operation",fn:function(a){return[t("el-button",{staticClass:"btn",staticStyle:{padding:"0"},attrs:{type:"text"},on:{click:function(t){return e.queryDetail(a.data.row)}}},[e._v(" "+e._s(e.$t("common.button.detail"))+" ")])]}}])}),e.showDetail?t("portal-dialog",{attrs:{visible:!0,title:e.$t("IDC.bankAccount.pageTitleDetail"),customFooter:!0,width:"560px"},on:{"handle-close":e.closeDetailDialog}},[t("div",{attrs:{slot:"title"},slot:"title"},[t("div",{staticClass:"detail-dialog-des"},[e._v(e._s(e.$t("IDC.bankAccount.pageDescDetail")))])]),t("div",{attrs:{slot:"content"},slot:"content"},[t("drawer-detail-content-second",{ref:"childDrawer",staticStyle:{"margin-left":"4px"}})],1),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("div",{staticStyle:{height:"24px"}})])]):e._e()],1)},o=[],r=a("f33d"),s=a("4c09"),n=a("8ac9"),l=function(){var e=this,t=e._self._c;return t("div",{staticClass:"detail-box margin-left-20"},e._l(e.detailDatas,(function(a){return t("div",{key:a.label,staticClass:"container"},[t("div",{staticClass:"subtitle"},[e._v(e._s(a.label+":"))]),t("div",{staticClass:"detail-content"},[e._v(e._s(a.content?a.content:"-"))])])})),0)},c=[],d=a("5a0c"),u=a.n(d),h=a("2ef0"),p={name:"DrawerDetailContent",data(){return{currentRowData:"",detailDatas:"",activeDetailData:[{label:this.$t("IDC.bankAccount.label.assetType"),value:"assetType"},{label:this.$t("IDC.bankAccount.label.accountName"),value:"accountName"},{label:this.$t("IDC.bankAccount.label.accountNumber"),value:"accountNo"},{label:this.$t("IDC.bankAccount.label.bankHeadOffice"),value:"bankHeadOffice"},{label:this.$t("IDC.bankAccount.label.bank"),value:"bankName"},{label:this.$t("IDC.bankAccount.label.bankShortCode"),value:"bankShortCode"},{label:this.$t("IDC.bankAccount.label.currency"),value:"currency"},{label:this.$t("IDC.bankAccount.label.isDefault"),value:"default"},{label:this.$t("common.label.status"),value:"status"},{label:this.$t("IDC.bankAccount.label.createdBy"),value:"createOperatorName"},{label:this.$t("IDC.bankAccount.label.creationTime"),value:"createDate"}],removedDetailAdditionalData:[{label:this.$t("IDC.bankAccount.label.removedBy"),value:"removeOperatorName"},{label:this.$t("IDC.bankAccount.label.removalTime"),value:"removeDate"},{label:this.$t("IDC.bankAccount.label.remark"),value:"remark"}]}},computed:{},methods:{queryDetailContent(e){Promise.all([this.getTransferModeData(),this.queryAccountDetail(e)]).then(t=>{const a=t[0],i=t[1];if(i){for(const t in i)this.detailDatas.forEach(o=>{if(o.value===t)if("createDate"===t||"removeDate"===t){let e=i[t];o.content=u()(e).format("DD/MM/YYYY HH:mm")}else if("assetType"===t)o.content=e.assetType;else if("bankHeadOffice"===t)o.content=e.bankHeadOffice;else if("default"===t)o.content=i[t]?"Yes":"No";else if("transferMode"===t&&a){let e=a.filter(e=>e.value===i[t]);e.length&&(o.content=e[0].label)}else o.content=i[t]});this.detailDatas=JSON.parse(JSON.stringify(this.detailDatas))}}).catch(()=>{})},queryAccountDetail(e){this.currentRowData=e,this.getDetailDatas();let t={tenantId:"-1",assetId:e.assetId,identityId:e.identityId};return new Promise(e=>{Object(r["f"])(t).then(t=>{let a;t&&t.header.success&&(t.bankAccount["createOperatorName"]=t["createOperatorName"],t.bankAccount["removeOperatorName"]=t["removeOperatorName"],a=t.bankAccount),e(a)}).catch(()=>Promise.resolve({}))})},getTransferModeData(){return new Promise(e=>{Object(r["e"])().then(t=>{let a=[];if(t.header&&t.header.success){let e=JSON.parse(t.jsonDataStr);e.map(e=>{let t={value:e.code,label:e.value};a.push(t)})}e(a)}).catch(()=>Promise.resolve([]))})},getDetailDatas(){let e=this.currentRowData.status;this.detailDatas="Active"===e?Object(h["cloneDeep"])(this.activeDetailData):Object(h["cloneDeep"])(this.activeDetailData.concat(this.removedDetailAdditionalData))}},created(){},mounted(){}},m=p,f=(a("fd98"),a("2877")),b=Object(f["a"])(m,l,c,!1,null,"51b9469a",null),g=b.exports,y={name:"RemovedAccountContent",props:["searchForm","assetTypeOptions","bankHeadOfficeOptions","identityId"],components:{TablePage:s["a"],PortalDialog:n["a"],DrawerDetailContentSecond:g},data(){return{removedPaginationConfig:{total:0,pageIndex:1,pageSize:10},removedListColumns:[{label:this.$t("IDC.bankAccount.label.assetType"),prop:"assetType",align:"left"},{label:this.$t("IDC.bankAccount.label.accountName"),prop:"accountName",align:"left"},{label:this.$t("IDC.bankAccount.label.accountNumber"),prop:"accountNo",align:"left"},{label:this.$t("IDC.bankAccount.label.currency"),prop:"currency",align:"left"},{label:this.$t("IDC.bankAccount.label.bankHeadOffice"),prop:"bankHeadOffice",align:"left"},{label:this.$t("IDC.bankAccount.label.bank"),prop:"bankName",align:"left"},{label:"Operation",prop:"operation",align:"left",__slotName:"operation",fixed:"right"}],isSearchRemovedList:!1,showDetail:!1}},computed:{},watch:{},created(){this.isSearchRemovedList=!0},activated(){},mounted(){},methods:{search(){this.resetPagination(),this.isSearchRemovedList=!0},resetPagination(){this.removedPaginationConfig={total:0,pageIndex:1,pageSize:10}},getRemovedTableData(){let e={status:"Removed",accountName:this.searchForm.accountName,assetType:this.searchForm.assetType,bankHeadOffice:this.searchForm.bankHeadOffice,bankName:this.searchForm.bankName,identityId:this.identityId,pageNo:this.removedPaginationConfig.pageIndex,pageSize:this.removedPaginationConfig.pageSize};return new Promise(t=>{Object(r["g"])(e).then(e=>{e.header&&e.header.success?(e.totalRecords=e.totalNum||0,e.list=e.bankAccounts||[],e.list.forEach(e=>{this.assetTypeOptions.forEach(t=>{t.value===e.assetType&&(e.assetType=t.label)}),this.bankHeadOfficeOptions.forEach(t=>{t.value===e.bankHeadOffice&&(e.bankHeadOffice=t.label)})}),this.isSearchRemovedList=!1,t(e)):(e.list=[],e.totalRecords=0,this.isSearchRemovedList=!1,t(e))})})},queryDetail(e){this.showDetail=!0,setTimeout(()=>{this.$refs.childDrawer.queryDetailContent(e)})},closeDetailDialog(){this.showDetail=!1}}},v=y,C=(a("eab7"),Object(f["a"])(v,i,o,!1,null,"27a0cdde",null));t["a"]=C.exports},eab7:function(e,t,a){"use strict";a("d654")},ead9:function(e,t,a){"use strict";a("7335")},eba8:function(e,t,a){e.exports={activeMenuColor:"#366bfc",primaryColor:"#366bfc",menuColor:"#5c5c5c",fillEmphasisColor:"#5c5c5c",fillLightColor:"#fafafa",fillStrongColor:"#c7c7c7",fillRegularColor:"#f0f0f0",fillColorDark:"#e0e0e0",lineStrongColor:"#8f8f8f",textEmphasisColor:"#282828",backgroundColor:"#fff",statusErrorColor:"#ff4040",statusSuccessColor:"#27bf88",statusColorwarning:"#ff7420",statusColorSAecondaryWarning:"#faaf0c",statusNoticeColor:"#338bff",statusDark:"#c7c7c7",initialColor:"#E0E0E0",statusNoticeBackgroundColor:"#F0F9FF",statusErrorBackgroundColor:"#FFF2F0",statusSuccessBackgroundColor:"#F0FFF7",statusSecondaryWarningBackgroundColor:"#FFFBE6",statusWarningBackgroundColor:"#FFF6E6",statusDarkBackgroundColor:"#FAFAFA",lineColorBlue:"#ADD9FF",lineColorError:"#FFC1BA",lineColorGreen:"#A5E6C6",lineColorWarning:"#FFF7ed"}},ed02:function(e,t,a){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",e._l(e.configList,(function(e,a){return t("basic-info-group-item",{key:a,attrs:{group:e}})})),1)},o=[],r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"basic-info-box"},[e.group.label?t("div",{staticClass:"basic-info",staticStyle:{padding:"0 0 20px 0"}},[e._v(e._s(e.group.label))]):e._e(),t("el-row",{attrs:{gutter:20}},e._l(e.group.list,(function(a,i){return t("el-col",e._b({key:i},"el-col",e.colOptions,!1),[t("div",{staticClass:"basic-info-card"},[t("div",{staticClass:"basic-info-card__label bg-purple"},[e._v(e._s(a.label))]),t("div",{staticClass:"basic-info-card__value"},[e._v(e._s(a.value))])])])})),1)],1)},s=[],n={name:"BasicInfoGroupItem",props:{group:{type:Object,default:()=>({})}},methods:{getcolOptions(e){return e?{span:e}:this.colOptions}}},l=n,c=(a("8fd9"),a("2877")),d=Object(c["a"])(l,r,s,!1,null,"27c7135d",null),u=d.exports,h=a("689d"),p={name:"BasicInfoGroup",components:{BasicInfoGroupItem:u},props:{basicInfo:{type:Object,default:()=>({})},groups:{type:Array,default:()=>[]}},data(){return{}},computed:{configList(){const e=this.basicInfo;let t=Object(h["b"])(this.groups);return t=t.map(t=>(t.list=t.list.map(t=>{const a=t.name,i=t.label;return{...t,label:i,value:e[a]||"-"}}),t)),t}}},m=p,f=Object(c["a"])(m,i,o,!1,null,null,null);t["a"]=f.exports},f147:function(e,t,a){"use strict";a("80ee")},f2e3:function(e,t,a){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",[t("el-form",{ref:"createBankAccountForm",staticClass:"add-form",attrs:{model:e.createBankAccountForm,"label-position":"top",size:"small",rules:e.formRules}},[t("el-row",{staticClass:"margin-bottom-20",attrs:{gutter:20}},[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:e.$t("IDC.bankAccount.label.bankHeadOffice"),prop:"bankHeadOffice"}},[t("el-select",{attrs:{id:"bankHeadOffice",placeholder:e.$t("common.placeholder.select")},model:{value:e.createBankAccountForm.bankHeadOffice,callback:function(t){e.$set(e.createBankAccountForm,"bankHeadOffice",t)},expression:"createBankAccountForm.bankHeadOffice"}},e._l(e.bankHeadOfficeOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:e.$t("IDC.bankAccount.label.bank"),prop:"bankId"}},[t("el-select",{attrs:{id:"bankId",placeholder:e.$t("common.placeholder.select")},model:{value:e.createBankAccountForm.bankId,callback:function(t){e.$set(e.createBankAccountForm,"bankId",t)},expression:"createBankAccountForm.bankId"}},e._l(e.bankOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1)],1),e.showBankBox?t("div",{staticClass:"bank-box"},e._l(e.bankDatas,(function(a){return t("div",{key:a.label,staticClass:"content-container"},[e._v(" "+e._s(a.label+": "+(a.content?a.content:"-"))+" ")])})),0):e._e(),t("el-row",{staticClass:"margin-bottom-20",attrs:{gutter:20}},[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:e.$t("IDC.bankAccount.label.assetType"),prop:"assetType"}},[t("el-select",{attrs:{id:"assetType",placeholder:e.$t("common.placeholder.select")},model:{value:e.createBankAccountForm.assetType,callback:function(t){e.$set(e.createBankAccountForm,"assetType",t)},expression:"createBankAccountForm.assetType"}},e._l(e.assetTypeOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:e.$t("IDC.bankAccount.label.currency"),prop:"currency"}},[t("el-select",{attrs:{id:"currency",placeholder:e.$t("common.placeholder.select")},model:{value:e.createBankAccountForm.currency,callback:function(t){e.$set(e.createBankAccountForm,"currency",t)},expression:"createBankAccountForm.currency"}},e._l(e.currencyOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1)],1),t("el-row",{staticClass:"margin-bottom-20",attrs:{gutter:20}},[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:e.$t("IDC.bankAccount.label.accountName"),prop:"accountName"}},[t("el-input",{attrs:{id:"accountName",placeholder:e.$t("common.placeholder.enter")},model:{value:e.createBankAccountForm.accountName,callback:function(t){e.$set(e.createBankAccountForm,"accountName","string"===typeof t?t.trim():t)},expression:"createBankAccountForm.accountName"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:e.$t("IDC.bankAccount.label.accountNumber"),prop:"accountNo"}},[t("el-input",{attrs:{id:"accountNo",placeholder:e.$t("common.placeholder.enter")},model:{value:e.createBankAccountForm.accountNo,callback:function(t){e.$set(e.createBankAccountForm,"accountNo","string"===typeof t?t.trim():t)},expression:"createBankAccountForm.accountNo"}})],1)],1)],1),t("el-row",{staticClass:"margin-bottom-20",attrs:{gutter:20}},[t("el-col",{attrs:{span:12}},[t("el-form-item",{staticClass:"date-box",attrs:{label:e.$t("IDC.bankAccount.label.validityPeriod"),prop:"validityPeriod"}},[t("el-date-picker",{attrs:{type:"daterange","value-format":"yyyy-MM-dd HH:mm:ss.SSS",format:"dd/MM/yyyy","range-separator":"~","start-placeholder":e.$t("common.placeholder.select"),"end-placeholder":e.$t("common.placeholder.select")},model:{value:e.createBankAccountForm.validityPeriod,callback:function(t){e.$set(e.createBankAccountForm,"validityPeriod",t)},expression:"createBankAccountForm.validityPeriod"}}),t("i",{class:["el-icon-date","date-icon"]})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:e.$t("IDC.bankAccount.label.transferMode"),prop:"transferMode"}},[t("el-select",{attrs:{id:"transferMode",placeholder:e.$t("common.placeholder.select")},model:{value:e.createBankAccountForm.transferMode,callback:function(t){e.$set(e.createBankAccountForm,"transferMode",t)},expression:"createBankAccountForm.transferMode"}},e._l(e.transferModeOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1)],1),t("el-row",{staticClass:"margin-bottom-20",attrs:{gutter:20}},[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:e.$t("IDC.bankAccount.label.iban"),prop:"iban"}},[t("el-input",{attrs:{id:"iban",placeholder:e.$t("common.placeholder.enter")},model:{value:e.createBankAccountForm.iban,callback:function(t){e.$set(e.createBankAccountForm,"iban","string"===typeof t?t.trim():t)},expression:"createBankAccountForm.iban"}})],1)],1)],1)],1)],1)},o=[],r=a("f33d"),s=a("02e3"),n={name:"BankAccountDialog",data(){return{currencyOptions:[],bankHeadOfficeOptions:[],bankOptions:[],assetTypeOptions:[],transferModeOptions:[],formRules:{bankHeadOffice:[s["z"]],bankId:[s["z"]],assetType:[s["z"]],currency:[s["z"]],accountName:[s["e"],s["w"],s["m"]],accountNo:[s["e"],s["y"],Object(s["d"])({minLen:10,maxLen:64})],iban:[s["w"],Object(s["d"])({minLen:0,maxLen:34})]},showBankBox:!1,bankDatas:[{label:this.$t("IDC.bankAccount.label.bankShortCode"),value:"bankShortCode"},{label:this.$t("IDC.bankAccount.label.bankAddress"),value:"bankAddress"},{label:this.$t("IDC.bankAccount.label.financeService"),value:"financeService"},{label:this.$t("IDC.bankAccount.label.trustBank"),value:"trustBankCode"}]}},props:["createBankAccountForm","identityId"],watch:{"createBankAccountForm.bankHeadOffice":{handler(){this.getBankList()},deep:!0},"createBankAccountForm.bankId":{handler(e){e?(this.$delete(this.bankDatas,"content"),this.getCurrentBankInfo({bankId:e}),this.showBankBox=!0):this.showBankBox=!1},deep:!0}},methods:{querySelectList(){this.getBankHeadOfficeList(),this.geCurrencyList(),this.getAssetTypeList(),this.getTransferMode()},async getBankHeadOfficeList(){this.bankHeadOfficeOptions=[];let e=await Object(r["c"])({});if(e.header&&e.header.success){let t=JSON.parse(e.jsonDataStr);t.map(e=>{let t={value:e.code,label:e.value};this.bankHeadOfficeOptions.push(t)})}},async getBankList(){this.bankOptions=[],this.createBankAccountForm.bankId="";let e={pageNo:1,pageSize:100,bankHeadOffice:this.createBankAccountForm.bankHeadOffice},t=await Object(r["h"])(e);t.header&&t.header.success&&t.banks&&t.banks.length>0&&t.banks.map(e=>{let t={value:e.bankId,label:e.bankName};this.bankOptions.push(t)})},async geCurrencyList(){this.currencyOptions=[];let e=await Object(r["i"])({dictType:"Currency"});if(e.header&&e.header.success){let t=JSON.parse(e.dataDictJson);t.map(e=>{let t={value:e.code,label:e.code};this.currencyOptions.push(t)})}},async getAssetTypeList(){this.assetTypeOptions=[];let e=await Object(r["i"])({dictType:"AssetType"});if(e.header&&e.header.success){let t=JSON.parse(e.dataDictJson);t.map(e=>{let t={value:e.code,label:e.name};this.assetTypeOptions.push(t)})}},async getTransferMode(){this.transferModeOptions=[];let e=await Object(r["e"])();if(e.header&&e.header.success){let t=JSON.parse(e.jsonDataStr);t.map(e=>{let t={value:e.code,label:e.value};this.transferModeOptions.push(t)})}},async getCurrentBankInfo(e){try{let t=await Object(r["d"])(e);if(t&&t.header.success){let e=[];for(const i in t.bank)"isDepositBank"===i&&!0===t.bank[i]&&e.push("Deposit Bank"),"isTrustBank"===i&&!0===t.bank[i]&&e.push("Trust Bank"),"isCardIssuingBank"===i&&!0===t.bank[i]&&e.push("Card Issuing Bank");let a=t.bankKYC.kycGroupList.filter(e=>1003===e.kycGroupId&&1007===e.kycFieldId);this.bankDatas.forEach(i=>{"financeService"===i.value?i.content=e.join(","):"trustBankCode"===i.value?i.content=t.bank.trustBankCode:"bankShortCode"===i.value?i.content=t.bank.bankShortCode:"bankAddress"===i.value&&(i.content=a.length?a[0].inputValue:"")}),this.bankDatas=JSON.parse(JSON.stringify(this.bankDatas))}}catch(t){}}},created(){this.querySelectList()},mounted(){}},l=n,c=(a("138f"),a("2877")),d=Object(c["a"])(l,i,o,!1,null,"667fcd56",null);t["a"]=d.exports},f320:function(e,t,a){"use strict";a("7e99")},f33d:function(e,t,a){"use strict";a.d(t,"i",(function(){return o})),a.d(t,"c",(function(){return r})),a.d(t,"h",(function(){return s})),a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return l})),a.d(t,"f",(function(){return c})),a.d(t,"g",(function(){return d})),a.d(t,"e",(function(){return u})),a.d(t,"d",(function(){return h})),a.d(t,"j",(function(){return p}));var i=a("0bbd");function o(e){return Object(i["a"])({url:"/fintech/v1/dict/query",method:"post",data:e})}function r(e){return Object(i["a"])({url:"/fintech/v1/bank/getBank",method:"post",data:e})}function s(e){return Object(i["a"])({url:"/fintech/v1/bank/queryBankList",method:"post",data:e})}function n(e){return Object(i["a"])({url:"/fintech/v1/organization/bankAccount/create",method:"post",data:e})}function l(e){return Object(i["a"])({url:"/fintech/v1/organization/bankAccount/delete",method:"post",data:e})}function c(e){return Object(i["a"])({url:"/fintech/v1/bankAccount/get",method:"post",data:e})}function d(e){return Object(i["a"])({url:"/fintech/v1/bankAccount/query",method:"post",data:e})}function u(e){return Object(i["a"])({url:"/fintech/v1/bankAccount/getTransferMode",method:"get",data:e})}function h(e){return Object(i["a"])({url:"/fintech/v1/bank/queryBankInfo",method:"post",data:e})}function p(e){return Object(i["a"])({url:"/fintech/v1/bankAccount/setIdentityBankAccount",method:"post",data:e})}},f434:function(e,t,a){},f4a3:function(e,t,a){},f4a5:function(e,t,a){},f6e0:function(e,t,a){},f8bd:function(e,t,a){"use strict";a("0dda")},f8e6b:function(e,t,a){"use strict";a("f434")},fb94:function(e,t,a){"use strict";a.d(t,"b",(function(){return o})),a.d(t,"g",(function(){return r})),a.d(t,"h",(function(){return s})),a.d(t,"c",(function(){return n})),a.d(t,"d",(function(){return l})),a.d(t,"f",(function(){return c})),a.d(t,"e",(function(){return d})),a.d(t,"a",(function(){return u}));var i=a("0bbd");function o(){return Object(i["a"])({url:"/fintech/v1/auditLog/getCategoryList",method:"get"})}function r(e){return Object(i["a"])({url:"/fintech/v1/auditLog/queryEventGroup",method:"post",data:e})}function s(e){return Object(i["a"])({url:"/fintech/v1/auditLog/queryEventType",method:"post",data:e})}function n(){return Object(i["a"])({url:"/fintech/v1/auditLog/getLimitDay",method:"get"})}function l(e){return Object(i["a"])({url:"/fintech/v1/auditLog/listAuditLog",method:"post",data:e})}function c(e){return Object(i["a"])({url:"/fintech/v1/auditLog/queryAuditLogDetail",method:"post",data:e})}function d(e){return Object(i["a"])({url:"/fintech/v1/auditLog/listTakeCallReferenceAuditLog  ",method:"post",data:e})}function u(e){return Object(i["a"])({url:"/fintech/v1/auditLog/downloadAuditLog",method:"post",needHeader:!0,data:e,responseType:"blob"})}},fc5e6:function(e,t,a){"use strict";var i=function(){var e=this,t=e._self._c;return t("el-table",e._b({key:e.tableKey,ref:"tableRef",staticClass:"orgTable",attrs:{"empty-text":"No records found.","header-cell-style":e.headerStyle,data:e.outSideTableData,size:e.size,border:e.border,"row-key":e.idKey,"max-height":e.maxHeight}},"el-table",e.$attrs,!1),[e._l(e.columns,(function(a,i){return[t("el-table-column",e._b({key:i,attrs:{sortable:e.sortFun(a),width:a.width||"",formatter:a.formatter||e.formatterHandle},scopedSlots:e._u([a.__slotName?{key:"default",fn:function(t){return[e._t(a.__slotName,null,{data:t})]}}:null],null,!0)},"el-table-column",a,!1))]}))],2)},o=[],r={name:"org-product-table",props:{columns:{type:Array,default:()=>[]},size:{type:String,default:"medium"},idKey:{type:String,default:"id"},sortArr:{type:Array,default:()=>[]},pageParam:{type:Object,default:()=>({pageOffset:"pageNo",pageSize:"pageSize"})},hasPagination:{type:Boolean,default:!0},pagination:{type:Object,default:()=>({total:0,pageIndex:1})},pageSizes:{type:Array,default(){return[10,20,50,100]}},outSideTableData:{type:Array,default:()=>[]},border:{type:Boolean,default:!0},initChecks:{type:Array,default:()=>[]},maxHeight:{type:[Number,String]}},data(){return{tableKey:(new Date).getTime(),headerStyle:{"background-color":""+this.GlobalStyleVariables.fillLightColor,"font-size":"14px","font-family":"HuaweiSans-Medium","font-weight":500,color:""+this.GlobalStyleVariables.textEmphasisColor}}},methods:{sortFun(e){const t=this.sortArr&&this.sortArr.indexOf(e.prop)>-1;return!!t&&(!!e["sort-method"]||"custom")},formatterHandle(e,t){const a=t.property;let i=e,o="",r=a&&a.split(".");return r.forEach(e=>{"object"===typeof i[e]?i=i[e]:o=i[e]}),""!==o&&null!==o&&void 0!==o?o:"-"}}},s=r,n=a("2877"),l=Object(n["a"])(s,i,o,!1,null,null,null);t["a"]=l.exports},fcbf:function(e,t,a){},fd98:function(e,t,a){"use strict";a("c796")},fe84:function(e,t,a){}}]);
//# sourceMappingURL=chunk-8b3eab60.js.map