(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-944c17b4","chunk-43eec914"],{"06b1":function(t,e,a){"use strict";a("0a92")},"0a92":function(t,e,a){},"0e19":function(t,e,a){},"1c03":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"business-portal-page"},[e("portal-header",{attrs:{projectObj:t.titleConfig}}),e("portal-form",{ref:"searchList",attrs:{"form-data":t.searchList,"form-config-list":t.formConfigList,searchBtnLoading:t.searchLoading,searchBtnDisabled:!t.hasPerm("TC_ORGTRANSACTION_REVIEW_REVERSE_REQUEST_BTN")},on:{"common-enter-event":t.search,"reset-btn-click":t.reset,"search-btn-click":t.search}}),e("div",{staticClass:"table-list-container"},[e("el-dropdown",{on:{command:t.handleExportClick}},[e("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],staticClass:"margin-bottom-16",attrs:{disabled:t.exportDisabled,type:"primary",size:"small"}},[t._v(" "+t._s(t.$t("common.button.export"))+" "),e("i",{staticClass:"el-icon-arrow-down el-icon--right",staticStyle:{"font-size":"12px"}})]),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e("el-dropdown-item",{attrs:{command:"Excel"}},[t._v("Excel")]),e("el-dropdown-item",{attrs:{command:"Excel2007"}},[t._v("Excel 2007")]),e("el-dropdown-item",{attrs:{command:"CSV"}},[t._v("CSV")]),e("el-dropdown-item",{attrs:{command:"PDF"}},[t._v("PDF")])],1)],1),e("table-page",{ref:"data-table",staticClass:"table-page",attrs:{size:"small","has-pagination":t.hasPagination,columns:t.columns,pagination:t.paginationConfig,getTableData:t.getTableData,"is-search":t.refreshTableFlag},scopedSlots:t._u([{key:"orderIdOperation",fn:function(a){return[e("el-button",{attrs:{type:"text"},on:{click:function(e){return t.showDetail(a.data.row)}}},[t._v(" "+t._s(a.data.row.tradeOrderID)+" ")])]}},{key:"status",fn:function(a){return[e("span",{staticClass:"status-circle",style:t.statusStyle(a.data.row.status)}),t._v(" "+t._s(t.showStatus(a.data.row.status))+" ")]}},{key:"operation",fn:function(a){return t.isShowReverse(a.data.row)?[e("el-button",{staticClass:"btn",staticStyle:{padding:"0"},attrs:{type:"text"},on:{click:function(e){return t.reverse(a.data.row)}}},[t._v(" "+t._s(t.$t("IDC.reviewTransaction.button.reverse"))+" ")])]:void 0}}],null,!0)})],1)],1)},i=[],n=a("c811"),o=a("5a0c"),s=a.n(o),c=a("4c09"),l=a("3186"),d=a("0bbd");function u(t){return Object(d["a"])({url:"/fintech/v1/transaction/reversalRequestList",method:"post",data:t})}var h=a("5e70"),p=a("0360"),m=a("7dfc"),f={name:"ReviewReversalRequest",components:{PortalHeader:n["a"],TablePage:c["a"],PortalForm:l["a"]},props:{activeName:{type:String,default:""},identityId:{type:String,default:""}},data(){return{identityType:"",entityIdentityId:this.identityId,searchLoading:!1,searchVisible:!1,refreshTableFlag:!1,hasPagination:!0,exportDisabled:!0,totalRecords:0,searchList:{timePeriod:"",queryMode:"both"},columns:[{label:this.$t("IDC.reviewReversalRequest.label.requestId"),prop:"tradeOrderID",align:"left",__slotName:"orderIdOperation","min-width":150},{label:this.$t("IDC.reviewReversalRequest.label.creationTime"),prop:"createTime",align:"left","min-width":200},{label:this.$t("IDC.reviewReversalRequest.label.completionTime"),prop:"completeTime",align:"left","min-width":133},{label:this.$t("IDC.reviewReversalRequest.label.status"),prop:"status",align:"left",__slotName:"status","min-width":123},{label:this.$t("IDC.reviewReversalRequest.label.initiator"),prop:"initiatorPublicName",align:"left","min-width":193},{label:this.$t("IDC.reviewReversalRequest.label.receiver"),prop:"receiverPublicName",align:"left","min-width":193},{label:this.$t("IDC.reviewReversalRequest.label.currency"),prop:"currency",align:"left","min-width":150},{label:this.$t("common.label.operation"),prop:"operation",align:"left",fixed:"right",__slotName:"operation","min-width":93}],categoryOptions:[{label:"All",value:"both"},{label:"Received",value:"receiver"},{label:"Sent",value:"requester"}],paginationConfig:{total:0,pageIndex:1,pageSize:10}}},computed:{titleConfig(){return{title:this.$t("IDC.reviewReversalRequest.pageTitle"),desc:this.$t("IDC.reviewReversalRequest.pageDesc")}},formConfigList(){return[{formItemClass:"form-special-date-box",sameGroup:!0,label:this.$t("IDC.reviewReversalRequest.label.timePeriod"),prop:"timePeriod",comp:[{key:"timePeriod",comp:"el-date-picker",bind:{id:"timePeriod",type:"datetimerange",format:"dd/MM/yyyy HH:mm:ss","range-separator":"~","default-time":["00:00:00","23:59:59"],"start-placeholder":"Start","end-placeholder":"End"}},{comp:"i",class:"el-icon-date data_icon"}]},{label:this.$t("IDC.reviewReversalRequest.label.category"),key:"queryMode",comp:"el-select",options:this.categoryOptions,bind:{placeholder:this.$t("common.placeholder.select"),id:"category"}}]},statusStyle(){return t=>{switch(t){case"00":return{"background-color":""+this.GlobalStyleVariables.statusNoticeColor};default:return{"background-color":""+this.GlobalStyleVariables.statusSuccessColor}}}}},watch:{},created(){this.identityType="5000",this.identityId?this.entityIdentityId=this.identityId:this.entityIdentityId=p["default"].get("organizationIdentityId")},activated(){},mounted(){},methods:{isShowReverse(t){return"00"===t.status},reset(){this.searchList={timePeriod:"",queryMode:"both"},this.search()},search(){this.$refs["searchList"].innerFormRef.validate(t=>{t?(this.paginationConfig={total:0,pageIndex:1,pageSize:10},this.refreshTableFlag=!0):this.searchLoading=!1})},showDetail(t){let e={tradeOrderId:t.tradeOrderID,identityId:this.entityIdentityId,identityType:this.identityType,type:"detail",from:"reversalRequest"};const a="/mainPage/identifierCenter/organizationInfo/organization/transactionDetail";this.openNewWindow({path:a,query:{params:encodeURIComponent(JSON.stringify(e))}})},reverse(t){let e={tradeOrderId:t.tradeOrderID,identityId:this.entityIdentityId,identityType:this.identityType,type:"reverse",from:"reversalRequest"};const a="/mainPage/identifierCenter/organizationInfo/organization/transactionDetail";this.openNewWindow({path:a,query:{params:encodeURIComponent(JSON.stringify(e))}})},getTableData(){let t={receiverID:this.entityIdentityId,queryMode:this.searchList.queryMode,createTimeBegin:this.searchList.timePeriod?s()(this.searchList.timePeriod[0]).format("YYYY-MM-DD HH:mm:ss"):"",createTimeEnd:this.searchList.timePeriod?s()(this.searchList.timePeriod[1]).format("YYYY-MM-DD HH:mm:ss"):"",startNumber:this.paginationConfig.pageIndex,pageSize:this.paginationConfig.pageSize};return this.searchLoading=!0,new Promise(e=>{u(t).then(t=>{t.header&&t.header.success?(t.totalRecords=t.totalSize||0,t.list=t.reversalRequestDTOs||[],t.list=t.list.map(t=>(t.createTime&&(t.createTime=s()(t.createTime).format("DD/MM/YYYY HH:mm:ss")),t.completeTime&&(t.completeTime=s()(t.completeTime).format("DD/MM/YYYY HH:mm:ss")),t))):(t.totalRecords=0,t.list=[]),this.exportDisabled=!(t.list.length>0),e(t)}).catch(()=>{e()}).finally(()=>{this.refreshTableFlag=!1,this.searchLoading=!1})})},handleExportClick(t){this.$refs["searchList"].validate(e=>{if(e){let e={receiverID:this.entityIdentityId,queryMode:this.searchList.queryMode,createTimeBegin:this.searchList.timePeriod?s()(this.searchList.timePeriod[0]).format("YYYY-MM-DD HH:mm:ss"):"",createTimeEnd:this.searchList.timePeriod?s()(this.searchList.timePeriod[1]).format("YYYY-MM-DD HH:mm:ss"):"",exportType:t};Object(h["d"])(e).then(e=>{if("Excel2007"===t?t="XLS":"Excel"===t&&(t="XLSX"),"application/json"===e.type){const t=new FileReader;t.readAsText(e);const a=this;t.onload=function(){const e=JSON.parse(t.result);a.$modal.msgError(e.header.responseDesc)}}else{const a=new Date,r=Object(m["a"])(a,"YYYYMMDDHHmmss"),i=new Blob([e],{type:"application/ms-excel"}),n=document.createElement("a");n.download="REVERSAL_REQUEST_"+r+"."+t.toLowerCase(),n.style.display="none",n.href=URL.createObjectURL(i),document.body.appendChild(n),n.click(),URL.revokeObjectURL(n.href),document.body.removeChild(n)}}).catch().finally()}})},showStatus(t){switch(t){case"00":return"New";default:return"Completed"}}}},b=f,v=(a("06b1"),a("2877")),y=Object(v["a"])(b,r,i,!1,null,"7ec38e54",null);e["default"]=y.exports},"5e70":function(t,e,a){"use strict";a.d(e,"r",(function(){return i})),a.d(e,"p",(function(){return n})),a.d(e,"c",(function(){return o})),a.d(e,"d",(function(){return s})),a.d(e,"e",(function(){return c})),a.d(e,"s",(function(){return l})),a.d(e,"a",(function(){return d})),a.d(e,"b",(function(){return u})),a.d(e,"j",(function(){return h})),a.d(e,"h",(function(){return p})),a.d(e,"l",(function(){return m})),a.d(e,"k",(function(){return f})),a.d(e,"f",(function(){return b})),a.d(e,"t",(function(){return v})),a.d(e,"g",(function(){return y})),a.d(e,"q",(function(){return g})),a.d(e,"o",(function(){return w})),a.d(e,"i",(function(){return I})),a.d(e,"m",(function(){return R})),a.d(e,"n",(function(){return C}));var r=a("0bbd");a("5f9a");function i(t){return Object(r["a"])({url:"/fintech/v1/transaction/orderList",method:"post",data:t})}function n(t){return Object(r["a"])({url:"/fintech/v1/transaction/order/orderDetail",method:"post",data:t})}function o(t){return Object(r["a"])({url:"/fintech/v1/transaction/orderList/export",method:"post",data:t,responseType:"blob"})}function s(t){return Object(r["a"])({url:"fintech/v1/transaction/export/reversalRequest",method:"post",data:t,responseType:"blob"})}function c(t){return Object(r["a"])({url:"/fintech/v1/customer/account",method:"post",data:t})}function l(t){return Object(r["a"])({url:"/fintech/v1/transaction/reverseTransaction",method:"post",data:t})}function d(t){return Object(r["a"])({url:"/fintech/v1/transaction/batchApprovalTransaction",method:"post",data:t})}function u(t){return Object(r["a"])({url:"/fintech/v1/transaction/confirmTransaction",method:"post",data:t})}function h(t){return Object(r["a"])({url:"/fintech/v1/Account/queryAccount",method:"post",data:t})}function p(t){return Object(r["a"])({url:"/fintech/v1/transaction/initiateTransaction",method:"post",data:t})}function m(t){return Object(r["a"])({url:"/fintech/v1/transaction/queryAvailableService",method:"post",data:t})}function f(t){return Object(r["a"])({url:"/fintech/v1/transaction/queryAvailableReasonType",method:"post",data:t})}function b(t){return Object(r["a"])({url:"/fintech/v1/transaction/account/statementList",method:"post",data:t})}function v(t){return Object(r["a"])({url:"/fintech/v1/transaction/getTransactionIdentity",method:"post",data:t})}function y(t){return Object(r["a"])({url:"/fintech/v1/account/queryUnFinishHotEntry",method:"post",data:t})}function g(t){return Object(r["a"])({url:"/fintech/v1/transaction/queryServicePreValidation",method:"post",data:t})}function w(t){return Object(r["a"])({url:"/fintech/v1/transaction/queryBudget",method:"post",data:t})}function I(t){return Object(r["a"])({url:"/fintech/v1/transaction/initiateWithdrawTransaction",method:"post",data:t})}function R(t){return Object(r["a"])({url:"/fintech/v1/bankAccount/query",method:"post",data:t})}function C(t){return Object(r["a"])({url:"/fintech/v1/bank/queryBankInfo",method:"post",data:t})}},9488:function(t,e,a){"use strict";a("0e19")},c811:function(t,e,a){"use strict";var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"page-header",class:{"no-bottom-border":!t.showBottomLine,"no-desc-height":!t.projectObj.desc}},[e("div",{staticClass:"header-left"},[t.projectObj.title?e("div",{staticClass:"page-title"},[t._v(" "+t._s(t.projectObj.title)+" "),t._t("title-suffix")],2):t._e(),t.projectObj.desc?e("div",{staticClass:"page-desc"},[t._v(" "+t._s(t.projectObj.desc)+" ")]):t._e()]),e("div",{staticClass:"header-right"},[t._t("header-right")],2)])},i=[],n={name:"PortalHeader",components:{},props:{projectObj:{type:Object,default(){return{}}},showBottomLine:{type:Boolean,default:!0}}},o=n,s=(a("9488"),a("2877")),c=Object(s["a"])(o,r,i,!1,null,"73566ca8",null);e["a"]=c.exports}}]);
//# sourceMappingURL=chunk-944c17b4.js.map