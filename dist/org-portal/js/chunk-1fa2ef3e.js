(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1fa2ef3e","chunk-43eec914"],{"0e19":function(t,e,a){},"64e7":function(t,e,a){"use strict";var n=a("0360"),i=a("5c96");e["a"]={downLoadFile:function(t,e,a,r){let o=new XMLHttpRequest;o.open(a||"POST",t,!0),o.setRequestHeader("Content-type","application/json"),r&&o.setRequestHeader("X-XSRF-TOKEN",n["default"].get("O-XSRF-TOKEN")),o.setRequestHeader("o-token",n["default"].get("o-token")),o.setRequestHeader("Cache-Control","no-store, max-age=0, must-revalidate"),o.responseType="blob",o.onload=function(){if(200===this.status){let t=this.response,e=o.getResponseHeader("content-disposition").split(";")[1].split("filename=")[1],a=decodeURIComponent(e),n=URL.createObjectURL(t),i=document.createElement("a");i.href=n,i.download=a,i.click()}else i["MessageBox"].alert("Download failed.","Error",{type:"error",confirmButtonText:"Confirm"})},o.send(JSON.stringify(e))}}},"802e":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"business-portal-page"},[e("portal-header",{attrs:{projectObj:t.titleConfig}}),e("portal-form",{ref:"searchList",attrs:{"form-data":t.formData,"form-rules":t.formRules,"form-config-list":t.formConfigList,searchBtnLoading:t.searchLoading},on:{"common-enter-event":t.search,"reset-btn-click":t.reset,"search-btn-click":t.search}}),t._e(),e("div",{staticStyle:{padding:"20px"}},[e("table-page",{attrs:{size:"small","has-pagination":!0,isSearch:t.isSearch,initializingLoading:!0,columns:t.taskTemplateColumns,pagination:t.paginationConfig,getTableData:t.getTableData},scopedSlots:t._u([{key:"operation",fn:function(a){return[e("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{id:"bulk-template-download-"+a.data.$index,type:"text",size:"small"},on:{click:function(e){return t.handleDownloadClick(a.data.row)}}},[t._v(" "+t._s(t.$t("common.button.download"))+" ")])]}}])})],1)],1)},i=[],r=a("c811"),o=a("3186"),l=a("4c09"),s=a("f538"),c=a("64e7"),u=a("2f62"),d={name:"TaskTemplateList",components:{PortalHeader:r["a"],PortalForm:o["a"],TablePage:l["a"]},data(){return{titleConfig:{title:this.$t("BUC.taskTemplate.pageTitle"),desc:this.$t("BUC.taskTemplate.pageDesc")},formData:{bulkTypeName:null,fileFormat:null,templateName:""},paginationConfig:{pageIndex:1,pageSize:10},isSearch:!1,searchLoading:!1,taskTemplateColumns:[{label:this.$t("BUC.taskTemplate.bulkType"),prop:"bulkTypeName",align:"left"},{label:this.$t("BUC.taskTemplate.fileFormat"),prop:"fileFormat",align:"left"},{label:this.$t("BUC.taskTemplate.templateName"),prop:"templateName",align:"left"},{label:this.$t("BUC.taskTemplate.templateType"),prop:"templateType",align:"left"},{label:this.$t("home.description"),prop:"description",align:"left"},{label:this.$t("common.label.operation"),prop:"operation",align:"left",__slotName:"operation",width:"120"}],bulkTypeOptions:[]}},computed:{formRules(){return{}},formConfigList(){return[{label:this.$t("BUC.taskTemplate.bulkType"),key:"bulkTypeName",comp:"el-select",bind:{placeholder:this.$t("common.placeholder.select"),clearable:!0},options:this.bulkTypeOptions},{label:this.$t("BUC.taskTemplate.templateName"),key:"templateName",comp:"el-input",bind:{placeholder:this.$t("common.placeholder.enter"),clearable:!0}},{label:this.$t("BUC.taskTemplate.fileType"),key:"fileFormat",comp:"el-select",bind:{placeholder:this.$t("common.placeholder.select"),clearable:!0},options:this.bulkFileFormatOptions}]},queryParams(){const{bulkTypeName:t,fileFormat:e,templateName:a}=this.formData,{pageIndex:n,pageSize:i}=this.paginationConfig;return{templateName:a,bulkTypeID:t,fileFormat:e,offset:(n-1)*i,limit:i}},...Object(u["b"])("datadict",["moduleDict"]),bulkFileFormatOptions(){return this.moduleDict.bulk["config.bulk.file-format.list"].listWithAll||[]},bulkTaskTemplateTypeOptions(){return this.moduleDict.bulk["config.bulk.sample-template-type.list"].list||[]}},methods:{search(){this.$refs["searchList"].validate(t=>{t&&(this.paginationConfig.pageIndex=1,this.searchLoading=!0,this.isSearch=!0)})},async getTableData(){try{let t=await Object(s["o"])(this.queryParams);if(t.header&&t.header.success)return this.hasPagination=t.data.length>0,{...t,totalRecords:t.total,list:t.data||[]}}catch(t){}finally{this.isSearch=!1,this.searchLoading=!1}},reset(){this.paginationConfig.pageIndex=1,this.$refs.searchList.innerFormRef.resetFields(),this.isSearch=!0},handleDownloadClick(t){const e=`orgportal/fintech/v1/bulk/task/template/${t.templateID}/download`;c["a"].downLoadFile(e,{},"GET")},async initBulkTypes(){await Object(s["p"])({limit:50,offset:0}).then(t=>{this.bulkTypeOptions=(t.data||[]).map(t=>({value:t.id,label:t.bulkTypeName})),this.bulkTypeOptions.unshift({value:null,label:"All",status:"Y",enaabled:!0})})},async initDataDict(){this.$store.dispatch("datadict/getModuleDicts",{moduleName:"bulk",dictCodes:["config.bulk.file-format.list","config.bulk.sample-template-type.list"],queryAPI:s["m"]})}},created(){this.initBulkTypes(),this.initDataDict()}},p=d,f=a("2877"),m=Object(f["a"])(p,n,i,!1,null,null,null);e["default"]=m.exports},9488:function(t,e,a){"use strict";a("0e19")},c811:function(t,e,a){"use strict";var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"page-header",class:{"no-bottom-border":!t.showBottomLine,"no-desc-height":!t.projectObj.desc}},[e("div",{staticClass:"header-left"},[t.projectObj.title?e("div",{staticClass:"page-title"},[t._v(" "+t._s(t.projectObj.title)+" "),t._t("title-suffix")],2):t._e(),t.projectObj.desc?e("div",{staticClass:"page-desc"},[t._v(" "+t._s(t.projectObj.desc)+" ")]):t._e()]),e("div",{staticClass:"header-right"},[t._t("header-right")],2)])},i=[],r={name:"PortalHeader",components:{},props:{projectObj:{type:Object,default(){return{}}},showBottomLine:{type:Boolean,default:!0}}},o=r,l=(a("9488"),a("2877")),s=Object(l["a"])(o,n,i,!1,null,"73566ca8",null);e["a"]=s.exports},f538:function(t,e,a){"use strict";a.d(e,"m",(function(){return c})),a.d(e,"p",(function(){return u})),a.d(e,"o",(function(){return d})),a.d(e,"u",(function(){return p})),a.d(e,"v",(function(){return f})),a.d(e,"a",(function(){return m})),a.d(e,"b",(function(){return h})),a.d(e,"z",(function(){return b})),a.d(e,"x",(function(){return k})),a.d(e,"f",(function(){return g})),a.d(e,"j",(function(){return O})),a.d(e,"w",(function(){return j})),a.d(e,"k",(function(){return y})),a.d(e,"n",(function(){return v})),a.d(e,"l",(function(){return T})),a.d(e,"q",(function(){return C})),a.d(e,"d",(function(){return w})),a.d(e,"e",(function(){return D})),a.d(e,"y",(function(){return $})),a.d(e,"c",(function(){return L})),a.d(e,"h",(function(){return R})),a.d(e,"g",(function(){return F})),a.d(e,"i",(function(){return S})),a.d(e,"r",(function(){return N})),a.d(e,"t",(function(){return _})),a.d(e,"s",(function(){return B}));var n=a("0bbd"),i=a("5f9a"),r=a("64e7");const o="/fintech/v1/bulk",l=o+"/task/template",s=o+"/task/plan";function c({dictCodes:t}){return Object(n["a"])({url:o+"/data-dict/list",method:"post",data:{dictCodes:t}})}function u(t){return Object(n["a"])({url:Object(i["a"])(o+"/type/list",t),method:"get"})}function d(t){return Object(n["a"])({url:Object(i["a"])(l+"/list",t),method:"get"})}function p(t){return Object(n["a"])({url:Object(i["a"])(s+"/list",t),method:"get"})}function f(t){return Object(n["a"])({url:Object(i["a"])("/fintech/v1/bulk/tps/timeslot",t),method:"get"})}function m(t){return Object(n["a"])({url:"/fintech/v1/bulk/task/plan/add",method:"POST",data:t})}function h(t){return Object(n["a"])({url:"/fintech/v1/bulk/task/plan/cancel",method:"POST",data:t})}function b(t){return Object(n["a"])({url:"/fintech/v1/bulk/task/plan/suspend",method:"POST",data:t})}function k(t){return Object(n["a"])({url:"/fintech/v1/bulk/task/plan/resume",method:"POST",data:t})}function g(t){return Object(n["a"])({url:"/fintech/v1/bulk/task/plan/failedRecords",params:t})}function O(t){return Object(n["a"])({url:"/fintech/v1/bulk/task/plan/successRecords",params:t})}function j(t){return Object(n["a"])({url:"/fintech/v1/bulk/task/plan/validRecords",params:t})}function y(t){return Object(n["a"])({url:Object(i["a"])("/fintech/v1/bulk/task/plan/detail",t),method:"get"})}function v(t){return Object(n["a"])({url:Object(i["a"])("/fintech/v1/bulk/task/plan/hisDetail",t),method:"get"})}function T(t){return Object(n["a"])({url:s+"/prevalidation",method:"post",contentType:"application/x-www-form-urlencoded",data:t})}function C(t){return Object(n["a"])({url:s+"/prevalidation/"+t,method:"get"})}function w(t,e){r["a"].downLoadFile("orgportal"+s+`/download/bulkFile?fileID=${t}&type=${e}`,{},"get")}function D(t){return Object(n["a"])({url:"/fintech/v1/queryCustomerList",method:"post",data:t,ignoreError:!0})}function $(t){return Object(n["a"])({url:"/fintech/v1/queryCustomerIdentity/msisdn",method:"post",data:t})}function L(t){return Object(n["a"])({url:"/fintech/v1/identity/verify/"+t,method:"post"})}function R(t){return Object(n["a"])({url:Object(i["a"])("/fintech/v1/organization/list",t),method:"get"})}function F(t){return Object(n["a"])({url:Object(i["a"])("/fintech/v1/spOperator/list",t),method:"get"})}function S(t){return Object(n["a"])({url:Object(i["a"])("/fintech/v1/bulk/type/service/mapping",t),method:"get"})}function N(t){return Object(n["a"])({url:"/fintech/v1/dcc/queryProduct",method:"post",data:t})}function _(t){return Object(n["a"])({url:"/fintech/v1/dcc/queryService",method:"post",data:t})}function B(t){return Object(n["a"])({url:"/fintech/v1/dcc/queryReasonType",method:"post",data:t})}}}]);
//# sourceMappingURL=chunk-1fa2ef3e.js.map