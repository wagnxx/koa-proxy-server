(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1bd01f46","chunk-43eec914"],{"0934":function(t,e,a){},"0e19":function(t,e,a){},"22e7":function(t,e,a){"use strict";a("78f8")},"2ae8":function(t,e,a){"use strict";a("6a65")},"38de":function(t,e,a){"use strict";var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"top-navigation"},[e("span",{staticClass:"navigation"},[e("svg-icon",{staticClass:"arrow-icon",attrs:{"icon-class":"left_small"},on:{click:t.backTo}}),e("span",{staticClass:"previous-page",on:{click:t.backTo}},[t._v(t._s(t.previousPage)+" ")]),e("span",{staticClass:"previous-page"},[t._v(" / ")]),e("span",{staticClass:"current-page"},[t._v(t._s(t.currentPage))])],1)])},l=[],s={name:"TopNavigation",props:{currentPage:{type:String,default:""},previousPage:{type:String,default:""},isOperationForm:{type:Boolean,default:!1}},data(){return{}},methods:{backTo(){this.isOperationForm?this.$confirm("Are you sure to return to the Bulk Task?",{confirmButtonText:"Confirm",cancelButtonText:"Cancel",closeOnClickModal:!1,type:"warning"}).then(()=>{this.$router.go(-1)}):this.$router.go(-1)}}},o=s,n=(a("22e7"),a("2877")),r=Object(n["a"])(o,i,l,!1,null,"8c681dce",null);e["a"]=r.exports},"3b8a":function(t,e,a){},"4b17":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"bulk-details"},[t.isShowNavigation?e("top-navigation",{attrs:{previousPage:t.$t("BUC.taskPlan.bulkTask"),currentPage:t.$t("BUC.taskPlan.bulkTaskView")}}):t._e(),e("div",{directives:[{name:"loading",rawName:"v-loading",value:!t.outSideTableData.length,expression:"!outSideTableData.length"}],staticClass:"project-detail"},[e("portal-header",{attrs:{projectObj:t.titleConfig}},[e("div",{staticClass:"version-box",attrs:{slot:"title-suffix"},slot:"title-suffix"},[e("span",{style:t.showStatus(t.bulkStatusMap[t.bulkHistoryDetail.bulkStatus])},[t._v(" "+t._s(t.bulkStatusMap[t.bulkHistoryDetail.bulkStatus])+" ")])])]),e("el-card",{staticClass:"card1"},[e("div",{staticClass:"text item"},[e("el-descriptions",{attrs:{column:t.descriptionsColumn,direction:"vertical",colon:!1,"label-style":t.labelStyle,"content-style":t.contentStyle}},[e("el-descriptions-item",{attrs:{label:t.$t("BUC.taskHistory.planName")}},[t._v(t._s(t._f("formatEmpty")(t.bulkHistoryDetail.planName)))]),e("el-descriptions-item",{attrs:{label:t.$t("BUC.taskPlan.planID")}},[t._v(t._s(t._f("formatEmpty")(t.bulkHistoryDetail.planID)))]),e("el-descriptions-item",{attrs:{label:t.$t("BUC.taskHistory.bulkTypeName")}},[t._v(t._s(t._f("formatEmpty")(t.bulkHistoryDetail.bulkTypeName)))]),e("el-descriptions-item",{attrs:{label:t.$t("common.label.status")}},[t._v(" "+t._s(t._f("formatEmpty")(t.bulkStatusMap[t.bulkHistoryDetail.bulkStatus]))+" ")]),e("el-descriptions-item",{attrs:{label:t.$t("BUC.taskPlan.createdBy")}},[t._v(t._s(t._f("formatEmpty")(t.bulkHistoryDetail.createdBy)))]),e("el-descriptions-item",{attrs:{label:t.$t("BUC.taskPlan.approvedBy")}},[t._v(t._s(t._f("formatEmpty")(t.bulkHistoryDetail.approveOperId)))]),e("el-descriptions-item",{attrs:{label:t.$t("BUC.taskHistory.dataFile")}},[t.bulkHistoryDetail.dataFileName?e("div",[e("span",[t._v(t._s(t.bulkHistoryDetail.dataFileName))]),e("svg-icon",{staticClass:"bulkDownload-icon",attrs:{"icon-class":"bulkDownload"},on:{click:function(e){return t.downloadBulkFile("data")}}})],1):e("span",[t._v("-")])]),e("el-descriptions-item",{attrs:{label:t.$t("BUC.taskHistory.creationTime")}},[t._v(t._s(t._f("formatEmpty")(t.formatDateTimeStr3(t.bulkHistoryDetail.createTime))))]),e("el-descriptions-item",{attrs:{label:t.$t("BUC.taskHistory.scheduleTime")}},[t._v(t._s(t._f("formatEmpty")(t.formatDateTimeStr3(t.bulkHistoryDetail.scheduleTime))))]),e("el-descriptions-item",{attrs:{label:t.$t("BUC.taskHistory.reportFile")}},[t.bulkHistoryDetail.reportFileName?e("span",[t._v(t._s(t.bulkHistoryDetail.reportFileName))]):t._e(),t.bulkHistoryDetail.reportFileName?e("el-dropdown",{attrs:{trigger:"click"},on:{command:t.downloadBulkFile}},[e("span",{staticClass:"el-dropdown-link"},[e("svg-icon",{staticClass:"bulkDownload-icon",staticStyle:{"margin-left":"0"},attrs:{"icon-class":"bulkDownload"}}),e("i",{staticClass:".el-icon-a-BulkTaskTemplateDownload el-icon--right"})],1),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.bulkHistoryDetail.reportList,(function(a){return e("el-dropdown-item",{key:a.docID,attrs:{command:a.docID}},[t._v(t._s(a.fileFormat))])})),1)],1):e("span",[t._v("-")])],1),e("el-descriptions-item",{attrs:{label:t.$t("common.label.description")}},[t._v(t._s(t._f("formatEmpty")(t.bulkHistoryDetail.description)))])],1)],1)]),e("el-card",{staticClass:"box-card"},[e("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[e("div",{staticClass:"title"},[t._v(t._s(t.$t("BUC.taskHistory.itemCheckResult")))])]),e("div",{staticClass:"text item"},[e("el-descriptions",{attrs:{column:t.descriptionsColumn,direction:"vertical",colon:!1,"label-style":t.labelStyle,"content-style":t.contentStyle}},[e("el-descriptions-item",{attrs:{label:t.$t("BUC.taskHistory.totalUploadedItems")}},[t._v(t._s(t.bulkHistoryDetail.numberOfTotal))]),e("el-descriptions-item",{attrs:{label:t.$t("BUC.taskHistory.passedValidationItems")}},[t.bulkHistoryDetail.numberOfValidSuccess>=0?e("el-link",{attrs:{underline:!1,type:"primary"},on:{click:function(e){return t.viewDetailDialog("passedValidationItems")}}},[t._v(" "+t._s(t.bulkHistoryDetail.numberOfValidSuccess)+" ")]):e("span",[t._v("-")])],1),e("el-descriptions-item",{attrs:{label:t.$t("BUC.taskHistory.failedValidationItems")}},[t.bulkHistoryDetail.numberOfValidFailed>=0?e("el-link",{attrs:{underline:!1,type:"primary"},on:{click:function(e){return t.viewDetailDialog("failedValidationItems")}}},[t._v(" "+t._s(t.bulkHistoryDetail.numberOfValidFailed)+" ")]):e("span",[t._v("-")])],1)],1)],1)]),e("el-card",{staticClass:"box-card"},[e("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[e("div",{staticClass:"title"},[t._v(t._s(t.$t("BUC.taskHistory.executionInfo")))])]),e("div",{staticClass:"text item execution-info-item"},[e("div",[e("el-descriptions",{attrs:{column:t.descriptionsColumn,direction:"vertical",colon:!1,"label-style":t.labelStyle,"content-style":t.contentStyle}},[e("el-descriptions-item",{attrs:{label:t.$t("BUC.taskHistory.startTime")}},[t._v(t._s(t._f("formatEmpty")(t.formatDateTimeStr3(t.bulkHistoryDetail.createTime))))]),e("el-descriptions-item",{attrs:{label:t.$t("BUC.taskHistory.finishTime")}},[t._v(t._s(t._f("formatEmpty")(t.formatDateTimeStr3(t.bulkHistoryDetail.scheduleTime))))]),e("el-descriptions-item",{attrs:{label:t.$t("BUC.taskTemplate.reasonType")}},[t._v(t._s(t._f("formatEmpty")(t.formatDateTimeStr3(t.bulkHistoryDetail.reasonType))))])],1)],1),e("div",{staticClass:"content"},[e("table-page",{ref:"executionInfoTable",attrs:{size:"small","has-pagination":!0,columns:t.columns,outSideTableData:t.outSideTableData},scopedSlots:t._u([{key:"successItems",fn:function(a){return[e("el-link",{attrs:{underline:!1,type:"primary"},on:{click:function(e){return t.viewDetailDialog("successItems")}}},[t._v(t._s(a.data.row.successItems))])]}},{key:"failedItems",fn:function(a){return[e("el-link",{attrs:{underline:!1,type:"primary"},on:{click:function(e){return t.viewDetailDialog("failedItems")}}},[t._v(" "+t._s(a.data.row.failedItems))])]}},{key:"executionRate",fn:function(a){return[e("el-progress",{attrs:{percentage:a.data.row.executionRate,color:""+t.GlobalStyleVariables.primaryColor}})]}}])})],1)])]),"process"===t.routerType?e("div",{staticClass:"page-bottom-box"},[e("div",{staticClass:"margin-right-20"},[e("el-button",{staticClass:"cancel-button",attrs:{id:"cancel",loading:t.cancelLoading,size:"small"},on:{click:function(e){return t.handleCancelClick()}}},[t._v(t._s(t.$t("common.button.cancel"))+" ")]),e("el-button",{attrs:{id:"resume",disabled:"SUSPEND"!==t.bulkHistoryDetail.bulkStatus,size:"small",type:"primary",loading:t.resumeLoading},on:{click:t.handleResumeClick}},[t._v(" "+t._s(t.$t("BUC.taskHistory.resume"))+" ")]),e("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{disabled:"PROCESSING"!==t.bulkHistoryDetail.bulkStatus,id:"suspend",size:"small",type:"primary",loading:t.suspendLoading},on:{click:t.handleSuspendClick}},[t._v(" "+t._s(t.$t("BUC.taskHistory.suspend"))+" ")])],1)]):t._e(),e("portal-dialog",{attrs:{visible:t.dialogVisible,title:t.title,cancelText:t.$t("common.button.close"),width:"800px",height:"442px","before-close":t.handleClose,showSubmit:!1,showCancel:!1},on:{"update:visible":function(e){t.dialogVisible=e},"cancel-btn-click":t.handleClose},scopedSlots:t._u([{key:"content",fn:function(){return[e("table-page",{ref:"dialogTable",attrs:{size:"small","has-pagination":!0,columns:t.dialogColumns,pagination:t.dialogPaginationConfig,getTableData:t.dialogGetTableData,"is-search":t.refreshTableFlag},scopedSlots:t._u([{key:"processTime",fn:function(e){return[t._v(" "+t._s(t.formatDateTimeStr(e.data.row.processTime))+" ")]}}])})]},proxy:!0}])})],1)],1)},l=[],s=a("4c09"),o=a("c811"),n=a("8ac9"),r=a("7dfc"),c=a("2f62"),u=a("f538"),d=a("38de"),p={components:{TablePage:s["a"],PortalHeader:o["a"],PortalDialog:n["a"],TopNavigation:d["a"]},name:"BulkTaskHistoryView",data(){return{intervalId:"",isShowNavigation:!1,routerType:"",resumeLoading:!1,suspendLoading:!1,dialogVisible:!1,dialogOperMode:"",refreshTableFlag:!1,outSideTableData:[],searchLoading:!1,isDisableDelete:!0,bulkHistoryDetail:{},cancelLoading:!1,labelStyle:{"font-size":"14px",color:""+this.GlobalStyleVariables.lineStrongColor,"font-weight":"400",padding:"0 10px 5px 10px"},contentStyle:{"font-size":"14px",color:""+this.GlobalStyleVariables.textEmphasisColor,"font-weight":"400",padding:"0 10px 20px 10px"},dialogType:"",columns:[{label:""+this.$t("BUC.taskHistory.successItems"),prop:"successItems",align:"left",__slotName:"successItems"},{label:""+this.$t("BUC.taskHistory.failedItems"),prop:"failedItems",align:"left",__slotName:"failedItems"},{label:""+this.$t("BUC.taskHistory.processingItems"),prop:"processingItems",align:"left"},{label:""+this.$t("BUC.taskPlan.waitingItems"),prop:"waitingItems",align:"left"},{label:""+this.$t("BUC.taskHistory.executionRate"),prop:"executionRate",align:"left",__slotName:"executionRate"}],paginationConfig:{total:0,pageIndex:1,pageSize:5,layout:"total,prev, pager, next"},dialogPaginationConfig:{total:0,pageIndex:1,pageSize:5,layout:"total,prev, pager, next"},titleConfig:{title:this.$t("BUC.taskPlan.bulkTaskView")},descriptionsColumn:3,screenWidth:null}},watch:{screenWidth:{handler:function(t){this.descriptionsColumn=t<1920?3:4},immediate:!0},"bulkHistoryDetail.bulkStatus":{handler(t){"PROCESSING"===t?this.setSearchInterval():this.clearSearchInterval()},immediate:!0}},computed:{...Object(c["b"])("datadict",["moduleDict"]),bulkStatusMap(){let t=this.moduleDict.bulk["config.bulk.his.status.list"].objMap,e=this.moduleDict.bulk["config.bulk.plan.status.list"].objMap;return Object.assign(t,e)},dialogColumns(){switch(this.dialogOperMode){case"passedValidationItems":return[{label:"Number",prop:"lineNo",align:"left"},{label:"Summary",prop:"summary",align:"left"}];case"failedValidationItems":return[{label:"Number",prop:"lineNo",align:"left"},{label:"Summary",prop:"summary",align:"left"},{label:"Execution Time",prop:"processTime",align:"left",__slotName:"processTime"},{label:"Error Message",prop:"errorDesc",align:"left"},{label:"Cause",prop:"errorCause",align:"left"},{label:"Solution",prop:"errorSolution",align:"left"}];case"successItems":return[{label:"Number",prop:"lineNo",align:"left"},{label:"Summary",prop:"summary",align:"left"},{label:"Execution Time",prop:"processTime",align:"left",__slotName:"processTime"}];case"failedItems":return[{label:"Number",prop:"lineNo",align:"left"},{label:"Summary",prop:"summary",align:"left"},{label:"Execution Time",prop:"processTime",align:"left",__slotName:"processTime"},{label:"Error Message",prop:"errorDesc",align:"left"},{label:"Cause",prop:"errorCause",align:"left"},{label:"Solution",prop:"errorSolution",align:"left"}];default:return[]}},title(){switch(this.dialogOperMode){case"passedValidationItems":return"Details of Passed Initial Validation Items";case"failedValidationItems":return"Details of Failed Initial Validation Items";case"successItems":return"Details of Success Items";case"failedItems":return"Details of Failed Items";default:return""}},dialogGetTableData(){switch(this.dialogOperMode){case"passedValidationItems":{let t=u["w"],e={bulkFileID:this.bulkHistoryDetail.fileID,finishTime:this.bulkHistoryDetail.finishTime,validLevel:2,isHis:1};"process"===this.routerType&&(e.isHis="0",e.finishTime=this.bulkHistoryDetail.finishTime);let a=this.getDialogTableData(t,e);return a}case"failedValidationItems":{let t=u["w"],e={bulkFileID:this.bulkHistoryDetail.fileID,validLevel:0,isHis:1};"process"===this.routerType&&(e.isHis="0",e.finishTime=this.bulkHistoryDetail.finishTime);let a=this.getDialogTableData(t,e);return a}case"successItems":{let t=u["j"],e=this.getDialogTableData(t,{bulkPlanID:this.bulkHistoryDetail.planID,finishTime:this.bulkHistoryDetail.finishTime,isHis:"process"===this.routerType?"0":"1"});return e}case"failedItems":{let t=u["f"],e=this.getDialogTableData(t,{bulkPlanID:this.bulkHistoryDetail.planID,finishTime:this.bulkHistoryDetail.finishTime,isHis:"process"===this.routerType?"0":"1"});return e}default:return""}}},methods:{formatDateTimeStr:r["d"],formatDateTimeStr3:r["e"],reset(){this.paginationConfig.pageIndex=1,this.refreshTableFlag=!0},setSearchInterval(){this.intervalId||(this.intervalId=setInterval(()=>{this.getRouteParam(),this.refreshTableFlag=!0},5e3))},clearSearchInterval(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId="")},handleSuspendClick(){this.$confirm(`Are you sure to suspend this task plan "${this.bulkHistoryDetail.planName}" ?`,"Suspend Task Plan",{confirmButtonText:"Confirm",cancelButtonText:"Cancel",closeOnClickModal:!1}).then(()=>{this.suspendLoading=!0,Object(u["z"])({planIDs:[this.bulkHistoryDetail.planID]}).then(t=>{t.header.success&&(this.$modal.msgSuccess("Suspend successfully."),this.$router.push({path:"../../bulk/bulkTask/list"}))}).catch().finally(()=>{this.suspendLoading=!1})})},handleResumeClick(){this.$confirm(`Are you sure to resume this task plan "${this.bulkHistoryDetail.planName}" ?`,"Resume Task Plan",{confirmButtonText:"Confirm",cancelButtonText:"Cancel",closeOnClickModal:!1}).then(()=>{this.resumeLoading=!0,Object(u["x"])({planIDs:[this.bulkHistoryDetail.planID]}).then(t=>{t.header.success&&(this.$modal.msgSuccess("Resume successfully."),this.$router.push({path:"../../bulk/bulkTask/list"}))}).catch().finally(()=>{this.resumeLoading=!1})})},handleCancelClick(t){t||this.$confirm("Are you sure to cancel this plan?",{confirmButtonText:"Confirm",cancelButtonText:"Cancel",closeOnClickModal:!1,type:"warning"}).then(()=>{this.cancelLoading=!0;let t={bulkPlanID:this.bulkHistoryDetail.planID};Object(u["b"])(t).then(t=>{t.header.success&&(this.$modal.msgSuccess("Cancel successfully."),this.$router.push({path:"../../bulk/bulkTask/list"}))}).finally(()=>{this.cancelLoading=!1})})},handleClose(){this.dialogVisible=!1,this.dialogPaginationConfig={total:0,pageIndex:1,pageSize:5}},downloadBulkFile(t){"data"==t?Object(u["d"])(this.bulkHistoryDetail.fileDocID,1):Object(u["d"])(t,2)},viewDetailDialog(t){this.dialogVisible=!0,this.dialogOperMode=t,this.refreshTableFlag=!0},getRouteParam(){let t=this.$route.query.params,e=t&&JSON.parse(decodeURIComponent(t));e.isShowNavigation&&(this.isShowNavigation=!0),this.routerType=e.type,this.bulkHistoryDetail=e;let a=u["k"],i={planID:e.bulkPlanID};"details"===this.routerType&&(a=u["n"],i.finishTime=e.finishTime),a(i).then(t=>{let{bulkResultInfo:e,basicBulkPlanInfo:a}=t.data.bulkPlanInfo;this.bulkHistoryDetail={...a,...e};let i=e.numberOfExecuteSuccess,l=e.numberOfExecuteFailed,s=e.numberOfProcessingItems,o=e.numberOfTotal,n=0;n=1*o===0||1*i===0?0:Math.floor(1*i/(1*o)*100),this.outSideTableData=[{successItems:i,failedItems:l,processingItems:s,executionRate:n}]})},async initDataDict(){this.$store.dispatch("datadict/getModuleDicts",{moduleName:"bulk",dictCodes:["config.bulk.plan.status.list","config.bulk.his.status.list"],queryAPI:u["m"]})},getDialogTableData(t,e){return()=>new Promise(a=>{let{pageSize:i,pageIndex:l}=this.dialogPaginationConfig,s={limit:i,offset:(l-1)*i};t({...e,...s}).then(t=>{t.header.success&&a({header:t.header,totalRecords:t.data.numberOfTotal,list:t.data.bulkDataInfoList||[]})}).catch(()=>{a()}).finally(()=>{this.refreshTableFlag=!1})})},showStatus(t){let e=this.GlobalStyleVariables.backgroundColor,a=this.GlobalStyleVariables.fillEmphasisColor;switch(t){case"Checking":case"Initial":e=this.GlobalStyleVariables.backgroundColor,a=this.GlobalStyleVariables.fillEmphasisColor;break;case"Processing":e=this.GlobalStyleVariables.statusNoticeBackgroundColor,a=this.GlobalStyleVariables.statusNoticeColor;break;case"Suspend":case"Wait Process":case"Wait Active":e=this.GlobalStyleVariables.lineColorWarning,a=this.GlobalStyleVariables.statusColorwarning;break;case"Dis Active":case"Canceled":case"Deactive":case"Expire":e=this.GlobalStyleVariables.statusDarkBackgroundColor,a=this.GlobalStyleVariables.fillStrongColor;break;case"Failed":e=this.GlobalStyleVariables.statusErrorBackgroundColor,a=this.GlobalStyleVariables.statusErrorColor;break;case"Completed":e=this.GlobalStyleVariables.statusSuccessBackgroundColor,a=this.GlobalStyleVariables.statusSuccessColor;break;default:break}return`background-color:${e};color:${a}`}},mounted(){this.screenWidth=document.body.clientWidth,window.onresize=()=>(()=>{this.screenWidth=document.body.clientWidth})()},created(){this.initDataDict(),this.refreshTableFlag=!0},activated(){this.getRouteParam()},deactivated(){this.clearSearchInterval()},beforeDestroy(){this.clearSearchInterval()}},h=p,f=(a("2ae8"),a("2877")),m=Object(f["a"])(h,i,l,!1,null,"4fa33ce6",null);e["default"]=m.exports},"4c09":function(t,e,a){"use strict";var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"table-page-container"},[t.showAddButton?e("div",{staticClass:"add-button"},[e("el-button",{staticClass:"template-add",attrs:{icon:"el-icon-plus",type:"primary",size:"small"},on:{click:function(e){return t.showAddDialog()}}},[t._v(" Add ")]),e("el-dialog",{attrs:{title:t.createTitle,visible:t.isShowAddDialog,width:"448px","before-close":t.closeAddDialog},on:{"update:visible":function(e){t.isShowAddDialog=e}}},[t._t("addDialogContext"),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:t.closeAddDialog}},[t._v("cancel")]),e("el-button",{attrs:{type:"primary"},on:{click:t.addSubmit}},[t._v("submit")])],1)],2)],1):t._e(),e("div",{class:{"table-region":!0,"no-data-fixed":!t.tableData.length},staticStyle:{height:"100%"}},[e("el-table",t._g(t._b({directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],key:t.tableKey,ref:"tableRef",class:{"mini-table":t.isSingleCheck},attrs:{"empty-text":"No records found.","header-cell-style":t.headerStyle,data:t.tableData,size:t.size,border:t.border,"row-key":t.idKey,"max-height":t.maxHeight}},"el-table",t.$attrs,!1),t.listeners),[t.isCheck?e("el-table-column",{attrs:{align:"center",width:"30",type:"selection","reserve-selection":t.isCheckMemory,selectable:t.checkSelectable}}):t._e(),t._l(t.columns,(function(a,i){return[e("el-table-column",t._b({key:i,attrs:{sortable:t.sortFun(a),width:a.width||"","show-overflow-tooltip":[!0,!1].includes(a.showOverflowTooltip)?a.showOverflowTooltip:t.showOverflowTooltip,formatter:a.formatter||t.formatterHandle},scopedSlots:t._u([a.__slotName?{key:"default",fn:function(e){return[t._t(a.__slotName,null,{data:e})]}}:null],null,!0)},"el-table-column",a,!1))]})),e("template",{slot:"empty"},[t._t("emptya")],2)],2)],1),t.hasPagination&&t.pagination.total>0?e("div",{staticClass:"pagination-region"},[e("portal-pagination",{attrs:{id:"tablePagination",total:t.pagination.total,currentPage:t.pagination.pageIndex,pageSize:t.pagination.pageSize,pageSizes:t.pageSizes,layout:t.pagination.layout},on:{"update:currentPage":function(e){return t.$set(t.pagination,"pageIndex",e)},"update:current-page":function(e){return t.$set(t.pagination,"pageIndex",e)},"update:pageSize":function(e){return t.$set(t.pagination,"pageSize",e)},"update:page-size":function(e){return t.$set(t.pagination,"pageSize",e)},pagination:t.handleSizeChange}})],1):t._e()])},l=[],s=a("4d26"),o={name:"TablePage",components:{PortalPagination:s["a"]},props:{showOverflowTooltip:{type:Boolean,default:!0},createTitle:{type:String},showAddButton:{type:Boolean,default:!1},submitNewDataFun:{type:Function,default:()=>{}},checkSelectable:{type:Function,default:()=>!0},columns:{type:Array,default:()=>[]},size:{type:String,default:"medium"},isCheck:{type:Boolean,default:!1},isCheckMemory:{type:Boolean,default:!1},isSingleCheck:{type:Boolean,default:!1},idKey:{type:String,default:"id"},sortArr:{type:Array,default:()=>[]},pageParam:{type:Object,default:()=>({pageOffset:"pageNo",pageSize:"pageSize"})},hasPagination:{type:Boolean,default:!0},pagination:{type:Object,default:()=>({total:0,pageIndex:1})},pageSizes:{type:Array,default(){return[10,20,50,100]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},getTableData:{type:Function,default:null},outSideTableData:{type:Array,default:()=>[]},isSearch:{type:Boolean,default:!1},initializingLoading:{type:Boolean,default:!0},border:{type:Boolean,default:!0},initChecks:{type:Array,default:()=>[]},maxHeight:{type:[Number,String]}},data(){return{isShowAddDialog:!1,order:{sortName:"",sortOrder:""},tableData:[],tableKey:(new Date).getTime(),loading:!1,headerStyle:{"background-color":""+this.GlobalStyleVariables.fillLightColor,"font-size":"14px","font-family":"HuaweiSans-Medium","font-weight":500,color:""+this.GlobalStyleVariables.textEmphasisColor},singleSelectData:[]}},computed:{listeners:function(){let t=this;return Object.assign({},this.$listeners,{"selection-change":function(e){t.isSingleCheck||t.$emit("selection-change",e)},select:function(e,a){const i=t.$refs.tableRef;t.isSingleCheck&&e.includes(a)?(i.clearSelection(),i.toggleRowSelection(a,!0),t.singleSelectData=a):t.singleSelectData=[],t.$emit("single-selection-change",t.singleSelectData)},"sort-change":function(e){switch(t.order.sortName=e.prop,e.order){case"ascending":t.order.sortOrder="asc";break;case"descending":t.order.sortOrder="desc";break;default:t.order.sortOrder=""}t.$emit("sortChange",t.order)}})}},watch:{isSearch(){this.isSearch&&(this.$refs.tableRef.clearSelection(),this.queryData())},outSideTableData:{handler(t){t&&(this.tableData=t,this.tableKey=(new Date).getTime(),this.pagination.pageIndex=1,this.pagination.total=0)},immediate:!0,deep:!0},initChecks:{handler(t){if(this.$refs.tableRef&&this.$refs.tableRef.clearSelection(),t&&t.length)for(const e in this.tableData)t&&t.forEach(t=>{t[this.idKey]===this.tableData[e][this.idKey]&&this.$refs.tableRef.toggleRowSelection(this.tableData[e],!0)})},immediate:!0,deep:!0}},created(){this.initializingLoading?this.queryData().then(()=>{this.$refs.tableRef.clearSelection(),this.initChecks&&this.initChecks.length&&this.$nextTick(()=>{this.initChecks.forEach(t=>{for(const e in this.tableData)t[this.idKey]===this.tableData[e][this.idKey]&&this.$refs.tableRef.toggleRowSelection(this.tableData[e],!0)})})}):(this.pagination.pageIndex=1,this.pagination.total=0)},mounted(){},methods:{addSubmit(){const t=this,e=function(){t.closeAddDialog()};this.submitNewDataFun(e)},closeAddDialog(){this.isShowAddDialog=!1},showAddDialog(){this.isShowAddDialog=!0},handleSizeChange(t){this.pagination.pageIndex=t.pageIndex,this.pagination.pageSize=t.pageSize,this.queryData()},sortFun(t){const e=this.sortArr&&this.sortArr.indexOf(t.prop)>-1;return!!e&&(!!t["sort-method"]||"custom")},async queryData(t){if(this.getTableData){this.loading=!0,this.pagination.pageIndex=t?1:this.pagination.pageIndex;let a=this.hasPagination?Object.assign({},{[this.pageParam.pageOffset]:this.pagination.pageIndex,[this.pageParam.pageSize]:this.pagination.pageSize}):{};this.order.sortName&&this.order.sortOrder&&(a.sortName=this.order.sortName,a.sortOrder=this.order.sortOrder);let i=null;try{this.$refs.tableRef&&this.$refs.tableRef.clearSort(),i=await this.getTableData(a)}catch(e){this.loading=!1}finally{this.loading=!1,i&&i.header.success?(this.pagination.total=i.totalRecords||0,this.tableData=Array.from(i.list)||[],this.$emit("fetchData",i)):(this.tableData=[],this.pagination.pageIndex=1,this.pagination.total=0)}}},formatterHandle(t,e){const a=e.property;let i=t,l="",s=a&&a.split(".");return s.forEach(t=>{"object"===typeof i[t]?i=i[t]:l=i[t]}),""!==l&&null!==l&&void 0!==l?l:"-"}}},n=o,r=(a("563f"),a("be9f"),a("2877")),c=Object(r["a"])(n,i,l,!1,null,"6710ceed",null);e["a"]=c.exports},"4d26":function(t,e,a){"use strict";var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex flex-align flex-jus pagination-container",class:{hidden:t.hidden}},[e("el-pagination",t._b({attrs:{id:"pagination","page-size":t.tempPageSize,"page-sizes":t.pageSizes,total:t.total,"pager-count":5,layout:t.layout,"current-page":t.tempCurrentPage},on:{"current-change":t.handleCurrentChange}},"el-pagination",t.$attrs,!1),[[e("span",{staticClass:"pagination__total pagination___text"},[t._v(t._s("Total:"+t.total))]),t.showPageSize?[e("el-select",{staticStyle:{width:"76px","margin-left":"16px","margin-right":"10px"},attrs:{size:"mini"},model:{value:t.tempPageSize,callback:function(e){t.tempPageSize=e},expression:"tempPageSize"}},t._l(t.pageSizes,(function(t){return e("el-option",{key:t,attrs:{label:""+t,value:t}})})),1),e("span",{staticClass:"show-title"},[t._v("items/page")])]:t._e()]],2),-1!==t.layout.indexOf("jumper")?e("div",{staticClass:"go-to-buttom"},[e("button",{on:{click:t.goToHandle}},[t._v("GO")])]):t._e()],1)},l=[],s={name:"PortalPagination",props:{total:{required:!0,type:Number},currentPage:{type:Number,default:1},pageSize:{type:Number,default:10},pageSizes:{type:Array,default(){return[10,20,50,100]}},layout:{type:String,default:"slot, prev, pager, next, jumper"},showPageSize:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},data(){return{}},computed:{tempCurrentPage:{get(){return this.currentPage},set(t){this.$emit("update:currentPage",t)}},tempPageSize:{get(){return this.pageSize},set(t){this.$emit("update:pageSize",t),this.handleSizeChange(t)}}},methods:{handleSizeChange(t){this.tempCurrentPage=1,this.$emit("pagination",{pageIndex:1,pageSize:t})},handleCurrentChange(t){this.tempCurrentPage=t,this.$emit("pagination",{pageIndex:t,pageSize:this.pageSize})},goToHandle(){}}},o=s,n=(a("fe42"),a("2877")),r=Object(n["a"])(o,i,l,!1,null,"03a8757f",null);e["a"]=r.exports},"563f":function(t,e,a){"use strict";a("a1d6")},"64e7":function(t,e,a){"use strict";var i=a("0360"),l=a("5c96");e["a"]={downLoadFile:function(t,e,a,s){let o=new XMLHttpRequest;o.open(a||"POST",t,!0),o.setRequestHeader("Content-type","application/json"),s&&o.setRequestHeader("X-XSRF-TOKEN",i["default"].get("O-XSRF-TOKEN")),o.setRequestHeader("o-token",i["default"].get("o-token")),o.setRequestHeader("Cache-Control","no-store, max-age=0, must-revalidate"),o.responseType="blob",o.onload=function(){if(200===this.status){let t=this.response,e=o.getResponseHeader("content-disposition").split(";")[1].split("filename=")[1],a=decodeURIComponent(e),i=URL.createObjectURL(t),l=document.createElement("a");l.href=i,l.download=a,l.click()}else l["MessageBox"].alert("Download failed.","Error",{type:"error",confirmButtonText:"Confirm"})},o.send(JSON.stringify(e))}}},"6a65":function(t,e,a){},"78f8":function(t,e,a){},"8ac9":function(t,e,a){"use strict";var i=function(){var t=this,e=t._self._c;return e("el-dialog",t._g(t._b({class:["portal-dialog",t.customFooter?"custom-footer":"",t.subtitle?"has-subtitle":""],attrs:{visible:t.dialogVisible,title:t.title,width:t.width,"close-on-click-modal":t.closeOnClickModal,"show-close":t.showClose,"before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e},opened:t.openedDialog,closed:t.closedDialog}},"el-dialog",t.$attrs,!1),t.$listeners),[t.subtitle?e("span",{staticClass:"subtitle"},[t._v(t._s(t.subtitle))]):t._e(),t._t("title"),t._t("content"),t.customFooter?t._t("footer"):e("div",{attrs:{slot:"footer"},slot:"footer"},[t.showCancel?e("button",{class:["cancel-button",t.cancelBtnDisable?"disabled":""],on:{click:t.handleCancelClick}},[t._v(" "+t._s(t.cancelText)+" ")]):t._e(),t.showSubmit?e("el-button",{attrs:{type:"primary",disabled:t.confirmBtnDisable,loading:t.submitLoading,size:"small"},on:{click:t.handleConfirmClick}},[t._v(t._s(t.confirmText))]):t._e()],1)],2)},l=[],s={name:"PortalDialog",props:{visible:{type:Boolean,default:!1},title:{type:String,default:""},width:{type:String,default:"448px"},customFooter:{type:Boolean,default:!1},cancelText:{type:String,default:"Cancel"},confirmText:{type:String,default:"Confirm"},closeOnClickModal:{type:Boolean,default:!1},showClose:{type:Boolean,default:!0},cancelBtnDisable:{type:Boolean,default:!1},confirmBtnDisable:{type:Boolean,default:!1},showSubmit:{type:Boolean,default:!0},subtitle:{type:String,default:""},showCancel:{type:Boolean,default:!0},submitLoading:{type:Boolean,default:!1}},data(){return{dialogVisible:!1}},watch:{visible:{handler(t){this.dialogVisible=t},immediate:!0},dialogVisible:{handler(t){this.$emit("show-dialog",t),this.$emit("update:visible",t)}}},methods:{handleClose(){this.dialogVisible=!1,this.$emit("handle-close")},handleCancelClick(){this.$emit("cancel-btn-click")},handleConfirmClick(){this.$emit("confirm-btn-click")},openedDialog(){this.$emit("opened-dialog")},closedDialog(){this.$emit("closed-dialog")}}},o=s,n=(a("df6c"),a("2877")),r=Object(n["a"])(o,i,l,!1,null,"081459b7",null);e["a"]=r.exports},9488:function(t,e,a){"use strict";a("0e19")},a1d6:function(t,e,a){},be9f:function(t,e,a){"use strict";a("3b8a")},c5ea:function(t,e,a){},c811:function(t,e,a){"use strict";var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"page-header",class:{"no-bottom-border":!t.showBottomLine,"no-desc-height":!t.projectObj.desc}},[e("div",{staticClass:"header-left"},[t.projectObj.title?e("div",{staticClass:"page-title"},[t._v(" "+t._s(t.projectObj.title)+" "),t._t("title-suffix")],2):t._e(),t.projectObj.desc?e("div",{staticClass:"page-desc"},[t._v(" "+t._s(t.projectObj.desc)+" ")]):t._e()]),e("div",{staticClass:"header-right"},[t._t("header-right")],2)])},l=[],s={name:"PortalHeader",components:{},props:{projectObj:{type:Object,default(){return{}}},showBottomLine:{type:Boolean,default:!0}}},o=s,n=(a("9488"),a("2877")),r=Object(n["a"])(o,i,l,!1,null,"73566ca8",null);e["a"]=r.exports},df6c:function(t,e,a){"use strict";a("c5ea")},f538:function(t,e,a){"use strict";a.d(e,"m",(function(){return c})),a.d(e,"p",(function(){return u})),a.d(e,"o",(function(){return d})),a.d(e,"u",(function(){return p})),a.d(e,"v",(function(){return h})),a.d(e,"a",(function(){return f})),a.d(e,"b",(function(){return m})),a.d(e,"z",(function(){return b})),a.d(e,"x",(function(){return g})),a.d(e,"f",(function(){return y})),a.d(e,"j",(function(){return k})),a.d(e,"w",(function(){return v})),a.d(e,"k",(function(){return S})),a.d(e,"n",(function(){return C})),a.d(e,"l",(function(){return D})),a.d(e,"q",(function(){return _})),a.d(e,"d",(function(){return T})),a.d(e,"e",(function(){return w})),a.d(e,"y",(function(){return O})),a.d(e,"c",(function(){return I})),a.d(e,"h",(function(){return x})),a.d(e,"g",(function(){return H})),a.d(e,"i",(function(){return $})),a.d(e,"r",(function(){return B})),a.d(e,"t",(function(){return j})),a.d(e,"s",(function(){return P}));var i=a("0bbd"),l=a("5f9a"),s=a("64e7");const o="/fintech/v1/bulk",n=o+"/task/template",r=o+"/task/plan";function c({dictCodes:t}){return Object(i["a"])({url:o+"/data-dict/list",method:"post",data:{dictCodes:t}})}function u(t){return Object(i["a"])({url:Object(l["a"])(o+"/type/list",t),method:"get"})}function d(t){return Object(i["a"])({url:Object(l["a"])(n+"/list",t),method:"get"})}function p(t){return Object(i["a"])({url:Object(l["a"])(r+"/list",t),method:"get"})}function h(t){return Object(i["a"])({url:Object(l["a"])("/fintech/v1/bulk/tps/timeslot",t),method:"get"})}function f(t){return Object(i["a"])({url:"/fintech/v1/bulk/task/plan/add",method:"POST",data:t})}function m(t){return Object(i["a"])({url:"/fintech/v1/bulk/task/plan/cancel",method:"POST",data:t})}function b(t){return Object(i["a"])({url:"/fintech/v1/bulk/task/plan/suspend",method:"POST",data:t})}function g(t){return Object(i["a"])({url:"/fintech/v1/bulk/task/plan/resume",method:"POST",data:t})}function y(t){return Object(i["a"])({url:"/fintech/v1/bulk/task/plan/failedRecords",params:t})}function k(t){return Object(i["a"])({url:"/fintech/v1/bulk/task/plan/successRecords",params:t})}function v(t){return Object(i["a"])({url:"/fintech/v1/bulk/task/plan/validRecords",params:t})}function S(t){return Object(i["a"])({url:Object(l["a"])("/fintech/v1/bulk/task/plan/detail",t),method:"get"})}function C(t){return Object(i["a"])({url:Object(l["a"])("/fintech/v1/bulk/task/plan/hisDetail",t),method:"get"})}function D(t){return Object(i["a"])({url:r+"/prevalidation",method:"post",contentType:"application/x-www-form-urlencoded",data:t})}function _(t){return Object(i["a"])({url:r+"/prevalidation/"+t,method:"get"})}function T(t,e){s["a"].downLoadFile("orgportal"+r+`/download/bulkFile?fileID=${t}&type=${e}`,{},"get")}function w(t){return Object(i["a"])({url:"/fintech/v1/queryCustomerList",method:"post",data:t,ignoreError:!0})}function O(t){return Object(i["a"])({url:"/fintech/v1/queryCustomerIdentity/msisdn",method:"post",data:t})}function I(t){return Object(i["a"])({url:"/fintech/v1/identity/verify/"+t,method:"post"})}function x(t){return Object(i["a"])({url:Object(l["a"])("/fintech/v1/organization/list",t),method:"get"})}function H(t){return Object(i["a"])({url:Object(l["a"])("/fintech/v1/spOperator/list",t),method:"get"})}function $(t){return Object(i["a"])({url:Object(l["a"])("/fintech/v1/bulk/type/service/mapping",t),method:"get"})}function B(t){return Object(i["a"])({url:"/fintech/v1/dcc/queryProduct",method:"post",data:t})}function j(t){return Object(i["a"])({url:"/fintech/v1/dcc/queryService",method:"post",data:t})}function P(t){return Object(i["a"])({url:"/fintech/v1/dcc/queryReasonType",method:"post",data:t})}},fe42:function(t,e,a){"use strict";a("0934")}}]);
//# sourceMappingURL=chunk-1bd01f46.js.map